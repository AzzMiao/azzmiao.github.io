(self["webpackChunkpets_vue"]=self["webpackChunkpets_vue"]||[]).push([[133],{7066:function(e,t,n){"use strict";var r=n(9670);e.exports=function(){var e=r(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.unicodeSets&&(t+="v"),e.sticky&&(t+="y"),t}},2087:function(e,t,n){var r=n(7854),o=n(9781),i=n(7045),s=n(7066),a=n(7293),l=r.RegExp,c=l.prototype,u=o&&a((function(){var e=!0;try{l(".","d")}catch(u){e=!1}var t={},n="",r=e?"dgimsy":"gimsy",o=function(e,r){Object.defineProperty(t,e,{get:function(){return n+=r,!0}})},i={dotAll:"s",global:"g",ignoreCase:"i",multiline:"m",sticky:"y"};for(var s in e&&(i.hasIndices="d"),i)o(s,i[s]);var a=Object.getOwnPropertyDescriptor(c,"flags").get.call(t);return a!==r||n!==r}));u&&i(c,"flags",{configurable:!0,get:s})},3266:function(e,t,n){"use strict";n.d(t,{V6:function(){return Fx},d8:function(){return a_},DY:function(){return Vx},dn:function(){return Bx},QW:function(){return hx},ue:function(){return dx},X6:function(){return Px},bo:function(){return F_},Ee:function(){return UC},Ai:function(){return W_},Tx:function(){return c_},HC:function(){return Lx},GS:function(){return qx},nv:function(){return _x},Re:function(){return d_},iA:function(){return o_},pj:function(){return cd},xD:function(){return ld},SC:function(){return ud},xv:function(){return xl},PH:function(){return L_},d9:function(){return S_},v6:function(){return l_}});n(7658),n(2087),n(541);var r=n(6369);function o(e){this.content=e}o.prototype={constructor:o,find:function(e){for(var t=0;t<this.content.length;t+=2)if(this.content[t]===e)return t;return-1},get:function(e){var t=this.find(e);return-1==t?void 0:this.content[t+1]},update:function(e,t,n){var r=n&&n!=e?this.remove(n):this,i=r.find(e),s=r.content.slice();return-1==i?s.push(n||e,t):(s[i+1]=t,n&&(s[i]=n)),new o(s)},remove:function(e){var t=this.find(e);if(-1==t)return this;var n=this.content.slice();return n.splice(t,2),new o(n)},addToStart:function(e,t){return new o([e,t].concat(this.remove(e).content))},addToEnd:function(e,t){var n=this.remove(e).content.slice();return n.push(e,t),new o(n)},addBefore:function(e,t,n){var r=this.remove(t),i=r.content.slice(),s=r.find(e);return i.splice(-1==s?i.length:s,0,t,n),new o(i)},forEach:function(e){for(var t=0;t<this.content.length;t+=2)e(this.content[t],this.content[t+1])},prepend:function(e){return e=o.from(e),e.size?new o(e.content.concat(this.subtract(e).content)):this},append:function(e){return e=o.from(e),e.size?new o(this.subtract(e).content.concat(e.content)):this},subtract:function(e){var t=this;e=o.from(e);for(var n=0;n<e.content.length;n+=2)t=t.remove(e.content[n]);return t},toObject:function(){var e={};return this.forEach((function(t,n){e[t]=n})),e},get size(){return this.content.length>>1}},o.from=function(e){if(e instanceof o)return e;var t=[];if(e)for(var n in e)t.push(n,e[n]);return new o(t)};var i=o;function s(e,t,n){for(let r=0;;r++){if(r==e.childCount||r==t.childCount)return e.childCount==t.childCount?null:n;let o=e.child(r),i=t.child(r);if(o!=i){if(!o.sameMarkup(i))return n;if(o.isText&&o.text!=i.text){for(let e=0;o.text[e]==i.text[e];e++)n++;return n}if(o.content.size||i.content.size){let e=s(o.content,i.content,n+1);if(null!=e)return e}n+=o.nodeSize}else n+=o.nodeSize}}function a(e,t,n,r){for(let o=e.childCount,i=t.childCount;;){if(0==o||0==i)return o==i?null:{a:n,b:r};let s=e.child(--o),l=t.child(--i),c=s.nodeSize;if(s!=l){if(!s.sameMarkup(l))return{a:n,b:r};if(s.isText&&s.text!=l.text){let e=0,t=Math.min(s.text.length,l.text.length);while(e<t&&s.text[s.text.length-e-1]==l.text[l.text.length-e-1])e++,n--,r--;return{a:n,b:r}}if(s.content.size||l.content.size){let e=a(s.content,l.content,n-1,r-1);if(e)return e}n-=c,r-=c}else n-=c,r-=c}}class l{constructor(e,t){if(this.content=e,this.size=t||0,null==t)for(let n=0;n<e.length;n++)this.size+=e[n].nodeSize}nodesBetween(e,t,n,r=0,o){for(let i=0,s=0;s<t;i++){let a=this.content[i],l=s+a.nodeSize;if(l>e&&!1!==n(a,r+s,o||null,i)&&a.content.size){let o=s+1;a.nodesBetween(Math.max(0,e-o),Math.min(a.content.size,t-o),n,r+o)}s=l}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,n,r){let o="",i=!0;return this.nodesBetween(e,t,((s,a)=>{s.isText?(o+=s.text.slice(Math.max(e,a)-a,t-a),i=!n):s.isLeaf?(r?o+="function"===typeof r?r(s):r:s.type.spec.leafText&&(o+=s.type.spec.leafText(s)),i=!n):!i&&s.isBlock&&(o+=n,i=!0)}),0),o}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,n=e.firstChild,r=this.content.slice(),o=0;for(t.isText&&t.sameMarkup(n)&&(r[r.length-1]=t.withText(t.text+n.text),o=1);o<e.content.length;o++)r.push(e.content[o]);return new l(r,this.size+e.size)}cut(e,t=this.size){if(0==e&&t==this.size)return this;let n=[],r=0;if(t>e)for(let o=0,i=0;i<t;o++){let s=this.content[o],a=i+s.nodeSize;a>e&&((i<e||a>t)&&(s=s.isText?s.cut(Math.max(0,e-i),Math.min(s.text.length,t-i)):s.cut(Math.max(0,e-i-1),Math.min(s.content.size,t-i-1))),n.push(s),r+=s.nodeSize),i=a}return new l(n,r)}cutByIndex(e,t){return e==t?l.empty:0==e&&t==this.content.length?this:new l(this.content.slice(e,t))}replaceChild(e,t){let n=this.content[e];if(n==t)return this;let r=this.content.slice(),o=this.size+t.nodeSize-n.nodeSize;return r[e]=t,new l(r,o)}addToStart(e){return new l([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new l(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,n=0;t<this.content.length;t++){let r=this.content[t];e(r,n,t),n+=r.nodeSize}}findDiffStart(e,t=0){return s(this,e,t)}findDiffEnd(e,t=this.size,n=e.size){return a(this,e,t,n)}findIndex(e,t=-1){if(0==e)return u(0,e);if(e==this.size)return u(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let n=0,r=0;;n++){let o=this.child(n),i=r+o.nodeSize;if(i>=e)return i==e||t>0?u(n+1,i):u(n,r);r=i}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map((e=>e.toJSON())):null}static fromJSON(e,t){if(!t)return l.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new l(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return l.empty;let t,n=0;for(let r=0;r<e.length;r++){let o=e[r];n+=o.nodeSize,r&&o.isText&&e[r-1].sameMarkup(o)?(t||(t=e.slice(0,r)),t[t.length-1]=o.withText(t[t.length-1].text+o.text)):t&&t.push(o)}return new l(t||e,n)}static from(e){if(!e)return l.empty;if(e instanceof l)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new l([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}l.empty=new l([],0);const c={index:0,offset:0};function u(e,t){return c.index=e,c.offset=t,c}function d(e,t){if(e===t)return!0;if(!e||"object"!=typeof e||!t||"object"!=typeof t)return!1;let n=Array.isArray(e);if(Array.isArray(t)!=n)return!1;if(n){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!d(e[n],t[n]))return!1}else{for(let n in e)if(!(n in t)||!d(e[n],t[n]))return!1;for(let n in t)if(!(n in e))return!1}return!0}class h{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,n=!1;for(let r=0;r<e.length;r++){let o=e[r];if(this.eq(o))return e;if(this.type.excludes(o.type))t||(t=e.slice(0,r));else{if(o.type.excludes(this.type))return e;!n&&o.type.rank>this.type.rank&&(t||(t=e.slice(0,r)),t.push(this),n=!0),t&&t.push(o)}}return t||(t=e.slice()),n||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&d(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let n=e.marks[t.type];if(!n)throw new RangeError(`There is no mark type ${t.type} in this schema`);return n.create(t.attrs)}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].eq(t[n]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&0==e.length)return h.none;if(e instanceof h)return[e];let t=e.slice();return t.sort(((e,t)=>e.type.rank-t.type.rank)),t}}h.none=[];class p extends Error{}class f{constructor(e,t,n){this.content=e,this.openStart=t,this.openEnd=n}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let n=g(this.content,e+this.openStart,t);return n&&new f(n,this.openStart,this.openEnd)}removeBetween(e,t){return new f(m(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return f.empty;let n=t.openStart||0,r=t.openEnd||0;if("number"!=typeof n||"number"!=typeof r)throw new RangeError("Invalid input for Slice.fromJSON");return new f(l.fromJSON(e,t.content),n,r)}static maxOpen(e,t=!0){let n=0,r=0;for(let o=e.firstChild;o&&!o.isLeaf&&(t||!o.type.spec.isolating);o=o.firstChild)n++;for(let o=e.lastChild;o&&!o.isLeaf&&(t||!o.type.spec.isolating);o=o.lastChild)r++;return new f(e,n,r)}}function m(e,t,n){let{index:r,offset:o}=e.findIndex(t),i=e.maybeChild(r),{index:s,offset:a}=e.findIndex(n);if(o==t||i.isText){if(a!=n&&!e.child(s).isText)throw new RangeError("Removing non-flat range");return e.cut(0,t).append(e.cut(n))}if(r!=s)throw new RangeError("Removing non-flat range");return e.replaceChild(r,i.copy(m(i.content,t-o-1,n-o-1)))}function g(e,t,n,r){let{index:o,offset:i}=e.findIndex(t),s=e.maybeChild(o);if(i==t||s.isText)return r&&!r.canReplace(o,o,n)?null:e.cut(0,t).append(n).append(e.cut(t));let a=g(s.content,t-i-1,n);return a&&e.replaceChild(o,s.copy(a))}function v(e,t,n){if(n.openStart>e.depth)throw new p("Inserted content deeper than insertion position");if(e.depth-n.openStart!=t.depth-n.openEnd)throw new p("Inconsistent open depths");return y(e,t,n,0)}function y(e,t,n,r){let o=e.index(r),i=e.node(r);if(o==t.index(r)&&r<e.depth-n.openStart){let s=y(e,t,n,r+1);return i.copy(i.content.replaceChild(o,s))}if(n.content.size){if(n.openStart||n.openEnd||e.depth!=r||t.depth!=r){let{start:o,end:s}=O(n,e);return S(i,C(e,o,s,t,r))}{let r=e.parent,o=r.content;return S(r,o.cut(0,e.parentOffset).append(n.content).append(o.cut(t.parentOffset)))}}return S(i,_(e,t,r))}function b(e,t){if(!t.type.compatibleContent(e.type))throw new p("Cannot join "+t.type.name+" onto "+e.type.name)}function w(e,t,n){let r=e.node(n);return b(r,t.node(n)),r}function k(e,t){let n=t.length-1;n>=0&&e.isText&&e.sameMarkup(t[n])?t[n]=e.withText(t[n].text+e.text):t.push(e)}function x(e,t,n,r){let o=(t||e).node(n),i=0,s=t?t.index(n):o.childCount;e&&(i=e.index(n),e.depth>n?i++:e.textOffset&&(k(e.nodeAfter,r),i++));for(let a=i;a<s;a++)k(o.child(a),r);t&&t.depth==n&&t.textOffset&&k(t.nodeBefore,r)}function S(e,t){return e.type.checkContent(t),e.copy(t)}function C(e,t,n,r,o){let i=e.depth>o&&w(e,t,o+1),s=r.depth>o&&w(n,r,o+1),a=[];return x(null,e,o,a),i&&s&&t.index(o)==n.index(o)?(b(i,s),k(S(i,C(e,t,n,r,o+1)),a)):(i&&k(S(i,_(e,t,o+1)),a),x(t,n,o,a),s&&k(S(s,_(n,r,o+1)),a)),x(r,null,o,a),new l(a)}function _(e,t,n){let r=[];if(x(null,e,n,r),e.depth>n){let o=w(e,t,n+1);k(S(o,_(e,t,n+1)),r)}return x(t,null,n,r),new l(r)}function O(e,t){let n=t.depth-e.openStart,r=t.node(n),o=r.copy(e.content);for(let i=n-1;i>=0;i--)o=t.node(i).copy(l.from(o));return{start:o.resolveNoCache(e.openStart+n),end:o.resolveNoCache(o.content.size-e.openEnd-n)}}f.empty=new f(l.empty,0,0);class M{constructor(e,t,n){this.pos=e,this.path=t,this.parentOffset=n,this.depth=t.length/3-1}resolveDepth(e){return null==e?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[3*this.resolveDepth(e)]}index(e){return this.path[3*this.resolveDepth(e)+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e!=this.depth||this.textOffset?1:0)}start(e){return e=this.resolveDepth(e),0==e?0:this.path[3*e-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[3*e-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[3*e-1]+this.path[3*e].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;let n=this.pos-this.path[this.path.length-1],r=e.child(t);return n?e.child(t).cut(n):r}get nodeBefore(){let e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):0==e?null:this.parent.child(e-1)}posAtIndex(e,t){t=this.resolveDepth(t);let n=this.path[3*t],r=0==t?0:this.path[3*t-1]+1;for(let o=0;o<e;o++)r+=n.child(o).nodeSize;return r}marks(){let e=this.parent,t=this.index();if(0==e.content.size)return h.none;if(this.textOffset)return e.child(t).marks;let n=e.maybeChild(t-1),r=e.maybeChild(t);if(!n){let e=n;n=r,r=e}let o=n.marks;for(var i=0;i<o.length;i++)!1!==o[i].type.spec.inclusive||r&&o[i].isInSet(r.marks)||(o=o[i--].removeFromSet(o));return o}marksAcross(e){let t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;let n=t.marks,r=e.parent.maybeChild(e.index());for(var o=0;o<n.length;o++)!1!==n[o].type.spec.inclusive||r&&n[o].isInSet(r.marks)||(n=n[o--].removeFromSet(n));return n}sharedDepth(e){for(let t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0}blockRange(e=this,t){if(e.pos<this.pos)return e.blockRange(this);for(let n=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);n>=0;n--)if(e.pos<=this.end(n)&&(!t||t(this.node(n))))return new N(this,e,n);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset}static resolve(e,t){if(!(t>=0&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");let n=[],r=0,o=t;for(let i=e;;){let{index:e,offset:t}=i.content.findIndex(o),s=o-t;if(n.push(i,e,r+t),!s)break;if(i=i.child(e),i.isText)break;o=s-1,r+=t+1}return new M(t,n,o)}static resolveCached(e,t){for(let r=0;r<E.length;r++){let n=E[r];if(n.pos==t&&n.doc==e)return n}let n=E[T]=M.resolve(e,t);return T=(T+1)%A,n}}let E=[],T=0,A=12;class N{constructor(e,t,n){this.$from=e,this.$to=t,this.depth=n}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const R=Object.create(null);class D{constructor(e,t,n,r=h.none){this.type=e,this.attrs=t,this.marks=r,this.content=n||l.empty}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,t,n,r=0){this.content.nodesBetween(e,t,n,r,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,t,n,r){return this.content.textBetween(e,t,n,r)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,t,n){return this.type==e&&d(this.attrs,t||e.defaultAttrs||R)&&h.sameSet(this.marks,n||h.none)}copy(e=null){return e==this.content?this:new D(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new D(this.type,this.attrs,this.content,e)}cut(e,t=this.content.size){return 0==e&&t==this.content.size?this:this.copy(this.content.cut(e,t))}slice(e,t=this.content.size,n=!1){if(e==t)return f.empty;let r=this.resolve(e),o=this.resolve(t),i=n?0:r.sharedDepth(t),s=r.start(i),a=r.node(i),l=a.content.cut(r.pos-s,o.pos-s);return new f(l,r.depth-i,o.depth-i)}replace(e,t,n){return v(this.resolve(e),this.resolve(t),n)}nodeAt(e){for(let t=this;;){let{index:n,offset:r}=t.content.findIndex(e);if(t=t.maybeChild(n),!t)return null;if(r==e||t.isText)return t;e-=r+1}}childAfter(e){let{index:t,offset:n}=this.content.findIndex(e);return{node:this.content.maybeChild(t),index:t,offset:n}}childBefore(e){if(0==e)return{node:null,index:0,offset:0};let{index:t,offset:n}=this.content.findIndex(e);if(n<e)return{node:this.content.child(t),index:t,offset:n};let r=this.content.child(t-1);return{node:r,index:t-1,offset:n-r.nodeSize}}resolve(e){return M.resolveCached(this,e)}resolveNoCache(e){return M.resolve(this,e)}rangeHasMark(e,t,n){let r=!1;return t>e&&this.nodesBetween(e,t,(e=>(n.isInSet(e.marks)&&(r=!0),!r))),r}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),z(this.marks,e)}contentMatchAt(e){let t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t}canReplace(e,t,n=l.empty,r=0,o=n.childCount){let i=this.contentMatchAt(e).matchFragment(n,r,o),s=i&&i.matchFragment(this.content,t);if(!s||!s.validEnd)return!1;for(let a=r;a<o;a++)if(!this.type.allowsMarks(n.child(a).marks))return!1;return!0}canReplaceWith(e,t,n,r){if(r&&!this.type.allowsMarks(r))return!1;let o=this.contentMatchAt(e).matchType(n),i=o&&o.matchFragment(this.content,t);return!!i&&i.validEnd}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content);let e=h.none;for(let t=0;t<this.marks.length;t++)e=this.marks[t].addToSet(e);if(!h.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map((e=>e.type.name))}`);this.content.forEach((e=>e.check()))}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map((e=>e.toJSON()))),e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");let n=null;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");n=t.marks.map(e.markFromJSON)}if("text"==t.type){if("string"!=typeof t.text)throw new RangeError("Invalid text node in JSON");return e.text(t.text,n)}let r=l.fromJSON(e,t.content);return e.nodeType(t.type).create(t.attrs,r,n)}}D.prototype.text=void 0;class I extends D{constructor(e,t,n,r){if(super(e,t,null,r),!n)throw new RangeError("Empty text nodes are not allowed");this.text=n}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):z(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,t){return this.text.slice(e,t)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new I(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new I(this.type,this.attrs,e,this.marks)}cut(e=0,t=this.text.length){return 0==e&&t==this.text.length?this:this.withText(this.text.slice(e,t))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function z(e,t){for(let n=e.length-1;n>=0;n--)t=e[n].type.name+"("+t+")";return t}class P{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,t){let n=new $(e,t);if(null==n.next)return P.empty;let r=F(n);n.next&&n.err("Unexpected trailing text");let o=K(W(r));return G(o,n),o}matchType(e){for(let t=0;t<this.next.length;t++)if(this.next[t].type==e)return this.next[t].next;return null}matchFragment(e,t=0,n=e.childCount){let r=this;for(let o=t;r&&o<n;o++)r=r.matchType(e.child(o).type);return r}get inlineContent(){return 0!=this.next.length&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:t}=this.next[e];if(!t.isText&&!t.hasRequiredAttrs())return t}return null}compatible(e){for(let t=0;t<this.next.length;t++)for(let n=0;n<e.next.length;n++)if(this.next[t].type==e.next[n].type)return!0;return!1}fillBefore(e,t=!1,n=0){let r=[this];function o(i,s){let a=i.matchFragment(e,n);if(a&&(!t||a.validEnd))return l.from(s.map((e=>e.createAndFill())));for(let e=0;e<i.next.length;e++){let{type:t,next:n}=i.next[e];if(!t.isText&&!t.hasRequiredAttrs()&&-1==r.indexOf(n)){r.push(n);let e=o(n,s.concat(t));if(e)return e}}return null}return o(this,[])}findWrapping(e){for(let n=0;n<this.wrapCache.length;n+=2)if(this.wrapCache[n]==e)return this.wrapCache[n+1];let t=this.computeWrapping(e);return this.wrapCache.push(e,t),t}computeWrapping(e){let t=Object.create(null),n=[{match:this,type:null,via:null}];while(n.length){let r=n.shift(),o=r.match;if(o.matchType(e)){let e=[];for(let t=r;t.type;t=t.via)e.push(t.type);return e.reverse()}for(let e=0;e<o.next.length;e++){let{type:i,next:s}=o.next[e];i.isLeaf||i.hasRequiredAttrs()||i.name in t||r.type&&!s.validEnd||(n.push({match:i.contentMatch,type:i,via:r}),t[i.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function t(n){e.push(n);for(let r=0;r<n.next.length;r++)-1==e.indexOf(n.next[r].next)&&t(n.next[r].next)}return t(this),e.map(((t,n)=>{let r=n+(t.validEnd?"*":" ")+" ";for(let o=0;o<t.next.length;o++)r+=(o?", ":"")+t.next[o].type.name+"->"+e.indexOf(t.next[o].next);return r})).join("\n")}}P.empty=new P(!0);class ${constructor(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function F(e){let t=[];do{t.push(B(e))}while(e.eat("|"));return 1==t.length?t[0]:{type:"choice",exprs:t}}function B(e){let t=[];do{t.push(j(e))}while(e.next&&")"!=e.next&&"|"!=e.next);return 1==t.length?t[0]:{type:"seq",exprs:t}}function j(e){let t=H(e);for(;;)if(e.eat("+"))t={type:"plus",expr:t};else if(e.eat("*"))t={type:"star",expr:t};else if(e.eat("?"))t={type:"opt",expr:t};else{if(!e.eat("{"))break;t=V(e,t)}return t}function L(e){/\D/.test(e.next)&&e.err("Expected number, got '"+e.next+"'");let t=Number(e.next);return e.pos++,t}function V(e,t){let n=L(e),r=n;return e.eat(",")&&(r="}"!=e.next?L(e):-1),e.eat("}")||e.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:t}}function q(e,t){let n=e.nodeTypes,r=n[t];if(r)return[r];let o=[];for(let i in n){let e=n[i];e.groups.indexOf(t)>-1&&o.push(e)}return 0==o.length&&e.err("No node type or group '"+t+"' found"),o}function H(e){if(e.eat("(")){let t=F(e);return e.eat(")")||e.err("Missing closing paren"),t}if(!/\W/.test(e.next)){let t=q(e,e.next).map((t=>(null==e.inline?e.inline=t.isInline:e.inline!=t.isInline&&e.err("Mixing inline and block content"),{type:"name",value:t})));return e.pos++,1==t.length?t[0]:{type:"choice",exprs:t}}e.err("Unexpected token '"+e.next+"'")}function W(e){let t=[[]];return o(i(e,0),n()),t;function n(){return t.push([])-1}function r(e,n,r){let o={term:r,to:n};return t[e].push(o),o}function o(e,t){e.forEach((e=>e.to=t))}function i(e,t){if("choice"==e.type)return e.exprs.reduce(((e,n)=>e.concat(i(n,t))),[]);if("seq"!=e.type){if("star"==e.type){let s=n();return r(t,s),o(i(e.expr,s),s),[r(s)]}if("plus"==e.type){let s=n();return o(i(e.expr,t),s),o(i(e.expr,s),s),[r(s)]}if("opt"==e.type)return[r(t)].concat(i(e.expr,t));if("range"==e.type){let s=t;for(let t=0;t<e.min;t++){let t=n();o(i(e.expr,s),t),s=t}if(-1==e.max)o(i(e.expr,s),s);else for(let t=e.min;t<e.max;t++){let t=n();r(s,t),o(i(e.expr,s),t),s=t}return[r(s)]}if("name"==e.type)return[r(t,void 0,e.value)];throw new Error("Unknown expr type")}for(let r=0;;r++){let s=i(e.exprs[r],t);if(r==e.exprs.length-1)return s;o(s,t=n())}}}function J(e,t){return t-e}function U(e,t){let n=[];return r(t),n.sort(J);function r(t){let o=e[t];if(1==o.length&&!o[0].term)return r(o[0].to);n.push(t);for(let e=0;e<o.length;e++){let{term:t,to:i}=o[e];t||-1!=n.indexOf(i)||r(i)}}}function K(e){let t=Object.create(null);return n(U(e,0));function n(r){let o=[];r.forEach((t=>{e[t].forEach((({term:t,to:n})=>{if(!t)return;let r;for(let e=0;e<o.length;e++)o[e][0]==t&&(r=o[e][1]);U(e,n).forEach((e=>{r||o.push([t,r=[]]),-1==r.indexOf(e)&&r.push(e)}))}))}));let i=t[r.join(",")]=new P(r.indexOf(e.length-1)>-1);for(let e=0;e<o.length;e++){let r=o[e][1].sort(J);i.next.push({type:o[e][0],next:t[r.join(",")]||n(r)})}return i}}function G(e,t){for(let n=0,r=[e];n<r.length;n++){let e=r[n],o=!e.validEnd,i=[];for(let t=0;t<e.next.length;t++){let{type:n,next:s}=e.next[t];i.push(n.name),!o||n.isText||n.hasRequiredAttrs()||(o=!1),-1==r.indexOf(s)&&r.push(s)}o&&t.err("Only non-generatable nodes ("+i.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function X(e){let t=Object.create(null);for(let n in e){let r=e[n];if(!r.hasDefault)return null;t[n]=r.default}return t}function Z(e,t){let n=Object.create(null);for(let r in e){let o=t&&t[r];if(void 0===o){let t=e[r];if(!t.hasDefault)throw new RangeError("No value supplied for attribute "+r);o=t.default}n[r]=o}return n}function Y(e){let t=Object.create(null);if(e)for(let n in e)t[n]=new ee(e[n]);return t}class Q{constructor(e,t,n){this.name=e,this.schema=t,this.spec=n,this.markSet=null,this.groups=n.group?n.group.split(" "):[],this.attrs=Y(n.attrs),this.defaultAttrs=X(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(n.inline||"text"==e),this.isText="text"==e}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==P.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:Z(this.attrs,e)}create(e=null,t,n){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new D(this,this.computeAttrs(e),l.from(t),h.setFrom(n))}createChecked(e=null,t,n){return t=l.from(t),this.checkContent(t),new D(this,this.computeAttrs(e),t,h.setFrom(n))}createAndFill(e=null,t,n){if(e=this.computeAttrs(e),t=l.from(t),t.size){let e=this.contentMatch.fillBefore(t);if(!e)return null;t=e.append(t)}let r=this.contentMatch.matchFragment(t),o=r&&r.fillBefore(l.empty,!0);return o?new D(this,e,t.append(o),h.setFrom(n)):null}validContent(e){let t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(let n=0;n<e.childCount;n++)if(!this.allowsMarks(e.child(n).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}allowsMarkType(e){return null==this.markSet||this.markSet.indexOf(e)>-1}allowsMarks(e){if(null==this.markSet)return!0;for(let t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0}allowedMarks(e){if(null==this.markSet)return e;let t;for(let n=0;n<e.length;n++)this.allowsMarkType(e[n].type)?t&&t.push(e[n]):t||(t=e.slice(0,n));return t?t.length?t:h.none:e}static compile(e,t){let n=Object.create(null);e.forEach(((e,r)=>n[e]=new Q(e,t,r)));let r=t.spec.topNode||"doc";if(!n[r])throw new RangeError("Schema is missing its top node type ('"+r+"')");if(!n.text)throw new RangeError("Every schema needs a 'text' type");for(let o in n.text.attrs)throw new RangeError("The text node type should not have attributes");return n}}class ee{constructor(e){this.hasDefault=Object.prototype.hasOwnProperty.call(e,"default"),this.default=e.default}get isRequired(){return!this.hasDefault}}class te{constructor(e,t,n,r){this.name=e,this.rank=t,this.schema=n,this.spec=r,this.attrs=Y(r.attrs),this.excluded=null;let o=X(this.attrs);this.instance=o?new h(this,o):null}create(e=null){return!e&&this.instance?this.instance:new h(this,Z(this.attrs,e))}static compile(e,t){let n=Object.create(null),r=0;return e.forEach(((e,o)=>n[e]=new te(e,r++,t,o))),n}removeFromSet(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e}isInSet(e){for(let t=0;t<e.length;t++)if(e[t].type==this)return e[t]}excludes(e){return this.excluded.indexOf(e)>-1}}class ne{constructor(e){this.cached=Object.create(null);let t=this.spec={};for(let r in e)t[r]=e[r];t.nodes=i.from(e.nodes),t.marks=i.from(e.marks||{}),this.nodes=Q.compile(this.spec.nodes,this),this.marks=te.compile(this.spec.marks,this);let n=Object.create(null);for(let r in this.nodes){if(r in this.marks)throw new RangeError(r+" can not be both a node and a mark");let e=this.nodes[r],t=e.spec.content||"",o=e.spec.marks;e.contentMatch=n[t]||(n[t]=P.parse(t,this.nodes)),e.inlineContent=e.contentMatch.inlineContent,e.markSet="_"==o?null:o?re(this,o.split(" ")):""!=o&&e.inlineContent?null:[]}for(let r in this.marks){let e=this.marks[r],t=e.spec.excludes;e.excluded=null==t?[e]:""==t?[]:re(this,t.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,t=null,n,r){if("string"==typeof e)e=this.nodeType(e);else{if(!(e instanceof Q))throw new RangeError("Invalid node type: "+e);if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}return e.createChecked(t,n,r)}text(e,t){let n=this.nodes.text;return new I(n,n.defaultAttrs,e,h.setFrom(t))}mark(e,t){return"string"==typeof e&&(e=this.marks[e]),e.create(t)}nodeFromJSON(e){return D.fromJSON(this,e)}markFromJSON(e){return h.fromJSON(this,e)}nodeType(e){let t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t}}function re(e,t){let n=[];for(let r=0;r<t.length;r++){let o=t[r],i=e.marks[o],s=i;if(i)n.push(i);else for(let t in e.marks){let r=e.marks[t];("_"==o||r.spec.group&&r.spec.group.split(" ").indexOf(o)>-1)&&n.push(s=r)}if(!s)throw new SyntaxError("Unknown mark type: '"+t[r]+"'")}return n}class oe{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[],t.forEach((e=>{e.tag?this.tags.push(e):e.style&&this.styles.push(e)})),this.normalizeLists=!this.tags.some((t=>{if(!/^(ul|ol)\b/.test(t.tag)||!t.node)return!1;let n=e.nodes[t.node];return n.contentMatch.matchType(n)}))}parse(e,t={}){let n=new pe(this,t,!1);return n.addAll(e,t.from,t.to),n.finish()}parseSlice(e,t={}){let n=new pe(this,t,!0);return n.addAll(e,t.from,t.to),f.maxOpen(n.finish())}matchTag(e,t,n){for(let r=n?this.tags.indexOf(n)+1:0;r<this.tags.length;r++){let n=this.tags[r];if(me(e,n.tag)&&(void 0===n.namespace||e.namespaceURI==n.namespace)&&(!n.context||t.matchesContext(n.context))){if(n.getAttrs){let t=n.getAttrs(e);if(!1===t)continue;n.attrs=t||void 0}return n}}}matchStyle(e,t,n,r){for(let o=r?this.styles.indexOf(r)+1:0;o<this.styles.length;o++){let r=this.styles[o],i=r.style;if(!(0!=i.indexOf(e)||r.context&&!n.matchesContext(r.context)||i.length>e.length&&(61!=i.charCodeAt(e.length)||i.slice(e.length+1)!=t))){if(r.getAttrs){let e=r.getAttrs(t);if(!1===e)continue;r.attrs=e||void 0}return r}}}static schemaRules(e){let t=[];function n(e){let n=null==e.priority?50:e.priority,r=0;for(;r<t.length;r++){let e=t[r],o=null==e.priority?50:e.priority;if(o<n)break}t.splice(r,0,e)}for(let r in e.marks){let t=e.marks[r].spec.parseDOM;t&&t.forEach((e=>{n(e=ve(e)),e.mark||e.ignore||e.clearMark||(e.mark=r)}))}for(let r in e.nodes){let t=e.nodes[r].spec.parseDOM;t&&t.forEach((e=>{n(e=ve(e)),e.node||e.ignore||e.mark||(e.node=r)}))}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new oe(e,oe.schemaRules(e)))}}const ie={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},se={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},ae={ol:!0,ul:!0},le=1,ce=2,ue=4;function de(e,t,n){return null!=t?(t?le:0)|("full"===t?ce:0):e&&"pre"==e.whitespace?le|ce:n&~ue}class he{constructor(e,t,n,r,o,i,s){this.type=e,this.attrs=t,this.marks=n,this.pendingMarks=r,this.solid=o,this.options=s,this.content=[],this.activeMarks=h.none,this.stashMarks=[],this.match=i||(s&ue?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(l.from(e));if(!t){let t,n=this.type.contentMatch;return(t=n.findWrapping(e.type))?(this.match=n,t):null}this.match=this.type.contentMatch.matchFragment(t)}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&le)){let e,t=this.content[this.content.length-1];if(t&&t.isText&&(e=/[ \t\r\n\u000c]+$/.exec(t.text))){let n=t;t.text.length==e[0].length?this.content.pop():this.content[this.content.length-1]=n.withText(n.text.slice(0,n.text.length-e[0].length))}}let t=l.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(l.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}popFromStashMark(e){for(let t=this.stashMarks.length-1;t>=0;t--)if(e.eq(this.stashMarks[t]))return this.stashMarks.splice(t,1)[0]}applyPending(e){for(let t=0,n=this.pendingMarks;t<n.length;t++){let r=n[t];(this.type?this.type.allowsMarkType(r.type):ye(r.type,e))&&!r.isInSet(this.activeMarks)&&(this.activeMarks=r.addToSet(this.activeMarks),this.pendingMarks=r.removeFromSet(this.pendingMarks))}}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!ie.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class pe{constructor(e,t,n){this.parser=e,this.options=t,this.isOpen=n,this.open=0;let r,o=t.topNode,i=de(null,t.preserveWhitespace,0)|(n?ue:0);r=o?new he(o.type,o.attrs,h.none,h.none,!0,t.topMatch||o.type.contentMatch,i):new he(n?null:e.schema.topNodeType,null,h.none,h.none,!0,null,i),this.nodes=[r],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e){3==e.nodeType?this.addTextNode(e):1==e.nodeType&&this.addElement(e)}withStyleRules(e,t){let n=e.getAttribute("style");if(!n)return t();let r=this.readStyles(ge(n));if(!r)return;let[o,i]=r,s=this.top;for(let a=0;a<i.length;a++)this.removePendingMark(i[a],s);for(let a=0;a<o.length;a++)this.addPendingMark(o[a]);t();for(let a=0;a<o.length;a++)this.removePendingMark(o[a],s);for(let a=0;a<i.length;a++)this.addPendingMark(i[a])}addTextNode(e){let t=e.nodeValue,n=this.top;if(n.options&ce||n.inlineContext(e)||/[^ \t\r\n\u000c]/.test(t)){if(n.options&le)t=n.options&ce?t.replace(/\r\n?/g,"\n"):t.replace(/\r?\n|\r/g," ");else if(t=t.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(t)&&this.open==this.nodes.length-1){let r=n.content[n.content.length-1],o=e.previousSibling;(!r||o&&"BR"==o.nodeName||r.isText&&/[ \t\r\n\u000c]$/.test(r.text))&&(t=t.slice(1))}t&&this.insertNode(this.parser.schema.text(t)),this.findInText(e)}else this.findInside(e)}addElement(e,t){let n,r=e.nodeName.toLowerCase();ae.hasOwnProperty(r)&&this.parser.normalizeLists&&fe(e);let o=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(n=this.parser.matchTag(e,this,t));if(o?o.ignore:se.hasOwnProperty(r))this.findInside(e),this.ignoreFallback(e);else if(!o||o.skip||o.closeParent){o&&o.closeParent?this.open=Math.max(0,this.open-1):o&&o.skip.nodeType&&(e=o.skip);let t,n=this.top,i=this.needsBlock;if(ie.hasOwnProperty(r))n.content.length&&n.content[0].isInline&&this.open&&(this.open--,n=this.top),t=!0,n.type||(this.needsBlock=!0);else if(!e.firstChild)return void this.leafFallback(e);o&&o.skip?this.addAll(e):this.withStyleRules(e,(()=>this.addAll(e))),t&&this.sync(n),this.needsBlock=i}else this.withStyleRules(e,(()=>{this.addElementByRule(e,o,!1===o.consuming?n:void 0)}))}leafFallback(e){"BR"==e.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode("\n"))}ignoreFallback(e){"BR"!=e.nodeName||this.top.type&&this.top.type.inlineContent||this.findPlace(this.parser.schema.text("-"))}readStyles(e){let t=h.none,n=h.none;for(let r=0;r<e.length;r+=2)for(let o;;){let i=this.parser.matchStyle(e[r],e[r+1],this,o);if(!i)break;if(i.ignore)return null;if(i.clearMark?this.top.pendingMarks.concat(this.top.activeMarks).forEach((e=>{i.clearMark(e)&&(n=e.addToSet(n))})):t=this.parser.schema.marks[i.mark].create(i.attrs).addToSet(t),!1!==i.consuming)break;o=i}return[t,n]}addElementByRule(e,t,n){let r,o,i;if(t.node)o=this.parser.schema.nodes[t.node],o.isLeaf?this.insertNode(o.create(t.attrs))||this.leafFallback(e):r=this.enter(o,t.attrs||null,t.preserveWhitespace);else{let e=this.parser.schema.marks[t.mark];i=e.create(t.attrs),this.addPendingMark(i)}let s=this.top;if(o&&o.isLeaf)this.findInside(e);else if(n)this.addElement(e,n);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach((e=>this.insertNode(e)));else{let n=e;"string"==typeof t.contentElement?n=e.querySelector(t.contentElement):"function"==typeof t.contentElement?n=t.contentElement(e):t.contentElement&&(n=t.contentElement),this.findAround(e,n,!0),this.addAll(n)}r&&this.sync(s)&&this.open--,i&&this.removePendingMark(i,s)}addAll(e,t,n){let r=t||0;for(let o=t?e.childNodes[t]:e.firstChild,i=null==n?null:e.childNodes[n];o!=i;o=o.nextSibling,++r)this.findAtPoint(e,r),this.addDOM(o);this.findAtPoint(e,r)}findPlace(e){let t,n;for(let r=this.open;r>=0;r--){let o=this.nodes[r],i=o.findWrapping(e);if(i&&(!t||t.length>i.length)&&(t=i,n=o,!i.length))break;if(o.solid)break}if(!t)return!1;this.sync(n);for(let r=0;r<t.length;r++)this.enterInner(t[r],null,!1);return!0}insertNode(e){if(e.isInline&&this.needsBlock&&!this.top.type){let e=this.textblockFromContext();e&&this.enterInner(e)}if(this.findPlace(e)){this.closeExtra();let t=this.top;t.applyPending(e.type),t.match&&(t.match=t.match.matchType(e.type));let n=t.activeMarks;for(let r=0;r<e.marks.length;r++)t.type&&!t.type.allowsMarkType(e.marks[r].type)||(n=e.marks[r].addToSet(n));return t.content.push(e.mark(n)),!0}return!1}enter(e,t,n){let r=this.findPlace(e.create(t));return r&&this.enterInner(e,t,!0,n),r}enterInner(e,t=null,n=!1,r){this.closeExtra();let o=this.top;o.applyPending(e),o.match=o.match&&o.match.matchType(e);let i=de(e,r,o.options);o.options&ue&&0==o.content.length&&(i|=ue),this.nodes.push(new he(e,t,o.activeMarks,o.pendingMarks,n,null,i)),this.open++}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(e){for(let t=this.open;t>=0;t--)if(this.nodes[t]==e)return this.open=t,!0;return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let n=this.nodes[t].content;for(let t=n.length-1;t>=0;t--)e+=n[t].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&this.find[n].offset==t&&(this.find[n].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)null==this.find[t].pos&&1==e.nodeType&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,n){if(e!=t&&this.find)for(let r=0;r<this.find.length;r++)if(null==this.find[r].pos&&1==e.nodeType&&e.contains(this.find[r].node)){let e=t.compareDocumentPosition(this.find[r].node);e&(n?2:4)&&(this.find[r].pos=this.currentPos)}}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),n=this.options.context,r=!this.isOpen&&(!n||n.parent.type==this.nodes[0].type),o=-(n?n.depth+1:0)+(r?0:1),i=(e,s)=>{for(;e>=0;e--){let a=t[e];if(""==a){if(e==t.length-1||0==e)continue;for(;s>=o;s--)if(i(e-1,s))return!0;return!1}{let e=s>0||0==s&&r?this.nodes[s].type:n&&s>=o?n.node(s-o).type:null;if(!e||e.name!=a&&-1==e.groups.indexOf(a))return!1;s--}}return!0};return i(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let n=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(let t in this.parser.schema.nodes){let e=this.parser.schema.nodes[t];if(e.isTextblock&&e.defaultAttrs)return e}}addPendingMark(e){let t=be(e,this.top.pendingMarks);t&&this.top.stashMarks.push(t),this.top.pendingMarks=e.addToSet(this.top.pendingMarks)}removePendingMark(e,t){for(let n=this.open;n>=0;n--){let r=this.nodes[n],o=r.pendingMarks.lastIndexOf(e);if(o>-1)r.pendingMarks=e.removeFromSet(r.pendingMarks);else{r.activeMarks=e.removeFromSet(r.activeMarks);let t=r.popFromStashMark(e);t&&r.type&&r.type.allowsMarkType(t.type)&&(r.activeMarks=t.addToSet(r.activeMarks))}if(r==t)break}}}function fe(e){for(let t=e.firstChild,n=null;t;t=t.nextSibling){let e=1==t.nodeType?t.nodeName.toLowerCase():null;e&&ae.hasOwnProperty(e)&&n?(n.appendChild(t),t=n):"li"==e?n=t:e&&(n=null)}}function me(e,t){return(e.matches||e.msMatchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector).call(e,t)}function ge(e){let t,n=/\s*([\w-]+)\s*:\s*([^;]+)/g,r=[];while(t=n.exec(e))r.push(t[1],t[2].trim());return r}function ve(e){let t={};for(let n in e)t[n]=e[n];return t}function ye(e,t){let n=t.schema.nodes;for(let r in n){let o=n[r];if(!o.allowsMarkType(e))continue;let i=[],s=e=>{i.push(e);for(let n=0;n<e.edgeCount;n++){let{type:r,next:o}=e.edge(n);if(r==t)return!0;if(i.indexOf(o)<0&&s(o))return!0}};if(s(o.contentMatch))return!0}}function be(e,t){for(let n=0;n<t.length;n++)if(e.eq(t[n]))return t[n]}class we{constructor(e,t){this.nodes=e,this.marks=t}serializeFragment(e,t={},n){n||(n=xe(t).createDocumentFragment());let r=n,o=[];return e.forEach((e=>{if(o.length||e.marks.length){let n=0,i=0;while(n<o.length&&i<e.marks.length){let t=e.marks[i];if(this.marks[t.type.name]){if(!t.eq(o[n][0])||!1===t.type.spec.spanning)break;n++,i++}else i++}while(n<o.length)r=o.pop()[1];while(i<e.marks.length){let n=e.marks[i++],s=this.serializeMark(n,e.isInline,t);s&&(o.push([n,r]),r.appendChild(s.dom),r=s.contentDOM||s.dom)}}r.appendChild(this.serializeNodeInner(e,t))})),n}serializeNodeInner(e,t){let{dom:n,contentDOM:r}=we.renderSpec(xe(t),this.nodes[e.type.name](e));if(r){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,t,r)}return n}serializeNode(e,t={}){let n=this.serializeNodeInner(e,t);for(let r=e.marks.length-1;r>=0;r--){let o=this.serializeMark(e.marks[r],e.isInline,t);o&&((o.contentDOM||o.dom).appendChild(n),n=o.dom)}return n}serializeMark(e,t,n={}){let r=this.marks[e.type.name];return r&&we.renderSpec(xe(n),r(e,t))}static renderSpec(e,t,n=null){if("string"==typeof t)return{dom:e.createTextNode(t)};if(null!=t.nodeType)return{dom:t};if(t.dom&&null!=t.dom.nodeType)return t;let r,o=t[0],i=o.indexOf(" ");i>0&&(n=o.slice(0,i),o=o.slice(i+1));let s=n?e.createElementNS(n,o):e.createElement(o),a=t[1],l=1;if(a&&"object"==typeof a&&null==a.nodeType&&!Array.isArray(a)){l=2;for(let e in a)if(null!=a[e]){let t=e.indexOf(" ");t>0?s.setAttributeNS(e.slice(0,t),e.slice(t+1),a[e]):s.setAttribute(e,a[e])}}for(let c=l;c<t.length;c++){let o=t[c];if(0===o){if(c<t.length-1||c>l)throw new RangeError("Content hole must be the only child of its parent node");return{dom:s,contentDOM:s}}{let{dom:t,contentDOM:i}=we.renderSpec(e,o,n);if(s.appendChild(t),i){if(r)throw new RangeError("Multiple content holes");r=i}}}return{dom:s,contentDOM:r}}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new we(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let t=ke(e.nodes);return t.text||(t.text=e=>e.text),t}static marksFromSchema(e){return ke(e.marks)}}function ke(e){let t={};for(let n in e){let r=e[n].spec.toDOM;r&&(t[n]=r)}return t}function xe(e){return e.document||window.document}const Se=65535,Ce=Math.pow(2,16);function _e(e,t){return e+t*Ce}function Oe(e){return e&Se}function Me(e){return(e-(e&Se))/Ce}const Ee=1,Te=2,Ae=4,Ne=8;class Re{constructor(e,t,n){this.pos=e,this.delInfo=t,this.recover=n}get deleted(){return(this.delInfo&Ne)>0}get deletedBefore(){return(this.delInfo&(Ee|Ae))>0}get deletedAfter(){return(this.delInfo&(Te|Ae))>0}get deletedAcross(){return(this.delInfo&Ae)>0}}class De{constructor(e,t=!1){if(this.ranges=e,this.inverted=t,!e.length&&De.empty)return De.empty}recover(e){let t=0,n=Oe(e);if(!this.inverted)for(let r=0;r<n;r++)t+=this.ranges[3*r+2]-this.ranges[3*r+1];return this.ranges[3*n]+t+Me(e)}mapResult(e,t=1){return this._map(e,t,!1)}map(e,t=1){return this._map(e,t,!0)}_map(e,t,n){let r=0,o=this.inverted?2:1,i=this.inverted?1:2;for(let s=0;s<this.ranges.length;s+=3){let a=this.ranges[s]-(this.inverted?r:0);if(a>e)break;let l=this.ranges[s+o],c=this.ranges[s+i],u=a+l;if(e<=u){let o=l?e==a?-1:e==u?1:t:t,i=a+r+(o<0?0:c);if(n)return i;let d=e==(t<0?a:u)?null:_e(s/3,e-a),h=e==a?Te:e==u?Ee:Ae;return(t<0?e!=a:e!=u)&&(h|=Ne),new Re(i,h,d)}r+=c-l}return n?e+r:new Re(e+r,0,null)}touches(e,t){let n=0,r=Oe(t),o=this.inverted?2:1,i=this.inverted?1:2;for(let s=0;s<this.ranges.length;s+=3){let t=this.ranges[s]-(this.inverted?n:0);if(t>e)break;let a=this.ranges[s+o],l=t+a;if(e<=l&&s==3*r)return!0;n+=this.ranges[s+i]-a}return!1}forEach(e){let t=this.inverted?2:1,n=this.inverted?1:2;for(let r=0,o=0;r<this.ranges.length;r+=3){let i=this.ranges[r],s=i-(this.inverted?o:0),a=i+(this.inverted?0:o),l=this.ranges[r+t],c=this.ranges[r+n];e(s,s+l,a,a+c),o+=c-l}}invert(){return new De(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return 0==e?De.empty:new De(e<0?[0,-e,0]:[0,0,e])}}De.empty=new De([]);class Ie{constructor(e=[],t,n=0,r=e.length){this.maps=e,this.mirror=t,this.from=n,this.to=r}slice(e=0,t=this.maps.length){return new Ie(this.maps,this.mirror,e,t)}copy(){return new Ie(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(e,t){this.to=this.maps.push(e),null!=t&&this.setMirror(this.maps.length-1,t)}appendMapping(e){for(let t=0,n=this.maps.length;t<e.maps.length;t++){let r=e.getMirror(t);this.appendMap(e.maps[t],null!=r&&r<t?n+r:void 0)}}getMirror(e){if(this.mirror)for(let t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}setMirror(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)}appendMappingInverted(e){for(let t=e.maps.length-1,n=this.maps.length+e.maps.length;t>=0;t--){let r=e.getMirror(t);this.appendMap(e.maps[t].invert(),null!=r&&r>t?n-r-1:void 0)}}invert(){let e=new Ie;return e.appendMappingInverted(this),e}map(e,t=1){if(this.mirror)return this._map(e,t,!0);for(let n=this.from;n<this.to;n++)e=this.maps[n].map(e,t);return e}mapResult(e,t=1){return this._map(e,t,!1)}_map(e,t,n){let r=0;for(let o=this.from;o<this.to;o++){let n=this.maps[o],i=n.mapResult(e,t);if(null!=i.recover){let t=this.getMirror(o);if(null!=t&&t>o&&t<this.to){o=t,e=this.maps[t].recover(i.recover);continue}}r|=i.delInfo,e=i.pos}return n?e:new Re(e,r,null)}}const ze=Object.create(null);class Pe{getMap(){return De.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");let n=ze[t.stepType];if(!n)throw new RangeError(`No step type ${t.stepType} defined`);return n.fromJSON(e,t)}static jsonID(e,t){if(e in ze)throw new RangeError("Duplicate use of step JSON ID "+e);return ze[e]=t,t.prototype.jsonID=e,t}}class $e{constructor(e,t){this.doc=e,this.failed=t}static ok(e){return new $e(e,null)}static fail(e){return new $e(null,e)}static fromReplace(e,t,n,r){try{return $e.ok(e.replace(t,n,r))}catch(o){if(o instanceof p)return $e.fail(o.message);throw o}}}function Fe(e,t,n){let r=[];for(let o=0;o<e.childCount;o++){let i=e.child(o);i.content.size&&(i=i.copy(Fe(i.content,t,i))),i.isInline&&(i=t(i,n,o)),r.push(i)}return l.fromArray(r)}class Be extends Pe{constructor(e,t,n){super(),this.from=e,this.to=t,this.mark=n}apply(e){let t=e.slice(this.from,this.to),n=e.resolve(this.from),r=n.node(n.sharedDepth(this.to)),o=new f(Fe(t.content,((e,t)=>e.isAtom&&t.type.allowsMarkType(this.mark.type)?e.mark(this.mark.addToSet(e.marks)):e),r),t.openStart,t.openEnd);return $e.fromReplace(e,this.from,this.to,o)}invert(){return new je(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return t.deleted&&n.deleted||t.pos>=n.pos?null:new Be(t.pos,n.pos,this.mark)}merge(e){return e instanceof Be&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Be(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Be(t.from,t.to,e.markFromJSON(t.mark))}}Pe.jsonID("addMark",Be);class je extends Pe{constructor(e,t,n){super(),this.from=e,this.to=t,this.mark=n}apply(e){let t=e.slice(this.from,this.to),n=new f(Fe(t.content,(e=>e.mark(this.mark.removeFromSet(e.marks))),e),t.openStart,t.openEnd);return $e.fromReplace(e,this.from,this.to,n)}invert(){return new Be(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return t.deleted&&n.deleted||t.pos>=n.pos?null:new je(t.pos,n.pos,this.mark)}merge(e){return e instanceof je&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new je(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new je(t.from,t.to,e.markFromJSON(t.mark))}}Pe.jsonID("removeMark",je);class Le extends Pe{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return $e.fail("No node at mark step's position");let n=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return $e.fromReplace(e,this.pos,this.pos+1,new f(l.from(n),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);if(t){let e=this.mark.addToSet(t.marks);if(e.length==t.marks.length){for(let n=0;n<t.marks.length;n++)if(!t.marks[n].isInSet(e))return new Le(this.pos,t.marks[n]);return new Le(this.pos,this.mark)}}return new Ve(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Le(t.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if("number"!=typeof t.pos)throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Le(t.pos,e.markFromJSON(t.mark))}}Pe.jsonID("addNodeMark",Le);class Ve extends Pe{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return $e.fail("No node at mark step's position");let n=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return $e.fromReplace(e,this.pos,this.pos+1,new f(l.from(n),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);return t&&this.mark.isInSet(t.marks)?new Le(this.pos,this.mark):this}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Ve(t.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if("number"!=typeof t.pos)throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Ve(t.pos,e.markFromJSON(t.mark))}}Pe.jsonID("removeNodeMark",Ve);class qe extends Pe{constructor(e,t,n,r=!1){super(),this.from=e,this.to=t,this.slice=n,this.structure=r}apply(e){return this.structure&&We(e,this.from,this.to)?$e.fail("Structure replace would overwrite content"):$e.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new De([this.from,this.to-this.from,this.slice.size])}invert(e){return new qe(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return t.deletedAcross&&n.deletedAcross?null:new qe(t.pos,Math.max(t.pos,n.pos),this.slice)}merge(e){if(!(e instanceof qe)||e.structure||this.structure)return null;if(this.from+this.slice.size!=e.from||this.slice.openEnd||e.slice.openStart){if(e.to!=this.from||this.slice.openStart||e.slice.openEnd)return null;{let t=this.slice.size+e.slice.size==0?f.empty:new f(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new qe(e.from,this.to,t,this.structure)}}{let t=this.slice.size+e.slice.size==0?f.empty:new f(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new qe(this.from,this.to+(e.to-e.from),t,this.structure)}}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new qe(t.from,t.to,f.fromJSON(e,t.slice),!!t.structure)}}Pe.jsonID("replace",qe);class He extends Pe{constructor(e,t,n,r,o,i,s=!1){super(),this.from=e,this.to=t,this.gapFrom=n,this.gapTo=r,this.slice=o,this.insert=i,this.structure=s}apply(e){if(this.structure&&(We(e,this.from,this.gapFrom)||We(e,this.gapTo,this.to)))return $e.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return $e.fail("Gap is not a flat range");let n=this.slice.insertAt(this.insert,t.content);return n?$e.fromReplace(e,this.from,this.to,n):$e.fail("Content does not fit in gap")}getMap(){return new De([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let t=this.gapTo-this.gapFrom;return new He(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1),r=e.map(this.gapFrom,-1),o=e.map(this.gapTo,1);return t.deletedAcross&&n.deletedAcross||r<t.pos||o>n.pos?null:new He(t.pos,n.pos,r,o,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to||"number"!=typeof t.gapFrom||"number"!=typeof t.gapTo||"number"!=typeof t.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new He(t.from,t.to,t.gapFrom,t.gapTo,f.fromJSON(e,t.slice),t.insert,!!t.structure)}}function We(e,t,n){let r=e.resolve(t),o=n-t,i=r.depth;while(o>0&&i>0&&r.indexAfter(i)==r.node(i).childCount)i--,o--;if(o>0){let e=r.node(i).maybeChild(r.indexAfter(i));while(o>0){if(!e||e.isLeaf)return!0;e=e.firstChild,o--}}return!1}function Je(e,t,n,r){let o,i,s=[],a=[];e.doc.nodesBetween(t,n,((e,l,c)=>{if(!e.isInline)return;let u=e.marks;if(!r.isInSet(u)&&c.type.allowsMarkType(r.type)){let c=Math.max(l,t),d=Math.min(l+e.nodeSize,n),h=r.addToSet(u);for(let e=0;e<u.length;e++)u[e].isInSet(h)||(o&&o.to==c&&o.mark.eq(u[e])?o.to=d:s.push(o=new je(c,d,u[e])));i&&i.to==c?i.to=d:a.push(i=new Be(c,d,r))}})),s.forEach((t=>e.step(t))),a.forEach((t=>e.step(t)))}function Ue(e,t,n,r){let o=[],i=0;e.doc.nodesBetween(t,n,((e,s)=>{if(!e.isInline)return;i++;let a=null;if(r instanceof te){let t,n=e.marks;while(t=r.isInSet(n))(a||(a=[])).push(t),n=t.removeFromSet(n)}else r?r.isInSet(e.marks)&&(a=[r]):a=e.marks;if(a&&a.length){let r=Math.min(s+e.nodeSize,n);for(let e=0;e<a.length;e++){let n,l=a[e];for(let e=0;e<o.length;e++){let t=o[e];t.step==i-1&&l.eq(o[e].style)&&(n=t)}n?(n.to=r,n.step=i):o.push({style:l,from:Math.max(s,t),to:r,step:i})}}})),o.forEach((t=>e.step(new je(t.from,t.to,t.style))))}function Ke(e,t,n,r=n.contentMatch){let o=e.doc.nodeAt(t),i=[],s=t+1;for(let a=0;a<o.childCount;a++){let t=o.child(a),c=s+t.nodeSize,u=r.matchType(t.type);if(u){r=u;for(let r=0;r<t.marks.length;r++)n.allowsMarkType(t.marks[r].type)||e.step(new je(s,c,t.marks[r]));if(t.isText&&!n.spec.code){let e,r,o=/\r?\n|\r/g;while(e=o.exec(t.text))r||(r=new f(l.from(n.schema.text(" ",n.allowedMarks(t.marks))),0,0)),i.push(new qe(s+e.index,s+e.index+e[0].length,r))}}else i.push(new qe(s,c,f.empty));s=c}if(!r.validEnd){let t=r.fillBefore(l.empty,!0);e.replace(s,s,new f(t,0,0))}for(let a=i.length-1;a>=0;a--)e.step(i[a])}function Ge(e,t,n){return(0==t||e.canReplace(t,e.childCount))&&(n==e.childCount||e.canReplace(0,n))}function Xe(e){let t=e.parent,n=t.content.cutByIndex(e.startIndex,e.endIndex);for(let r=e.depth;;--r){let t=e.$from.node(r),o=e.$from.index(r),i=e.$to.indexAfter(r);if(r<e.depth&&t.canReplace(o,i,n))return r;if(0==r||t.type.spec.isolating||!Ge(t,o,i))break}return null}function Ze(e,t,n){let{$from:r,$to:o,depth:i}=t,s=r.before(i+1),a=o.after(i+1),c=s,u=a,d=l.empty,h=0;for(let f=i,g=!1;f>n;f--)g||r.index(f)>0?(g=!0,d=l.from(r.node(f).copy(d)),h++):c--;let p=l.empty,m=0;for(let f=i,g=!1;f>n;f--)g||o.after(f+1)<o.end(f)?(g=!0,p=l.from(o.node(f).copy(p)),m++):u++;e.step(new He(c,u,s,a,new f(d.append(p),h,m),d.size-h,!0))}function Ye(e,t,n=null,r=e){let o=et(e,t),i=o&&tt(r,t);return i?o.map(Qe).concat({type:t,attrs:n}).concat(i.map(Qe)):null}function Qe(e){return{type:e,attrs:null}}function et(e,t){let{parent:n,startIndex:r,endIndex:o}=e,i=n.contentMatchAt(r).findWrapping(t);if(!i)return null;let s=i.length?i[0]:t;return n.canReplaceWith(r,o,s)?i:null}function tt(e,t){let{parent:n,startIndex:r,endIndex:o}=e,i=n.child(r),s=t.contentMatch.findWrapping(i.type);if(!s)return null;let a=s.length?s[s.length-1]:t,l=a.contentMatch;for(let c=r;l&&c<o;c++)l=l.matchType(n.child(c).type);return l&&l.validEnd?s:null}function nt(e,t,n){let r=l.empty;for(let s=n.length-1;s>=0;s--){if(r.size){let e=n[s].type.contentMatch.matchFragment(r);if(!e||!e.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=l.from(n[s].type.create(n[s].attrs,r))}let o=t.start,i=t.end;e.step(new He(o,i,o,i,new f(r,0,0),n.length,!0))}function rt(e,t,n,r,o){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let i=e.steps.length;e.doc.nodesBetween(t,n,((t,n)=>{if(t.isTextblock&&!t.hasMarkup(r,o)&&ot(e.doc,e.mapping.slice(i).map(n),r)){e.clearIncompatible(e.mapping.slice(i).map(n,1),r);let s=e.mapping.slice(i),a=s.map(n,1),c=s.map(n+t.nodeSize,1);return e.step(new He(a,c,a+1,c-1,new f(l.from(r.create(o,null,t.marks)),0,0),1,!0)),!1}}))}function ot(e,t,n){let r=e.resolve(t),o=r.index();return r.parent.canReplaceWith(o,o+1,n)}function it(e,t,n,r,o){let i=e.doc.nodeAt(t);if(!i)throw new RangeError("No node at given position");n||(n=i.type);let s=n.create(r,null,o||i.marks);if(i.isLeaf)return e.replaceWith(t,t+i.nodeSize,s);if(!n.validContent(i.content))throw new RangeError("Invalid content for node type "+n.name);e.step(new He(t,t+i.nodeSize,t+1,t+i.nodeSize-1,new f(l.from(s),0,0),1,!0))}function st(e,t,n=1,r){let o=e.resolve(t),i=o.depth-n,s=r&&r[r.length-1]||o.parent;if(i<0||o.parent.type.spec.isolating||!o.parent.canReplace(o.index(),o.parent.childCount)||!s.type.validContent(o.parent.content.cutByIndex(o.index(),o.parent.childCount)))return!1;for(let c=o.depth-1,u=n-2;c>i;c--,u--){let e=o.node(c),t=o.index(c);if(e.type.spec.isolating)return!1;let n=e.content.cutByIndex(t,e.childCount),i=r&&r[u+1];i&&(n=n.replaceChild(0,i.type.create(i.attrs)));let s=r&&r[u]||e;if(!e.canReplace(t+1,e.childCount)||!s.type.validContent(n))return!1}let a=o.indexAfter(i),l=r&&r[0];return o.node(i).canReplaceWith(a,a,l?l.type:o.node(i+1).type)}function at(e,t,n=1,r){let o=e.doc.resolve(t),i=l.empty,s=l.empty;for(let a=o.depth,c=o.depth-n,u=n-1;a>c;a--,u--){i=l.from(o.node(a).copy(i));let e=r&&r[u];s=l.from(e?e.type.create(e.attrs,s):o.node(a).copy(s))}e.step(new qe(t,t,new f(i.append(s),n,n),!0))}function lt(e,t){let n=e.resolve(t),r=n.index();return ct(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function ct(e,t){return!(!e||!t||e.isLeaf||!e.canAppend(t))}function ut(e,t,n){let r=new qe(t-n,t+n,f.empty,!0);e.step(r)}function dt(e,t,n){let r=e.resolve(t);if(r.parent.canReplaceWith(r.index(),r.index(),n))return t;if(0==r.parentOffset)for(let o=r.depth-1;o>=0;o--){let e=r.index(o);if(r.node(o).canReplaceWith(e,e,n))return r.before(o+1);if(e>0)return null}if(r.parentOffset==r.parent.content.size)for(let o=r.depth-1;o>=0;o--){let e=r.indexAfter(o);if(r.node(o).canReplaceWith(e,e,n))return r.after(o+1);if(e<r.node(o).childCount)return null}return null}function ht(e,t,n){let r=e.resolve(t);if(!n.content.size)return t;let o=n.content;for(let i=0;i<n.openStart;i++)o=o.firstChild.content;for(let i=1;i<=(0==n.openStart&&n.size?2:1);i++)for(let e=r.depth;e>=0;e--){let t=e==r.depth?0:r.pos<=(r.start(e+1)+r.end(e+1))/2?-1:1,n=r.index(e)+(t>0?1:0),s=r.node(e),a=!1;if(1==i)a=s.canReplace(n,n,o);else{let e=s.contentMatchAt(n).findWrapping(o.firstChild.type);a=e&&s.canReplaceWith(n,n,e[0])}if(a)return 0==t?r.pos:t<0?r.before(e+1):r.after(e+1)}return null}function pt(e,t,n=t,r=f.empty){if(t==n&&!r.size)return null;let o=e.resolve(t),i=e.resolve(n);return ft(o,i,r)?new qe(t,n,r):new mt(o,i,r).fit()}function ft(e,t,n){return!n.openStart&&!n.openEnd&&e.start()==t.start()&&e.parent.canReplace(e.index(),t.index(),n.content)}Pe.jsonID("replaceAround",He);class mt{constructor(e,t,n){this.$from=e,this.$to=t,this.unplaced=n,this.frontier=[],this.placed=l.empty;for(let r=0;r<=e.depth;r++){let t=e.node(r);this.frontier.push({type:t.type,match:t.contentMatchAt(e.indexAfter(r))})}for(let r=e.depth;r>0;r--)this.placed=l.from(e.node(r).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){while(this.unplaced.size){let e=this.findFittable();e?this.placeNodes(e):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),t=this.placed.size-this.depth-this.$from.depth,n=this.$from,r=this.close(e<0?this.$to:n.doc.resolve(e));if(!r)return null;let o=this.placed,i=n.depth,s=r.depth;while(i&&s&&1==o.childCount)o=o.firstChild.content,i--,s--;let a=new f(o,i,s);return e>-1?new He(n.pos,e,this.$to.pos,this.$to.end(),a,t):a.size||n.pos!=this.$to.pos?new qe(n.pos,r.pos,a):null}findFittable(){let e=this.unplaced.openStart;for(let t=this.unplaced.content,n=0,r=this.unplaced.openEnd;n<e;n++){let o=t.firstChild;if(t.childCount>1&&(r=0),o.type.spec.isolating&&r<=n){e=n;break}t=o.content}for(let t=1;t<=2;t++)for(let n=1==t?e:this.unplaced.openStart;n>=0;n--){let e,r=null;n?(r=yt(this.unplaced.content,n-1).firstChild,e=r.content):e=this.unplaced.content;let o=e.firstChild;for(let i=this.depth;i>=0;i--){let e,{type:s,match:a}=this.frontier[i],c=null;if(1==t&&(o?a.matchType(o.type)||(c=a.fillBefore(l.from(o),!1)):r&&s.compatibleContent(r.type)))return{sliceDepth:n,frontierDepth:i,parent:r,inject:c};if(2==t&&o&&(e=a.findWrapping(o.type)))return{sliceDepth:n,frontierDepth:i,parent:r,wrap:e};if(r&&a.matchType(r.type))break}}}openMore(){let{content:e,openStart:t,openEnd:n}=this.unplaced,r=yt(e,t);return!(!r.childCount||r.firstChild.isLeaf)&&(this.unplaced=new f(e,t+1,Math.max(n,r.size+t>=e.size-n?t+1:0)),!0)}dropNode(){let{content:e,openStart:t,openEnd:n}=this.unplaced,r=yt(e,t);if(r.childCount<=1&&t>0){let o=e.size-t<=t+r.size;this.unplaced=new f(gt(e,t-1,1),t-1,o?t-1:n)}else this.unplaced=new f(gt(e,t,1),t,n)}placeNodes({sliceDepth:e,frontierDepth:t,parent:n,inject:r,wrap:o}){while(this.depth>t)this.closeFrontierNode();if(o)for(let l=0;l<o.length;l++)this.openFrontierNode(o[l]);let i=this.unplaced,s=n?n.content:i.content,a=i.openStart-e,c=0,u=[],{match:d,type:h}=this.frontier[t];if(r){for(let e=0;e<r.childCount;e++)u.push(r.child(e));d=d.matchFragment(r)}let p=s.size+e-(i.content.size-i.openEnd);while(c<s.childCount){let e=s.child(c),t=d.matchType(e.type);if(!t)break;c++,(c>1||0==a||e.content.size)&&(d=t,u.push(bt(e.mark(h.allowedMarks(e.marks)),1==c?a:0,c==s.childCount?p:-1)))}let m=c==s.childCount;m||(p=-1),this.placed=vt(this.placed,t,l.from(u)),this.frontier[t].match=d,m&&p<0&&n&&n.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let l=0,f=s;l<p;l++){let e=f.lastChild;this.frontier.push({type:e.type,match:e.contentMatchAt(e.childCount)}),f=e.content}this.unplaced=m?0==e?f.empty:new f(gt(i.content,e-1,1),e-1,p<0?i.openEnd:e-1):new f(gt(i.content,e,c),i.openStart,i.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e,t=this.frontier[this.depth];if(!t.type.isTextblock||!wt(this.$to,this.$to.depth,t.type,t.match,!1)||this.$to.depth==this.depth&&(e=this.findCloseLevel(this.$to))&&e.depth==this.depth)return-1;let{depth:n}=this.$to,r=this.$to.after(n);while(n>1&&r==this.$to.end(--n))++r;return r}findCloseLevel(e){e:for(let t=Math.min(this.depth,e.depth);t>=0;t--){let{match:n,type:r}=this.frontier[t],o=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),i=wt(e,t,r,n,o);if(i){for(let n=t-1;n>=0;n--){let{match:t,type:r}=this.frontier[n],o=wt(e,n,r,t,!0);if(!o||o.childCount)continue e}return{depth:t,fit:i,move:o?e.doc.resolve(e.after(t+1)):e}}}}close(e){let t=this.findCloseLevel(e);if(!t)return null;while(this.depth>t.depth)this.closeFrontierNode();t.fit.childCount&&(this.placed=vt(this.placed,t.depth,t.fit)),e=t.move;for(let n=t.depth+1;n<=e.depth;n++){let t=e.node(n),r=t.type.contentMatch.fillBefore(t.content,!0,e.index(n));this.openFrontierNode(t.type,t.attrs,r)}return e}openFrontierNode(e,t=null,n){let r=this.frontier[this.depth];r.match=r.match.matchType(e),this.placed=vt(this.placed,this.depth,l.from(e.create(t,n))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let e=this.frontier.pop(),t=e.match.fillBefore(l.empty,!0);t.childCount&&(this.placed=vt(this.placed,this.frontier.length,t))}}function gt(e,t,n){return 0==t?e.cutByIndex(n,e.childCount):e.replaceChild(0,e.firstChild.copy(gt(e.firstChild.content,t-1,n)))}function vt(e,t,n){return 0==t?e.append(n):e.replaceChild(e.childCount-1,e.lastChild.copy(vt(e.lastChild.content,t-1,n)))}function yt(e,t){for(let n=0;n<t;n++)e=e.firstChild.content;return e}function bt(e,t,n){if(t<=0)return e;let r=e.content;return t>1&&(r=r.replaceChild(0,bt(r.firstChild,t-1,1==r.childCount?n-1:0))),t>0&&(r=e.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(e.type.contentMatch.matchFragment(r).fillBefore(l.empty,!0)))),e.copy(r)}function wt(e,t,n,r,o){let i=e.node(t),s=o?e.indexAfter(t):e.index(t);if(s==i.childCount&&!n.compatibleContent(i.type))return null;let a=r.fillBefore(i.content,!0,s);return a&&!kt(n,i.content,s)?a:null}function kt(e,t,n){for(let r=n;r<t.childCount;r++)if(!e.allowsMarks(t.child(r).marks))return!0;return!1}function xt(e){return e.spec.defining||e.spec.definingForContent}function St(e,t,n,r){if(!r.size)return e.deleteRange(t,n);let o=e.doc.resolve(t),i=e.doc.resolve(n);if(ft(o,i,r))return e.step(new qe(t,n,r));let s=Mt(o,e.doc.resolve(n));0==s[s.length-1]&&s.pop();let a=-(o.depth+1);s.unshift(a);for(let h=o.depth,p=o.pos-1;h>0;h--,p--){let e=o.node(h).type.spec;if(e.defining||e.definingAsContext||e.isolating)break;s.indexOf(h)>-1?a=h:o.before(h)==p&&s.splice(1,0,-h)}let l=s.indexOf(a),c=[],u=r.openStart;for(let h=r.content,p=0;;p++){let e=h.firstChild;if(c.push(e),p==r.openStart)break;h=e.content}for(let h=u-1;h>=0;h--){let e=c[h],t=xt(e.type);if(t&&!e.sameMarkup(o.node(Math.abs(a)-1)))u=h;else if(t||!e.type.isTextblock)break}for(let h=r.openStart;h>=0;h--){let t=(h+u+1)%(r.openStart+1),a=c[t];if(a)for(let c=0;c<s.length;c++){let u=s[(c+l)%s.length],d=!0;u<0&&(d=!1,u=-u);let h=o.node(u-1),p=o.index(u-1);if(h.canReplaceWith(p,p,a.type,a.marks))return e.replace(o.before(u),d?i.after(u):n,new f(Ct(r.content,0,r.openStart,t),t,r.openEnd))}}let d=e.steps.length;for(let h=s.length-1;h>=0;h--){if(e.replace(t,n,r),e.steps.length>d)break;let a=s[h];a<0||(t=o.before(a),n=i.after(a))}}function Ct(e,t,n,r,o){if(t<n){let o=e.firstChild;e=e.replaceChild(0,o.copy(Ct(o.content,t+1,n,r,o)))}if(t>r){let t=o.contentMatchAt(0),n=t.fillBefore(e).append(e);e=n.append(t.matchFragment(n).fillBefore(l.empty,!0))}return e}function _t(e,t,n,r){if(!r.isInline&&t==n&&e.doc.resolve(t).parent.content.size){let o=dt(e.doc,t,r.type);null!=o&&(t=n=o)}e.replaceRange(t,n,new f(l.from(r),0,0))}function Ot(e,t,n){let r=e.doc.resolve(t),o=e.doc.resolve(n),i=Mt(r,o);for(let s=0;s<i.length;s++){let t=i[s],n=s==i.length-1;if(n&&0==t||r.node(t).type.contentMatch.validEnd)return e.delete(r.start(t),o.end(t));if(t>0&&(n||r.node(t-1).canReplace(r.index(t-1),o.indexAfter(t-1))))return e.delete(r.before(t),o.after(t))}for(let s=1;s<=r.depth&&s<=o.depth;s++)if(t-r.start(s)==r.depth-s&&n>r.end(s)&&o.end(s)-n!=o.depth-s)return e.delete(r.before(s),n);e.delete(t,n)}function Mt(e,t){let n=[],r=Math.min(e.depth,t.depth);for(let o=r;o>=0;o--){let r=e.start(o);if(r<e.pos-(e.depth-o)||t.end(o)>t.pos+(t.depth-o)||e.node(o).type.spec.isolating||t.node(o).type.spec.isolating)break;(r==t.start(o)||o==e.depth&&o==t.depth&&e.parent.inlineContent&&t.parent.inlineContent&&o&&t.start(o-1)==r-1)&&n.push(o)}return n}class Et extends Pe{constructor(e,t,n){super(),this.pos=e,this.attr=t,this.value=n}apply(e){let t=e.nodeAt(this.pos);if(!t)return $e.fail("No node at attribute step's position");let n=Object.create(null);for(let o in t.attrs)n[o]=t.attrs[o];n[this.attr]=this.value;let r=t.type.create(n,null,t.marks);return $e.fromReplace(e,this.pos,this.pos+1,new f(l.from(r),0,t.isLeaf?0:1))}getMap(){return De.empty}invert(e){return new Et(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Et(t.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,t){if("number"!=typeof t.pos||"string"!=typeof t.attr)throw new RangeError("Invalid input for AttrStep.fromJSON");return new Et(t.pos,t.attr,t.value)}}Pe.jsonID("attr",Et);class Tt extends Pe{constructor(e,t){super(),this.attr=e,this.value=t}apply(e){let t=Object.create(null);for(let r in e.attrs)t[r]=e.attrs[r];t[this.attr]=this.value;let n=e.type.create(t,e.content,e.marks);return $e.ok(n)}getMap(){return De.empty}invert(e){return new Tt(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,t){if("string"!=typeof t.attr)throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new Tt(t.attr,t.value)}}Pe.jsonID("docAttr",Tt);let At=class extends Error{};At=function e(t){let n=Error.call(this,t);return n.__proto__=e.prototype,n},At.prototype=Object.create(Error.prototype),At.prototype.constructor=At,At.prototype.name="TransformError";class Nt{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new Ie}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let t=this.maybeStep(e);if(t.failed)throw new At(t.failed);return this}maybeStep(e){let t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t}get docChanged(){return this.steps.length>0}addStep(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t}replace(e,t=e,n=f.empty){let r=pt(this.doc,e,t,n);return r&&this.step(r),this}replaceWith(e,t,n){return this.replace(e,t,new f(l.from(n),0,0))}delete(e,t){return this.replace(e,t,f.empty)}insert(e,t){return this.replaceWith(e,e,t)}replaceRange(e,t,n){return St(this,e,t,n),this}replaceRangeWith(e,t,n){return _t(this,e,t,n),this}deleteRange(e,t){return Ot(this,e,t),this}lift(e,t){return Ze(this,e,t),this}join(e,t=1){return ut(this,e,t),this}wrap(e,t){return nt(this,e,t),this}setBlockType(e,t=e,n,r=null){return rt(this,e,t,n,r),this}setNodeMarkup(e,t,n=null,r){return it(this,e,t,n,r),this}setNodeAttribute(e,t,n){return this.step(new Et(e,t,n)),this}setDocAttribute(e,t){return this.step(new Tt(e,t)),this}addNodeMark(e,t){return this.step(new Le(e,t)),this}removeNodeMark(e,t){if(!(t instanceof h)){let n=this.doc.nodeAt(e);if(!n)throw new RangeError("No node at position "+e);if(t=t.isInSet(n.marks),!t)return this}return this.step(new Ve(e,t)),this}split(e,t=1,n){return at(this,e,t,n),this}addMark(e,t,n){return Je(this,e,t,n),this}removeMark(e,t,n){return Ue(this,e,t,n),this}clearIncompatible(e,t,n){return Ke(this,e,t,n),this}}const Rt=Object.create(null);class Dt{constructor(e,t,n){this.$anchor=e,this.$head=t,this.ranges=n||[new It(e.min(t),e.max(t))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,t=f.empty){let n=t.content.lastChild,r=null;for(let s=0;s<t.openEnd;s++)r=n,n=n.lastChild;let o=e.steps.length,i=this.ranges;for(let s=0;s<i.length;s++){let{$from:a,$to:l}=i[s],c=e.mapping.slice(o);e.replaceRange(c.map(a.pos),c.map(l.pos),s?f.empty:t),0==s&&Ht(e,o,(n?n.isInline:r&&r.isTextblock)?-1:1)}}replaceWith(e,t){let n=e.steps.length,r=this.ranges;for(let o=0;o<r.length;o++){let{$from:i,$to:s}=r[o],a=e.mapping.slice(n),l=a.map(i.pos),c=a.map(s.pos);o?e.deleteRange(l,c):(e.replaceRangeWith(l,c,t),Ht(e,n,t.isInline?-1:1))}}static findFrom(e,t,n=!1){let r=e.parent.inlineContent?new $t(e):qt(e.node(0),e.parent,e.pos,e.index(),t,n);if(r)return r;for(let o=e.depth-1;o>=0;o--){let r=t<0?qt(e.node(0),e.node(o),e.before(o+1),e.index(o),t,n):qt(e.node(0),e.node(o),e.after(o+1),e.index(o)+1,t,n);if(r)return r}return null}static near(e,t=1){return this.findFrom(e,t)||this.findFrom(e,-t)||new Lt(e.node(0))}static atStart(e){return qt(e,e,0,0,1)||new Lt(e)}static atEnd(e){return qt(e,e,e.content.size,e.childCount,-1)||new Lt(e)}static fromJSON(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");let n=Rt[t.type];if(!n)throw new RangeError(`No selection type ${t.type} defined`);return n.fromJSON(e,t)}static jsonID(e,t){if(e in Rt)throw new RangeError("Duplicate use of selection JSON ID "+e);return Rt[e]=t,t.prototype.jsonID=e,t}getBookmark(){return $t.between(this.$anchor,this.$head).getBookmark()}}Dt.prototype.visible=!0;class It{constructor(e,t){this.$from=e,this.$to=t}}let zt=!1;function Pt(e){zt||e.parent.inlineContent||(zt=!0,console["warn"]("TextSelection endpoint not pointing into a node with inline content ("+e.parent.type.name+")"))}class $t extends Dt{constructor(e,t=e){Pt(e),Pt(t),super(e,t)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,t){let n=e.resolve(t.map(this.head));if(!n.parent.inlineContent)return Dt.near(n);let r=e.resolve(t.map(this.anchor));return new $t(r.parent.inlineContent?r:n,n)}replace(e,t=f.empty){if(super.replace(e,t),t==f.empty){let t=this.$from.marksAcross(this.$to);t&&e.ensureMarks(t)}}eq(e){return e instanceof $t&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new Ft(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,t){if("number"!=typeof t.anchor||"number"!=typeof t.head)throw new RangeError("Invalid input for TextSelection.fromJSON");return new $t(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,n=t){let r=e.resolve(t);return new this(r,n==t?r:e.resolve(n))}static between(e,t,n){let r=e.pos-t.pos;if(n&&!r||(n=r>=0?1:-1),!t.parent.inlineContent){let e=Dt.findFrom(t,n,!0)||Dt.findFrom(t,-n,!0);if(!e)return Dt.near(t,n);t=e.$head}return e.parent.inlineContent||(0==r?e=t:(e=(Dt.findFrom(e,-n,!0)||Dt.findFrom(e,n,!0)).$anchor,e.pos<t.pos!=r<0&&(e=t))),new $t(e,t)}}Dt.jsonID("text",$t);class Ft{constructor(e,t){this.anchor=e,this.head=t}map(e){return new Ft(e.map(this.anchor),e.map(this.head))}resolve(e){return $t.between(e.resolve(this.anchor),e.resolve(this.head))}}class Bt extends Dt{constructor(e){let t=e.nodeAfter,n=e.node(0).resolve(e.pos+t.nodeSize);super(e,n),this.node=t}map(e,t){let{deleted:n,pos:r}=t.mapResult(this.anchor),o=e.resolve(r);return n?Dt.near(o):new Bt(o)}content(){return new f(l.from(this.node),0,0)}eq(e){return e instanceof Bt&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new jt(this.anchor)}static fromJSON(e,t){if("number"!=typeof t.anchor)throw new RangeError("Invalid input for NodeSelection.fromJSON");return new Bt(e.resolve(t.anchor))}static create(e,t){return new Bt(e.resolve(t))}static isSelectable(e){return!e.isText&&!1!==e.type.spec.selectable}}Bt.prototype.visible=!1,Dt.jsonID("node",Bt);class jt{constructor(e){this.anchor=e}map(e){let{deleted:t,pos:n}=e.mapResult(this.anchor);return t?new Ft(n,n):new jt(n)}resolve(e){let t=e.resolve(this.anchor),n=t.nodeAfter;return n&&Bt.isSelectable(n)?new Bt(t):Dt.near(t)}}class Lt extends Dt{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,t=f.empty){if(t==f.empty){e.delete(0,e.doc.content.size);let t=Dt.atStart(e.doc);t.eq(e.selection)||e.setSelection(t)}else super.replace(e,t)}toJSON(){return{type:"all"}}static fromJSON(e){return new Lt(e)}map(e){return new Lt(e)}eq(e){return e instanceof Lt}getBookmark(){return Vt}}Dt.jsonID("all",Lt);const Vt={map(){return this},resolve(e){return new Lt(e)}};function qt(e,t,n,r,o,i=!1){if(t.inlineContent)return $t.create(e,n);for(let s=r-(o>0?0:1);o>0?s<t.childCount:s>=0;s+=o){let r=t.child(s);if(r.isAtom){if(!i&&Bt.isSelectable(r))return Bt.create(e,n-(o<0?r.nodeSize:0))}else{let t=qt(e,r,n+o,o<0?r.childCount:0,o,i);if(t)return t}n+=r.nodeSize*o}return null}function Ht(e,t,n){let r=e.steps.length-1;if(r<t)return;let o=e.steps[r];if(!(o instanceof qe||o instanceof He))return;let i,s=e.mapping.maps[r];s.forEach(((e,t,n,r)=>{null==i&&(i=r)})),e.setSelection(Dt.near(e.doc.resolve(i),n))}const Wt=1,Jt=2,Ut=4;class Kt extends Nt{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|Wt)&~Jt,this.storedMarks=null,this}get selectionSet(){return(this.updated&Wt)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=Jt,this}ensureMarks(e){return h.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&Jt)>0}addStep(e,t){super.addStep(e,t),this.updated=this.updated&~Jt,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,t=!0){let n=this.selection;return t&&(e=e.mark(this.storedMarks||(n.empty?n.$from.marks():n.$from.marksAcross(n.$to)||h.none))),n.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,t,n){let r=this.doc.type.schema;if(null==t)return e?this.replaceSelectionWith(r.text(e),!0):this.deleteSelection();{if(null==n&&(n=t),n=null==n?t:n,!e)return this.deleteRange(t,n);let o=this.storedMarks;if(!o){let e=this.doc.resolve(t);o=n==t?e.marks():e.marksAcross(this.doc.resolve(n))}return this.replaceRangeWith(t,n,r.text(e,o)),this.selection.empty||this.setSelection(Dt.near(this.selection.$to)),this}}setMeta(e,t){return this.meta["string"==typeof e?e:e.key]=t,this}getMeta(e){return this.meta["string"==typeof e?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=Ut,this}get scrolledIntoView(){return(this.updated&Ut)>0}}function Gt(e,t){return t&&e?e.bind(t):e}class Xt{constructor(e,t,n){this.name=e,this.init=Gt(t.init,n),this.apply=Gt(t.apply,n)}}const Zt=[new Xt("doc",{init(e){return e.doc||e.schema.topNodeType.createAndFill()},apply(e){return e.doc}}),new Xt("selection",{init(e,t){return e.selection||Dt.atStart(t.doc)},apply(e){return e.selection}}),new Xt("storedMarks",{init(e){return e.storedMarks||null},apply(e,t,n,r){return r.selection.$cursor?e.storedMarks:null}}),new Xt("scrollToSelection",{init(){return 0},apply(e,t){return e.scrolledIntoView?t+1:t}})];class Yt{constructor(e,t){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=Zt.slice(),t&&t.forEach((e=>{if(this.pluginsByKey[e.key])throw new RangeError("Adding different instances of a keyed plugin ("+e.key+")");this.plugins.push(e),this.pluginsByKey[e.key]=e,e.spec.state&&this.fields.push(new Xt(e.key,e.spec.state,e))}))}}class Qt{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,t=-1){for(let n=0;n<this.config.plugins.length;n++)if(n!=t){let t=this.config.plugins[n];if(t.spec.filterTransaction&&!t.spec.filterTransaction.call(t,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let t=[e],n=this.applyInner(e),r=null;for(;;){let o=!1;for(let i=0;i<this.config.plugins.length;i++){let s=this.config.plugins[i];if(s.spec.appendTransaction){let a=r?r[i].n:0,l=r?r[i].state:this,c=a<t.length&&s.spec.appendTransaction.call(s,a?t.slice(a):t,l,n);if(c&&n.filterTransaction(c,i)){if(c.setMeta("appendedTransaction",e),!r){r=[];for(let e=0;e<this.config.plugins.length;e++)r.push(e<i?{state:n,n:t.length}:{state:this,n:0})}t.push(c),n=n.applyInner(c),o=!0}r&&(r[i]={state:n,n:t.length})}}if(!o)return{state:n,transactions:t}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let t=new Qt(this.config),n=this.config.fields;for(let r=0;r<n.length;r++){let o=n[r];t[o.name]=o.apply(e,this[o.name],this,t)}return t}get tr(){return new Kt(this)}static create(e){let t=new Yt(e.doc?e.doc.type.schema:e.schema,e.plugins),n=new Qt(t);for(let r=0;r<t.fields.length;r++)n[t.fields[r].name]=t.fields[r].init(e,n);return n}reconfigure(e){let t=new Yt(this.schema,e.plugins),n=t.fields,r=new Qt(t);for(let o=0;o<n.length;o++){let t=n[o].name;r[t]=this.hasOwnProperty(t)?this[t]:n[o].init(e,r)}return r}toJSON(e){let t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map((e=>e.toJSON()))),e&&"object"==typeof e)for(let n in e){if("doc"==n||"selection"==n)throw new RangeError("The JSON fields `doc` and `selection` are reserved");let r=e[n],o=r.spec.state;o&&o.toJSON&&(t[n]=o.toJSON.call(r,this[r.key]))}return t}static fromJSON(e,t,n){if(!t)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let r=new Yt(e.schema,e.plugins),o=new Qt(r);return r.fields.forEach((r=>{if("doc"==r.name)o.doc=D.fromJSON(e.schema,t.doc);else if("selection"==r.name)o.selection=Dt.fromJSON(o.doc,t.selection);else if("storedMarks"==r.name)t.storedMarks&&(o.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(n)for(let i in n){let s=n[i],a=s.spec.state;if(s.key==r.name&&a&&a.fromJSON&&Object.prototype.hasOwnProperty.call(t,i))return void(o[r.name]=a.fromJSON.call(s,e,t[i],o))}o[r.name]=r.init(e,o)}})),o}}function en(e,t,n){for(let r in e){let o=e[r];o instanceof Function?o=o.bind(t):"handleDOMEvents"==r&&(o=en(o,t,{})),n[r]=o}return n}class tn{constructor(e){this.spec=e,this.props={},e.props&&en(e.props,this,this.props),this.key=e.key?e.key.key:rn("plugin")}getState(e){return e[this.key]}}const nn=Object.create(null);function rn(e){return e in nn?e+"$"+ ++nn[e]:(nn[e]=0,e+"$")}class on{constructor(e="key"){this.key=rn(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const sn=function(e){for(var t=0;;t++)if(e=e.previousSibling,!e)return t},an=function(e){let t=e.assignedSlot||e.parentNode;return t&&11==t.nodeType?t.host:t};let ln=null;const cn=function(e,t,n){let r=ln||(ln=document.createRange());return r.setEnd(e,null==n?e.nodeValue.length:n),r.setStart(e,t||0),r},un=function(e,t,n,r){return n&&(hn(e,t,n,r,-1)||hn(e,t,n,r,1))},dn=/^(img|br|input|textarea|hr)$/i;function hn(e,t,n,r,o){for(;;){if(e==n&&t==r)return!0;if(t==(o<0?0:pn(e))){let n=e.parentNode;if(!n||1!=n.nodeType||mn(e)||dn.test(e.nodeName)||"false"==e.contentEditable)return!1;t=sn(e)+(o<0?0:1),e=n}else{if(1!=e.nodeType)return!1;if(e=e.childNodes[t+(o<0?-1:0)],"false"==e.contentEditable)return!1;t=o<0?pn(e):0}}}function pn(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function fn(e,t,n){for(let r=0==t,o=t==pn(e);r||o;){if(e==n)return!0;let t=sn(e);if(e=e.parentNode,!e)return!1;r=r&&0==t,o=o&&t==pn(e)}}function mn(e){let t;for(let n=e;n;n=n.parentNode)if(t=n.pmViewDesc)break;return t&&t.node&&t.node.isBlock&&(t.dom==e||t.contentDOM==e)}const gn=function(e){return e.focusNode&&un(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)};function vn(e,t){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=e,n.key=n.code=t,n}function yn(e){let t=e.activeElement;while(t&&t.shadowRoot)t=t.shadowRoot.activeElement;return t}function bn(e,t,n){if(e.caretPositionFromPoint)try{let r=e.caretPositionFromPoint(t,n);if(r)return{node:r.offsetNode,offset:r.offset}}catch(r){}if(e.caretRangeFromPoint){let r=e.caretRangeFromPoint(t,n);if(r)return{node:r.startContainer,offset:r.startOffset}}}const wn="undefined"!=typeof navigator?navigator:null,kn="undefined"!=typeof document?document:null,xn=wn&&wn.userAgent||"",Sn=/Edge\/(\d+)/.exec(xn),Cn=/MSIE \d/.exec(xn),_n=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(xn),On=!!(Cn||_n||Sn),Mn=Cn?document.documentMode:_n?+_n[1]:Sn?+Sn[1]:0,En=!On&&/gecko\/(\d+)/i.test(xn);En&&(/Firefox\/(\d+)/.exec(xn)||[0,0])[1];const Tn=!On&&/Chrome\/(\d+)/.exec(xn),An=!!Tn,Nn=Tn?+Tn[1]:0,Rn=!On&&!!wn&&/Apple Computer/.test(wn.vendor),Dn=Rn&&(/Mobile\/\w+/.test(xn)||!!wn&&wn.maxTouchPoints>2),In=Dn||!!wn&&/Mac/.test(wn.platform),zn=!!wn&&/Win/.test(wn.platform),Pn=/Android \d/.test(xn),$n=!!kn&&"webkitFontSmoothing"in kn.documentElement.style,Fn=$n?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function Bn(e){return{left:0,right:e.documentElement.clientWidth,top:0,bottom:e.documentElement.clientHeight}}function jn(e,t){return"number"==typeof e?e:e[t]}function Ln(e){let t=e.getBoundingClientRect(),n=t.width/e.offsetWidth||1,r=t.height/e.offsetHeight||1;return{left:t.left,right:t.left+e.clientWidth*n,top:t.top,bottom:t.top+e.clientHeight*r}}function Vn(e,t,n){let r=e.someProp("scrollThreshold")||0,o=e.someProp("scrollMargin")||5,i=e.dom.ownerDocument;for(let s=n||e.dom;;s=an(s)){if(!s)break;if(1!=s.nodeType)continue;let e=s,n=e==i.body,a=n?Bn(i):Ln(e),l=0,c=0;if(t.top<a.top+jn(r,"top")?c=-(a.top-t.top+jn(o,"top")):t.bottom>a.bottom-jn(r,"bottom")&&(c=t.bottom-t.top>a.bottom-a.top?t.top+jn(o,"top")-a.top:t.bottom-a.bottom+jn(o,"bottom")),t.left<a.left+jn(r,"left")?l=-(a.left-t.left+jn(o,"left")):t.right>a.right-jn(r,"right")&&(l=t.right-a.right+jn(o,"right")),l||c)if(n)i.defaultView.scrollBy(l,c);else{let n=e.scrollLeft,r=e.scrollTop;c&&(e.scrollTop+=c),l&&(e.scrollLeft+=l);let o=e.scrollLeft-n,i=e.scrollTop-r;t={left:t.left-o,top:t.top-i,right:t.right-o,bottom:t.bottom-i}}if(n||/^(fixed|sticky)$/.test(getComputedStyle(s).position))break}}function qn(e){let t,n,r=e.dom.getBoundingClientRect(),o=Math.max(0,r.top);for(let i=(r.left+r.right)/2,s=o+1;s<Math.min(innerHeight,r.bottom);s+=5){let r=e.root.elementFromPoint(i,s);if(!r||r==e.dom||!e.dom.contains(r))continue;let a=r.getBoundingClientRect();if(a.top>=o-20){t=r,n=a.top;break}}return{refDOM:t,refTop:n,stack:Hn(e.dom)}}function Hn(e){let t=[],n=e.ownerDocument;for(let r=e;r;r=an(r))if(t.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),e==n)break;return t}function Wn({refDOM:e,refTop:t,stack:n}){let r=e?e.getBoundingClientRect().top:0;Jn(n,0==r?0:r-t)}function Jn(e,t){for(let n=0;n<e.length;n++){let{dom:r,top:o,left:i}=e[n];r.scrollTop!=o+t&&(r.scrollTop=o+t),r.scrollLeft!=i&&(r.scrollLeft=i)}}let Un=null;function Kn(e){if(e.setActive)return e.setActive();if(Un)return e.focus(Un);let t=Hn(e);e.focus(null==Un?{get preventScroll(){return Un={preventScroll:!0},!0}}:void 0),Un||(Un=!1,Jn(t,0))}function Gn(e,t){let n,r,o,i,s=2e8,a=0,l=t.top,c=t.top;for(let u=e.firstChild,d=0;u;u=u.nextSibling,d++){let e;if(1==u.nodeType)e=u.getClientRects();else{if(3!=u.nodeType)continue;e=cn(u).getClientRects()}for(let h=0;h<e.length;h++){let p=e[h];if(p.top<=l&&p.bottom>=c){l=Math.max(p.bottom,l),c=Math.min(p.top,c);let e=p.left>t.left?p.left-t.left:p.right<t.left?t.left-p.right:0;if(e<s){n=u,s=e,r=e&&3==n.nodeType?{left:p.right<t.left?p.right:p.left,top:t.top}:t,1==u.nodeType&&e&&(a=d+(t.left>=(p.left+p.right)/2?1:0));continue}}else p.top>t.top&&!o&&p.left<=t.left&&p.right>=t.left&&(o=u,i={left:Math.max(p.left,Math.min(p.right,t.left)),top:p.top});!n&&(t.left>=p.right&&t.top>=p.top||t.left>=p.left&&t.top>=p.bottom)&&(a=d+1)}}return!n&&o&&(n=o,r=i,s=0),n&&3==n.nodeType?Xn(n,r):!n||s&&1==n.nodeType?{node:e,offset:a}:Gn(n,r)}function Xn(e,t){let n=e.nodeValue.length,r=document.createRange();for(let o=0;o<n;o++){r.setEnd(e,o+1),r.setStart(e,o);let n=or(r,1);if(n.top!=n.bottom&&Zn(t,n))return{node:e,offset:o+(t.left>=(n.left+n.right)/2?1:0)}}return{node:e,offset:0}}function Zn(e,t){return e.left>=t.left-1&&e.left<=t.right+1&&e.top>=t.top-1&&e.top<=t.bottom+1}function Yn(e,t){let n=e.parentNode;return n&&/^li$/i.test(n.nodeName)&&t.left<e.getBoundingClientRect().left?n:e}function Qn(e,t,n){let{node:r,offset:o}=Gn(t,n),i=-1;if(1==r.nodeType&&!r.firstChild){let e=r.getBoundingClientRect();i=e.left!=e.right&&n.left>(e.left+e.right)/2?1:-1}return e.docView.posFromDOM(r,o,i)}function er(e,t,n,r){let o=-1;for(let i=t,s=!1;;){if(i==e.dom)break;let t=e.docView.nearestDesc(i,!0);if(!t)return null;if(1==t.dom.nodeType&&(t.node.isBlock&&t.parent&&!s||!t.contentDOM)){let e=t.dom.getBoundingClientRect();if(t.node.isBlock&&t.parent&&!s&&(s=!0,e.left>r.left||e.top>r.top?o=t.posBefore:(e.right<r.left||e.bottom<r.top)&&(o=t.posAfter)),!t.contentDOM&&o<0&&!t.node.isText){let n=t.node.isBlock?r.top<(e.top+e.bottom)/2:r.left<(e.left+e.right)/2;return n?t.posBefore:t.posAfter}}i=t.dom.parentNode}return o>-1?o:e.docView.posFromDOM(t,n,-1)}function tr(e,t,n){let r=e.childNodes.length;if(r&&n.top<n.bottom)for(let o=Math.max(0,Math.min(r-1,Math.floor(r*(t.top-n.top)/(n.bottom-n.top))-2)),i=o;;){let n=e.childNodes[i];if(1==n.nodeType){let e=n.getClientRects();for(let r=0;r<e.length;r++){let o=e[r];if(Zn(t,o))return tr(n,t,o)}}if((i=(i+1)%r)==o)break}return e}function nr(e,t){let n,r=e.dom.ownerDocument,o=0,i=bn(r,t.left,t.top);i&&({node:n,offset:o}=i);let s,a=(e.root.elementFromPoint?e.root:r).elementFromPoint(t.left,t.top);if(!a||!e.dom.contains(1!=a.nodeType?a.parentNode:a)){let n=e.dom.getBoundingClientRect();if(!Zn(t,n))return null;if(a=tr(e.dom,t,n),!a)return null}if(Rn)for(let c=a;n&&c;c=an(c))c.draggable&&(n=void 0);if(a=Yn(a,t),n){if(En&&1==n.nodeType&&(o=Math.min(o,n.childNodes.length),o<n.childNodes.length)){let e,r=n.childNodes[o];"IMG"==r.nodeName&&(e=r.getBoundingClientRect()).right<=t.left&&e.bottom>t.top&&o++}let r;$n&&o&&1==n.nodeType&&1==(r=n.childNodes[o-1]).nodeType&&"false"==r.contentEditable&&r.getBoundingClientRect().top>=t.top&&o--,n==e.dom&&o==n.childNodes.length-1&&1==n.lastChild.nodeType&&t.top>n.lastChild.getBoundingClientRect().bottom?s=e.state.doc.content.size:0!=o&&1==n.nodeType&&"BR"==n.childNodes[o-1].nodeName||(s=er(e,n,o,t))}null==s&&(s=Qn(e,a,t));let l=e.docView.nearestDesc(a,!0);return{pos:s,inside:l?l.posAtStart-l.border:-1}}function rr(e){return e.top<e.bottom||e.left<e.right}function or(e,t){let n=e.getClientRects();if(n.length){let e=n[t<0?0:n.length-1];if(rr(e))return e}return Array.prototype.find.call(n,rr)||e.getBoundingClientRect()}const ir=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function sr(e,t,n){let{node:r,offset:o,atom:i}=e.docView.domFromPos(t,n<0?-1:1),s=$n||En;if(3==r.nodeType){if(!s||!ir.test(r.nodeValue)&&(n<0?o:o!=r.nodeValue.length)){let e=o,t=o,i=n<0?1:-1;return n<0&&!o?(t++,i=-1):n>=0&&o==r.nodeValue.length?(e--,i=1):n<0?e--:t++,ar(or(cn(r,e,t),i),i<0)}{let e=or(cn(r,o,o),n);if(En&&o&&/\s/.test(r.nodeValue[o-1])&&o<r.nodeValue.length){let t=or(cn(r,o-1,o-1),-1);if(t.top==e.top){let n=or(cn(r,o,o+1),-1);if(n.top!=e.top)return ar(n,n.left<t.left)}}return e}}let a=e.state.doc.resolve(t-(i||0));if(!a.parent.inlineContent){if(null==i&&o&&(n<0||o==pn(r))){let e=r.childNodes[o-1];if(1==e.nodeType)return lr(e.getBoundingClientRect(),!1)}if(null==i&&o<pn(r)){let e=r.childNodes[o];if(1==e.nodeType)return lr(e.getBoundingClientRect(),!0)}return lr(r.getBoundingClientRect(),n>=0)}if(null==i&&o&&(n<0||o==pn(r))){let e=r.childNodes[o-1],t=3==e.nodeType?cn(e,pn(e)-(s?0:1)):1!=e.nodeType||"BR"==e.nodeName&&e.nextSibling?null:e;if(t)return ar(or(t,1),!1)}if(null==i&&o<pn(r)){let e=r.childNodes[o];while(e.pmViewDesc&&e.pmViewDesc.ignoreForCoords)e=e.nextSibling;let t=e?3==e.nodeType?cn(e,0,s?0:1):1==e.nodeType?e:null:null;if(t)return ar(or(t,-1),!0)}return ar(or(3==r.nodeType?cn(r):r,-n),n>=0)}function ar(e,t){if(0==e.width)return e;let n=t?e.left:e.right;return{top:e.top,bottom:e.bottom,left:n,right:n}}function lr(e,t){if(0==e.height)return e;let n=t?e.top:e.bottom;return{top:n,bottom:n,left:e.left,right:e.right}}function cr(e,t,n){let r=e.state,o=e.root.activeElement;r!=t&&e.updateState(t),o!=e.dom&&e.focus();try{return n()}finally{r!=t&&e.updateState(r),o!=e.dom&&o&&o.focus()}}function ur(e,t,n){let r=t.selection,o="up"==n?r.$from:r.$to;return cr(e,t,(()=>{let{node:t}=e.docView.domFromPos(o.pos,"up"==n?-1:1);for(;;){let n=e.docView.nearestDesc(t,!0);if(!n)break;if(n.node.isBlock){t=n.contentDOM||n.dom;break}t=n.dom.parentNode}let r=sr(e,o.pos,1);for(let e=t.firstChild;e;e=e.nextSibling){let t;if(1==e.nodeType)t=e.getClientRects();else{if(3!=e.nodeType)continue;t=cn(e,0,e.nodeValue.length).getClientRects()}for(let e=0;e<t.length;e++){let o=t[e];if(o.bottom>o.top+1&&("up"==n?r.top-o.top>2*(o.bottom-r.top):o.bottom-r.bottom>2*(r.bottom-o.top)))return!1}}return!0}))}const dr=/[\u0590-\u08ac]/;function hr(e,t,n){let{$head:r}=t.selection;if(!r.parent.isTextblock)return!1;let o=r.parentOffset,i=!o,s=o==r.parent.content.size,a=e.domSelection();return dr.test(r.parent.textContent)&&a.modify?cr(e,t,(()=>{let{focusNode:t,focusOffset:o,anchorNode:i,anchorOffset:s}=e.domSelectionRange(),l=a.caretBidiLevel;a.modify("move",n,"character");let c=r.depth?e.docView.domAfterPos(r.before()):e.dom,{focusNode:u,focusOffset:d}=e.domSelectionRange(),h=u&&!c.contains(1==u.nodeType?u:u.parentNode)||t==u&&o==d;try{a.collapse(i,s),t&&(t!=i||o!=s)&&a.extend&&a.extend(t,o)}catch(p){}return null!=l&&(a.caretBidiLevel=l),h})):"left"==n||"backward"==n?i:s}let pr=null,fr=null,mr=!1;function gr(e,t,n){return pr==t&&fr==n?mr:(pr=t,fr=n,mr="up"==n||"down"==n?ur(e,t,n):hr(e,t,n))}const vr=0,yr=1,br=2,wr=3;class kr{constructor(e,t,n,r){this.parent=e,this.children=t,this.dom=n,this.contentDOM=r,this.dirty=vr,n.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,t,n){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let t=0;t<this.children.length;t++)e+=this.children[t].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let t=0,n=this.posAtStart;;t++){let r=this.children[t];if(r==e)return n;n+=r.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,t,n){if(this.contentDOM&&this.contentDOM.contains(1==e.nodeType?e:e.parentNode)){if(n<0){let n,r;if(e==this.contentDOM)n=e.childNodes[t-1];else{while(e.parentNode!=this.contentDOM)e=e.parentNode;n=e.previousSibling}while(n&&(!(r=n.pmViewDesc)||r.parent!=this))n=n.previousSibling;return n?this.posBeforeChild(r)+r.size:this.posAtStart}{let n,r;if(e==this.contentDOM)n=e.childNodes[t];else{while(e.parentNode!=this.contentDOM)e=e.parentNode;n=e.nextSibling}while(n&&(!(r=n.pmViewDesc)||r.parent!=this))n=n.nextSibling;return n?this.posBeforeChild(r):this.posAtEnd}}let r;if(e==this.dom&&this.contentDOM)r=t>sn(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))r=2&e.compareDocumentPosition(this.contentDOM);else if(this.dom.firstChild){if(0==t)for(let t=e;;t=t.parentNode){if(t==this.dom){r=!1;break}if(t.previousSibling)break}if(null==r&&t==e.childNodes.length)for(let t=e;;t=t.parentNode){if(t==this.dom){r=!0;break}if(t.nextSibling)break}}return(null==r?n>0:r)?this.posAtEnd:this.posAtStart}nearestDesc(e,t=!1){for(let n=!0,r=e;r;r=r.parentNode){let o,i=this.getDesc(r);if(i&&(!t||i.node)){if(!n||!(o=i.nodeDOM)||(1==o.nodeType?o.contains(1==e.nodeType?e:e.parentNode):o==e))return i;n=!1}}}getDesc(e){let t=e.pmViewDesc;for(let n=t;n;n=n.parent)if(n==this)return t}posFromDOM(e,t,n){for(let r=e;r;r=r.parentNode){let o=this.getDesc(r);if(o)return o.localPosFromDOM(e,t,n)}return-1}descAt(e){for(let t=0,n=0;t<this.children.length;t++){let r=this.children[t],o=n+r.size;if(n==e&&o!=n){while(!r.border&&r.children.length)r=r.children[0];return r}if(e<o)return r.descAt(e-n-r.border);n=o}}domFromPos(e,t){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let n=0,r=0;for(let o=0;n<this.children.length;n++){let t=this.children[n],i=o+t.size;if(i>e||t instanceof Er){r=e-o;break}o=i}if(r)return this.children[n].domFromPos(r-this.children[n].border,t);for(let o;n&&!(o=this.children[n-1]).size&&o instanceof xr&&o.side>=0;n--);if(t<=0){let e,r=!0;for(;;n--,r=!1)if(e=n?this.children[n-1]:null,!e||e.dom.parentNode==this.contentDOM)break;return e&&t&&r&&!e.border&&!e.domAtom?e.domFromPos(e.size,t):{node:this.contentDOM,offset:e?sn(e.dom)+1:0}}{let e,r=!0;for(;;n++,r=!1)if(e=n<this.children.length?this.children[n]:null,!e||e.dom.parentNode==this.contentDOM)break;return e&&r&&!e.border&&!e.domAtom?e.domFromPos(0,t):{node:this.contentDOM,offset:e?sn(e.dom):this.contentDOM.childNodes.length}}}parseRange(e,t,n=0){if(0==this.children.length)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let r=-1,o=-1;for(let i=n,s=0;;s++){let n=this.children[s],a=i+n.size;if(-1==r&&e<=a){let o=i+n.border;if(e>=o&&t<=a-n.border&&n.node&&n.contentDOM&&this.contentDOM.contains(n.contentDOM))return n.parseRange(e,t,o);e=i;for(let t=s;t>0;t--){let n=this.children[t-1];if(n.size&&n.dom.parentNode==this.contentDOM&&!n.emptyChildAt(1)){r=sn(n.dom)+1;break}e-=n.size}-1==r&&(r=0)}if(r>-1&&(a>t||s==this.children.length-1)){t=a;for(let e=s+1;e<this.children.length;e++){let n=this.children[e];if(n.size&&n.dom.parentNode==this.contentDOM&&!n.emptyChildAt(-1)){o=sn(n.dom);break}t+=n.size}-1==o&&(o=this.contentDOM.childNodes.length);break}i=a}return{node:this.contentDOM,from:e,to:t,fromOffset:r,toOffset:o}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let t=this.children[e<0?0:this.children.length-1];return 0==t.size||t.emptyChildAt(e)}domAfterPos(e){let{node:t,offset:n}=this.domFromPos(e,0);if(1!=t.nodeType||n==t.childNodes.length)throw new RangeError("No node after pos "+e);return t.childNodes[n]}setSelection(e,t,n,r=!1){let o=Math.min(e,t),i=Math.max(e,t);for(let h=0,p=0;h<this.children.length;h++){let s=this.children[h],a=p+s.size;if(o>p&&i<a)return s.setSelection(e-p-s.border,t-p-s.border,n,r);p=a}let s=this.domFromPos(e,e?-1:1),a=t==e?s:this.domFromPos(t,t?-1:1),l=n.getSelection(),c=!1;if((En||Rn)&&e==t){let{node:e,offset:t}=s;if(3==e.nodeType){if(c=!(!t||"\n"!=e.nodeValue[t-1]),c&&t==e.nodeValue.length)for(let n,r=e;r;r=r.parentNode){if(n=r.nextSibling){"BR"==n.nodeName&&(s=a={node:n.parentNode,offset:sn(n)+1});break}let e=r.pmViewDesc;if(e&&e.node&&e.node.isBlock)break}}else{let n=e.childNodes[t-1];c=n&&("BR"==n.nodeName||"false"==n.contentEditable)}}if(En&&l.focusNode&&l.focusNode!=a.node&&1==l.focusNode.nodeType){let e=l.focusNode.childNodes[l.focusOffset];e&&"false"==e.contentEditable&&(r=!0)}if(!(r||c&&Rn)&&un(s.node,s.offset,l.anchorNode,l.anchorOffset)&&un(a.node,a.offset,l.focusNode,l.focusOffset))return;let u=!1;if((l.extend||e==t)&&!c){l.collapse(s.node,s.offset);try{e!=t&&l.extend(a.node,a.offset),u=!0}catch(d){}}if(!u){if(e>t){let e=s;s=a,a=e}let n=document.createRange();n.setEnd(a.node,a.offset),n.setStart(s.node,s.offset),l.removeAllRanges(),l.addRange(n)}}ignoreMutation(e){return!this.contentDOM&&"selection"!=e.type}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,t){for(let n=0,r=0;r<this.children.length;r++){let o=this.children[r],i=n+o.size;if(n==i?e<=i&&t>=n:e<i&&t>n){let r=n+o.border,s=i-o.border;if(e>=r&&t<=s)return this.dirty=e==n||t==i?br:yr,void(e!=r||t!=s||!o.contentLost&&o.dom.parentNode==this.contentDOM?o.markDirty(e-r,t-r):o.dirty=wr);o.dirty=o.dom!=o.contentDOM||o.dom.parentNode!=this.contentDOM||o.children.length?wr:br}n=i}this.dirty=br}markParentsDirty(){let e=1;for(let t=this.parent;t;t=t.parent,e++){let n=1==e?br:yr;t.dirty<n&&(t.dirty=n)}}get domAtom(){return!1}get ignoreForCoords(){return!1}}class xr extends kr{constructor(e,t,n,r){let o,i=t.type.toDOM;if("function"==typeof i&&(i=i(n,(()=>o?o.parent?o.parent.posBeforeChild(o):void 0:r))),!t.type.spec.raw){if(1!=i.nodeType){let e=document.createElement("span");e.appendChild(i),i=e}i.contentEditable="false",i.classList.add("ProseMirror-widget")}super(e,[],i,null),this.widget=t,this.widget=t,o=this}matchesWidget(e){return this.dirty==vr&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let t=this.widget.spec.stopEvent;return!!t&&t(e)}ignoreMutation(e){return"selection"!=e.type||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class Sr extends kr{constructor(e,t,n,r){super(e,[],t,null),this.textDOM=n,this.text=r}get size(){return this.text.length}localPosFromDOM(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return"characterData"===e.type&&e.target.nodeValue==e.oldValue}}class Cr extends kr{constructor(e,t,n,r){super(e,[],n,r),this.mark=t}static create(e,t,n,r){let o=r.nodeViews[t.type.name],i=o&&o(t,r,n);return i&&i.dom||(i=we.renderSpec(document,t.type.spec.toDOM(t,n))),new Cr(e,t,i.dom,i.contentDOM||i.dom)}parseRule(){return this.dirty&wr||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=wr&&this.mark.eq(e)}markDirty(e,t){if(super.markDirty(e,t),this.dirty!=vr){let e=this.parent;while(!e.node)e=e.parent;e.dirty<this.dirty&&(e.dirty=this.dirty),this.dirty=vr}}slice(e,t,n){let r=Cr.create(this.parent,this.mark,!0,n),o=this.children,i=this.size;t<i&&(o=Jr(o,t,i,n)),e>0&&(o=Jr(o,0,e,n));for(let s=0;s<o.length;s++)o[s].parent=r;return r.children=o,r}}class _r extends kr{constructor(e,t,n,r,o,i,s,a,l){super(e,[],o,i),this.node=t,this.outerDeco=n,this.innerDeco=r,this.nodeDOM=s}static create(e,t,n,r,o,i){let s,a=o.nodeViews[t.type.name],l=a&&a(t,o,(()=>s?s.parent?s.parent.posBeforeChild(s):void 0:i),n,r),c=l&&l.dom,u=l&&l.contentDOM;if(t.isText)if(c){if(3!=c.nodeType)throw new RangeError("Text must be rendered as a DOM text node")}else c=document.createTextNode(t.text);else c||({dom:c,contentDOM:u}=we.renderSpec(document,t.type.spec.toDOM(t)));u||t.isText||"BR"==c.nodeName||(c.hasAttribute("contenteditable")||(c.contentEditable="false"),t.type.spec.draggable&&(c.draggable=!0));let d=c;return c=Pr(c,n,t),l?s=new Tr(e,t,n,r,c,u||null,d,l,o,i+1):t.isText?new Mr(e,t,n,r,c,d,o):new _r(e,t,n,r,c,u||null,d,o,i+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if("pre"==this.node.type.whitespace&&(e.preserveWhitespace="full"),this.contentDOM)if(this.contentLost){for(let t=this.children.length-1;t>=0;t--){let n=this.children[t];if(this.dom.contains(n.dom.parentNode)){e.contentElement=n.dom.parentNode;break}}e.contentElement||(e.getContent=()=>l.empty)}else e.contentElement=this.contentDOM;else e.getContent=()=>this.node.content;return e}matchesNode(e,t,n){return this.dirty==vr&&e.eq(this.node)&&$r(t,this.outerDeco)&&n.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,t){let n=this.node.inlineContent,r=t,o=e.composing?this.localCompositionInfo(e,t):null,i=o&&o.pos>-1?o:null,s=o&&o.pos<0,a=new Br(this,i&&i.node,e);Vr(this.node,this.innerDeco,((t,o,i)=>{t.spec.marks?a.syncToMarks(t.spec.marks,n,e):t.type.side>=0&&!i&&a.syncToMarks(o==this.node.childCount?h.none:this.node.child(o).marks,n,e),a.placeWidget(t,e,r)}),((t,i,l,c)=>{let u;a.syncToMarks(t.marks,n,e),a.findNodeMatch(t,i,l,c)||s&&e.state.selection.from>r&&e.state.selection.to<r+t.nodeSize&&(u=a.findIndexWithChild(o.node))>-1&&a.updateNodeAt(t,i,l,u,e)||a.updateNextNode(t,i,l,e,c,r)||a.addNode(t,i,l,e,r),r+=t.nodeSize})),a.syncToMarks([],n,e),this.node.isTextblock&&a.addTextblockHacks(),a.destroyRest(),(a.changed||this.dirty==br)&&(i&&this.protectLocalComposition(e,i),Ar(this.contentDOM,this.children,e),Dn&&qr(this.dom))}localCompositionInfo(e,t){let{from:n,to:r}=e.state.selection;if(!(e.state.selection instanceof $t)||n<t||r>t+this.node.content.size)return null;let o=e.domSelectionRange(),i=Hr(o.focusNode,o.focusOffset);if(!i||!this.dom.contains(i.parentNode))return null;if(this.node.inlineContent){let e=i.nodeValue,o=Wr(this.node.content,e,n-t,r-t);return o<0?null:{node:i,pos:o,text:e}}return{node:i,pos:-1,text:""}}protectLocalComposition(e,{node:t,pos:n,text:r}){if(this.getDesc(t))return;let o=t;for(;;o=o.parentNode){if(o.parentNode==this.contentDOM)break;while(o.previousSibling)o.parentNode.removeChild(o.previousSibling);while(o.nextSibling)o.parentNode.removeChild(o.nextSibling);o.pmViewDesc&&(o.pmViewDesc=void 0)}let i=new Sr(this,o,t,r);e.input.compositionNodes.push(i),this.children=Jr(this.children,n,n+r.length,e,i)}update(e,t,n,r){return!(this.dirty==wr||!e.sameMarkup(this.node))&&(this.updateInner(e,t,n,r),!0)}updateInner(e,t,n,r){this.updateOuterDeco(t),this.node=e,this.innerDeco=n,this.contentDOM&&this.updateChildren(r,this.posAtStart),this.dirty=vr}updateOuterDeco(e){if($r(e,this.outerDeco))return;let t=1!=this.nodeDOM.nodeType,n=this.dom;this.dom=Ir(this.dom,this.nodeDOM,Dr(this.outerDeco,this.node,t),Dr(e,this.node,t)),this.dom!=n&&(n.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){1==this.nodeDOM.nodeType&&this.nodeDOM.classList.add("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||(this.dom.draggable=!0)}deselectNode(){1==this.nodeDOM.nodeType&&this.nodeDOM.classList.remove("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||this.dom.removeAttribute("draggable")}get domAtom(){return this.node.isAtom}}function Or(e,t,n,r,o){Pr(r,t,e);let i=new _r(void 0,e,t,n,r,r,r,o,0);return i.contentDOM&&i.updateChildren(o,0),i}class Mr extends _r{constructor(e,t,n,r,o,i,s){super(e,t,n,r,o,null,i,s,0)}parseRule(){let e=this.nodeDOM.parentNode;while(e&&e!=this.dom&&!e.pmIsDeco)e=e.parentNode;return{skip:e||!0}}update(e,t,n,r){return!(this.dirty==wr||this.dirty!=vr&&!this.inParent()||!e.sameMarkup(this.node))&&(this.updateOuterDeco(t),this.dirty==vr&&e.text==this.node.text||e.text==this.nodeDOM.nodeValue||(this.nodeDOM.nodeValue=e.text,r.trackWrites==this.nodeDOM&&(r.trackWrites=null)),this.node=e,this.dirty=vr,!0)}inParent(){let e=this.parent.contentDOM;for(let t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,t,n){return e==this.nodeDOM?this.posAtStart+Math.min(t,this.node.text.length):super.localPosFromDOM(e,t,n)}ignoreMutation(e){return"characterData"!=e.type&&"selection"!=e.type}slice(e,t,n){let r=this.node.cut(e,t),o=document.createTextNode(r.text);return new Mr(this.parent,r,this.outerDeco,this.innerDeco,o,o,n)}markDirty(e,t){super.markDirty(e,t),this.dom==this.nodeDOM||0!=e&&t!=this.nodeDOM.nodeValue.length||(this.dirty=wr)}get domAtom(){return!1}}class Er extends kr{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==vr&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return"IMG"==this.dom.nodeName}}class Tr extends _r{constructor(e,t,n,r,o,i,s,a,l,c){super(e,t,n,r,o,i,s,l,c),this.spec=a}update(e,t,n,r){if(this.dirty==wr)return!1;if(this.spec.update){let o=this.spec.update(e,t,n);return o&&this.updateInner(e,t,n,r),o}return!(!this.contentDOM&&!e.isLeaf)&&super.update(e,t,n,r)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,t,n,r){this.spec.setSelection?this.spec.setSelection(e,t,n):super.setSelection(e,t,n,r)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return!!this.spec.stopEvent&&this.spec.stopEvent(e)}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function Ar(e,t,n){let r=e.firstChild,o=!1;for(let i=0;i<t.length;i++){let s=t[i],a=s.dom;if(a.parentNode==e){while(a!=r)r=Fr(r),o=!0;r=r.nextSibling}else o=!0,e.insertBefore(a,r);if(s instanceof Cr){let t=r?r.previousSibling:e.lastChild;Ar(s.contentDOM,s.children,n),r=t?t.nextSibling:e.firstChild}}while(r)r=Fr(r),o=!0;o&&n.trackWrites==e&&(n.trackWrites=null)}const Nr=function(e){e&&(this.nodeName=e)};Nr.prototype=Object.create(null);const Rr=[new Nr];function Dr(e,t,n){if(0==e.length)return Rr;let r=n?Rr[0]:new Nr,o=[r];for(let i=0;i<e.length;i++){let s=e[i].type.attrs;if(s){s.nodeName&&o.push(r=new Nr(s.nodeName));for(let e in s){let i=s[e];null!=i&&(n&&1==o.length&&o.push(r=new Nr(t.isInline?"span":"div")),"class"==e?r.class=(r.class?r.class+" ":"")+i:"style"==e?r.style=(r.style?r.style+";":"")+i:"nodeName"!=e&&(r[e]=i))}}}return o}function Ir(e,t,n,r){if(n==Rr&&r==Rr)return t;let o=t;for(let i=0;i<r.length;i++){let t=r[i],s=n[i];if(i){let n;s&&s.nodeName==t.nodeName&&o!=e&&(n=o.parentNode)&&n.nodeName.toLowerCase()==t.nodeName||(n=document.createElement(t.nodeName),n.pmIsDeco=!0,n.appendChild(o),s=Rr[0]),o=n}zr(o,s||Rr[0],t)}return o}function zr(e,t,n){for(let r in t)"class"==r||"style"==r||"nodeName"==r||r in n||e.removeAttribute(r);for(let r in n)"class"!=r&&"style"!=r&&"nodeName"!=r&&n[r]!=t[r]&&e.setAttribute(r,n[r]);if(t.class!=n.class){let r=t.class?t.class.split(" ").filter(Boolean):[],o=n.class?n.class.split(" ").filter(Boolean):[];for(let t=0;t<r.length;t++)-1==o.indexOf(r[t])&&e.classList.remove(r[t]);for(let t=0;t<o.length;t++)-1==r.indexOf(o[t])&&e.classList.add(o[t]);0==e.classList.length&&e.removeAttribute("class")}if(t.style!=n.style){if(t.style){let n,r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g;while(n=r.exec(t.style))e.style.removeProperty(n[1])}n.style&&(e.style.cssText+=n.style)}}function Pr(e,t,n){return Ir(e,e,Rr,Dr(t,n,1!=e.nodeType))}function $r(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].type.eq(t[n].type))return!1;return!0}function Fr(e){let t=e.nextSibling;return e.parentNode.removeChild(e),t}class Br{constructor(e,t,n){this.lock=t,this.view=n,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=jr(e.node.content,e)}destroyBetween(e,t){if(e!=t){for(let n=e;n<t;n++)this.top.children[n].destroy();this.top.children.splice(e,t-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,t,n){let r=0,o=this.stack.length>>1,i=Math.min(o,e.length);while(r<i&&(r==o-1?this.top:this.stack[r+1<<1]).matchesMark(e[r])&&!1!==e[r].type.spec.spanning)r++;while(r<o)this.destroyRest(),this.top.dirty=vr,this.index=this.stack.pop(),this.top=this.stack.pop(),o--;while(o<e.length){this.stack.push(this.top,this.index+1);let r=-1;for(let t=this.index;t<Math.min(this.index+3,this.top.children.length);t++){let n=this.top.children[t];if(n.matchesMark(e[o])&&!this.isLocked(n.dom)){r=t;break}}if(r>-1)r>this.index&&(this.changed=!0,this.destroyBetween(this.index,r)),this.top=this.top.children[this.index];else{let r=Cr.create(this.top,e[o],t,n);this.top.children.splice(this.index,0,r),this.top=r,this.changed=!0}this.index=0,o++}}findNodeMatch(e,t,n,r){let o,i=-1;if(r>=this.preMatch.index&&(o=this.preMatch.matches[r-this.preMatch.index]).parent==this.top&&o.matchesNode(e,t,n))i=this.top.children.indexOf(o,this.index);else for(let s=this.index,a=Math.min(this.top.children.length,s+5);s<a;s++){let r=this.top.children[s];if(r.matchesNode(e,t,n)&&!this.preMatch.matched.has(r)){i=s;break}}return!(i<0)&&(this.destroyBetween(this.index,i),this.index++,!0)}updateNodeAt(e,t,n,r,o){let i=this.top.children[r];return i.dirty==wr&&i.dom==i.contentDOM&&(i.dirty=br),!!i.update(e,t,n,o)&&(this.destroyBetween(this.index,r),this.index++,!0)}findIndexWithChild(e){for(;;){let t=e.parentNode;if(!t)return-1;if(t==this.top.contentDOM){let t=e.pmViewDesc;if(t)for(let e=this.index;e<this.top.children.length;e++)if(this.top.children[e]==t)return e;return-1}e=t}}updateNextNode(e,t,n,r,o,i){for(let s=this.index;s<this.top.children.length;s++){let a=this.top.children[s];if(a instanceof _r){let l=this.preMatch.matched.get(a);if(null!=l&&l!=o)return!1;let c,u=a.dom,d=this.isLocked(u)&&!(e.isText&&a.node&&a.node.isText&&a.nodeDOM.nodeValue==e.text&&a.dirty!=wr&&$r(t,a.outerDeco));if(!d&&a.update(e,t,n,r))return this.destroyBetween(this.index,s),a.dom!=u&&(this.changed=!0),this.index++,!0;if(!d&&(c=this.recreateWrapper(a,e,t,n,r,i)))return this.top.children[this.index]=c,c.contentDOM&&(c.dirty=br,c.updateChildren(r,i+1),c.dirty=vr),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,t,n,r,o,i){if(e.dirty||t.isAtom||!e.children.length||!e.node.content.eq(t.content))return null;let s=_r.create(this.top,t,n,r,o,i);if(s.contentDOM){s.children=e.children,e.children=[];for(let e of s.children)e.parent=s}return e.destroy(),s}addNode(e,t,n,r,o){let i=_r.create(this.top,e,t,n,r,o);i.contentDOM&&i.updateChildren(r,o+1),this.top.children.splice(this.index++,0,i),this.changed=!0}placeWidget(e,t,n){let r=this.index<this.top.children.length?this.top.children[this.index]:null;if(!r||!r.matchesWidget(e)||e!=r.widget&&r.widget.type.toDOM.parentNode){let r=new xr(this.top,e,t,n);this.top.children.splice(this.index++,0,r),this.changed=!0}else this.index++}addTextblockHacks(){let e=this.top.children[this.index-1],t=this.top;while(e instanceof Cr)t=e,e=t.children[t.children.length-1];(!e||!(e instanceof Mr)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((Rn||An)&&e&&"false"==e.dom.contentEditable&&this.addHackNode("IMG",t),this.addHackNode("BR",this.top))}addHackNode(e,t){if(t==this.top&&this.index<t.children.length&&t.children[this.index].matchesHack(e))this.index++;else{let n=document.createElement(e);"IMG"==e&&(n.className="ProseMirror-separator",n.alt=""),"BR"==e&&(n.className="ProseMirror-trailingBreak");let r=new Er(this.top,[],n,null);t!=this.top?t.children.push(r):t.children.splice(this.index++,0,r),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||1==e.nodeType&&e.contains(this.lock.parentNode))}}function jr(e,t){let n=t,r=n.children.length,o=e.childCount,i=new Map,s=[];e:while(o>0){let a;for(;;)if(r){let e=n.children[r-1];if(!(e instanceof Cr)){a=e,r--;break}n=e,r=e.children.length}else{if(n==t)break e;r=n.parent.children.indexOf(n),n=n.parent}let l=a.node;if(l){if(l!=e.child(o-1))break;--o,i.set(a,o),s.push(a)}}return{index:o,matched:i,matches:s.reverse()}}function Lr(e,t){return e.type.side-t.type.side}function Vr(e,t,n,r){let o=t.locals(e),i=0;if(0==o.length){for(let n=0;n<e.childCount;n++){let s=e.child(n);r(s,o,t.forChild(i,s),n),i+=s.nodeSize}return}let s=0,a=[],l=null;for(let c=0;;){let u,d,h,p;while(s<o.length&&o[s].to==i){let e=o[s++];e.widget&&(u?(d||(d=[u])).push(e):u=e)}if(u)if(d){d.sort(Lr);for(let e=0;e<d.length;e++)n(d[e],c,!!l)}else n(u,c,!!l);if(l)p=-1,h=l,l=null;else{if(!(c<e.childCount))break;p=c,h=e.child(c++)}for(let e=0;e<a.length;e++)a[e].to<=i&&a.splice(e--,1);while(s<o.length&&o[s].from<=i&&o[s].to>i)a.push(o[s++]);let f=i+h.nodeSize;if(h.isText){let e=f;s<o.length&&o[s].from<e&&(e=o[s].from);for(let t=0;t<a.length;t++)a[t].to<e&&(e=a[t].to);e<f&&(l=h.cut(e-i),h=h.cut(0,e-i),f=e,p=-1)}let m=h.isInline&&!h.isLeaf?a.filter((e=>!e.inline)):a.slice();r(h,m,t.forChild(i,h),p),i=f}}function qr(e){if("UL"==e.nodeName||"OL"==e.nodeName){let t=e.style.cssText;e.style.cssText=t+"; list-style: square !important",window.getComputedStyle(e).listStyle,e.style.cssText=t}}function Hr(e,t){for(;;){if(3==e.nodeType)return e;if(1==e.nodeType&&t>0){if(e.childNodes.length>t&&3==e.childNodes[t].nodeType)return e.childNodes[t];e=e.childNodes[t-1],t=pn(e)}else{if(!(1==e.nodeType&&t<e.childNodes.length))return null;e=e.childNodes[t],t=0}}}function Wr(e,t,n,r){for(let o=0,i=0;o<e.childCount&&i<=r;){let s=e.child(o++),a=i;if(i+=s.nodeSize,!s.isText)continue;let l=s.text;while(o<e.childCount){let t=e.child(o++);if(i+=t.nodeSize,!t.isText)break;l+=t.text}if(i>=n){if(i>=r&&l.slice(r-t.length-a,r-a)==t)return r-t.length;let e=a<r?l.lastIndexOf(t,r-a-1):-1;if(e>=0&&e+t.length+a>=n)return a+e;if(n==r&&l.length>=r+t.length-a&&l.slice(r-a,r-a+t.length)==t)return r}}return-1}function Jr(e,t,n,r,o){let i=[];for(let s=0,a=0;s<e.length;s++){let l=e[s],c=a,u=a+=l.size;c>=n||u<=t?i.push(l):(c<t&&i.push(l.slice(0,t-c,r)),o&&(i.push(o),o=void 0),u>n&&i.push(l.slice(n-c,l.size,r)))}return i}function Ur(e,t=null){let n=e.domSelectionRange(),r=e.state.doc;if(!n.focusNode)return null;let o=e.docView.nearestDesc(n.focusNode),i=o&&0==o.size,s=e.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(s<0)return null;let a,l,c=r.resolve(s);if(gn(n)){a=c;while(o&&!o.node)o=o.parent;let e=o.node;if(o&&e.isAtom&&Bt.isSelectable(e)&&o.parent&&(!e.isInline||!fn(n.focusNode,n.focusOffset,o.dom))){let e=o.posBefore;l=new Bt(s==e?c:r.resolve(e))}}else{let t=e.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(t<0)return null;a=r.resolve(t)}if(!l){let n="pointer"==t||e.state.selection.head<c.pos&&!i?1:-1;l=oo(e,a,c,n)}return l}function Kr(e){return e.editable?e.hasFocus():so(e)&&document.activeElement&&document.activeElement.contains(e.dom)}function Gr(e,t=!1){let n=e.state.selection;if(no(e,n),Kr(e)){if(!t&&e.input.mouseDown&&e.input.mouseDown.allowDefault&&An){let t=e.domSelectionRange(),n=e.domObserver.currentSelection;if(t.anchorNode&&n.anchorNode&&un(t.anchorNode,t.anchorOffset,n.anchorNode,n.anchorOffset))return e.input.mouseDown.delayedSelectionSync=!0,void e.domObserver.setCurSelection()}if(e.domObserver.disconnectSelection(),e.cursorWrapper)to(e);else{let r,o,{anchor:i,head:s}=n;!Xr||n instanceof $t||(n.$from.parent.inlineContent||(r=Zr(e,n.from)),n.empty||n.$from.parent.inlineContent||(o=Zr(e,n.to))),e.docView.setSelection(i,s,e.root,t),Xr&&(r&&Qr(r),o&&Qr(o)),n.visible?e.dom.classList.remove("ProseMirror-hideselection"):(e.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&eo(e))}e.domObserver.setCurSelection(),e.domObserver.connectSelection()}}const Xr=Rn||An&&Nn<63;function Zr(e,t){let{node:n,offset:r}=e.docView.domFromPos(t,0),o=r<n.childNodes.length?n.childNodes[r]:null,i=r?n.childNodes[r-1]:null;if(Rn&&o&&"false"==o.contentEditable)return Yr(o);if((!o||"false"==o.contentEditable)&&(!i||"false"==i.contentEditable)){if(o)return Yr(o);if(i)return Yr(i)}}function Yr(e){return e.contentEditable="true",Rn&&e.draggable&&(e.draggable=!1,e.wasDraggable=!0),e}function Qr(e){e.contentEditable="false",e.wasDraggable&&(e.draggable=!0,e.wasDraggable=null)}function eo(e){let t=e.dom.ownerDocument;t.removeEventListener("selectionchange",e.input.hideSelectionGuard);let n=e.domSelectionRange(),r=n.anchorNode,o=n.anchorOffset;t.addEventListener("selectionchange",e.input.hideSelectionGuard=()=>{n.anchorNode==r&&n.anchorOffset==o||(t.removeEventListener("selectionchange",e.input.hideSelectionGuard),setTimeout((()=>{Kr(e)&&!e.state.selection.visible||e.dom.classList.remove("ProseMirror-hideselection")}),20))})}function to(e){let t=e.domSelection(),n=document.createRange(),r=e.cursorWrapper.dom,o="IMG"==r.nodeName;o?n.setEnd(r.parentNode,sn(r)+1):n.setEnd(r,0),n.collapse(!1),t.removeAllRanges(),t.addRange(n),!o&&!e.state.selection.visible&&On&&Mn<=11&&(r.disabled=!0,r.disabled=!1)}function no(e,t){if(t instanceof Bt){let n=e.docView.descAt(t.from);n!=e.lastSelectedViewDesc&&(ro(e),n&&n.selectNode(),e.lastSelectedViewDesc=n)}else ro(e)}function ro(e){e.lastSelectedViewDesc&&(e.lastSelectedViewDesc.parent&&e.lastSelectedViewDesc.deselectNode(),e.lastSelectedViewDesc=void 0)}function oo(e,t,n,r){return e.someProp("createSelectionBetween",(r=>r(e,t,n)))||$t.between(t,n,r)}function io(e){return!(e.editable&&!e.hasFocus())&&so(e)}function so(e){let t=e.domSelectionRange();if(!t.anchorNode)return!1;try{return e.dom.contains(3==t.anchorNode.nodeType?t.anchorNode.parentNode:t.anchorNode)&&(e.editable||e.dom.contains(3==t.focusNode.nodeType?t.focusNode.parentNode:t.focusNode))}catch(n){return!1}}function ao(e){let t=e.docView.domFromPos(e.state.selection.anchor,0),n=e.domSelectionRange();return un(t.node,t.offset,n.anchorNode,n.anchorOffset)}function lo(e,t){let{$anchor:n,$head:r}=e.selection,o=t>0?n.max(r):n.min(r),i=o.parent.inlineContent?o.depth?e.doc.resolve(t>0?o.after():o.before()):null:o;return i&&Dt.findFrom(i,t)}function co(e,t){return e.dispatch(e.state.tr.setSelection(t).scrollIntoView()),!0}function uo(e,t,n){let r=e.state.selection;if(!(r instanceof $t)){if(r instanceof Bt&&r.node.isInline)return co(e,new $t(t>0?r.$to:r.$from));{let n=lo(e.state,t);return!!n&&co(e,n)}}if(!r.empty||n.indexOf("s")>-1)return!1;if(e.endOfTextblock(t>0?"forward":"backward")){let n=lo(e.state,t);return!!(n&&n instanceof Bt)&&co(e,n)}if(!(In&&n.indexOf("m")>-1)){let n,o=r.$head,i=o.textOffset?null:t<0?o.nodeBefore:o.nodeAfter;if(!i||i.isText)return!1;let s=t<0?o.pos-i.nodeSize:o.pos;return!!(i.isAtom||(n=e.docView.descAt(s))&&!n.contentDOM)&&(Bt.isSelectable(i)?co(e,new Bt(t<0?e.state.doc.resolve(o.pos-i.nodeSize):o)):!!$n&&co(e,new $t(e.state.doc.resolve(t<0?s:s+i.nodeSize))))}}function ho(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function po(e,t){if("false"==e.contentEditable)return!0;let n=e.pmViewDesc;return n&&0==n.size&&(t<0||e.nextSibling||"BR"!=e.nodeName)}function fo(e,t){return t<0?mo(e):go(e)}function mo(e){let t=e.domSelectionRange(),n=t.focusNode,r=t.focusOffset;if(!n)return;let o,i,s=!1;for(En&&1==n.nodeType&&r<ho(n)&&po(n.childNodes[r],-1)&&(s=!0);;)if(r>0){if(1!=n.nodeType)break;{let e=n.childNodes[r-1];if(po(e,-1))o=n,i=--r;else{if(3!=e.nodeType)break;n=e,r=n.nodeValue.length}}}else{if(vo(n))break;{let t=n.previousSibling;while(t&&po(t,-1))o=n.parentNode,i=sn(t),t=t.previousSibling;if(t)n=t,r=ho(n);else{if(n=n.parentNode,n==e.dom)break;r=0}}}s?wo(e,n,r):o&&wo(e,o,i)}function go(e){let t=e.domSelectionRange(),n=t.focusNode,r=t.focusOffset;if(!n)return;let o,i,s=ho(n);for(;;)if(r<s){if(1!=n.nodeType)break;let e=n.childNodes[r];if(!po(e,1))break;o=n,i=++r}else{if(vo(n))break;{let t=n.nextSibling;while(t&&po(t,1))o=t.parentNode,i=sn(t)+1,t=t.nextSibling;if(t)n=t,r=0,s=ho(n);else{if(n=n.parentNode,n==e.dom)break;r=s=0}}}o&&wo(e,o,i)}function vo(e){let t=e.pmViewDesc;return t&&t.node&&t.node.isBlock}function yo(e,t){while(e&&t==e.childNodes.length&&!mn(e))t=sn(e)+1,e=e.parentNode;while(e&&t<e.childNodes.length){let n=e.childNodes[t];if(3==n.nodeType)return n;if(1==n.nodeType&&"false"==n.contentEditable)break;e=n,t=0}}function bo(e,t){while(e&&!t&&!mn(e))t=sn(e),e=e.parentNode;while(e&&t){let n=e.childNodes[t-1];if(3==n.nodeType)return n;if(1==n.nodeType&&"false"==n.contentEditable)break;e=n,t=e.childNodes.length}}function wo(e,t,n){if(3!=t.nodeType){let e,r;(r=yo(t,n))?(t=r,n=0):(e=bo(t,n))&&(t=e,n=e.nodeValue.length)}let r=e.domSelection();if(gn(r)){let e=document.createRange();e.setEnd(t,n),e.setStart(t,n),r.removeAllRanges(),r.addRange(e)}else r.extend&&r.extend(t,n);e.domObserver.setCurSelection();let{state:o}=e;setTimeout((()=>{e.state==o&&Gr(e)}),50)}function ko(e,t){let n=e.state.doc.resolve(t);if(!An&&!zn&&n.parent.inlineContent){let r=e.coordsAtPos(t);if(t>n.start()){let n=e.coordsAtPos(t-1),o=(n.top+n.bottom)/2;if(o>r.top&&o<r.bottom&&Math.abs(n.left-r.left)>1)return n.left<r.left?"ltr":"rtl"}if(t<n.end()){let n=e.coordsAtPos(t+1),o=(n.top+n.bottom)/2;if(o>r.top&&o<r.bottom&&Math.abs(n.left-r.left)>1)return n.left>r.left?"ltr":"rtl"}}let r=getComputedStyle(e.dom).direction;return"rtl"==r?"rtl":"ltr"}function xo(e,t,n){let r=e.state.selection;if(r instanceof $t&&!r.empty||n.indexOf("s")>-1)return!1;if(In&&n.indexOf("m")>-1)return!1;let{$from:o,$to:i}=r;if(!o.parent.inlineContent||e.endOfTextblock(t<0?"up":"down")){let n=lo(e.state,t);if(n&&n instanceof Bt)return co(e,n)}if(!o.parent.inlineContent){let n=t<0?o:i,s=r instanceof Lt?Dt.near(n,t):Dt.findFrom(n,t);return!!s&&co(e,s)}return!1}function So(e,t){if(!(e.state.selection instanceof $t))return!0;let{$head:n,$anchor:r,empty:o}=e.state.selection;if(!n.sameParent(r))return!0;if(!o)return!1;if(e.endOfTextblock(t>0?"forward":"backward"))return!0;let i=!n.textOffset&&(t<0?n.nodeBefore:n.nodeAfter);if(i&&!i.isText){let r=e.state.tr;return t<0?r.delete(n.pos-i.nodeSize,n.pos):r.delete(n.pos,n.pos+i.nodeSize),e.dispatch(r),!0}return!1}function Co(e,t,n){e.domObserver.stop(),t.contentEditable=n,e.domObserver.start()}function _o(e){if(!Rn||e.state.selection.$head.parentOffset>0)return!1;let{focusNode:t,focusOffset:n}=e.domSelectionRange();if(t&&1==t.nodeType&&0==n&&t.firstChild&&"false"==t.firstChild.contentEditable){let n=t.firstChild;Co(e,n,"true"),setTimeout((()=>Co(e,n,"false")),20)}return!1}function Oo(e){let t="";return e.ctrlKey&&(t+="c"),e.metaKey&&(t+="m"),e.altKey&&(t+="a"),e.shiftKey&&(t+="s"),t}function Mo(e,t){let n=t.keyCode,r=Oo(t);if(8==n||In&&72==n&&"c"==r)return So(e,-1)||fo(e,-1);if(46==n&&!t.shiftKey||In&&68==n&&"c"==r)return So(e,1)||fo(e,1);if(13==n||27==n)return!0;if(37==n||In&&66==n&&"c"==r){let t=37==n?"ltr"==ko(e,e.state.selection.from)?-1:1:-1;return uo(e,t,r)||fo(e,t)}if(39==n||In&&70==n&&"c"==r){let t=39==n?"ltr"==ko(e,e.state.selection.from)?1:-1:1;return uo(e,t,r)||fo(e,t)}return 38==n||In&&80==n&&"c"==r?xo(e,-1,r)||fo(e,-1):40==n||In&&78==n&&"c"==r?_o(e)||xo(e,1,r)||fo(e,1):r==(In?"m":"c")&&(66==n||73==n||89==n||90==n)}function Eo(e,t){e.someProp("transformCopied",(n=>{t=n(t,e)}));let n=[],{content:r,openStart:o,openEnd:i}=t;while(o>1&&i>1&&1==r.childCount&&1==r.firstChild.childCount){o--,i--;let e=r.firstChild;n.push(e.type.name,e.attrs!=e.type.defaultAttrs?e.attrs:null),r=e.content}let s=e.someProp("clipboardSerializer")||we.fromSchema(e.state.schema),a=Bo(),l=a.createElement("div");l.appendChild(s.serializeFragment(r,{document:a}));let c,u=l.firstChild,d=0;while(u&&1==u.nodeType&&(c=$o[u.nodeName.toLowerCase()])){for(let e=c.length-1;e>=0;e--){let t=a.createElement(c[e]);while(l.firstChild)t.appendChild(l.firstChild);l.appendChild(t),d++}u=l.firstChild}u&&1==u.nodeType&&u.setAttribute("data-pm-slice",`${o} ${i}${d?` -${d}`:""} ${JSON.stringify(n)}`);let h=e.someProp("clipboardTextSerializer",(n=>n(t,e)))||t.content.textBetween(0,t.content.size,"\n\n");return{dom:l,text:h}}function To(e,t,n,r,o){let i,s,a=o.parent.type.spec.code;if(!n&&!t)return null;let c=t&&(r||a||!n);if(c){if(e.someProp("transformPastedText",(n=>{t=n(t,a||r,e)})),a)return t?new f(l.from(e.state.schema.text(t.replace(/\r\n?/g,"\n"))),0,0):f.empty;let n=e.someProp("clipboardTextParser",(n=>n(t,o,r,e)));if(n)s=n;else{let n=o.marks(),{schema:r}=e.state,s=we.fromSchema(r);i=document.createElement("div"),t.split(/(?:\r\n?|\n)+/).forEach((e=>{let t=i.appendChild(document.createElement("p"));e&&t.appendChild(s.serializeNode(r.text(e,n)))}))}}else e.someProp("transformPastedHTML",(t=>{n=t(n,e)})),i=jo(n),$n&&Lo(i);let u=i&&i.querySelector("[data-pm-slice]"),d=u&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(u.getAttribute("data-pm-slice")||"");if(d&&d[3])for(let l=+d[3];l>0;l--){let e=i.firstChild;while(e&&1!=e.nodeType)e=e.nextSibling;if(!e)break;i=e}if(!s){let t=e.someProp("clipboardParser")||e.someProp("domParser")||oe.fromSchema(e.state.schema);s=t.parseSlice(i,{preserveWhitespace:!(!c&&!d),context:o,ruleFromNode(e){return"BR"!=e.nodeName||e.nextSibling||!e.parentNode||Ao.test(e.parentNode.nodeName)?null:{ignore:!0}}})}if(d)s=Vo(Po(s,+d[1],+d[2]),d[4]);else if(s=f.maxOpen(No(s.content,o),!0),s.openStart||s.openEnd){let e=0,t=0;for(let n=s.content.firstChild;e<s.openStart&&!n.type.spec.isolating;e++,n=n.firstChild);for(let n=s.content.lastChild;t<s.openEnd&&!n.type.spec.isolating;t++,n=n.lastChild);s=Po(s,e,t)}return e.someProp("transformPasted",(t=>{s=t(s,e)})),s}const Ao=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function No(e,t){if(e.childCount<2)return e;for(let n=t.depth;n>=0;n--){let r,o=t.node(n),i=o.contentMatchAt(t.index(n)),s=[];if(e.forEach((e=>{if(!s)return;let t,n=i.findWrapping(e.type);if(!n)return s=null;if(t=s.length&&r.length&&Do(n,r,e,s[s.length-1],0))s[s.length-1]=t;else{s.length&&(s[s.length-1]=Io(s[s.length-1],r.length));let t=Ro(e,n);s.push(t),i=i.matchType(t.type),r=n}})),s)return l.from(s)}return e}function Ro(e,t,n=0){for(let r=t.length-1;r>=n;r--)e=t[r].create(null,l.from(e));return e}function Do(e,t,n,r,o){if(o<e.length&&o<t.length&&e[o]==t[o]){let i=Do(e,t,n,r.lastChild,o+1);if(i)return r.copy(r.content.replaceChild(r.childCount-1,i));let s=r.contentMatchAt(r.childCount);if(s.matchType(o==e.length-1?n.type:e[o+1]))return r.copy(r.content.append(l.from(Ro(n,e,o+1))))}}function Io(e,t){if(0==t)return e;let n=e.content.replaceChild(e.childCount-1,Io(e.lastChild,t-1)),r=e.contentMatchAt(e.childCount).fillBefore(l.empty,!0);return e.copy(n.append(r))}function zo(e,t,n,r,o,i){let s=t<0?e.firstChild:e.lastChild,a=s.content;return e.childCount>1&&(i=0),o<r-1&&(a=zo(a,t,n,r,o+1,i)),o>=n&&(a=t<0?s.contentMatchAt(0).fillBefore(a,i<=o).append(a):a.append(s.contentMatchAt(s.childCount).fillBefore(l.empty,!0))),e.replaceChild(t<0?0:e.childCount-1,s.copy(a))}function Po(e,t,n){return t<e.openStart&&(e=new f(zo(e.content,-1,t,e.openStart,0,e.openEnd),t,e.openEnd)),n<e.openEnd&&(e=new f(zo(e.content,1,n,e.openEnd,0,0),e.openStart,n)),e}const $o={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let Fo=null;function Bo(){return Fo||(Fo=document.implementation.createHTMLDocument("title"))}function jo(e){let t=/^(\s*<meta [^>]*>)*/.exec(e);t&&(e=e.slice(t[0].length));let n,r=Bo().createElement("div"),o=/<([a-z][^>\s]+)/i.exec(e);if((n=o&&$o[o[1].toLowerCase()])&&(e=n.map((e=>"<"+e+">")).join("")+e+n.map((e=>"</"+e+">")).reverse().join("")),r.innerHTML=e,n)for(let i=0;i<n.length;i++)r=r.querySelector(n[i])||r;return r}function Lo(e){let t=e.querySelectorAll(An?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<t.length;n++){let r=t[n];1==r.childNodes.length&&""==r.textContent&&r.parentNode&&r.parentNode.replaceChild(e.ownerDocument.createTextNode(" "),r)}}function Vo(e,t){if(!e.size)return e;let n,r=e.content.firstChild.type.schema;try{n=JSON.parse(t)}catch(a){return e}let{content:o,openStart:i,openEnd:s}=e;for(let c=n.length-2;c>=0;c-=2){let e=r.nodes[n[c]];if(!e||e.hasRequiredAttrs())break;o=l.from(e.create(n[c+1],o)),i++,s++}return new f(o,i,s)}const qo={},Ho={},Wo={touchstart:!0,touchmove:!0};class Jo{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastAndroidDelete=0,this.composing=!1,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function Uo(e){for(let t in qo){let n=qo[t];e.dom.addEventListener(t,e.input.eventHandlers[t]=t=>{!Yo(e,t)||Zo(e,t)||!e.editable&&t.type in Ho||n(e,t)},Wo[t]?{passive:!0}:void 0)}Rn&&e.dom.addEventListener("input",(()=>null)),Xo(e)}function Ko(e,t){e.input.lastSelectionOrigin=t,e.input.lastSelectionTime=Date.now()}function Go(e){e.domObserver.stop();for(let t in e.input.eventHandlers)e.dom.removeEventListener(t,e.input.eventHandlers[t]);clearTimeout(e.input.composingTimeout),clearTimeout(e.input.lastIOSEnterFallbackTimeout)}function Xo(e){e.someProp("handleDOMEvents",(t=>{for(let n in t)e.input.eventHandlers[n]||e.dom.addEventListener(n,e.input.eventHandlers[n]=t=>Zo(e,t))}))}function Zo(e,t){return e.someProp("handleDOMEvents",(n=>{let r=n[t.type];return!!r&&(r(e,t)||t.defaultPrevented)}))}function Yo(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let n=t.target;n!=e.dom;n=n.parentNode)if(!n||11==n.nodeType||n.pmViewDesc&&n.pmViewDesc.stopEvent(t))return!1;return!0}function Qo(e,t){Zo(e,t)||!qo[t.type]||!e.editable&&t.type in Ho||qo[t.type](e,t)}function ei(e){return{left:e.clientX,top:e.clientY}}function ti(e,t){let n=t.x-e.clientX,r=t.y-e.clientY;return n*n+r*r<100}function ni(e,t,n,r,o){if(-1==r)return!1;let i=e.state.doc.resolve(r);for(let s=i.depth+1;s>0;s--)if(e.someProp(t,(t=>s>i.depth?t(e,n,i.nodeAfter,i.before(s),o,!0):t(e,n,i.node(s),i.before(s),o,!1))))return!0;return!1}function ri(e,t,n){e.focused||e.focus();let r=e.state.tr.setSelection(t);"pointer"==n&&r.setMeta("pointer",!0),e.dispatch(r)}function oi(e,t){if(-1==t)return!1;let n=e.state.doc.resolve(t),r=n.nodeAfter;return!!(r&&r.isAtom&&Bt.isSelectable(r))&&(ri(e,new Bt(n),"pointer"),!0)}function ii(e,t){if(-1==t)return!1;let n,r,o=e.state.selection;o instanceof Bt&&(n=o.node);let i=e.state.doc.resolve(t);for(let s=i.depth+1;s>0;s--){let e=s>i.depth?i.nodeAfter:i.node(s);if(Bt.isSelectable(e)){r=n&&o.$from.depth>0&&s>=o.$from.depth&&i.before(o.$from.depth+1)==o.$from.pos?i.before(o.$from.depth):i.before(s);break}}return null!=r&&(ri(e,Bt.create(e.state.doc,r),"pointer"),!0)}function si(e,t,n,r,o){return ni(e,"handleClickOn",t,n,r)||e.someProp("handleClick",(n=>n(e,t,r)))||(o?ii(e,n):oi(e,n))}function ai(e,t,n,r){return ni(e,"handleDoubleClickOn",t,n,r)||e.someProp("handleDoubleClick",(n=>n(e,t,r)))}function li(e,t,n,r){return ni(e,"handleTripleClickOn",t,n,r)||e.someProp("handleTripleClick",(n=>n(e,t,r)))||ci(e,n,r)}function ci(e,t,n){if(0!=n.button)return!1;let r=e.state.doc;if(-1==t)return!!r.inlineContent&&(ri(e,$t.create(r,0,r.content.size),"pointer"),!0);let o=r.resolve(t);for(let i=o.depth+1;i>0;i--){let t=i>o.depth?o.nodeAfter:o.node(i),n=o.before(i);if(t.inlineContent)ri(e,$t.create(r,n+1,n+1+t.content.size),"pointer");else{if(!Bt.isSelectable(t))continue;ri(e,Bt.create(r,n),"pointer")}return!0}}function ui(e){return yi(e)}Ho.keydown=(e,t)=>{let n=t;if(e.input.shiftKey=16==n.keyCode||n.shiftKey,!pi(e,n)&&(e.input.lastKeyCode=n.keyCode,e.input.lastKeyCodeTime=Date.now(),!Pn||!An||13!=n.keyCode))if(229!=n.keyCode&&e.domObserver.forceFlush(),!Dn||13!=n.keyCode||n.ctrlKey||n.altKey||n.metaKey)e.someProp("handleKeyDown",(t=>t(e,n)))||Mo(e,n)?n.preventDefault():Ko(e,"key");else{let t=Date.now();e.input.lastIOSEnter=t,e.input.lastIOSEnterFallbackTimeout=setTimeout((()=>{e.input.lastIOSEnter==t&&(e.someProp("handleKeyDown",(t=>t(e,vn(13,"Enter")))),e.input.lastIOSEnter=0)}),200)}},Ho.keyup=(e,t)=>{16==t.keyCode&&(e.input.shiftKey=!1)},Ho.keypress=(e,t)=>{let n=t;if(pi(e,n)||!n.charCode||n.ctrlKey&&!n.altKey||In&&n.metaKey)return;if(e.someProp("handleKeyPress",(t=>t(e,n))))return void n.preventDefault();let r=e.state.selection;if(!(r instanceof $t)||!r.$from.sameParent(r.$to)){let t=String.fromCharCode(n.charCode);/[\r\n]/.test(t)||e.someProp("handleTextInput",(n=>n(e,r.$from.pos,r.$to.pos,t)))||e.dispatch(e.state.tr.insertText(t).scrollIntoView()),n.preventDefault()}};const di=In?"metaKey":"ctrlKey";qo.mousedown=(e,t)=>{let n=t;e.input.shiftKey=n.shiftKey;let r=ui(e),o=Date.now(),i="singleClick";o-e.input.lastClick.time<500&&ti(n,e.input.lastClick)&&!n[di]&&("singleClick"==e.input.lastClick.type?i="doubleClick":"doubleClick"==e.input.lastClick.type&&(i="tripleClick")),e.input.lastClick={time:o,x:n.clientX,y:n.clientY,type:i};let s=e.posAtCoords(ei(n));s&&("singleClick"==i?(e.input.mouseDown&&e.input.mouseDown.done(),e.input.mouseDown=new hi(e,s,n,!!r)):("doubleClick"==i?ai:li)(e,s.pos,s.inside,n)?n.preventDefault():Ko(e,"pointer"))};class hi{constructor(e,t,n,r){let o,i;if(this.view=e,this.pos=t,this.event=n,this.flushed=r,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!n[di],this.allowDefault=n.shiftKey,t.inside>-1)o=e.state.doc.nodeAt(t.inside),i=t.inside;else{let n=e.state.doc.resolve(t.pos);o=n.parent,i=n.depth?n.before():0}const s=r?null:n.target,a=s?e.docView.nearestDesc(s,!0):null;this.target=a?a.dom:null;let{selection:l}=e.state;(0==n.button&&o.type.spec.draggable&&!1!==o.type.spec.selectable||l instanceof Bt&&l.from<=i&&l.to>i)&&(this.mightDrag={node:o,pos:i,addAttr:!(!this.target||this.target.draggable),setUneditable:!(!this.target||!En||this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout((()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")}),20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Ko(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout((()=>Gr(this.view))),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(ei(e))),this.updateAllowDefault(e),this.allowDefault||!t?Ko(this.view,"pointer"):si(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():0==e.button&&(this.flushed||Rn&&this.mightDrag&&!this.mightDrag.node.isAtom||An&&!this.view.state.selection.visible&&Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to))<=2)?(ri(this.view,Dt.near(this.view.state.doc.resolve(t.pos)),"pointer"),e.preventDefault()):Ko(this.view,"pointer")}move(e){this.updateAllowDefault(e),Ko(this.view,"pointer"),0==e.buttons&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}function pi(e,t){return!!e.composing||!!(Rn&&Math.abs(t.timeStamp-e.input.compositionEndedAt)<500)&&(e.input.compositionEndedAt=-2e8,!0)}qo.touchstart=e=>{e.input.lastTouch=Date.now(),ui(e),Ko(e,"pointer")},qo.touchmove=e=>{e.input.lastTouch=Date.now(),Ko(e,"pointer")},qo.contextmenu=e=>ui(e);const fi=Pn?5e3:-1;function mi(e,t){clearTimeout(e.input.composingTimeout),t>-1&&(e.input.composingTimeout=setTimeout((()=>yi(e)),t))}function gi(e){e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=vi());while(e.input.compositionNodes.length>0)e.input.compositionNodes.pop().markParentsDirty()}function vi(){let e=document.createEvent("Event");return e.initEvent("event",!0,!0),e.timeStamp}function yi(e,t=!1){if(!(Pn&&e.domObserver.flushingSoon>=0)){if(e.domObserver.forceFlush(),gi(e),t||e.docView&&e.docView.dirty){let t=Ur(e);return t&&!t.eq(e.state.selection)?e.dispatch(e.state.tr.setSelection(t)):e.updateState(e.state),!0}return!1}}function bi(e,t){if(!e.dom.parentNode)return;let n=e.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(t),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),o=document.createRange();o.selectNodeContents(t),e.dom.blur(),r.removeAllRanges(),r.addRange(o),setTimeout((()=>{n.parentNode&&n.parentNode.removeChild(n),e.focus()}),50)}Ho.compositionstart=Ho.compositionupdate=e=>{if(!e.composing){e.domObserver.flush();let{state:t}=e,n=t.selection.$from;if(t.selection.empty&&(t.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some((e=>!1===e.type.spec.inclusive))))e.markCursor=e.state.storedMarks||n.marks(),yi(e,!0),e.markCursor=null;else if(yi(e),En&&t.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let t=e.domSelectionRange();for(let n=t.focusNode,r=t.focusOffset;n&&1==n.nodeType&&0!=r;){let t=r<0?n.lastChild:n.childNodes[r-1];if(!t)break;if(3==t.nodeType){e.domSelection().collapse(t,t.nodeValue.length);break}n=t,r=-1}}e.input.composing=!0}mi(e,fi)},Ho.compositionend=(e,t)=>{e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=t.timeStamp,e.input.compositionPendingChanges=e.domObserver.pendingRecords().length?e.input.compositionID:0,e.input.compositionPendingChanges&&Promise.resolve().then((()=>e.domObserver.flush())),e.input.compositionID++,mi(e,20))};const wi=On&&Mn<15||Dn&&Fn<604;function ki(e){return 0==e.openStart&&0==e.openEnd&&1==e.content.childCount?e.content.firstChild:null}function xi(e,t){if(!e.dom.parentNode)return;let n=e.input.shiftKey||e.state.selection.$from.parent.type.spec.code,r=e.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let o=e.input.shiftKey&&45!=e.input.lastKeyCode;setTimeout((()=>{e.focus(),r.parentNode&&r.parentNode.removeChild(r),n?Si(e,r.value,null,o,t):Si(e,r.textContent,r.innerHTML,o,t)}),50)}function Si(e,t,n,r,o){let i=To(e,t,n,r,e.state.selection.$from);if(e.someProp("handlePaste",(t=>t(e,o,i||f.empty))))return!0;if(!i)return!1;let s=ki(i),a=s?e.state.tr.replaceSelectionWith(s,r):e.state.tr.replaceSelection(i);return e.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}qo.copy=Ho.cut=(e,t)=>{let n=t,r=e.state.selection,o="cut"==n.type;if(r.empty)return;let i=wi?null:n.clipboardData,s=r.content(),{dom:a,text:l}=Eo(e,s);i?(n.preventDefault(),i.clearData(),i.setData("text/html",a.innerHTML),i.setData("text/plain",l)):bi(e,a),o&&e.dispatch(e.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))},Ho.paste=(e,t)=>{let n=t;if(e.composing&&!Pn)return;let r=wi?null:n.clipboardData,o=e.input.shiftKey&&45!=e.input.lastKeyCode;r&&Si(e,r.getData("text/plain"),r.getData("text/html"),o,n)?n.preventDefault():xi(e,n)};class Ci{constructor(e,t){this.slice=e,this.move=t}}const _i=In?"altKey":"ctrlKey";qo.dragstart=(e,t)=>{let n=t,r=e.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let o=e.state.selection,i=o.empty?null:e.posAtCoords(ei(n));if(i&&i.pos>=o.from&&i.pos<=(o instanceof Bt?o.to-1:o.to));else if(r&&r.mightDrag)e.dispatch(e.state.tr.setSelection(Bt.create(e.state.doc,r.mightDrag.pos)));else if(n.target&&1==n.target.nodeType){let t=e.docView.nearestDesc(n.target,!0);t&&t.node.type.spec.draggable&&t!=e.docView&&e.dispatch(e.state.tr.setSelection(Bt.create(e.state.doc,t.posBefore)))}let s=e.state.selection.content(),{dom:a,text:l}=Eo(e,s);n.dataTransfer.clearData(),n.dataTransfer.setData(wi?"Text":"text/html",a.innerHTML),n.dataTransfer.effectAllowed="copyMove",wi||n.dataTransfer.setData("text/plain",l),e.dragging=new Ci(s,!n[_i])},qo.dragend=e=>{let t=e.dragging;window.setTimeout((()=>{e.dragging==t&&(e.dragging=null)}),50)},Ho.dragover=Ho.dragenter=(e,t)=>t.preventDefault(),Ho.drop=(e,t)=>{let n=t,r=e.dragging;if(e.dragging=null,!n.dataTransfer)return;let o=e.posAtCoords(ei(n));if(!o)return;let i=e.state.doc.resolve(o.pos),s=r&&r.slice;s?e.someProp("transformPasted",(t=>{s=t(s,e)})):s=To(e,n.dataTransfer.getData(wi?"Text":"text/plain"),wi?null:n.dataTransfer.getData("text/html"),!1,i);let a=!(!r||n[_i]);if(e.someProp("handleDrop",(t=>t(e,n,s||f.empty,a))))return void n.preventDefault();if(!s)return;n.preventDefault();let l=s?ht(e.state.doc,i.pos,s):i.pos;null==l&&(l=i.pos);let c=e.state.tr;a&&c.deleteSelection();let u=c.mapping.map(l),d=0==s.openStart&&0==s.openEnd&&1==s.content.childCount,h=c.doc;if(d?c.replaceRangeWith(u,u,s.content.firstChild):c.replaceRange(u,u,s),c.doc.eq(h))return;let p=c.doc.resolve(u);if(d&&Bt.isSelectable(s.content.firstChild)&&p.nodeAfter&&p.nodeAfter.sameMarkup(s.content.firstChild))c.setSelection(new Bt(p));else{let t=c.mapping.map(l);c.mapping.maps[c.mapping.maps.length-1].forEach(((e,n,r,o)=>t=o)),c.setSelection(oo(e,p,c.doc.resolve(t)))}e.focus(),e.dispatch(c.setMeta("uiEvent","drop"))},qo.focus=e=>{e.input.lastFocus=Date.now(),e.focused||(e.domObserver.stop(),e.dom.classList.add("ProseMirror-focused"),e.domObserver.start(),e.focused=!0,setTimeout((()=>{e.docView&&e.hasFocus()&&!e.domObserver.currentSelection.eq(e.domSelectionRange())&&Gr(e)}),20))},qo.blur=(e,t)=>{let n=t;e.focused&&(e.domObserver.stop(),e.dom.classList.remove("ProseMirror-focused"),e.domObserver.start(),n.relatedTarget&&e.dom.contains(n.relatedTarget)&&e.domObserver.currentSelection.clear(),e.focused=!1)},qo.beforeinput=(e,t)=>{let n=t;if(An&&Pn&&"deleteContentBackward"==n.inputType){e.domObserver.flushSoon();let{domChangeCount:t}=e.input;setTimeout((()=>{if(e.input.domChangeCount!=t)return;if(e.dom.blur(),e.focus(),e.someProp("handleKeyDown",(t=>t(e,vn(8,"Backspace")))))return;let{$cursor:n}=e.state.selection;n&&n.pos>0&&e.dispatch(e.state.tr.delete(n.pos-1,n.pos).scrollIntoView())}),50)}};for(let os in Ho)qo[os]=Ho[os];function Oi(e,t){if(e==t)return!0;for(let n in e)if(e[n]!==t[n])return!1;for(let n in t)if(!(n in e))return!1;return!0}class Mi{constructor(e,t){this.toDOM=e,this.spec=t||Ri,this.side=this.spec.side||0}map(e,t,n,r){let{pos:o,deleted:i}=e.mapResult(t.from+r,this.side<0?-1:1);return i?null:new Ai(o-n,o-n,this)}valid(){return!0}eq(e){return this==e||e instanceof Mi&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Oi(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class Ei{constructor(e,t){this.attrs=e,this.spec=t||Ri}map(e,t,n,r){let o=e.map(t.from+r,this.spec.inclusiveStart?-1:1)-n,i=e.map(t.to+r,this.spec.inclusiveEnd?1:-1)-n;return o>=i?null:new Ai(o,i,this)}valid(e,t){return t.from<t.to}eq(e){return this==e||e instanceof Ei&&Oi(this.attrs,e.attrs)&&Oi(this.spec,e.spec)}static is(e){return e.type instanceof Ei}destroy(){}}class Ti{constructor(e,t){this.attrs=e,this.spec=t||Ri}map(e,t,n,r){let o=e.mapResult(t.from+r,1);if(o.deleted)return null;let i=e.mapResult(t.to+r,-1);return i.deleted||i.pos<=o.pos?null:new Ai(o.pos-n,i.pos-n,this)}valid(e,t){let n,{index:r,offset:o}=e.content.findIndex(t.from);return o==t.from&&!(n=e.child(r)).isText&&o+n.nodeSize==t.to}eq(e){return this==e||e instanceof Ti&&Oi(this.attrs,e.attrs)&&Oi(this.spec,e.spec)}destroy(){}}class Ai{constructor(e,t,n){this.from=e,this.to=t,this.type=n}copy(e,t){return new Ai(e,t,this.type)}eq(e,t=0){return this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to}map(e,t,n){return this.type.map(e,this,t,n)}static widget(e,t,n){return new Ai(e,e,new Mi(t,n))}static inline(e,t,n,r){return new Ai(e,t,new Ei(n,r))}static node(e,t,n,r){return new Ai(e,t,new Ti(n,r))}get spec(){return this.type.spec}get inline(){return this.type instanceof Ei}get widget(){return this.type instanceof Mi}}const Ni=[],Ri={};class Di{constructor(e,t){this.local=e.length?e:Ni,this.children=t.length?t:Ni}static create(e,t){return t.length?Li(t,e,0,Ri):Ii}find(e,t,n){let r=[];return this.findInner(null==e?0:e,null==t?1e9:t,r,0,n),r}findInner(e,t,n,r,o){for(let i=0;i<this.local.length;i++){let s=this.local[i];s.from<=t&&s.to>=e&&(!o||o(s.spec))&&n.push(s.copy(s.from+r,s.to+r))}for(let i=0;i<this.children.length;i+=3)if(this.children[i]<t&&this.children[i+1]>e){let s=this.children[i]+1;this.children[i+2].findInner(e-s,t-s,n,r+s,o)}}map(e,t,n){return this==Ii||0==e.maps.length?this:this.mapInner(e,t,0,0,n||Ri)}mapInner(e,t,n,r,o){let i;for(let s=0;s<this.local.length;s++){let a=this.local[s].map(e,n,r);a&&a.type.valid(t,a)?(i||(i=[])).push(a):o.onRemove&&o.onRemove(this.local[s].spec)}return this.children.length?Pi(this.children,i||[],e,t,n,r,o):i?new Di(i.sort(Vi),Ni):Ii}add(e,t){return t.length?this==Ii?Di.create(e,t):this.addInner(e,t,0):this}addInner(e,t,n){let r,o=0;e.forEach(((e,i)=>{let s,a=i+n;if(s=Bi(t,e,a)){r||(r=this.children.slice());while(o<r.length&&r[o]<i)o+=3;r[o]==i?r[o+2]=r[o+2].addInner(e,s,a+1):r.splice(o,0,i,i+e.nodeSize,Li(s,e,a+1,Ri)),o+=3}}));let i=$i(o?ji(t):t,-n);for(let s=0;s<i.length;s++)i[s].type.valid(e,i[s])||i.splice(s--,1);return new Di(i.length?this.local.concat(i).sort(Vi):this.local,r||this.children)}remove(e){return 0==e.length||this==Ii?this:this.removeInner(e,0)}removeInner(e,t){let n=this.children,r=this.local;for(let o=0;o<n.length;o+=3){let r,i=n[o]+t,s=n[o+1]+t;for(let t,n=0;n<e.length;n++)(t=e[n])&&t.from>i&&t.to<s&&(e[n]=null,(r||(r=[])).push(t));if(!r)continue;n==this.children&&(n=this.children.slice());let a=n[o+2].removeInner(r,i+1);a!=Ii?n[o+2]=a:(n.splice(o,3),o-=3)}if(r.length)for(let o,i=0;i<e.length;i++)if(o=e[i])for(let e=0;e<r.length;e++)r[e].eq(o,t)&&(r==this.local&&(r=this.local.slice()),r.splice(e--,1));return n==this.children&&r==this.local?this:r.length||n.length?new Di(r,n):Ii}forChild(e,t){if(this==Ii)return this;if(t.isLeaf)return Di.empty;let n,r;for(let s=0;s<this.children.length;s+=3)if(this.children[s]>=e){this.children[s]==e&&(n=this.children[s+2]);break}let o=e+1,i=o+t.content.size;for(let s=0;s<this.local.length;s++){let e=this.local[s];if(e.from<i&&e.to>o&&e.type instanceof Ei){let t=Math.max(o,e.from)-o,n=Math.min(i,e.to)-o;t<n&&(r||(r=[])).push(e.copy(t,n))}}if(r){let e=new Di(r.sort(Vi),Ni);return n?new zi([e,n]):e}return n||Ii}eq(e){if(this==e)return!0;if(!(e instanceof Di)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(let t=0;t<this.children.length;t+=3)if(this.children[t]!=e.children[t]||this.children[t+1]!=e.children[t+1]||!this.children[t+2].eq(e.children[t+2]))return!1;return!0}locals(e){return qi(this.localsInner(e))}localsInner(e){if(this==Ii)return Ni;if(e.inlineContent||!this.local.some(Ei.is))return this.local;let t=[];for(let n=0;n<this.local.length;n++)this.local[n].type instanceof Ei||t.push(this.local[n]);return t}}Di.empty=new Di([],[]),Di.removeOverlap=qi;const Ii=Di.empty;class zi{constructor(e){this.members=e}map(e,t){const n=this.members.map((n=>n.map(e,t,Ri)));return zi.from(n)}forChild(e,t){if(t.isLeaf)return Di.empty;let n=[];for(let r=0;r<this.members.length;r++){let o=this.members[r].forChild(e,t);o!=Ii&&(o instanceof zi?n=n.concat(o.members):n.push(o))}return zi.from(n)}eq(e){if(!(e instanceof zi)||e.members.length!=this.members.length)return!1;for(let t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0}locals(e){let t,n=!0;for(let r=0;r<this.members.length;r++){let o=this.members[r].localsInner(e);if(o.length)if(t){n&&(t=t.slice(),n=!1);for(let e=0;e<o.length;e++)t.push(o[e])}else t=o}return t?qi(n?t:t.sort(Vi)):Ni}static from(e){switch(e.length){case 0:return Ii;case 1:return e[0];default:return new zi(e.every((e=>e instanceof Di))?e:e.reduce(((e,t)=>e.concat(t instanceof Di?t:t.members)),[]))}}}function Pi(e,t,n,r,o,i,s){let a=e.slice();for(let c=0,u=i;c<n.maps.length;c++){let e=0;n.maps[c].forEach(((t,n,r,i)=>{let s=i-r-(n-t);for(let l=0;l<a.length;l+=3){let i=a[l+1];if(i<0||t>i+u-e)continue;let c=a[l]+u-e;n>=c?a[l+1]=t<=c?-2:-1:r>=o&&s&&(a[l]+=s,a[l+1]+=s)}e+=s})),u=n.maps[c].map(u,-1)}let l=!1;for(let c=0;c<a.length;c+=3)if(a[c+1]<0){if(-2==a[c+1]){l=!0,a[c+1]=-1;continue}let t=n.map(e[c]+i),u=t-o;if(u<0||u>=r.content.size){l=!0;continue}let d=n.map(e[c+1]+i,-1),h=d-o,{index:p,offset:f}=r.content.findIndex(u),m=r.maybeChild(p);if(m&&f==u&&f+m.nodeSize==h){let r=a[c+2].mapInner(n,m,t+1,e[c]+i+1,s);r!=Ii?(a[c]=u,a[c+1]=h,a[c+2]=r):(a[c+1]=-2,l=!0)}else l=!0}if(l){let l=Fi(a,e,t,n,o,i,s),c=Li(l,r,0,s);t=c.local;for(let e=0;e<a.length;e+=3)a[e+1]<0&&(a.splice(e,3),e-=3);for(let e=0,t=0;e<c.children.length;e+=3){let n=c.children[e];while(t<a.length&&a[t]<n)t+=3;a.splice(t,0,c.children[e],c.children[e+1],c.children[e+2])}}return new Di(t.sort(Vi),a)}function $i(e,t){if(!t||!e.length)return e;let n=[];for(let r=0;r<e.length;r++){let o=e[r];n.push(new Ai(o.from+t,o.to+t,o.type))}return n}function Fi(e,t,n,r,o,i,s){function a(e,t){for(let i=0;i<e.local.length;i++){let a=e.local[i].map(r,o,t);a?n.push(a):s.onRemove&&s.onRemove(e.local[i].spec)}for(let n=0;n<e.children.length;n+=3)a(e.children[n+2],e.children[n]+t+1)}for(let l=0;l<e.length;l+=3)-1==e[l+1]&&a(e[l+2],t[l]+i+1);return n}function Bi(e,t,n){if(t.isLeaf)return null;let r=n+t.nodeSize,o=null;for(let i,s=0;s<e.length;s++)(i=e[s])&&i.from>n&&i.to<r&&((o||(o=[])).push(i),e[s]=null);return o}function ji(e){let t=[];for(let n=0;n<e.length;n++)null!=e[n]&&t.push(e[n]);return t}function Li(e,t,n,r){let o=[],i=!1;t.forEach(((t,s)=>{let a=Bi(e,t,s+n);if(a){i=!0;let e=Li(a,t,n+s+1,r);e!=Ii&&o.push(s,s+t.nodeSize,e)}}));let s=$i(i?ji(e):e,-n).sort(Vi);for(let a=0;a<s.length;a++)s[a].type.valid(t,s[a])||(r.onRemove&&r.onRemove(s[a].spec),s.splice(a--,1));return s.length||o.length?new Di(s,o):Ii}function Vi(e,t){return e.from-t.from||e.to-t.to}function qi(e){let t=e;for(let n=0;n<t.length-1;n++){let r=t[n];if(r.from!=r.to)for(let o=n+1;o<t.length;o++){let i=t[o];if(i.from!=r.from){i.from<r.to&&(t==e&&(t=e.slice()),t[n]=r.copy(r.from,i.from),Hi(t,o,r.copy(i.from,r.to)));break}i.to!=r.to&&(t==e&&(t=e.slice()),t[o]=i.copy(i.from,r.to),Hi(t,o+1,i.copy(r.to,i.to)))}}return t}function Hi(e,t,n){while(t<e.length&&Vi(n,e[t])>0)t++;e.splice(t,0,n)}function Wi(e){let t=[];return e.someProp("decorations",(n=>{let r=n(e.state);r&&r!=Ii&&t.push(r)})),e.cursorWrapper&&t.push(Di.create(e.state.doc,[e.cursorWrapper.deco])),zi.from(t)}const Ji={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},Ui=On&&Mn<=11;class Ki{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class Gi{constructor(e,t){this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new Ki,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.observer=window.MutationObserver&&new window.MutationObserver((e=>{for(let t=0;t<e.length;t++)this.queue.push(e[t]);On&&Mn<=11&&e.some((e=>"childList"==e.type&&e.removedNodes.length||"characterData"==e.type&&e.oldValue.length>e.target.nodeValue.length))?this.flushSoon():this.flush()})),Ui&&(this.onCharData=e=>{this.queue.push({target:e.target,type:"characterData",oldValue:e.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout((()=>{this.flushingSoon=-1,this.flush()}),20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,Ji)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let t=0;t<e.length;t++)this.queue.push(e[t]);window.setTimeout((()=>this.flush()),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout((()=>this.suppressingSelectionUpdates=!1),50)}onSelectionChange(){if(io(this.view)){if(this.suppressingSelectionUpdates)return Gr(this.view);if(On&&Mn<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&un(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let t,n=new Set;for(let o=e.focusNode;o;o=an(o))n.add(o);for(let o=e.anchorNode;o;o=an(o))if(n.has(o)){t=o;break}let r=t&&this.view.docView.nearestDesc(t);return r&&r.ignoreMutation({type:"selection",target:3==t.nodeType?t.parentNode:t})?(this.setCurSelection(),!0):void 0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let t=this.pendingRecords();t.length&&(this.queue=[]);let n=e.domSelectionRange(),r=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(n)&&io(e)&&!this.ignoreSelectionChange(n),o=-1,i=-1,s=!1,a=[];if(e.editable)for(let c=0;c<t.length;c++){let e=this.registerMutation(t[c],a);e&&(o=o<0?e.from:Math.min(e.from,o),i=i<0?e.to:Math.max(e.to,i),e.typeOver&&(s=!0))}if(En&&a.length>1){let e=a.filter((e=>"BR"==e.nodeName));if(2==e.length){let t=e[0],n=e[1];t.parentNode&&t.parentNode.parentNode==n.parentNode?n.remove():t.remove()}}let l=null;o<0&&r&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&gn(n)&&(l=Ur(e))&&l.eq(Dt.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,Gr(e),this.currentSelection.set(n),e.scrollToSelection()):(o>-1||r)&&(o>-1&&(e.docView.markDirty(o,i),Yi(e)),this.handleDOMChange(o,i,s,a),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(n)||Gr(e),this.currentSelection.set(n))}registerMutation(e,t){if(t.indexOf(e.target)>-1)return null;let n=this.view.docView.nearestDesc(e.target);if("attributes"==e.type&&(n==this.view.docView||"contenteditable"==e.attributeName||"style"==e.attributeName&&!e.oldValue&&!e.target.getAttribute("style")))return null;if(!n||n.ignoreMutation(e))return null;if("childList"==e.type){for(let n=0;n<e.addedNodes.length;n++)t.push(e.addedNodes[n]);if(n.contentDOM&&n.contentDOM!=n.dom&&!n.contentDOM.contains(e.target))return{from:n.posBefore,to:n.posAfter};let r=e.previousSibling,o=e.nextSibling;if(On&&Mn<=11&&e.addedNodes.length)for(let t=0;t<e.addedNodes.length;t++){let{previousSibling:n,nextSibling:i}=e.addedNodes[t];(!n||Array.prototype.indexOf.call(e.addedNodes,n)<0)&&(r=n),(!i||Array.prototype.indexOf.call(e.addedNodes,i)<0)&&(o=i)}let i=r&&r.parentNode==e.target?sn(r)+1:0,s=n.localPosFromDOM(e.target,i,-1),a=o&&o.parentNode==e.target?sn(o):e.target.childNodes.length,l=n.localPosFromDOM(e.target,a,1);return{from:s,to:l}}return"attributes"==e.type?{from:n.posAtStart-n.border,to:n.posAtEnd+n.border}:{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}}}let Xi=new WeakMap,Zi=!1;function Yi(e){if(!Xi.has(e)&&(Xi.set(e,null),-1!==["normal","nowrap","pre-line"].indexOf(getComputedStyle(e.dom).whiteSpace))){if(e.requiresGeckoHackNode=En,Zi)return;console["warn"]("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),Zi=!0}}function Qi(e){let t;function n(e){e.preventDefault(),e.stopImmediatePropagation(),t=e.getTargetRanges()[0]}e.dom.addEventListener("beforeinput",n,!0),document.execCommand("indent"),e.dom.removeEventListener("beforeinput",n,!0);let r=t.startContainer,o=t.startOffset,i=t.endContainer,s=t.endOffset,a=e.domAtPos(e.state.selection.anchor);return un(a.node,a.offset,i,s)&&([r,o,i,s]=[i,s,r,o]),{anchorNode:r,anchorOffset:o,focusNode:i,focusOffset:s}}function es(e,t,n){let r,{node:o,fromOffset:i,toOffset:s,from:a,to:l}=e.docView.parseRange(t,n),c=e.domSelectionRange(),u=c.anchorNode;if(u&&e.dom.contains(1==u.nodeType?u:u.parentNode)&&(r=[{node:u,offset:c.anchorOffset}],gn(c)||r.push({node:c.focusNode,offset:c.focusOffset})),An&&8===e.input.lastKeyCode)for(let g=s;g>i;g--){let e=o.childNodes[g-1],t=e.pmViewDesc;if("BR"==e.nodeName&&!t){s=g;break}if(!t||t.size)break}let d=e.state.doc,h=e.someProp("domParser")||oe.fromSchema(e.state.schema),p=d.resolve(a),f=null,m=h.parse(o,{topNode:p.parent,topMatch:p.parent.contentMatchAt(p.index()),topOpen:!0,from:i,to:s,preserveWhitespace:"pre"!=p.parent.type.whitespace||"full",findPositions:r,ruleFromNode:ts,context:p});if(r&&null!=r[0].pos){let e=r[0].pos,t=r[1]&&r[1].pos;null==t&&(t=e),f={anchor:e+a,head:t+a}}return{doc:m,sel:f,from:a,to:l}}function ts(e){let t=e.pmViewDesc;if(t)return t.parseRule();if("BR"==e.nodeName&&e.parentNode){if(Rn&&/^(ul|ol)$/i.test(e.parentNode.nodeName)){let e=document.createElement("div");return e.appendChild(document.createElement("li")),{skip:e}}if(e.parentNode.lastChild==e||Rn&&/^(tr|table)$/i.test(e.parentNode.nodeName))return{ignore:!0}}else if("IMG"==e.nodeName&&e.getAttribute("mark-placeholder"))return{ignore:!0};return null}const ns=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function rs(e,t,n,r,o){let i=e.input.compositionPendingChanges||(e.composing?e.input.compositionID:0);if(e.input.compositionPendingChanges=0,t<0){let t=e.input.lastSelectionTime>Date.now()-50?e.input.lastSelectionOrigin:null,n=Ur(e,t);if(n&&!e.state.selection.eq(n)){if(An&&Pn&&13===e.input.lastKeyCode&&Date.now()-100<e.input.lastKeyCodeTime&&e.someProp("handleKeyDown",(t=>t(e,vn(13,"Enter")))))return;let r=e.state.tr.setSelection(n);"pointer"==t?r.setMeta("pointer",!0):"key"==t&&r.scrollIntoView(),i&&r.setMeta("composition",i),e.dispatch(r)}return}let s=e.state.doc.resolve(t),a=s.sharedDepth(n);t=s.before(a+1),n=e.state.doc.resolve(n).after(a+1);let l,c,u=e.state.selection,d=es(e,t,n),h=e.state.doc,p=h.slice(d.from,d.to);8===e.input.lastKeyCode&&Date.now()-100<e.input.lastKeyCodeTime?(l=e.state.selection.to,c="end"):(l=e.state.selection.from,c="start"),e.input.lastKeyCode=null;let f=cs(p.content,d.doc.content,d.from,l,c);if((Dn&&e.input.lastIOSEnter>Date.now()-225||Pn)&&o.some((e=>1==e.nodeType&&!ns.test(e.nodeName)))&&(!f||f.endA>=f.endB)&&e.someProp("handleKeyDown",(t=>t(e,vn(13,"Enter")))))return void(e.input.lastIOSEnter=0);if(!f){if(!(r&&u instanceof $t&&!u.empty&&u.$head.sameParent(u.$anchor))||e.composing||d.sel&&d.sel.anchor!=d.sel.head){if(d.sel){let t=is(e,e.state.doc,d.sel);if(t&&!t.eq(e.state.selection)){let n=e.state.tr.setSelection(t);i&&n.setMeta("composition",i),e.dispatch(n)}}return}f={start:u.from,endA:u.to,endB:u.to}}if(An&&e.cursorWrapper&&d.sel&&d.sel.anchor==e.cursorWrapper.deco.from&&d.sel.head==d.sel.anchor){let e=f.endB-f.start;d.sel={anchor:d.sel.anchor+e,head:d.sel.anchor+e}}e.input.domChangeCount++,e.state.selection.from<e.state.selection.to&&f.start==f.endB&&e.state.selection instanceof $t&&(f.start>e.state.selection.from&&f.start<=e.state.selection.from+2&&e.state.selection.from>=d.from?f.start=e.state.selection.from:f.endA<e.state.selection.to&&f.endA>=e.state.selection.to-2&&e.state.selection.to<=d.to&&(f.endB+=e.state.selection.to-f.endA,f.endA=e.state.selection.to)),On&&Mn<=11&&f.endB==f.start+1&&f.endA==f.start&&f.start>d.from&&" "==d.doc.textBetween(f.start-d.from-1,f.start-d.from+1)&&(f.start--,f.endA--,f.endB--);let m,g=d.doc.resolveNoCache(f.start-d.from),v=d.doc.resolveNoCache(f.endB-d.from),y=h.resolve(f.start),b=g.sameParent(v)&&g.parent.inlineContent&&y.end()>=f.endA;if((Dn&&e.input.lastIOSEnter>Date.now()-225&&(!b||o.some((e=>"DIV"==e.nodeName||"P"==e.nodeName)))||!b&&g.pos<d.doc.content.size&&!g.sameParent(v)&&(m=Dt.findFrom(d.doc.resolve(g.pos+1),1,!0))&&m.head==v.pos)&&e.someProp("handleKeyDown",(t=>t(e,vn(13,"Enter")))))return void(e.input.lastIOSEnter=0);if(e.state.selection.anchor>f.start&&as(h,f.start,f.endA,g,v)&&e.someProp("handleKeyDown",(t=>t(e,vn(8,"Backspace")))))return void(Pn&&An&&e.domObserver.suppressSelectionUpdates());An&&Pn&&f.endB==f.start&&(e.input.lastAndroidDelete=Date.now()),Pn&&!b&&g.start()!=v.start()&&0==v.parentOffset&&g.depth==v.depth&&d.sel&&d.sel.anchor==d.sel.head&&d.sel.head==f.endA&&(f.endB-=2,v=d.doc.resolveNoCache(f.endB-d.from),setTimeout((()=>{e.someProp("handleKeyDown",(function(t){return t(e,vn(13,"Enter"))}))}),20));let w,k,x,S=f.start,C=f.endA;if(b)if(g.pos==v.pos)On&&Mn<=11&&0==g.parentOffset&&(e.domObserver.suppressSelectionUpdates(),setTimeout((()=>Gr(e)),20)),w=e.state.tr.delete(S,C),k=h.resolve(f.start).marksAcross(h.resolve(f.endA));else if(f.endA==f.endB&&(x=ss(g.parent.content.cut(g.parentOffset,v.parentOffset),y.parent.content.cut(y.parentOffset,f.endA-y.start()))))w=e.state.tr,"add"==x.type?w.addMark(S,C,x.mark):w.removeMark(S,C,x.mark);else if(g.parent.child(g.index()).isText&&g.index()==v.index()-(v.textOffset?0:1)){let t=g.parent.textBetween(g.parentOffset,v.parentOffset);if(e.someProp("handleTextInput",(n=>n(e,S,C,t))))return;w=e.state.tr.insertText(t,S,C)}if(w||(w=e.state.tr.replace(S,C,d.doc.slice(f.start-d.from,f.endB-d.from))),d.sel){let t=is(e,w.doc,d.sel);t&&!(An&&Pn&&e.composing&&t.empty&&(f.start!=f.endB||e.input.lastAndroidDelete<Date.now()-100)&&(t.head==S||t.head==w.mapping.map(C)-1)||On&&t.empty&&t.head==S)&&w.setSelection(t)}k&&w.ensureMarks(k),i&&w.setMeta("composition",i),e.dispatch(w.scrollIntoView())}function is(e,t,n){return Math.max(n.anchor,n.head)>t.content.size?null:oo(e,t.resolve(n.anchor),t.resolve(n.head))}function ss(e,t){let n,r,o,i=e.firstChild.marks,s=t.firstChild.marks,a=i,c=s;for(let l=0;l<s.length;l++)a=s[l].removeFromSet(a);for(let l=0;l<i.length;l++)c=i[l].removeFromSet(c);if(1==a.length&&0==c.length)r=a[0],n="add",o=e=>e.mark(r.addToSet(e.marks));else{if(0!=a.length||1!=c.length)return null;r=c[0],n="remove",o=e=>e.mark(r.removeFromSet(e.marks))}let u=[];for(let l=0;l<t.childCount;l++)u.push(o(t.child(l)));if(l.from(u).eq(e))return{mark:r,type:n}}function as(e,t,n,r,o){if(!r.parent.isTextblock||n-t<=o.pos-r.pos||ls(r,!0,!1)<o.pos)return!1;let i=e.resolve(t);if(i.parentOffset<i.parent.content.size||!i.parent.isTextblock)return!1;let s=e.resolve(ls(i,!0,!0));return!(!s.parent.isTextblock||s.pos>n||ls(s,!0,!1)<n)&&r.parent.content.cut(r.parentOffset).eq(s.parent.content)}function ls(e,t,n){let r=e.depth,o=t?e.end():e.pos;while(r>0&&(t||e.indexAfter(r)==e.node(r).childCount))r--,o++,t=!1;if(n){let t=e.node(r).maybeChild(e.indexAfter(r));while(t&&!t.isLeaf)t=t.firstChild,o++}return o}function cs(e,t,n,r,o){let i=e.findDiffStart(t,n);if(null==i)return null;let{a:s,b:a}=e.findDiffEnd(t,n+e.size,n+t.size);if("end"==o){let e=Math.max(0,i-Math.min(s,a));r-=s+e-i}if(s<i&&e.size<t.size){let e=r<=i&&r>=s?i-r:0;i-=e,a=i+(a-s),s=i}else if(a<i){let e=r<=i&&r>=a?i-r:0;i-=e,s=i+(s-a),a=i}return{start:i,endA:s,endB:a}}class us{constructor(e,t){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new Jo,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=t,this.state=t.state,this.directPlugins=t.plugins||[],this.directPlugins.forEach(vs),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):"function"==typeof e?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=ps(this),hs(this),this.nodeViews=ms(this),this.docView=Or(this.state.doc,ds(this),Wi(this),this.dom,this),this.domObserver=new Gi(this,((e,t,n,r)=>rs(this,e,t,n,r))),this.domObserver.start(),Uo(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let t in e)this._props[t]=e[t];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&Xo(this);let t=this._props;this._props=e,e.plugins&&(e.plugins.forEach(vs),this.directPlugins=e.plugins),this.updateStateInner(e.state,t)}setProps(e){let t={};for(let n in this._props)t[n]=this._props[n];t.state=this.state;for(let n in e)t[n]=e[n];this.update(t)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,t){let n=this.state,r=!1,o=!1;e.storedMarks&&this.composing&&(gi(this),o=!0),this.state=e;let i=n.plugins!=e.plugins||this._props.plugins!=t.plugins;if(i||this._props.plugins!=t.plugins||this._props.nodeViews!=t.nodeViews){let e=ms(this);gs(e,this.nodeViews)&&(this.nodeViews=e,r=!0)}(i||t.handleDOMEvents!=this._props.handleDOMEvents)&&Xo(this),this.editable=ps(this),hs(this);let s=Wi(this),a=ds(this),l=n.plugins==e.plugins||n.doc.eq(e.doc)?e.scrollToSelection>n.scrollToSelection?"to selection":"preserve":"reset",c=r||!this.docView.matchesNode(e.doc,a,s);!c&&e.selection.eq(n.selection)||(o=!0);let u="preserve"==l&&o&&null==this.dom.style.overflowAnchor&&qn(this);if(o){this.domObserver.stop();let t=c&&(On||An)&&!this.composing&&!n.selection.empty&&!e.selection.empty&&fs(n.selection,e.selection);if(c){let n=An?this.trackWrites=this.domSelectionRange().focusNode:null;!r&&this.docView.update(e.doc,a,s,this)||(this.docView.updateOuterDeco([]),this.docView.destroy(),this.docView=Or(e.doc,a,s,this.dom,this)),n&&!this.trackWrites&&(t=!0)}t||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&ao(this))?Gr(this,t):(no(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(n),"reset"==l?this.dom.scrollTop=0:"to selection"==l?this.scrollToSelection():u&&Wn(u)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(this.someProp("handleScrollToSelection",(e=>e(this))));else if(this.state.selection instanceof Bt){let t=this.docView.domAfterPos(this.state.selection.from);1==t.nodeType&&Vn(this,t.getBoundingClientRect(),e)}else Vn(this,this.coordsAtPos(this.state.selection.head,1),e)}destroyPluginViews(){let e;while(e=this.pluginViews.pop())e.destroy&&e.destroy()}updatePluginViews(e){if(e&&e.plugins==this.state.plugins&&this.directPlugins==this.prevDirectPlugins)for(let t=0;t<this.pluginViews.length;t++){let n=this.pluginViews[t];n.update&&n.update(this,e)}else{this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let e=0;e<this.directPlugins.length;e++){let t=this.directPlugins[e];t.spec.view&&this.pluginViews.push(t.spec.view(this))}for(let e=0;e<this.state.plugins.length;e++){let t=this.state.plugins[e];t.spec.view&&this.pluginViews.push(t.spec.view(this))}}}someProp(e,t){let n,r=this._props&&this._props[e];if(null!=r&&(n=t?t(r):r))return n;for(let i=0;i<this.directPlugins.length;i++){let r=this.directPlugins[i].props[e];if(null!=r&&(n=t?t(r):r))return n}let o=this.state.plugins;if(o)for(let i=0;i<o.length;i++){let r=o[i].props[e];if(null!=r&&(n=t?t(r):r))return n}}hasFocus(){if(On){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;while(e&&this.dom!=e&&this.dom.contains(e)){if("false"==e.contentEditable)return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&Kn(this.dom),Gr(this),this.domObserver.start()}get root(){let e=this._root;if(null==e)for(let t=this.dom.parentNode;t;t=t.parentNode)if(9==t.nodeType||11==t.nodeType&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=()=>t.ownerDocument.getSelection()),this._root=t;return e||document}updateRoot(){this._root=null}posAtCoords(e){return nr(this,e)}coordsAtPos(e,t=1){return sr(this,e,t)}domAtPos(e,t=0){return this.docView.domFromPos(e,t)}nodeDOM(e){let t=this.docView.descAt(e);return t?t.nodeDOM:null}posAtDOM(e,t,n=-1){let r=this.docView.posFromDOM(e,t,n);if(null==r)throw new RangeError("DOM position not inside the editor");return r}endOfTextblock(e,t){return gr(this,t||this.state,e)}pasteHTML(e,t){return Si(this,"",e,!1,t||new ClipboardEvent("paste"))}pasteText(e,t){return Si(this,e,null,!0,t||new ClipboardEvent("paste"))}destroy(){this.docView&&(Go(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Wi(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null)}get isDestroyed(){return null==this.docView}dispatchEvent(e){return Qo(this,e)}dispatch(e){let t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))}domSelectionRange(){return Rn&&11===this.root.nodeType&&yn(this.dom.ownerDocument)==this.dom?Qi(this):this.domSelection()}domSelection(){return this.root.getSelection()}}function ds(e){let t=Object.create(null);return t.class="ProseMirror",t.contenteditable=String(e.editable),e.someProp("attributes",(n=>{if("function"==typeof n&&(n=n(e.state)),n)for(let e in n)"class"==e?t.class+=" "+n[e]:"style"==e?t.style=(t.style?t.style+";":"")+n[e]:t[e]||"contenteditable"==e||"nodeName"==e||(t[e]=String(n[e]))})),t.translate||(t.translate="no"),[Ai.node(0,e.state.doc.content.size,t)]}function hs(e){if(e.markCursor){let t=document.createElement("img");t.className="ProseMirror-separator",t.setAttribute("mark-placeholder","true"),t.setAttribute("alt",""),e.cursorWrapper={dom:t,deco:Ai.widget(e.state.selection.head,t,{raw:!0,marks:e.markCursor})}}else e.cursorWrapper=null}function ps(e){return!e.someProp("editable",(t=>!1===t(e.state)))}function fs(e,t){let n=Math.min(e.$anchor.sharedDepth(e.head),t.$anchor.sharedDepth(t.head));return e.$anchor.start(n)!=t.$anchor.start(n)}function ms(e){let t=Object.create(null);function n(e){for(let n in e)Object.prototype.hasOwnProperty.call(t,n)||(t[n]=e[n])}return e.someProp("nodeViews",n),e.someProp("markViews",n),t}function gs(e,t){let n=0,r=0;for(let o in e){if(e[o]!=t[o])return!0;n++}for(let o in t)r++;return n!=r}function vs(e){if(e.spec.state||e.spec.filterTransaction||e.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}function ys(e={}){return new tn({view(t){return new bs(t,e)}})}class bs{constructor(e,t){var n;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=null!==(n=t.width)&&void 0!==n?n:1,this.color=!1===t.color?void 0:t.color||"black",this.class=t.class,this.handlers=["dragover","dragend","drop","dragleave"].map((t=>{let n=e=>{this[t](e)};return e.dom.addEventListener(t,n),{name:t,handler:n}}))}destroy(){this.handlers.forEach((({name:e,handler:t})=>this.editorView.dom.removeEventListener(e,t)))}update(e,t){null!=this.cursorPos&&t.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,null==e?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e,t=this.editorView.state.doc.resolve(this.cursorPos),n=!t.parent.inlineContent;if(n){let n=t.nodeBefore,r=t.nodeAfter;if(n||r){let t=this.editorView.nodeDOM(this.cursorPos-(n?n.nodeSize:0));if(t){let o=t.getBoundingClientRect(),i=n?o.bottom:o.top;n&&r&&(i=(i+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),e={left:o.left,right:o.right,top:i-this.width/2,bottom:i+this.width/2}}}}if(!e){let t=this.editorView.coordsAtPos(this.cursorPos);e={left:t.left-this.width/2,right:t.left+this.width/2,top:t.top,bottom:t.bottom}}let r,o,i=this.editorView.dom.offsetParent;if(this.element||(this.element=i.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n),!i||i==document.body&&"static"==getComputedStyle(i).position)r=-pageXOffset,o=-pageYOffset;else{let e=i.getBoundingClientRect();r=e.left-i.scrollLeft,o=e.top-i.scrollTop}this.element.style.left=e.left-r+"px",this.element.style.top=e.top-o+"px",this.element.style.width=e.right-e.left+"px",this.element.style.height=e.bottom-e.top+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout((()=>this.setCursor(null)),e)}dragover(e){if(!this.editorView.editable)return;let t=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),n=t&&t.inside>=0&&this.editorView.state.doc.nodeAt(t.inside),r=n&&n.type.spec.disableDropCursor,o="function"==typeof r?r(this.editorView,t,e):r;if(t&&!o){let e=t.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let t=ht(this.editorView.state.doc,e,this.editorView.dragging.slice);null!=t&&(e=t)}this.setCursor(e),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){e.target!=this.editorView.dom&&this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}for(var ws={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},ks={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},xs="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),Ss="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),Cs=0;Cs<10;Cs++)ws[48+Cs]=ws[96+Cs]=String(Cs);for(Cs=1;Cs<=24;Cs++)ws[Cs+111]="F"+Cs;for(Cs=65;Cs<=90;Cs++)ws[Cs]=String.fromCharCode(Cs+32),ks[Cs]=String.fromCharCode(Cs);for(var _s in ws)ks.hasOwnProperty(_s)||(ks[_s]=ws[_s]);function Os(e){var t=xs&&e.metaKey&&e.shiftKey&&!e.ctrlKey&&!e.altKey||Ss&&e.shiftKey&&e.key&&1==e.key.length||"Unidentified"==e.key,n=!t&&e.key||(e.shiftKey?ks:ws)[e.keyCode]||e.key||"Unidentified";return"Esc"==n&&(n="Escape"),"Del"==n&&(n="Delete"),"Left"==n&&(n="ArrowLeft"),"Up"==n&&(n="ArrowUp"),"Right"==n&&(n="ArrowRight"),"Down"==n&&(n="ArrowDown"),n}const Ms="undefined"!=typeof navigator&&/Mac|iP(hone|[oa]d)/.test(navigator.platform);function Es(e){let t,n,r,o,i=e.split(/-(?!$)/),s=i[i.length-1];"Space"==s&&(s=" ");for(let a=0;a<i.length-1;a++){let e=i[a];if(/^(cmd|meta|m)$/i.test(e))o=!0;else if(/^a(lt)?$/i.test(e))t=!0;else if(/^(c|ctrl|control)$/i.test(e))n=!0;else if(/^s(hift)?$/i.test(e))r=!0;else{if(!/^mod$/i.test(e))throw new Error("Unrecognized modifier name: "+e);Ms?o=!0:n=!0}}return t&&(s="Alt-"+s),n&&(s="Ctrl-"+s),o&&(s="Meta-"+s),r&&(s="Shift-"+s),s}function Ts(e){let t=Object.create(null);for(let n in e)t[Es(n)]=e[n];return t}function As(e,t,n=!0){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),n&&t.shiftKey&&(e="Shift-"+e),e}function Ns(e){return new tn({props:{handleKeyDown:Rs(e)}})}function Rs(e){let t=Ts(e);return function(e,n){let r,o=Os(n),i=t[As(o,n)];if(i&&i(e.state,e.dispatch,e))return!0;if(1==o.length&&" "!=o){if(n.shiftKey){let r=t[As(o,n,!1)];if(r&&r(e.state,e.dispatch,e))return!0}if((n.shiftKey||n.altKey||n.metaKey||o.charCodeAt(0)>127)&&(r=ws[n.keyCode])&&r!=o){let o=t[As(r,n)];if(o&&o(e.state,e.dispatch,e))return!0}}return!1}}class Ds extends Dt{constructor(e){super(e,e)}map(e,t){let n=e.resolve(t.map(this.head));return Ds.valid(n)?new Ds(n):Dt.near(n)}content(){return f.empty}eq(e){return e instanceof Ds&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,t){if("number"!=typeof t.pos)throw new RangeError("Invalid input for GapCursor.fromJSON");return new Ds(e.resolve(t.pos))}getBookmark(){return new Is(this.anchor)}static valid(e){let t=e.parent;if(t.isTextblock||!zs(e)||!Ps(e))return!1;let n=t.type.spec.allowGapCursor;if(null!=n)return n;let r=t.contentMatchAt(e.index()).defaultType;return r&&r.isTextblock}static findGapCursorFrom(e,t,n=!1){e:for(;;){if(!n&&Ds.valid(e))return e;let r=e.pos,o=null;for(let n=e.depth;;n--){let i=e.node(n);if(t>0?e.indexAfter(n)<i.childCount:e.index(n)>0){o=i.child(t>0?e.indexAfter(n):e.index(n)-1);break}if(0==n)return null;r+=t;let s=e.doc.resolve(r);if(Ds.valid(s))return s}for(;;){let i=t>0?o.firstChild:o.lastChild;if(!i){if(o.isAtom&&!o.isText&&!Bt.isSelectable(o)){e=e.doc.resolve(r+o.nodeSize*t),n=!1;continue e}break}o=i,r+=t;let s=e.doc.resolve(r);if(Ds.valid(s))return s}return null}}}Ds.prototype.visible=!1,Ds.findFrom=Ds.findGapCursorFrom,Dt.jsonID("gapcursor",Ds);class Is{constructor(e){this.pos=e}map(e){return new Is(e.map(this.pos))}resolve(e){let t=e.resolve(this.pos);return Ds.valid(t)?new Ds(t):Dt.near(t)}}function zs(e){for(let t=e.depth;t>=0;t--){let n=e.index(t),r=e.node(t);if(0!=n)for(let e=r.child(n-1);;e=e.lastChild){if(0==e.childCount&&!e.inlineContent||e.isAtom||e.type.spec.isolating)return!0;if(e.inlineContent)return!1}else if(r.type.spec.isolating)return!0}return!0}function Ps(e){for(let t=e.depth;t>=0;t--){let n=e.indexAfter(t),r=e.node(t);if(n!=r.childCount)for(let e=r.child(n);;e=e.firstChild){if(0==e.childCount&&!e.inlineContent||e.isAtom||e.type.spec.isolating)return!0;if(e.inlineContent)return!1}else if(r.type.spec.isolating)return!0}return!0}function $s(){return new tn({props:{decorations:Vs,createSelectionBetween(e,t,n){return t.pos==n.pos&&Ds.valid(n)?new Ds(n):null},handleClick:js,handleKeyDown:Fs,handleDOMEvents:{beforeinput:Ls}}})}const Fs=Rs({ArrowLeft:Bs("horiz",-1),ArrowRight:Bs("horiz",1),ArrowUp:Bs("vert",-1),ArrowDown:Bs("vert",1)});function Bs(e,t){const n="vert"==e?t>0?"down":"up":t>0?"right":"left";return function(e,r,o){let i=e.selection,s=t>0?i.$to:i.$from,a=i.empty;if(i instanceof $t){if(!o.endOfTextblock(n)||0==s.depth)return!1;a=!1,s=e.doc.resolve(t>0?s.after():s.before())}let l=Ds.findGapCursorFrom(s,t,a);return!!l&&(r&&r(e.tr.setSelection(new Ds(l))),!0)}}function js(e,t,n){if(!e||!e.editable)return!1;let r=e.state.doc.resolve(t);if(!Ds.valid(r))return!1;let o=e.posAtCoords({left:n.clientX,top:n.clientY});return!(o&&o.inside>-1&&Bt.isSelectable(e.state.doc.nodeAt(o.inside)))&&(e.dispatch(e.state.tr.setSelection(new Ds(r))),!0)}function Ls(e,t){if("insertCompositionText"!=t.inputType||!(e.state.selection instanceof Ds))return!1;let{$from:n}=e.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(e.state.schema.nodes.text);if(!r)return!1;let o=l.empty;for(let s=r.length-1;s>=0;s--)o=l.from(r[s].createAndFill(null,o));let i=e.state.tr.replace(n.pos,n.pos,new f(o,0,0));return i.setSelection($t.near(i.doc.resolve(n.pos+1))),e.dispatch(i),!1}function Vs(e){if(!(e.selection instanceof Ds))return null;let t=document.createElement("div");return t.className="ProseMirror-gapcursor",Di.create(e.doc,[Ai.widget(e.selection.head,t,{key:"gapcursor"})])}const qs=(e,t)=>!e.selection.empty&&(t&&t(e.tr.deleteSelection().scrollIntoView()),!0);function Hs(e,t){let{$cursor:n}=e.selection;return!n||(t?!t.endOfTextblock("backward",e):n.parentOffset>0)?null:n}const Ws=(e,t,n)=>{let r=Hs(e,n);if(!r)return!1;let o=Ks(r);if(!o){let n=r.blockRange(),o=n&&Xe(n);return null!=o&&(t&&t(e.tr.lift(n,o).scrollIntoView()),!0)}let i=o.nodeBefore;if(!i.type.spec.isolating&&ca(e,o,t))return!0;if(0==r.parent.content.size&&(Js(i,"end")||Bt.isSelectable(i))){let n=pt(e.doc,r.before(),r.after(),f.empty);if(n&&n.slice.size<n.to-n.from){if(t){let r=e.tr.step(n);r.setSelection(Js(i,"end")?Dt.findFrom(r.doc.resolve(r.mapping.map(o.pos,-1)),-1):Bt.create(r.doc,o.pos-i.nodeSize)),t(r.scrollIntoView())}return!0}}return!(!i.isAtom||o.depth!=r.depth-1)&&(t&&t(e.tr.delete(o.pos-i.nodeSize,o.pos).scrollIntoView()),!0)};function Js(e,t,n=!1){for(let r=e;r;r="start"==t?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&1!=r.childCount)return!1}return!1}const Us=(e,t,n)=>{let{$head:r,empty:o}=e.selection,i=r;if(!o)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",e):r.parentOffset>0)return!1;i=Ks(r)}let s=i&&i.nodeBefore;return!(!s||!Bt.isSelectable(s))&&(t&&t(e.tr.setSelection(Bt.create(e.doc,i.pos-s.nodeSize)).scrollIntoView()),!0)};function Ks(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){if(e.index(t)>0)return e.doc.resolve(e.before(t+1));if(e.node(t).type.spec.isolating)break}return null}function Gs(e,t){let{$cursor:n}=e.selection;return!n||(t?!t.endOfTextblock("forward",e):n.parentOffset<n.parent.content.size)?null:n}const Xs=(e,t,n)=>{let r=Gs(e,n);if(!r)return!1;let o=Ys(r);if(!o)return!1;let i=o.nodeAfter;if(ca(e,o,t))return!0;if(0==r.parent.content.size&&(Js(i,"start")||Bt.isSelectable(i))){let n=pt(e.doc,r.before(),r.after(),f.empty);if(n&&n.slice.size<n.to-n.from){if(t){let r=e.tr.step(n);r.setSelection(Js(i,"start")?Dt.findFrom(r.doc.resolve(r.mapping.map(o.pos)),1):Bt.create(r.doc,r.mapping.map(o.pos))),t(r.scrollIntoView())}return!0}}return!(!i.isAtom||o.depth!=r.depth-1)&&(t&&t(e.tr.delete(o.pos,o.pos+i.nodeSize).scrollIntoView()),!0)},Zs=(e,t,n)=>{let{$head:r,empty:o}=e.selection,i=r;if(!o)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",e):r.parentOffset<r.parent.content.size)return!1;i=Ys(r)}let s=i&&i.nodeAfter;return!(!s||!Bt.isSelectable(s))&&(t&&t(e.tr.setSelection(Bt.create(e.doc,i.pos)).scrollIntoView()),!0)};function Ys(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){let n=e.node(t);if(e.index(t)+1<n.childCount)return e.doc.resolve(e.after(t+1));if(n.type.spec.isolating)break}return null}const Qs=(e,t)=>{let{$from:n,$to:r}=e.selection,o=n.blockRange(r),i=o&&Xe(o);return null!=i&&(t&&t(e.tr.lift(o,i).scrollIntoView()),!0)},ea=(e,t)=>{let{$head:n,$anchor:r}=e.selection;return!(!n.parent.type.spec.code||!n.sameParent(r))&&(t&&t(e.tr.insertText("\n").scrollIntoView()),!0)};function ta(e){for(let t=0;t<e.edgeCount;t++){let{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const na=(e,t)=>{let{$head:n,$anchor:r}=e.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let o=n.node(-1),i=n.indexAfter(-1),s=ta(o.contentMatchAt(i));if(!s||!o.canReplaceWith(i,i,s))return!1;if(t){let r=n.after(),o=e.tr.replaceWith(r,r,s.createAndFill());o.setSelection(Dt.near(o.doc.resolve(r),1)),t(o.scrollIntoView())}return!0},ra=(e,t)=>{let n=e.selection,{$from:r,$to:o}=n;if(n instanceof Lt||r.parent.inlineContent||o.parent.inlineContent)return!1;let i=ta(o.parent.contentMatchAt(o.indexAfter()));if(!i||!i.isTextblock)return!1;if(t){let n=(!r.parentOffset&&o.index()<o.parent.childCount?r:o).pos,s=e.tr.insert(n,i.createAndFill());s.setSelection($t.create(s.doc,n+1)),t(s.scrollIntoView())}return!0},oa=(e,t)=>{let{$cursor:n}=e.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let r=n.before();if(st(e.doc,r))return t&&t(e.tr.split(r).scrollIntoView()),!0}let r=n.blockRange(),o=r&&Xe(r);return null!=o&&(t&&t(e.tr.lift(r,o).scrollIntoView()),!0)};function ia(e){return(t,n)=>{let{$from:r,$to:o}=t.selection;if(t.selection instanceof Bt&&t.selection.node.isBlock)return!(!r.parentOffset||!st(t.doc,r.pos))&&(n&&n(t.tr.split(r.pos).scrollIntoView()),!0);if(!r.parent.isBlock)return!1;if(n){let i=o.parentOffset==o.parent.content.size,s=t.tr;(t.selection instanceof $t||t.selection instanceof Lt)&&s.deleteSelection();let a=0==r.depth?null:ta(r.node(-1).contentMatchAt(r.indexAfter(-1))),l=e&&e(o.parent,i),c=l?[l]:i&&a?[{type:a}]:void 0,u=st(s.doc,s.mapping.map(r.pos),1,c);if(c||u||!st(s.doc,s.mapping.map(r.pos),1,a?[{type:a}]:void 0)||(a&&(c=[{type:a}]),u=!0),u&&(s.split(s.mapping.map(r.pos),1,c),!i&&!r.parentOffset&&r.parent.type!=a)){let e=s.mapping.map(r.before()),t=s.doc.resolve(e);a&&r.node(-1).canReplaceWith(t.index(),t.index()+1,a)&&s.setNodeMarkup(s.mapping.map(r.before()),a)}n(s.scrollIntoView())}return!0}}const sa=ia(),aa=(e,t)=>(t&&t(e.tr.setSelection(new Lt(e.doc))),!0);function la(e,t,n){let r=t.nodeBefore,o=t.nodeAfter,i=t.index();return!!(r&&o&&r.type.compatibleContent(o.type))&&(!r.content.size&&t.parent.canReplace(i-1,i)?(n&&n(e.tr.delete(t.pos-r.nodeSize,t.pos).scrollIntoView()),!0):!(!t.parent.canReplace(i,i+1)||!o.isTextblock&&!lt(e.doc,t.pos))&&(n&&n(e.tr.clearIncompatible(t.pos,r.type,r.contentMatchAt(r.childCount)).join(t.pos).scrollIntoView()),!0))}function ca(e,t,n){let r,o,i=t.nodeBefore,s=t.nodeAfter;if(i.type.spec.isolating||s.type.spec.isolating)return!1;if(la(e,t,n))return!0;let a=t.parent.canReplace(t.index(),t.index()+1);if(a&&(r=(o=i.contentMatchAt(i.childCount)).findWrapping(s.type))&&o.matchType(r[0]||s.type).validEnd){if(n){let o=t.pos+s.nodeSize,a=l.empty;for(let e=r.length-1;e>=0;e--)a=l.from(r[e].create(null,a));a=l.from(i.copy(a));let c=e.tr.step(new He(t.pos-1,o,t.pos,o,new f(a,1,0),r.length,!0)),u=o+2*r.length;lt(c.doc,u)&&c.join(u),n(c.scrollIntoView())}return!0}let c=Dt.findFrom(t,1),u=c&&c.$from.blockRange(c.$to),d=u&&Xe(u);if(null!=d&&d>=t.depth)return n&&n(e.tr.lift(u,d).scrollIntoView()),!0;if(a&&Js(s,"start",!0)&&Js(i,"end")){let r=i,o=[];for(;;){if(o.push(r),r.isTextblock)break;r=r.lastChild}let a=s,c=1;for(;!a.isTextblock;a=a.firstChild)c++;if(r.canReplace(r.childCount,r.childCount,a.content)){if(n){let r=l.empty;for(let e=o.length-1;e>=0;e--)r=l.from(o[e].copy(r));let i=e.tr.step(new He(t.pos-o.length,t.pos+s.nodeSize,t.pos+c,t.pos+s.nodeSize-c,new f(r,o.length,0),0,!0));n(i.scrollIntoView())}return!0}}return!1}function ua(e){return function(t,n){let r=t.selection,o=e<0?r.$from:r.$to,i=o.depth;while(o.node(i).isInline){if(!i)return!1;i--}return!!o.node(i).isTextblock&&(n&&n(t.tr.setSelection($t.create(t.doc,e<0?o.start(i):o.end(i)))),!0)}}const da=ua(-1),ha=ua(1);function pa(e,t=null){return function(n,r){let{$from:o,$to:i}=n.selection,s=o.blockRange(i),a=s&&Ye(s,e,t);return!!a&&(r&&r(n.tr.wrap(s,a).scrollIntoView()),!0)}}function fa(e,t=null){return function(n,r){let o=!1;for(let i=0;i<n.selection.ranges.length&&!o;i++){let{$from:{pos:r},$to:{pos:s}}=n.selection.ranges[i];n.doc.nodesBetween(r,s,((r,i)=>{if(o)return!1;if(r.isTextblock&&!r.hasMarkup(e,t))if(r.type==e)o=!0;else{let t=n.doc.resolve(i),r=t.index();o=t.parent.canReplaceWith(r,r+1,e)}}))}if(!o)return!1;if(r){let o=n.tr;for(let r=0;r<n.selection.ranges.length;r++){let{$from:{pos:i},$to:{pos:s}}=n.selection.ranges[r];o.setBlockType(i,s,e,t)}r(o.scrollIntoView())}return!0}}function ma(e,t,n){for(let r=0;r<t.length;r++){let{$from:o,$to:i}=t[r],s=0==o.depth&&(e.inlineContent&&e.type.allowsMarkType(n));if(e.nodesBetween(o.pos,i.pos,(e=>{if(s)return!1;s=e.inlineContent&&e.type.allowsMarkType(n)})),s)return!0}return!1}function ga(e,t=null){return function(n,r){let{empty:o,$cursor:i,ranges:s}=n.selection;if(o&&!i||!ma(n.doc,s,e))return!1;if(r)if(i)e.isInSet(n.storedMarks||i.marks())?r(n.tr.removeStoredMark(e)):r(n.tr.addStoredMark(e.create(t)));else{let o=!1,i=n.tr;for(let t=0;!o&&t<s.length;t++){let{$from:r,$to:i}=s[t];o=n.doc.rangeHasMark(r.pos,i.pos,e)}for(let n=0;n<s.length;n++){let{$from:r,$to:a}=s[n];if(o)i.removeMark(r.pos,a.pos,e);else{let n=r.pos,o=a.pos,s=r.nodeAfter,l=a.nodeBefore,c=s&&s.isText?/^\s*/.exec(s.text)[0].length:0,u=l&&l.isText?/\s*$/.exec(l.text)[0].length:0;n+c<o&&(n+=c,o-=u),i.addMark(n,o,e.create(t))}}r(i.scrollIntoView())}return!0}}function va(...e){return function(t,n,r){for(let o=0;o<e.length;o++)if(e[o](t,n,r))return!0;return!1}}let ya=va(qs,Ws,Us),ba=va(qs,Xs,Zs);const wa={Enter:va(ea,ra,oa,sa),"Mod-Enter":na,Backspace:ya,"Mod-Backspace":ya,"Shift-Backspace":ya,Delete:ba,"Mod-Delete":ba,"Mod-a":aa},ka={"Ctrl-h":wa["Backspace"],"Alt-Backspace":wa["Mod-Backspace"],"Ctrl-d":wa["Delete"],"Ctrl-Alt-Backspace":wa["Mod-Delete"],"Alt-Delete":wa["Mod-Delete"],"Alt-d":wa["Mod-Delete"],"Ctrl-a":da,"Ctrl-e":ha};for(let os in wa)ka[os]=wa[os];const xa="undefined"!=typeof navigator?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!("undefined"==typeof os||!os.platform)&&"darwin"==os.platform(),Sa=xa?ka:wa;class Ca{constructor(e,t){this.match=e,this.match=e,this.handler="string"==typeof t?_a(t):t}}function _a(e){return function(t,n,r,o){let i=e;if(n[1]){let e=n[0].lastIndexOf(n[1]);i+=n[0].slice(e+n[1].length),r+=e;let t=r-o;t>0&&(i=n[0].slice(e-t,e)+i,r=o)}return t.tr.insertText(i,r,o)}}const Oa=500;function Ma({rules:e}){let t=new tn({state:{init(){return null},apply(e,t){let n=e.getMeta(this);return n||(e.selectionSet||e.docChanged?null:t)}},props:{handleTextInput(n,r,o,i){return Ea(n,r,o,i,e,t)},handleDOMEvents:{compositionend:n=>{setTimeout((()=>{let{$cursor:r}=n.state.selection;r&&Ea(n,r.pos,r.pos,"",e,t)}))}}},isInputRules:!0});return t}function Ea(e,t,n,r,o,i){if(e.composing)return!1;let s=e.state,a=s.doc.resolve(t);if(a.parent.type.spec.code)return!1;let l=a.parent.textBetween(Math.max(0,a.parentOffset-Oa),a.parentOffset,null,"")+r;for(let c=0;c<o.length;c++){let a=o[c].match.exec(l),u=a&&o[c].handler(s,a,t-(a[0].length-r.length),n);if(u)return e.dispatch(u.setMeta(i,{transform:u,from:t,to:n,text:r})),!0}return!1}const Ta=(e,t)=>{let n=e.plugins;for(let r=0;r<n.length;r++){let o,i=n[r];if(i.spec.isInputRules&&(o=i.getState(e))){if(t){let n=e.tr,r=o.transform;for(let e=r.steps.length-1;e>=0;e--)n.step(r.steps[e].invert(r.docs[e]));if(o.text){let t=n.doc.resolve(o.from).marks();n.replaceWith(o.from,o.to,e.schema.text(o.text,t))}else n.delete(o.from,o.to);t(n)}return!0}}return!1};new Ca(/--$/,""),new Ca(/\.\.\.$/,""),new Ca(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(")$/,""),new Ca(/"$/,""),new Ca(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(')$/,""),new Ca(/'$/,"");function Aa(e,t,n=null,r){return new Ca(e,((e,o,i,s)=>{let a=n instanceof Function?n(o):n,l=e.tr.delete(i,s),c=l.doc.resolve(i),u=c.blockRange(),d=u&&Ye(u,t,a);if(!d)return null;l.wrap(u,d);let h=l.doc.resolve(i-1).nodeBefore;return h&&h.type==t&&lt(l.doc,i-1)&&(!r||r(o,h))&&l.join(i-1),l}))}function Na(e,t,n=null){return new Ca(e,((e,r,o,i)=>{let s=e.doc.resolve(o),a=n instanceof Function?n(r):n;return s.node(-1).canReplaceWith(s.index(-1),s.indexAfter(-1),t)?e.tr.delete(o,i).setBlockType(o,o,t,a):null}))}
/*!
* tiptap-utils v1.13.0
* (c) 2021 berdosis GbR (limited liability)
* @license MIT
*/
function Ra(e,t){return t?e.createChecked(null,t):e.createAndFill()}function Da(e){if(e.cached.tableNodeTypes)return e.cached.tableNodeTypes;const t={};return Object.keys(e.nodes).forEach((n=>{const r=e.nodes[n];r.spec.tableRole&&(t[r.spec.tableRole]=r)})),e.cached.tableNodeTypes=t,t}function Ia(e,t,n,r,o){const i=Da(e),s=[],a=[];for(let c=0;c<n;c+=1){const e=Ra(i.cell,o);if(e&&a.push(e),r){const e=Ra(i.header_cell,o);e&&s.push(e)}}const l=[];for(let c=0;c<t;c+=1)l.push(i.row.createChecked(null,r&&0===c?s:a));return i.table.createChecked(null,l)}function za(e,t){return Array.isArray(e)&&e.indexOf(t.type)>-1||t.type===e}function Pa(e,t){for(let n=e.depth;n>0;n-=1){const r=e.node(n);if(t(r))return{pos:n>0?e.before(n):0,start:e.start(n),depth:n,node:r}}}function $a(e){return t=>Pa(t.$from,e)}function Fa(e){return e instanceof Bt}function Ba(e){return function(t){if(Fa(t)){const{node:n}=t,{$from:r}=t;if(za(e,n))return{node:n,pos:r.pos,depth:r.depth}}}}function ja(e,t){const{from:n,to:r}=e.selection;let o=[];e.doc.nodesBetween(n,r,(e=>{o=[...o,...e.marks]}));const i=o.find((e=>e.type.name===t.name));return i?i.attrs:{}}function La(e=null,t=null){if(!e||!t)return!1;const n=e.parent.childAfter(e.parentOffset);if(!n.node)return!1;const r=n.node.marks.find((e=>e.type===t));if(!r)return!1;let o=e.index(),i=e.start()+n.offset,s=o+1,a=i+n.node.nodeSize;while(o>0&&r.isInSet(e.parent.child(o-1).marks))o-=1,i-=e.parent.child(o).nodeSize;while(s<e.parent.childCount&&r.isInSet(e.parent.child(s).marks))a+=e.parent.child(s).nodeSize,s+=1;return{from:i,to:a}}function Va(e,t){const{from:n,to:r}=e.selection;let o=[];e.doc.nodesBetween(n,r,(e=>{o=[...o,e]}));const i=o.reverse().find((e=>e.type.name===t.name));return i?i.attrs:{}}function qa(e,t){const{from:n,$from:r,to:o,empty:i}=e.selection;return i?!!t.isInSet(e.storedMarks||r.marks()):!!e.doc.rangeHasMark(n,o,t)}function Ha(e,t,n={}){const r=e=>e.type===t,o=Ba(t)(e.selection)||$a(r)(e.selection);return Object.keys(n).length&&o?o.node.hasMarkup(t,{...o.node.attrs,...n}):!!o}function Wa(e,t=null){return function(n,r){let{$from:o,$to:i}=n.selection,s=o.blockRange(i),a=!1,l=s;if(!s)return!1;if(s.depth>=2&&o.node(s.depth-1).type.compatibleContent(e)&&0==s.startIndex){if(0==o.index(s.depth-1))return!1;let e=n.doc.resolve(s.start-2);l=new N(e,e,s.depth),s.endIndex<s.parent.childCount&&(s=new N(o,n.doc.resolve(i.end(s.depth)),s.depth)),a=!0}let c=Ye(l,e,t,s);return!!c&&(r&&r(Ja(n.tr,s,c,a,e).scrollIntoView()),!0)}}function Ja(e,t,n,r,o){let i=l.empty;for(let d=n.length-1;d>=0;d--)i=l.from(n[d].type.create(n[d].attrs,i));e.step(new He(t.start-(r?2:0),t.end,t.start,t.end,new f(i,0,0),n.length,!0));let s=0;for(let l=0;l<n.length;l++)n[l].type==o&&(s=l+1);let a=n.length-s,c=t.start+n.length-(r?2:0),u=t.parent;for(let l=t.startIndex,d=t.endIndex,h=!0;l<d;l++,h=!1)!h&&st(e.doc,c,a)&&(e.split(c,a),c+=2*a),c+=u.child(l).nodeSize;return e}function Ua(e,t){return function(n,r){let{$from:o,$to:i,node:s}=n.selection;if(s&&s.isBlock||o.depth<2||!o.sameParent(i))return!1;let a=o.node(-1);if(a.type!=e)return!1;if(0==o.parent.content.size&&o.node(-1).childCount==o.indexAfter(-1)){if(3==o.depth||o.node(-3).type!=e||o.index(-2)!=o.node(-2).childCount-1)return!1;if(r){let t=l.empty,i=o.index(-1)?1:o.index(-2)?2:3;for(let e=o.depth-i;e>=o.depth-3;e--)t=l.from(o.node(e).copy(t));let s=o.indexAfter(-1)<o.node(-2).childCount?1:o.indexAfter(-2)<o.node(-3).childCount?2:3;t=t.append(l.from(e.createAndFill()));let a=o.before(o.depth-(i-1)),c=n.tr.replace(a,o.after(-s),new f(t,4-i,0)),u=-1;c.doc.nodesBetween(a,c.doc.content.size,((e,t)=>{if(u>-1)return!1;e.isTextblock&&0==e.content.size&&(u=t+1)})),u>-1&&c.setSelection(Dt.near(c.doc.resolve(u))),r(c.scrollIntoView())}return!0}let c=i.pos==o.end()?a.contentMatchAt(0).defaultType:null,u=n.tr.delete(o.pos,i.pos),d=c?[t?{type:e,attrs:t}:null,{type:c}]:void 0;return!!st(u.doc,o.pos,2,d)&&(r&&r(u.split(o.pos,2,d).scrollIntoView()),!0)}}function Ka(e){return function(t,n){let{$from:r,$to:o}=t.selection,i=r.blockRange(o,(t=>t.childCount>0&&t.firstChild.type==e));return!!i&&(!n||(r.node(i.depth-1).type==e?Ga(t,n,e,i):Xa(t,n,i)))}}function Ga(e,t,n,r){let o=e.tr,i=r.end,s=r.$to.end(r.depth);i<s&&(o.step(new He(i-1,s,i,s,new f(l.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new N(o.doc.resolve(r.$from.pos),o.doc.resolve(s),r.depth));const a=Xe(r);if(null==a)return!1;o.lift(r,a);let c=o.mapping.map(i,-1)-1;return lt(o.doc,c)&&o.join(c),t(o.scrollIntoView()),!0}function Xa(e,t,n){let r=e.tr,o=n.parent;for(let l=n.end,f=n.endIndex-1,m=n.startIndex;f>m;f--)l-=o.child(f).nodeSize,r.delete(l-1,l+1);let i=r.doc.resolve(n.start),s=i.nodeAfter;if(r.mapping.map(n.end)!=n.start+i.nodeAfter.nodeSize)return!1;let a=0==n.startIndex,c=n.endIndex==o.childCount,u=i.node(-1),d=i.index(-1);if(!u.canReplace(d+(a?0:1),d+1,s.content.append(c?l.empty:l.from(o))))return!1;let h=i.pos,p=h+s.nodeSize;return r.step(new He(h-(a?1:0),p+(c?1:0),h+1,p-1,new f((a?l.empty:l.from(o.copy(l.empty))).append(c?l.empty:l.from(o.copy(l.empty))),a?0:1,c?0:1),a?0:1)),t(r.scrollIntoView()),!0}function Za(e){return function(t,n){let{$from:r,$to:o}=t.selection,i=r.blockRange(o,(t=>t.childCount>0&&t.firstChild.type==e));if(!i)return!1;let s=i.startIndex;if(0==s)return!1;let a=i.parent,c=a.child(s-1);if(c.type!=e)return!1;if(n){let r=c.lastChild&&c.lastChild.type==a.type,o=l.from(r?e.create():null),s=new f(l.from(e.create(null,l.from(a.type.create(null,o)))),r?3:1,0),u=i.start,d=i.end;n(t.tr.step(new He(u-(r?3:1),d,u,d,s,1,!0)).scrollIntoView())}return!0}}function Ya(e,t,n){let r=[];return n.doc.nodesBetween(e,t,((e,t)=>{r=[...r,...e.marks.map((n=>({start:t,end:t+e.nodeSize,mark:n})))]})),r}function Qa(e,t,n){return new Ca(e,((e,r,o,i)=>{const s=n instanceof Function?n(r):n,{tr:a}=e,l=r.length-1;let c=i,u=o;if(r[l]){const n=o+r[0].indexOf(r[l-1]),s=n+r[l-1].length-1,d=n+r[l-1].lastIndexOf(r[l]),h=d+r[l].length,p=Ya(o,i,e).filter((e=>{const{excluded:n}=e.mark.type;return n.find((e=>e.name===t.name))})).filter((e=>e.end>n));if(p.length)return!1;h<s&&a.delete(h,s),d>n&&a.delete(n,d),u=n,c=u+r[l].length}return a.addMark(u,c,t.create(s)),a.removeStoredMark(t),a}))}function el(e,t,n){return new Ca(e,((e,r,o,i)=>{const s=n instanceof Function?n(r):n,{tr:a}=e;return r[0]&&a.replaceWith(o-1,i,t.create(s)),a}))}function tl(e,t,n){const r=o=>{const i=[];return o.forEach((o=>{if(o.isText){const{text:r}=o;let s,a=0;do{if(s=e.exec(r),s){const e=s.index,r=e+s[0].length,l=n instanceof Function?n(s[0]):n;e>0&&i.push(o.cut(a,e)),i.push(o.cut(e,r).mark(t.create(l).addToSet(o.marks))),a=r}}while(s);a<r.length&&i.push(o.cut(a))}else i.push(o.copy(r(o.content)))})),l.fromArray(i)};return new tn({props:{transformPasted:e=>new f(r(e.content),e.openStart,e.openEnd)}})}function nl(e,t,n){const r=(o,i)=>{const s=[];return o.forEach((o=>{if(o.isText){const{text:r,marks:a}=o;let l,c=0;const u=!!a.filter((e=>"link"===e.type.name))[0];while(!u&&null!==(l=e.exec(r)))if(i&&i.type.allowsMarkType(t)&&l[1]){const e=l.index,r=e+l[0].length,i=e+l[0].indexOf(l[1]),a=i+l[1].length,u=n instanceof Function?n(l):n;e>0&&s.push(o.cut(c,e)),s.push(o.cut(i,a).mark(t.create(u).addToSet(o.marks))),c=r}c<r.length&&s.push(o.cut(c))}else s.push(o.copy(r(o.content,o)))})),l.fromArray(s)};return new tn({props:{transformPasted:e=>new f(r(e.content),e.openStart,e.openEnd)}})}function rl(e){return(t,n)=>{const{tr:r,selection:o}=t;let{from:i,to:s}=o;const{$from:a,empty:l}=o;if(l){const t=La(a,e);i=t.from,s=t.to}return r.removeMark(i,s,e),n(r)}}function ol(e,t,n=1,r){const o=e.resolve(t),i=o.depth-n,s=r&&r[r.length-1]||o.parent;if(i<0||o.parent.type.spec.isolating||!o.parent.canReplace(o.index(),o.parent.childCount)||!s.type.validContent(o.parent.content.cutByIndex(o.index(),o.parent.childCount)))return!1;for(let c=o.depth-1,u=n-2;c>i;c--,u--){const e=o.node(c),t=o.index(c);if(e.type.spec.isolating)return!1;let n=e.content.cutByIndex(t,e.childCount);const i=r&&r[u]||e;if(i!=e&&(n=n.replaceChild(0,i.type.create(i.attrs))),!e.canReplace(t+1,e.childCount))return!1}const a=o.indexAfter(i),l=r&&r[0];return o.node(i).canReplaceWith(a,a,l?l.type:o.node(i+1).type)}function il(e){return function(t,n){const{$from:r,$to:o,node:i}=t.selection;if(i&&i.isBlock||r.depth<2||!r.sameParent(o))return!1;const s=r.node(-1);if(s.type!=e)return!1;if(0==r.parent.content.size){if(2==r.depth||r.node(-3).type!=e||r.index(-2)!=r.node(-2).childCount-1)return!1;if(n){let o=l.empty;const i=r.index(-1)>0;for(let e=r.depth-(i?1:2);e>=r.depth-3;e--)o=l.from(r.node(e).copy(o));o=o.append(l.from(e.createAndFill()));const s=t.tr.replace(r.before(i?null:-1),r.after(-3),new f(o,i?3:2,2));s.setSelection(t.selection.constructor.near(s.doc.resolve(r.pos+(i?3:2)))),n(s.scrollIntoView())}return!0}const a=o.pos==r.end()?s.contentMatchAt(r.indexAfter(-1)).defaultType:null,c=t.tr.delete(r.pos,o.pos);let u=a&&[{type:e},{type:a}];return u||(u=[{type:e},null]),!!ol(c.doc,r.pos,2,u)&&(n&&n(c.split(r.pos,2,u).scrollIntoView()),!0)}}function sl(e,t,n={}){return(r,o,i)=>{const s=Ha(r,e,n);return s?fa(t)(r,o,i):fa(e,n)(r,o,i)}}function al(e,t){return e.type===t.nodes.bullet_list||e.type===t.nodes.ordered_list||e.type===t.nodes.todo_list}function ll(e,t){return(n,r,o)=>{const{schema:i,selection:s}=n,{$from:a,$to:l}=s,c=a.blockRange(l);if(!c)return!1;const u=$a((e=>al(e,i)))(s);if(c.depth>=1&&u&&c.depth-u.depth<=1){if(u.node.type===e)return Ka(t)(n,r,o);if(al(u.node,i)&&e.validContent(u.node.content)){const{tr:t}=n;return t.setNodeMarkup(u.pos,e),r&&r(t),!1}}return Wa(e)(n,r,o)}}function cl(e,t={}){return(n,r,o)=>{const i=Ha(n,e,t);return i?Qs(n,r):pa(e,t)(n,r,o)}}function ul(e,t){return(n,r)=>{const{tr:o,selection:i,doc:s}=n,{ranges:a,empty:l}=i;if(l){const{from:n,to:r}=La(i.$from,e);s.rangeHasMark(n,r,e)&&o.removeMark(n,r,e),o.addMark(n,r,e.create(t))}else a.forEach((n=>{const{$to:r,$from:i}=n;s.rangeHasMark(i.pos,r.pos,e)&&o.removeMark(i.pos,r.pos,e),o.addMark(i.pos,r.pos,e.create(t))}));return r(o)}}
/*!
* tiptap v1.32.1
* (c) 2021 berdosis GbR (limited liability)
* @license MIT
*/
function dl(e){return e.replace(/(?:^\w|[A-Z]|\b\w)/g,((e,t)=>0===t?e.toLowerCase():e.toUpperCase())).replace(/\s+/g,"")}class hl{constructor(e,{editor:t,extension:n,parent:r,node:o,view:i,decorations:s,getPos:a}){this.component=e,this.editor=t,this.extension=n,this.parent=r,this.node=o,this.view=i,this.decorations=s,this.isNode=!!this.node.marks,this.isMark=!this.isNode,this.getPos=this.isMark?this.getMarkPos:a,this.captureEvents=!0,this.dom=this.createDOM(),this.contentDOM=this.vm.$refs.content}createDOM(){const e=r["default"].extend(this.component),t={editor:this.editor,node:this.node,view:this.view,getPos:()=>this.getPos(),decorations:this.decorations,selected:!1,options:this.extension.options,updateAttrs:e=>this.updateAttrs(e)};return"function"===typeof this.extension.setSelection&&(this.setSelection=this.extension.setSelection),"function"===typeof this.extension.update&&(this.update=this.extension.update),this.vm=new e({parent:this.parent,propsData:t}).$mount(),this.vm.$el}update(e,t){return e.type===this.node.type&&(e===this.node&&this.decorations===t||(this.node=e,this.decorations=t,this.updateComponentProps({node:e,decorations:t})),!0)}updateComponentProps(e){if(!this.vm._props)return;const t=r["default"].config.silent;r["default"].config.silent=!0,Object.entries(e).forEach((([e,t])=>{this.vm._props[e]=t})),r["default"].config.silent=t}updateAttrs(e){if(!this.view.editable)return;const{state:t}=this.view,{type:n}=this.node,r=this.getPos(),o={...this.node.attrs,...e},i=this.isMark?t.tr.removeMark(r.from,r.to,n).addMark(r.from,r.to,n.create(o)):t.tr.setNodeMarkup(r,null,o);this.view.dispatch(i)}ignoreMutation(e){return"selection"!==e.type&&(!this.contentDOM||!this.contentDOM.contains(e.target))}stopEvent(e){if("function"===typeof this.extension.stopEvent)return this.extension.stopEvent(e);const t=!!this.extension.schema.draggable;if(t&&"mousedown"===e.type){const t=e.target.closest&&e.target.closest("[data-drag-handle]"),n=t&&(this.dom===t||this.dom.contains(t));n&&(this.captureEvents=!1,document.addEventListener("dragend",(()=>{this.captureEvents=!0}),{once:!0}))}const n="copy"===e.type,r="paste"===e.type,o="cut"===e.type,i=e.type.startsWith("drag")||"drop"===e.type;return!(t&&i||n||r||o)&&this.captureEvents}selectNode(){this.updateComponentProps({selected:!0})}deselectNode(){this.updateComponentProps({selected:!1})}getMarkPos(){const e=this.view.posAtDOM(this.dom),t=this.view.state.doc.resolve(e),n=La(t,this.node.type);return n}destroy(){this.vm.$destroy()}}class pl{on(e,t){return this._callbacks=this._callbacks||{},this._callbacks[e]||(this._callbacks[e]=[]),this._callbacks[e].push(t),this}emit(e,...t){this._callbacks=this._callbacks||{};const n=this._callbacks[e];return n&&n.forEach((e=>e.apply(this,t))),this}off(e,t){if(arguments.length){const n=this._callbacks?this._callbacks[e]:null;n&&(t?this._callbacks[e]=n.filter((e=>e!==t)):delete this._callbacks[e])}else this._callbacks={};return this}}class fl{constructor(e={}){this.options={...this.defaultOptions,...e}}init(){return null}bindEditor(e=null){this.editor=e}get name(){return null}get type(){return"extension"}get defaultOptions(){return{}}get plugins(){return[]}inputRules(){return[]}pasteRules(){return[]}keys(){return{}}}class ml{constructor(e=[],t){e.forEach((e=>{e.bindEditor(t),e.init()})),this.extensions=e}get nodes(){return this.extensions.filter((e=>"node"===e.type)).reduce(((e,{name:t,schema:n})=>({...e,[t]:n})),{})}get options(){const{view:e}=this;return this.extensions.reduce(((t,n)=>({...t,[n.name]:new Proxy(n.options,{set(t,n,r){const o=t[n]!==r;return Object.assign(t,{[n]:r}),o&&e.updateState(e.state),!0}})})),{})}get marks(){return this.extensions.filter((e=>"mark"===e.type)).reduce(((e,{name:t,schema:n})=>({...e,[t]:n})),{})}get plugins(){return this.extensions.filter((e=>e.plugins)).reduce(((e,{plugins:t})=>[...e,...t]),[])}keymaps({schema:e}){const t=this.extensions.filter((e=>["extension"].includes(e.type))).filter((e=>e.keys)).map((t=>t.keys({schema:e}))),n=this.extensions.filter((e=>["node","mark"].includes(e.type))).filter((e=>e.keys)).map((t=>t.keys({type:e[`${t.type}s`][t.name],schema:e})));return[...t,...n].map((e=>Ns(e)))}inputRules({schema:e,excludedExtensions:t}){if(!(t instanceof Array)&&t)return[];const n=t instanceof Array?this.extensions.filter((e=>!t.includes(e.name))):this.extensions,r=n.filter((e=>["extension"].includes(e.type))).filter((e=>e.inputRules)).map((t=>t.inputRules({schema:e}))),o=n.filter((e=>["node","mark"].includes(e.type))).filter((e=>e.inputRules)).map((t=>t.inputRules({type:e[`${t.type}s`][t.name],schema:e})));return[...r,...o].reduce(((e,t)=>[...e,...t]),[])}pasteRules({schema:e,excludedExtensions:t}){if(!(t instanceof Array)&&t)return[];const n=t instanceof Array?this.extensions.filter((e=>!t.includes(e.name))):this.extensions,r=n.filter((e=>["extension"].includes(e.type))).filter((e=>e.pasteRules)).map((t=>t.pasteRules({schema:e}))),o=n.filter((e=>["node","mark"].includes(e.type))).filter((e=>e.pasteRules)).map((t=>t.pasteRules({type:e[`${t.type}s`][t.name],schema:e})));return[...r,...o].reduce(((e,t)=>[...e,...t]),[])}commands({schema:e,view:t}){return this.extensions.filter((e=>e.commands)).reduce(((n,r)=>{const{name:o,type:i}=r,s={},a=r.commands({schema:e,...["node","mark"].includes(i)?{type:e[`${i}s`][o]}:{}}),l=(e,n)=>!!t.editable&&(t.focus(),e(n)(t.state,t.dispatch,t)),c=(e,t)=>{Array.isArray(t)?s[e]=e=>t.forEach((t=>l(t,e))):"function"===typeof t&&(s[e]=e=>l(t,e))};return"object"===typeof a?Object.entries(a).forEach((([e,t])=>{c(e,t)})):c(o,a),{...n,...s}}),{})}}function gl(e){{const t=document.createElement("style");t.type="text/css",t.textContent=e;const{head:n}=document,{firstChild:r}=n;r?n.insertBefore(t,r):n.appendChild(t)}}class vl extends fl{constructor(e={}){super(e)}get type(){return"mark"}get view(){return null}get schema(){return null}command(){return()=>{}}}function yl(e=0,t=0,n=0){return Math.min(Math.max(parseInt(e,10),t),n)}class bl extends fl{constructor(e={}){super(e)}get type(){return"node"}get view(){return null}get schema(){return null}command(){return()=>{}}}class wl extends bl{get name(){return"doc"}get schema(){return{content:"block+"}}}class kl extends bl{get name(){return"paragraph"}get schema(){return{content:"inline*",group:"block",draggable:!1,parseDOM:[{tag:"p"}],toDOM:()=>["p",0]}}commands({type:e}){return()=>fa(e)}}class xl extends bl{get name(){return"text"}get schema(){return{group:"inline"}}}var Sl='.ProseMirror {\n  position: relative;\n}\n\n.ProseMirror {\n  word-wrap: break-word;\n  white-space: pre-wrap;\n  -webkit-font-variant-ligatures: none;\n  font-variant-ligatures: none;\n}\n\n.ProseMirror pre {\n  white-space: pre-wrap;\n}\n\n.ProseMirror-gapcursor {\n  display: none;\n  pointer-events: none;\n  position: absolute;\n}\n\n.ProseMirror-gapcursor:after {\n  content: "";\n  display: block;\n  position: absolute;\n  top: -2px;\n  width: 20px;\n  border-top: 1px solid black;\n  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;\n}\n\n@keyframes ProseMirror-cursor-blink {\n  to {\n    visibility: hidden;\n  }\n}\n\n.ProseMirror-hideselection *::selection {\n  background: transparent;\n}\n\n.ProseMirror-hideselection *::-moz-selection {\n  background: transparent;\n}\n\n.ProseMirror-hideselection * {\n  caret-color: transparent;\n}\n\n.ProseMirror-focused .ProseMirror-gapcursor {\n  display: block;\n}\n';class Cl extends pl{constructor(e={}){super(),this.defaultOptions={editorProps:{},editable:!0,autoFocus:null,extensions:[],content:"",topNode:"doc",emptyDocument:{type:"doc",content:[{type:"paragraph"}]},useBuiltInExtensions:!0,disableInputRules:!1,disablePasteRules:!1,dropCursor:{},enableDropCursor:!0,enableGapCursor:!0,parseOptions:{},injectCSS:!0,onInit:()=>{},onTransaction:()=>{},onUpdate:()=>{},onFocus:()=>{},onBlur:()=>{},onPaste:()=>{},onDrop:()=>{}},this.events=["init","transaction","update","focus","blur","paste","drop"],this.init(e)}init(e={}){this.setOptions({...this.defaultOptions,...e}),this.focused=!1,this.selection={from:0,to:0},this.element=document.createElement("div"),this.extensions=this.createExtensions(),this.nodes=this.createNodes(),this.marks=this.createMarks(),this.schema=this.createSchema(),this.plugins=this.createPlugins(),this.keymaps=this.createKeymaps(),this.inputRules=this.createInputRules(),this.pasteRules=this.createPasteRules(),this.view=this.createView(),this.commands=this.createCommands(),this.setActiveNodesAndMarks(),this.options.injectCSS&&gl(Sl),null!==this.options.autoFocus&&this.focus(this.options.autoFocus),this.events.forEach((e=>{this.on(e,this.options[dl(`on ${e}`)]||(()=>{}))})),this.emit("init",{view:this.view,state:this.state}),this.extensions.view=this.view}setOptions(e){this.options={...this.options,...e},this.view&&this.state&&this.view.updateState(this.state)}get builtInExtensions(){return this.options.useBuiltInExtensions?[new wl,new xl,new kl]:[]}get state(){return this.view?this.view.state:null}createExtensions(){return new ml([...this.builtInExtensions,...this.options.extensions],this)}createPlugins(){return this.extensions.plugins}createKeymaps(){return this.extensions.keymaps({schema:this.schema})}createInputRules(){return this.extensions.inputRules({schema:this.schema,excludedExtensions:this.options.disableInputRules})}createPasteRules(){return this.extensions.pasteRules({schema:this.schema,excludedExtensions:this.options.disablePasteRules})}createCommands(){return this.extensions.commands({schema:this.schema,view:this.view})}createNodes(){return this.extensions.nodes}createMarks(){return this.extensions.marks}createSchema(){return new ne({topNode:this.options.topNode,nodes:this.nodes,marks:this.marks})}createState(){return Qt.create({schema:this.schema,doc:this.createDocument(this.options.content),plugins:[...this.plugins,Ma({rules:this.inputRules}),...this.pasteRules,...this.keymaps,Ns({Backspace:Ta}),Ns(Sa),...this.options.enableDropCursor?[ys(this.options.dropCursor)]:[],...this.options.enableGapCursor?[$s()]:[],new tn({key:new on("editable"),props:{editable:()=>this.options.editable}}),new tn({props:{attributes:{tabindex:0},handleDOMEvents:{focus:(e,t)=>{this.focused=!0,this.emit("focus",{event:t,state:e.state,view:e});const n=this.state.tr.setMeta("focused",!0);this.view.dispatch(n)},blur:(e,t)=>{this.focused=!1,this.emit("blur",{event:t,state:e.state,view:e});const n=this.state.tr.setMeta("focused",!1);this.view.dispatch(n)}}}}),new tn({props:this.options.editorProps})]})}createDocument(e,t=this.options.parseOptions){if(null===e)return this.schema.nodeFromJSON(this.options.emptyDocument);if("object"===typeof e)try{return this.schema.nodeFromJSON(e)}catch(n){return console.warn("[tiptap warn]: Invalid content.","Passed value:",e,"Error:",n),this.schema.nodeFromJSON(this.options.emptyDocument)}if("string"===typeof e){const n=`<div>${e}</div>`,r=new window.DOMParser,o=r.parseFromString(n,"text/html").body.firstElementChild;return oe.fromSchema(this.schema).parse(o,t)}return!1}createView(){return new us(this.element,{state:this.createState(),handlePaste:(...e)=>{this.emit("paste",...e)},handleDrop:(...e)=>{this.emit("drop",...e)},dispatchTransaction:this.dispatchTransaction.bind(this)})}setParentComponent(e=null){e&&this.view.setProps({nodeViews:this.initNodeViews({parent:e,extensions:[...this.builtInExtensions,...this.options.extensions]})})}initNodeViews({parent:e,extensions:t}){return t.filter((e=>["node","mark"].includes(e.type))).filter((e=>e.view)).reduce(((t,n)=>{const r=(t,r,o,i)=>{const s=n.view;return new hl(s,{editor:this,extension:n,parent:e,node:t,view:r,getPos:o,decorations:i})};return{...t,[n.name]:r}}),{})}dispatchTransaction(e){const t=this.state.apply(e);this.view.updateState(t),this.selection={from:this.state.selection.from,to:this.state.selection.to},this.setActiveNodesAndMarks(),this.emit("transaction",{getHTML:this.getHTML.bind(this),getJSON:this.getJSON.bind(this),state:this.state,transaction:e}),e.docChanged&&!e.getMeta("preventUpdate")&&this.emitUpdate(e)}emitUpdate(e){this.emit("update",{getHTML:this.getHTML.bind(this),getJSON:this.getJSON.bind(this),state:this.state,transaction:e})}resolveSelection(e=null){if(this.selection&&null===e)return this.selection;if("start"===e||!0===e)return{from:0,to:0};if("end"===e){const{doc:e}=this.state;return{from:e.content.size,to:e.content.size}}return{from:e,to:e}}focus(e=null){if(this.view.focused&&null===e||!1===e)return;const{from:t,to:n}=this.resolveSelection(e);this.setSelection(t,n),setTimeout((()=>this.view.focus()),10)}setSelection(e=0,t=0){const{doc:n,tr:r}=this.state,o=yl(e,0,n.content.size),i=yl(t,0,n.content.size),s=$t.create(n,o,i),a=r.setSelection(s);this.view.dispatch(a)}blur(){this.view.dom.blur()}getSchemaJSON(){return JSON.parse(JSON.stringify({nodes:this.extensions.nodes,marks:this.extensions.marks}))}getHTML(){const e=document.createElement("div"),t=we.fromSchema(this.schema).serializeFragment(this.state.doc.content);return e.appendChild(t),e.innerHTML}getJSON(){return this.state.doc.toJSON()}setContent(e={},t=!1,n){const{doc:r,tr:o}=this.state,i=this.createDocument(e,n),s=$t.create(r,0,r.content.size),a=o.setSelection(s).replaceSelectionWith(i,!1).setMeta("preventUpdate",!t);this.view.dispatch(a)}clearContent(e=!1){this.setContent(this.options.emptyDocument,e)}setActiveNodesAndMarks(){this.activeMarks=Object.entries(this.schema.marks).reduce(((e,[t,n])=>({...e,[t]:(e={})=>qa(this.state,n,e)})),{}),this.activeMarkAttrs=Object.entries(this.schema.marks).reduce(((e,[t,n])=>({...e,[t]:ja(this.state,n)})),{}),this.activeNodes=Object.entries(this.schema.nodes).reduce(((e,[t,n])=>({...e,[t]:(e={})=>Ha(this.state,n,e)})),{})}getMarkAttrs(e=null){return this.activeMarkAttrs[e]}getNodeAttrs(e=null){return{...Va(this.state,this.schema.nodes[e])}}get isActive(){return Object.entries({...this.activeMarks,...this.activeNodes}).reduce(((e,[t,n])=>({...e,[t]:(e={})=>n(e)})),{})}registerPlugin(e=null,t){const n="function"===typeof t?t(e,this.state.plugins):[e,...this.state.plugins],r=this.state.reconfigure({plugins:n});this.view.updateState(r)}unregisterPlugin(e=null){if(!e||!this.view.docView)return;const t=this.state.reconfigure({plugins:this.state.plugins.filter((t=>!t.key.startsWith(`${e}$`)))});this.view.updateState(t)}destroy(){this.view&&this.view.destroy()}}var _l={props:{editor:{default:null,type:Object}},watch:{editor:{immediate:!0,handler(e){e&&e.element&&this.$nextTick((()=>{this.$el.appendChild(e.element.firstChild),e.setParentComponent(this)}))}}},render(e){return e("div")},beforeDestroy(){this.editor.element=this.$el}};class Ol{constructor({options:e}){this.options=e,this.preventHide=!1,this.mousedownHandler=this.handleClick.bind(this),this.options.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.blurHandler=()=>{this.preventHide?this.preventHide=!1:this.options.editor.emit("menubar:focusUpdate",!1)},this.options.editor.on("blur",this.blurHandler)}handleClick(){this.preventHide=!0}destroy(){this.options.element.removeEventListener("mousedown",this.mousedownHandler),this.options.editor.off("blur",this.blurHandler)}}function Ml(e){return new tn({key:new on("menu_bar"),view(t){return new Ol({editorView:t,options:e})}})}var El={props:{editor:{default:null,type:Object}},data(){return{focused:!1}},watch:{editor:{immediate:!0,handler(e){e&&this.$nextTick((()=>{e.registerPlugin(Ml({editor:e,element:this.$el})),this.focused=e.focused,e.on("focus",(()=>{this.focused=!0})),e.on("menubar:focusUpdate",(e=>{this.focused=e}))}))}}},render(){return this.editor?this.$scopedSlots.default({focused:this.focused,focus:this.editor.focus,commands:this.editor.commands,isActive:this.editor.isActive,getMarkAttrs:this.editor.getMarkAttrs.bind(this.editor),getNodeAttrs:this.editor.getNodeAttrs.bind(this.editor)}):null}};function Tl(e,t,n){const r=document.createRange();return r.setEnd(e,null==n?e.nodeValue.length:n),r.setStart(e,Math.max(t,0)),r}function Al(e,t){const n=e.getClientRects();return n.length?n[t<0?0:n.length-1]:e.getBoundingClientRect()}function Nl(e,t,n=!1){const{node:r,offset:o}=e.docView.domFromPos(t);let i,s;if(3===r.nodeType)n&&o<r.nodeValue.length?(s=Al(Tl(r,o-1,o),-1),i="right"):o<r.nodeValue.length&&(s=Al(Tl(r,o,o+1),-1),i="left");else if(r.firstChild){if(o<r.childNodes.length){const e=r.childNodes[o];s=Al(3===e.nodeType?Tl(e):e,-1),i="left"}if((!s||s.top===s.bottom)&&o){const e=r.childNodes[o-1];s=Al(3===e.nodeType?Tl(e):e,1),i="right"}}else s=r.getBoundingClientRect(),i="left";const a=s[i];return{top:s.top,bottom:s.bottom,left:a,right:a}}class Rl{constructor({options:e,editorView:t}){this.options={element:null,keepInBounds:!0,onUpdate:()=>!1,...e},this.editorView=t,this.isActive=!1,this.left=0,this.bottom=0,this.top=0,this.preventHide=!1,this.mousedownHandler=this.handleClick.bind(this),this.options.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.focusHandler=({view:e})=>{this.update(e)},this.options.editor.on("focus",this.focusHandler),this.blurHandler=({event:e})=>{this.preventHide?this.preventHide=!1:this.hide(e)},this.options.editor.on("blur",this.blurHandler)}handleClick(){this.preventHide=!0}update(e,t){const{state:n}=e;if(e.composing)return;if(t&&t.doc.eq(n.doc)&&t.selection.eq(n.selection))return;if(n.selection.empty)return void this.hide();const{from:r,to:o}=n.selection,i=Nl(e,r),s=Nl(e,o,!0),a=this.options.element.offsetParent;if(!a)return void this.hide();const l=a.getBoundingClientRect(),c=this.options.element.getBoundingClientRect(),u=(i.left+s.left)/2-l.left;this.left=Math.round(this.options.keepInBounds?Math.min(l.width-c.width/2,Math.max(u,c.width/2)):u),this.bottom=Math.round(l.bottom-i.top),this.top=Math.round(s.bottom-l.top),this.isActive=!0,this.sendUpdate()}sendUpdate(){this.options.onUpdate({isActive:this.isActive,left:this.left,bottom:this.bottom,top:this.top})}hide(e){e&&e.relatedTarget&&this.options.element.parentNode&&this.options.element.parentNode.contains(e.relatedTarget)||(this.isActive=!1,this.sendUpdate())}destroy(){this.options.element.removeEventListener("mousedown",this.mousedownHandler),this.options.editor.off("focus",this.focusHandler),this.options.editor.off("blur",this.blurHandler)}}function Dl(e){return new tn({key:new on("menu_bubble"),view(t){return new Rl({editorView:t,options:e})}})}var Il={props:{editor:{default:null,type:Object},keepInBounds:{default:!0,type:Boolean}},data(){return{menu:{isActive:!1,left:0,bottom:0}}},watch:{editor:{immediate:!0,handler(e){e&&this.$nextTick((()=>{e.registerPlugin(Dl({editor:e,element:this.$el,keepInBounds:this.keepInBounds,onUpdate:e=>{e.isActive&&!1===this.menu.isActive?this.$emit("show",e):e.isActive||!0!==this.menu.isActive||this.$emit("hide",e),this.menu=e}}))}))}}},render(){return this.editor?this.$scopedSlots.default({focused:this.editor.view.focused,focus:this.editor.focus,commands:this.editor.commands,isActive:this.editor.isActive,getMarkAttrs:this.editor.getMarkAttrs.bind(this.editor),getNodeAttrs:this.editor.getNodeAttrs.bind(this.editor),menu:this.menu}):null},beforeDestroy(){this.editor.unregisterPlugin("menu_bubble")}};var zl,Pl;n(5442);if("undefined"!=typeof WeakMap){let e=new WeakMap;zl=t=>e.get(t),Pl=(t,n)=>(e.set(t,n),n)}else{const e=[],t=10;let n=0;zl=t=>{for(let n=0;n<e.length;n+=2)if(e[n]==t)return e[n+1]},Pl=(r,o)=>(n==t&&(n=0),e[n++]=r,e[n++]=o)}var $l=class{constructor(e,t,n,r){this.width=e,this.height=t,this.map=n,this.problems=r}findCell(e){for(let t=0;t<this.map.length;t++){const n=this.map[t];if(n!=e)continue;const r=t%this.width,o=t/this.width|0;let i=r+1,s=o+1;for(let e=1;i<this.width&&this.map[t+e]==n;e++)i++;for(let e=1;s<this.height&&this.map[t+this.width*e]==n;e++)s++;return{left:r,top:o,right:i,bottom:s}}throw new RangeError(`No cell with offset ${e} found`)}colCount(e){for(let t=0;t<this.map.length;t++)if(this.map[t]==e)return t%this.width;throw new RangeError(`No cell with offset ${e} found`)}nextCell(e,t,n){const{left:r,right:o,top:i,bottom:s}=this.findCell(e);return"horiz"==t?(n<0?0==r:o==this.width)?null:this.map[i*this.width+(n<0?r-1:o)]:(n<0?0==i:s==this.height)?null:this.map[r+this.width*(n<0?i-1:s)]}rectBetween(e,t){const{left:n,right:r,top:o,bottom:i}=this.findCell(e),{left:s,right:a,top:l,bottom:c}=this.findCell(t);return{left:Math.min(n,s),top:Math.min(o,l),right:Math.max(r,a),bottom:Math.max(i,c)}}cellsInRect(e){const t=[],n={};for(let r=e.top;r<e.bottom;r++)for(let o=e.left;o<e.right;o++){const i=r*this.width+o,s=this.map[i];n[s]||(n[s]=!0,o==e.left&&o&&this.map[i-1]==s||r==e.top&&r&&this.map[i-this.width]==s||t.push(s))}return t}positionAt(e,t,n){for(let r=0,o=0;;r++){const i=o+n.child(r).nodeSize;if(r==e){let n=t+e*this.width;const r=(e+1)*this.width;while(n<r&&this.map[n]<o)n++;return n==r?i-1:this.map[n]}o=i}}static get(e){return zl(e)||Pl(e,Fl(e))}};function Fl(e){if("table"!=e.type.spec.tableRole)throw new RangeError("Not a table node: "+e.type.name);const t=Bl(e),n=e.childCount,r=[];let o=0,i=null;const s=[];for(let c=0,u=t*n;c<u;c++)r[c]=0;for(let c=0,u=0;c<n;c++){const a=e.child(c);u++;for(let e=0;;e++){while(o<r.length&&0!=r[o])o++;if(e==a.childCount)break;const l=a.child(e),{colspan:d,rowspan:h,colwidth:p}=l.attrs;for(let e=0;e<h;e++){if(e+c>=n){(i||(i=[])).push({type:"overlong_rowspan",pos:u,n:h-e});break}const a=o+e*t;for(let e=0;e<d;e++){0==r[a+e]?r[a+e]=u:(i||(i=[])).push({type:"collision",row:c,pos:u,n:d-e});const n=p&&p[e];if(n){const r=(a+e)%t*2,o=s[r];null==o||o!=n&&1==s[r+1]?(s[r]=n,s[r+1]=1):o==n&&s[r+1]++}}}o+=d,u+=l.nodeSize}const l=(c+1)*t;let d=0;while(o<l)0==r[o++]&&d++;d&&(i||(i=[])).push({type:"missing",row:c,n:d}),u++}const a=new $l(t,n,r,i);let l=!1;for(let c=0;!l&&c<s.length;c+=2)null!=s[c]&&s[c+1]<n&&(l=!0);return l&&jl(a,s,e),a}function Bl(e){let t=-1,n=!1;for(let r=0;r<e.childCount;r++){const o=e.child(r);let i=0;if(n)for(let t=0;t<r;t++){const n=e.child(t);for(let e=0;e<n.childCount;e++){const o=n.child(e);t+o.attrs.rowspan>r&&(i+=o.attrs.colspan)}}for(let e=0;e<o.childCount;e++){const t=o.child(e);i+=t.attrs.colspan,t.attrs.rowspan>1&&(n=!0)}-1==t?t=i:t!=i&&(t=Math.max(t,i))}return t}function jl(e,t,n){e.problems||(e.problems=[]);const r={};for(let o=0;o<e.map.length;o++){const i=e.map[o];if(r[i])continue;r[i]=!0;const s=n.nodeAt(i);if(!s)throw new RangeError(`No cell with offset ${i} found`);let a=null;const l=s.attrs;for(let n=0;n<l.colspan;n++){const r=(o+n)%e.width,i=t[2*r];null==i||l.colwidth&&l.colwidth[n]==i||((a||(a=Ll(l)))[n]=i)}a&&e.problems.unshift({type:"colwidth mismatch",pos:i,colwidth:a})}}function Ll(e){if(e.colwidth)return e.colwidth.slice();const t=[];for(let n=0;n<e.colspan;n++)t.push(0);return t}function Vl(e,t){if("string"===typeof e)return{};const n=e.getAttribute("data-colwidth"),r=n&&/^\d+(,\d+)*$/.test(n)?n.split(",").map((e=>Number(e))):null,o=Number(e.getAttribute("colspan")||1),i={colspan:o,rowspan:Number(e.getAttribute("rowspan")||1),colwidth:r&&r.length==o?r:null};for(const s in t){const n=t[s].getFromDOM,r=n&&n(e);null!=r&&(i[s]=r)}return i}function ql(e,t){const n={};1!=e.attrs.colspan&&(n.colspan=e.attrs.colspan),1!=e.attrs.rowspan&&(n.rowspan=e.attrs.rowspan),e.attrs.colwidth&&(n["data-colwidth"]=e.attrs.colwidth.join(","));for(const r in t){const o=t[r].setDOMAttr;o&&o(e.attrs[r],n)}return n}function Hl(e){const t=e.cellAttributes||{},n={colspan:{default:1},rowspan:{default:1},colwidth:{default:null}};for(const r in t)n[r]={default:t[r].default};return{table:{content:"table_row+",tableRole:"table",isolating:!0,group:e.tableGroup,parseDOM:[{tag:"table"}],toDOM(){return["table",["tbody",0]]}},table_row:{content:"(table_cell | table_header)*",tableRole:"row",parseDOM:[{tag:"tr"}],toDOM(){return["tr",0]}},table_cell:{content:e.cellContent,attrs:n,tableRole:"cell",isolating:!0,parseDOM:[{tag:"td",getAttrs:e=>Vl(e,t)}],toDOM(e){return["td",ql(e,t),0]}},table_header:{content:e.cellContent,attrs:n,tableRole:"header_cell",isolating:!0,parseDOM:[{tag:"th",getAttrs:e=>Vl(e,t)}],toDOM(e){return["th",ql(e,t),0]}}}}function Wl(e){let t=e.cached.tableNodeTypes;if(!t){t=e.cached.tableNodeTypes={};for(const n in e.nodes){const r=e.nodes[n],o=r.spec.tableRole;o&&(t[o]=r)}}return t}var Jl=new on("selectingCells");function Ul(e){for(let t=e.depth-1;t>0;t--)if("row"==e.node(t).type.spec.tableRole)return e.node(0).resolve(e.before(t+1));return null}function Kl(e){for(let t=e.depth;t>0;t--){const n=e.node(t).type.spec.tableRole;if("cell"===n||"header_cell"===n)return e.node(t)}return null}function Gl(e){const t=e.selection.$head;for(let n=t.depth;n>0;n--)if("row"==t.node(n).type.spec.tableRole)return!0;return!1}function Xl(e){const t=e.selection;if("$anchorCell"in t&&t.$anchorCell)return t.$anchorCell.pos>t.$headCell.pos?t.$anchorCell:t.$headCell;if("node"in t&&t.node&&"cell"==t.node.type.spec.tableRole)return t.$anchor;const n=Ul(t.$head)||Zl(t.$head);if(n)return n;throw new RangeError(`No cell found around position ${t.head}`)}function Zl(e){for(let t=e.nodeAfter,n=e.pos;t;t=t.firstChild,n++){const r=t.type.spec.tableRole;if("cell"==r||"header_cell"==r)return e.doc.resolve(n)}for(let t=e.nodeBefore,n=e.pos;t;t=t.lastChild,n--){const r=t.type.spec.tableRole;if("cell"==r||"header_cell"==r)return e.doc.resolve(n-t.nodeSize)}}function Yl(e){return"row"==e.parent.type.spec.tableRole&&!!e.nodeAfter}function Ql(e){return e.node(0).resolve(e.pos+e.nodeAfter.nodeSize)}function ec(e,t){return e.depth==t.depth&&e.pos>=t.start(-1)&&e.pos<=t.end(-1)}function tc(e,t,n){const r=e.node(-1),o=$l.get(r),i=e.start(-1),s=o.nextCell(e.pos-i,t,n);return null==s?null:e.node(0).resolve(i+s)}function nc(e,t,n=1){const r={...e,colspan:e.colspan-n};return r.colwidth&&(r.colwidth=r.colwidth.slice(),r.colwidth.splice(t,n),r.colwidth.some((e=>e>0))||(r.colwidth=null)),r}function rc(e,t,n=1){const r={...e,colspan:e.colspan+n};if(r.colwidth){r.colwidth=r.colwidth.slice();for(let e=0;e<n;e++)r.colwidth.splice(t,0,0)}return r}function oc(e,t,n){const r=Wl(t.type.schema).header_cell;for(let o=0;o<e.height;o++)if(t.nodeAt(e.map[n+o*e.width]).type!=r)return!1;return!0}var ic=class extends Dt{constructor(e,t=e){const n=e.node(-1),r=$l.get(n),o=e.start(-1),i=r.rectBetween(e.pos-o,t.pos-o),s=e.node(0),a=r.cellsInRect(i).filter((e=>e!=t.pos-o));a.unshift(t.pos-o);const l=a.map((e=>{const t=n.nodeAt(e);if(!t)throw RangeError(`No cell with offset ${e} found`);const r=o+e+1;return new It(s.resolve(r),s.resolve(r+t.content.size))}));super(l[0].$from,l[0].$to,l),this.$anchorCell=e,this.$headCell=t}map(e,t){const n=e.resolve(t.map(this.$anchorCell.pos)),r=e.resolve(t.map(this.$headCell.pos));if(Yl(n)&&Yl(r)&&ec(n,r)){const e=this.$anchorCell.node(-1)!=n.node(-1);return e&&this.isRowSelection()?ic.rowSelection(n,r):e&&this.isColSelection()?ic.colSelection(n,r):new ic(n,r)}return $t.between(n,r)}content(){const e=this.$anchorCell.node(-1),t=$l.get(e),n=this.$anchorCell.start(-1),r=t.rectBetween(this.$anchorCell.pos-n,this.$headCell.pos-n),o={},i=[];for(let a=r.top;a<r.bottom;a++){const n=[];for(let i=a*t.width+r.left,s=r.left;s<r.right;s++,i++){const s=t.map[i];if(o[s])continue;o[s]=!0;const a=t.findCell(s);let l=e.nodeAt(s);if(!l)throw RangeError(`No cell with offset ${s} found`);const c=r.left-a.left,u=a.right-r.right;if(c>0||u>0){let e=l.attrs;if(c>0&&(e=nc(e,0,c)),u>0&&(e=nc(e,e.colspan-u,u)),a.left<r.left){if(l=l.type.createAndFill(e),!l)throw RangeError(`Could not create cell with attrs ${JSON.stringify(e)}`)}else l=l.type.create(e,l.content)}if(a.top<r.top||a.bottom>r.bottom){const e={...l.attrs,rowspan:Math.min(a.bottom,r.bottom)-Math.max(a.top,r.top)};l=a.top<r.top?l.type.createAndFill(e):l.type.create(e,l.content)}n.push(l)}i.push(e.child(a).copy(l.from(n)))}const s=this.isColSelection()&&this.isRowSelection()?e:i;return new f(l.from(s),1,1)}replace(e,t=f.empty){const n=e.steps.length,r=this.ranges;for(let i=0;i<r.length;i++){const{$from:o,$to:s}=r[i],a=e.mapping.slice(n);e.replace(a.map(o.pos),a.map(s.pos),i?f.empty:t)}const o=Dt.findFrom(e.doc.resolve(e.mapping.slice(n).map(this.to)),-1);o&&e.setSelection(o)}replaceWith(e,t){this.replace(e,new f(l.from(t),0,0))}forEachCell(e){const t=this.$anchorCell.node(-1),n=$l.get(t),r=this.$anchorCell.start(-1),o=n.cellsInRect(n.rectBetween(this.$anchorCell.pos-r,this.$headCell.pos-r));for(let i=0;i<o.length;i++)e(t.nodeAt(o[i]),r+o[i])}isColSelection(){const e=this.$anchorCell.index(-1),t=this.$headCell.index(-1);if(Math.min(e,t)>0)return!1;const n=e+this.$anchorCell.nodeAfter.attrs.rowspan,r=t+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(n,r)==this.$headCell.node(-1).childCount}static colSelection(e,t=e){const n=e.node(-1),r=$l.get(n),o=e.start(-1),i=r.findCell(e.pos-o),s=r.findCell(t.pos-o),a=e.node(0);return i.top<=s.top?(i.top>0&&(e=a.resolve(o+r.map[i.left])),s.bottom<r.height&&(t=a.resolve(o+r.map[r.width*(r.height-1)+s.right-1]))):(s.top>0&&(t=a.resolve(o+r.map[s.left])),i.bottom<r.height&&(e=a.resolve(o+r.map[r.width*(r.height-1)+i.right-1]))),new ic(e,t)}isRowSelection(){const e=this.$anchorCell.node(-1),t=$l.get(e),n=this.$anchorCell.start(-1),r=t.colCount(this.$anchorCell.pos-n),o=t.colCount(this.$headCell.pos-n);if(Math.min(r,o)>0)return!1;const i=r+this.$anchorCell.nodeAfter.attrs.colspan,s=o+this.$headCell.nodeAfter.attrs.colspan;return Math.max(i,s)==t.width}eq(e){return e instanceof ic&&e.$anchorCell.pos==this.$anchorCell.pos&&e.$headCell.pos==this.$headCell.pos}static rowSelection(e,t=e){const n=e.node(-1),r=$l.get(n),o=e.start(-1),i=r.findCell(e.pos-o),s=r.findCell(t.pos-o),a=e.node(0);return i.left<=s.left?(i.left>0&&(e=a.resolve(o+r.map[i.top*r.width])),s.right<r.width&&(t=a.resolve(o+r.map[r.width*(s.top+1)-1]))):(s.left>0&&(t=a.resolve(o+r.map[s.top*r.width])),i.right<r.width&&(e=a.resolve(o+r.map[r.width*(i.top+1)-1]))),new ic(e,t)}toJSON(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}}static fromJSON(e,t){return new ic(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,n=t){return new ic(e.resolve(t),e.resolve(n))}getBookmark(){return new sc(this.$anchorCell.pos,this.$headCell.pos)}};ic.prototype.visible=!1,Dt.jsonID("cell",ic);var sc=class{constructor(e,t){this.anchor=e,this.head=t}map(e){return new sc(e.map(this.anchor),e.map(this.head))}resolve(e){const t=e.resolve(this.anchor),n=e.resolve(this.head);return"row"==t.parent.type.spec.tableRole&&"row"==n.parent.type.spec.tableRole&&t.index()<t.parent.childCount&&n.index()<n.parent.childCount&&ec(t,n)?new ic(t,n):Dt.near(n,1)}};function ac(e){if(!(e.selection instanceof ic))return null;const t=[];return e.selection.forEachCell(((e,n)=>{t.push(Ai.node(n,n+e.nodeSize,{class:"selectedCell"}))})),Di.create(e.doc,t)}function lc({$from:e,$to:t}){if(e.pos==t.pos||e.pos<e.pos-6)return!1;let n=e.pos,r=t.pos,o=e.depth;for(;o>=0;o--,n++)if(e.after(o+1)<e.end(o))break;for(let i=t.depth;i>=0;i--,r--)if(t.before(i+1)>t.start(i))break;return n==r&&/row|table/.test(e.node(o).type.spec.tableRole)}function cc({$from:e,$to:t}){let n,r;for(let o=e.depth;o>0;o--){const t=e.node(o);if("cell"===t.type.spec.tableRole||"header_cell"===t.type.spec.tableRole){n=t;break}}for(let o=t.depth;o>0;o--){const e=t.node(o);if("cell"===e.type.spec.tableRole||"header_cell"===e.type.spec.tableRole){r=e;break}}return n!==r&&0===t.parentOffset}function uc(e,t,n){const r=(t||e).selection,o=(t||e).doc;let i,s;if(r instanceof Bt&&(s=r.node.type.spec.tableRole)){if("cell"==s||"header_cell"==s)i=ic.create(o,r.from);else if("row"==s){const e=o.resolve(r.from+1);i=ic.rowSelection(e,e)}else if(!n){const e=$l.get(r.node),t=r.from+1,n=t+e.map[e.width*e.height-1];i=ic.create(o,t+1,n)}}else r instanceof $t&&lc(r)?i=$t.create(o,r.from):r instanceof $t&&cc(r)&&(i=$t.create(o,r.$from.start(),r.$from.end()));return i&&(t||(t=e.tr)).setSelection(i),t}var dc=new on("fix-tables");function hc(e,t,n,r){const o=e.childCount,i=t.childCount;e:for(let s=0,a=0;s<i;s++){const i=t.child(s);for(let t=a,r=Math.min(o,s+3);t<r;t++)if(e.child(t)==i){a=t+1,n+=i.nodeSize;continue e}r(i,n),a<o&&e.child(a).sameMarkup(i)?hc(e.child(a),i,n+1,r):i.nodesBetween(0,i.content.size,r,n+1),n+=i.nodeSize}}function pc(e,t){let n;const r=(t,r)=>{"table"==t.type.spec.tableRole&&(n=fc(e,t,r,n))};return t?t.doc!=e.doc&&hc(t.doc,e.doc,0,r):e.doc.descendants(r),n}function fc(e,t,n,r){const o=$l.get(t);if(!o.problems)return r;r||(r=e.tr);const i=[];for(let l=0;l<o.height;l++)i.push(0);for(let l=0;l<o.problems.length;l++){const e=o.problems[l];if("collision"==e.type){const o=t.nodeAt(e.pos);if(!o)continue;const s=o.attrs;for(let t=0;t<s.rowspan;t++)i[e.row+t]+=e.n;r.setNodeMarkup(r.mapping.map(n+1+e.pos),null,nc(s,s.colspan-e.n,e.n))}else if("missing"==e.type)i[e.row]+=e.n;else if("overlong_rowspan"==e.type){const o=t.nodeAt(e.pos);if(!o)continue;r.setNodeMarkup(r.mapping.map(n+1+e.pos),null,{...o.attrs,rowspan:o.attrs.rowspan-e.n})}else if("colwidth mismatch"==e.type){const o=t.nodeAt(e.pos);if(!o)continue;r.setNodeMarkup(r.mapping.map(n+1+e.pos),null,{...o.attrs,colwidth:e.colwidth})}}let s,a;for(let l=0;l<i.length;l++)i[l]&&(null==s&&(s=l),a=l);for(let l=0,c=n+1;l<o.height;l++){const n=t.child(l),o=c+n.nodeSize,u=i[l];if(u>0){let t="cell";n.firstChild&&(t=n.firstChild.type.spec.tableRole);const i=[];for(let n=0;n<u;n++){const n=Wl(e.schema)[t].createAndFill();n&&i.push(n)}const d=0!=l&&s!=l-1||a!=l?o-1:c+1;r.insert(r.mapping.map(d),i)}c=o}return r.setMeta(dc,{fixTables:!0})}function mc(e){if(!e.size)return null;let{content:t,openStart:n,openEnd:r}=e;while(1==t.childCount&&(n>0&&r>0||"table"==t.child(0).type.spec.tableRole))n--,r--,t=t.child(0).content;const o=t.child(0),i=o.type.spec.tableRole,s=o.type.schema,a=[];if("row"==i)for(let l=0;l<t.childCount;l++){let e=t.child(l).content;const o=l?0:Math.max(0,n-1),i=l<t.childCount-1?0:Math.max(0,r-1);(o||i)&&(e=vc(Wl(s).row,new f(e,o,i)).content),a.push(e)}else{if("cell"!=i&&"header_cell"!=i)return null;a.push(n||r?vc(Wl(s).row,new f(t,n,r)).content:t)}return gc(s,a)}function gc(e,t){const n=[];for(let o=0;o<t.length;o++){const e=t[o];for(let t=e.childCount-1;t>=0;t--){const{rowspan:r,colspan:i}=e.child(t).attrs;for(let e=o;e<o+r;e++)n[e]=(n[e]||0)+i}}let r=0;for(let o=0;o<n.length;o++)r=Math.max(r,n[o]);for(let o=0;o<n.length;o++)if(o>=t.length&&t.push(l.empty),n[o]<r){const i=Wl(e).cell.createAndFill(),s=[];for(let e=n[o];e<r;e++)s.push(i);t[o]=t[o].append(l.from(s))}return{height:t.length,width:r,rows:t}}function vc(e,t){const n=e.createAndFill(),r=new Nt(n).replace(0,n.content.size,t);return r.doc}function yc({width:e,height:t,rows:n},r,o){if(e!=r){const t=[],o=[];for(let e=0;e<n.length;e++){const i=n[e],s=[];for(let n=t[e]||0,o=0;n<r;o++){let a=i.child(o%i.childCount);n+a.attrs.colspan>r&&(a=a.type.createChecked(nc(a.attrs,a.attrs.colspan,n+a.attrs.colspan-r),a.content)),s.push(a),n+=a.attrs.colspan;for(let n=1;n<a.attrs.rowspan;n++)t[e+n]=(t[e+n]||0)+a.attrs.colspan}o.push(l.from(s))}n=o,e=r}if(t!=o){const e=[];for(let r=0,i=0;r<o;r++,i++){const s=[],a=n[i%t];for(let e=0;e<a.childCount;e++){let t=a.child(e);r+t.attrs.rowspan>o&&(t=t.type.create({...t.attrs,rowspan:Math.max(1,o-t.attrs.rowspan)},t.content)),s.push(t)}e.push(l.from(s))}n=e,t=o}return{width:e,height:t,rows:n}}function bc(e,t,n,r,o,i,s){const a=e.doc.type.schema,c=Wl(a);let u,d;if(o>t.width)for(let l=0,h=0;l<t.height;l++){const i=n.child(l);h+=i.nodeSize;const a=[];let p;p=null==i.lastChild||i.lastChild.type==c.cell?u||(u=c.cell.createAndFill()):d||(d=c.header_cell.createAndFill());for(let e=t.width;e<o;e++)a.push(p);e.insert(e.mapping.slice(s).map(h-1+r),a)}if(i>t.height){const a=[];for(let e=0,r=(t.height-1)*t.width;e<Math.max(t.width,o);e++){const o=!(e>=t.width)&&n.nodeAt(t.map[r+e]).type==c.header_cell;a.push(o?d||(d=c.header_cell.createAndFill()):u||(u=c.cell.createAndFill()))}const h=c.row.create(null,l.from(a)),p=[];for(let e=t.height;e<i;e++)p.push(h);e.insert(e.mapping.slice(s).map(r+n.nodeSize-2),p)}return!(!u&&!d)}function wc(e,t,n,r,o,i,s,a){if(0==s||s==t.height)return!1;let l=!1;for(let c=o;c<i;c++){const o=s*t.width+c,i=t.map[o];if(t.map[o-t.width]==i){l=!0;const o=n.nodeAt(i),{top:u,left:d}=t.findCell(i);e.setNodeMarkup(e.mapping.slice(a).map(i+r),null,{...o.attrs,rowspan:s-u}),e.insert(e.mapping.slice(a).map(t.positionAt(s,d,n)),o.type.createAndFill({...o.attrs,rowspan:u+o.attrs.rowspan-s})),c+=o.attrs.colspan-1}}return l}function kc(e,t,n,r,o,i,s,a){if(0==s||s==t.width)return!1;let l=!1;for(let c=o;c<i;c++){const o=c*t.width+s,i=t.map[o];if(t.map[o-1]==i){l=!0;const o=n.nodeAt(i),u=t.colCount(i),d=e.mapping.slice(a).map(i+r);e.setNodeMarkup(d,null,nc(o.attrs,s-u,o.attrs.colspan-(s-u))),e.insert(d+o.nodeSize,o.type.createAndFill(nc(o.attrs,0,s-u))),c+=o.attrs.rowspan-1}}return l}function xc(e,t,n,r,o){let i=n?e.doc.nodeAt(n-1):e.doc;if(!i)throw new Error("No table found");let s=$l.get(i);const{top:a,left:l}=r,c=l+o.width,u=a+o.height,d=e.tr;let h=0;function p(){if(i=n?d.doc.nodeAt(n-1):d.doc,!i)throw new Error("No table found");s=$l.get(i),h=d.mapping.maps.length}bc(d,s,i,n,c,u,h)&&p(),wc(d,s,i,n,l,c,a,h)&&p(),wc(d,s,i,n,l,c,u,h)&&p(),kc(d,s,i,n,a,u,l,h)&&p(),kc(d,s,i,n,a,u,c,h)&&p();for(let m=a;m<u;m++){const e=s.positionAt(m,l,i),t=s.positionAt(m,c,i);d.replace(d.mapping.slice(h).map(e+n),d.mapping.slice(h).map(t+n),new f(o.rows[m-a],0,0))}p(),d.setSelection(new ic(d.doc.resolve(n+s.positionAt(a,l,i)),d.doc.resolve(n+s.positionAt(u-1,c-1,i)))),t(d)}var Sc=Rs({ArrowLeft:_c("horiz",-1),ArrowRight:_c("horiz",1),ArrowUp:_c("vert",-1),ArrowDown:_c("vert",1),"Shift-ArrowLeft":Oc("horiz",-1),"Shift-ArrowRight":Oc("horiz",1),"Shift-ArrowUp":Oc("vert",-1),"Shift-ArrowDown":Oc("vert",1),Backspace:Mc,"Mod-Backspace":Mc,Delete:Mc,"Mod-Delete":Mc});function Cc(e,t,n){return!n.eq(e.selection)&&(t&&t(e.tr.setSelection(n).scrollIntoView()),!0)}function _c(e,t){return(n,r,o)=>{if(!o)return!1;const i=n.selection;if(i instanceof ic)return Cc(n,r,Dt.near(i.$headCell,t));if("horiz"!=e&&!i.empty)return!1;const s=Nc(o,e,t);if(null==s)return!1;if("horiz"==e)return Cc(n,r,Dt.near(n.doc.resolve(i.head+t),t));{const o=n.doc.resolve(s),i=tc(o,e,t);let a;return a=i?Dt.near(i,1):t<0?Dt.near(n.doc.resolve(o.before(-1)),-1):Dt.near(n.doc.resolve(o.after(-1)),1),Cc(n,r,a)}}}function Oc(e,t){return(n,r,o)=>{if(!o)return!1;const i=n.selection;let s;if(i instanceof ic)s=i;else{const r=Nc(o,e,t);if(null==r)return!1;s=new ic(n.doc.resolve(r))}const a=tc(s.$headCell,e,t);return!!a&&Cc(n,r,new ic(s.$anchorCell,a))}}function Mc(e,t){const n=e.selection;if(!(n instanceof ic))return!1;if(t){const r=e.tr,o=Wl(e.schema).cell.createAndFill().content;n.forEachCell(((e,t)=>{e.content.eq(o)||r.replace(r.mapping.map(t+1),r.mapping.map(t+e.nodeSize-1),new f(o,0,0))})),r.docChanged&&t(r)}return!0}function Ec(e,t){const n=e.state.doc,r=Ul(n.resolve(t));return!!r&&(e.dispatch(e.state.tr.setSelection(new ic(r))),!0)}function Tc(e,t,n){if(!Gl(e.state))return!1;let r=mc(n);const o=e.state.selection;if(o instanceof ic){r||(r={width:1,height:1,rows:[l.from(vc(Wl(e.state.schema).cell,n))]});const t=o.$anchorCell.node(-1),i=o.$anchorCell.start(-1),s=$l.get(t).rectBetween(o.$anchorCell.pos-i,o.$headCell.pos-i);return r=yc(r,s.right-s.left,s.bottom-s.top),xc(e.state,e.dispatch,i,s,r),!0}if(r){const t=Xl(e.state),n=t.start(-1);return xc(e.state,e.dispatch,n,$l.get(t.node(-1)).findCell(t.pos-n),r),!0}return!1}function Ac(e,t){var n;if(t.ctrlKey||t.metaKey)return;const r=Rc(e,t.target);let o;if(t.shiftKey&&e.state.selection instanceof ic)i(e.state.selection.$anchorCell,t),t.preventDefault();else if(t.shiftKey&&r&&null!=(o=Ul(e.state.selection.$anchor))&&(null==(n=Dc(e,t))?void 0:n.pos)!=o.pos)i(o,t),t.preventDefault();else if(!r)return;function i(t,n){let r=Dc(e,n);const o=null==Jl.getState(e.state);if(!r||!ec(t,r)){if(!o)return;r=t}const i=new ic(t,r);if(o||!e.state.selection.eq(i)){const n=e.state.tr.setSelection(i);o&&n.setMeta(Jl,t.pos),e.dispatch(n)}}function s(){e.root.removeEventListener("mouseup",s),e.root.removeEventListener("dragstart",s),e.root.removeEventListener("mousemove",a),null!=Jl.getState(e.state)&&e.dispatch(e.state.tr.setMeta(Jl,-1))}function a(n){const o=n,a=Jl.getState(e.state);let l;if(null!=a)l=e.state.doc.resolve(a);else if(Rc(e,o.target)!=r&&(l=Dc(e,t),!l))return s();l&&i(l,o)}e.root.addEventListener("mouseup",s),e.root.addEventListener("dragstart",s),e.root.addEventListener("mousemove",a)}function Nc(e,t,n){if(!(e.state.selection instanceof $t))return null;const{$head:r}=e.state.selection;for(let o=r.depth-1;o>=0;o--){const i=r.node(o),s=n<0?r.index(o):r.indexAfter(o);if(s!=(n<0?0:i.childCount))return null;if("cell"==i.type.spec.tableRole||"header_cell"==i.type.spec.tableRole){const i=r.before(o),s="vert"==t?n>0?"down":"up":n>0?"right":"left";return e.endOfTextblock(s)?i:null}}return null}function Rc(e,t){for(;t&&t!=e.dom;t=t.parentNode)if("TD"==t.nodeName||"TH"==t.nodeName)return t;return null}function Dc(e,t){const n=e.posAtCoords({left:t.clientX,top:t.clientY});return n&&n?Ul(e.state.doc.resolve(n.pos)):null}var Ic=class{constructor(e,t){this.node=e,this.cellMinWidth=t,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.colgroup=this.table.appendChild(document.createElement("colgroup")),zc(e,this.colgroup,this.table,t),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(e){return e.type==this.node.type&&(this.node=e,zc(e,this.colgroup,this.table,this.cellMinWidth),!0)}ignoreMutation(e){return"attributes"==e.type&&(e.target==this.table||this.colgroup.contains(e.target))}};function zc(e,t,n,r,o,i){var s;let a=0,l=!0,c=t.firstChild;const u=e.firstChild;if(u){for(let e=0,n=0;e<u.childCount;e++){const{colspan:s,colwidth:d}=u.child(e).attrs;for(let e=0;e<s;e++,n++){const s=o==n?i:d&&d[e],u=s?s+"px":"";a+=s||r,s||(l=!1),c?(c.style.width!=u&&(c.style.width=u),c=c.nextSibling):t.appendChild(document.createElement("col")).style.width=u}}while(c){const e=c.nextSibling;null==(s=c.parentNode)||s.removeChild(c),c=e}l?(n.style.width=a+"px",n.style.minWidth=""):(n.style.width="",n.style.minWidth=a+"px")}}var Pc=new on("tableColumnResizing");function $c({handleWidth:e=5,cellMinWidth:t=25,View:n=Ic,lastColumnResizable:r=!0}={}){const o=new tn({key:Pc,state:{init(e,r){return o.spec.props.nodeViews[Wl(r.schema).table.name]=(e,r)=>new n(e,t,r),new Fc(-1,!1)},apply(e,t){return t.apply(e)}},props:{attributes:e=>{const t=Pc.getState(e);return t&&t.activeHandle>-1?{class:"resize-cursor"}:{}},handleDOMEvents:{mousemove:(n,o)=>{Bc(n,o,e,t,r)},mouseleave:e=>{jc(e)},mousedown:(e,n)=>{Lc(e,n,t)}},decorations:e=>{const t=Pc.getState(e);if(t&&t.activeHandle>-1)return Xc(e,t.activeHandle)},nodeViews:{}}});return o}var Fc=class{constructor(e,t){this.activeHandle=e,this.dragging=t}apply(e){const t=this,n=e.getMeta(Pc);if(n&&null!=n.setHandle)return new Fc(n.setHandle,!1);if(n&&void 0!==n.setDragging)return new Fc(t.activeHandle,n.setDragging);if(t.activeHandle>-1&&e.docChanged){let n=e.mapping.map(t.activeHandle,-1);return Yl(e.doc.resolve(n))||(n=-1),new Fc(n,t.dragging)}return t}};function Bc(e,t,n,r,o){const i=Pc.getState(e.state);if(i&&!i.dragging){const r=qc(t.target);let s=-1;if(r){const{left:o,right:i}=r.getBoundingClientRect();t.clientX-o<=n?s=Hc(e,t,"left",n):i-t.clientX<=n&&(s=Hc(e,t,"right",n))}if(s!=i.activeHandle){if(!o&&-1!==s){const t=e.state.doc.resolve(s),n=t.node(-1),r=$l.get(n),o=t.start(-1),i=r.colCount(t.pos-o)+t.nodeAfter.attrs.colspan-1;if(i==r.width-1)return}Jc(e,s)}}}function jc(e){const t=Pc.getState(e.state);t&&t.activeHandle>-1&&!t.dragging&&Jc(e,-1)}function Lc(e,t,n){const r=Pc.getState(e.state);if(!r||-1==r.activeHandle||r.dragging)return!1;const o=e.state.doc.nodeAt(r.activeHandle),i=Vc(e,r.activeHandle,o.attrs);function s(t){window.removeEventListener("mouseup",s),window.removeEventListener("mousemove",a);const r=Pc.getState(e.state);(null==r?void 0:r.dragging)&&(Uc(e,r.activeHandle,Wc(r.dragging,t,n)),e.dispatch(e.state.tr.setMeta(Pc,{setDragging:null})))}function a(t){if(!t.which)return s(t);const r=Pc.getState(e.state);if(r&&r.dragging){const o=Wc(r.dragging,t,n);Kc(e,r.activeHandle,o,n)}}return e.dispatch(e.state.tr.setMeta(Pc,{setDragging:{startX:t.clientX,startWidth:i}})),window.addEventListener("mouseup",s),window.addEventListener("mousemove",a),t.preventDefault(),!0}function Vc(e,t,{colspan:n,colwidth:r}){const o=r&&r[r.length-1];if(o)return o;const i=e.domAtPos(t),s=i.node.childNodes[i.offset];let a=s.offsetWidth,l=n;if(r)for(let c=0;c<n;c++)r[c]&&(a-=r[c],l--);return a/l}function qc(e){while(e&&"TD"!=e.nodeName&&"TH"!=e.nodeName)e=e.classList&&e.classList.contains("ProseMirror")?null:e.parentNode;return e}function Hc(e,t,n,r){const o="right"==n?-r:r,i=e.posAtCoords({left:t.clientX+o,top:t.clientY});if(!i)return-1;const{pos:s}=i,a=Ul(e.state.doc.resolve(s));if(!a)return-1;if("right"==n)return a.pos;const l=$l.get(a.node(-1)),c=a.start(-1),u=l.map.indexOf(a.pos-c);return u%l.width==0?-1:c+l.map[u-1]}function Wc(e,t,n){const r=t.clientX-e.startX;return Math.max(n,e.startWidth+r)}function Jc(e,t){e.dispatch(e.state.tr.setMeta(Pc,{setHandle:t}))}function Uc(e,t,n){const r=e.state.doc.resolve(t),o=r.node(-1),i=$l.get(o),s=r.start(-1),a=i.colCount(r.pos-s)+r.nodeAfter.attrs.colspan-1,l=e.state.tr;for(let c=0;c<i.height;c++){const e=c*i.width+a;if(c&&i.map[e]==i.map[e-i.width])continue;const t=i.map[e],r=o.nodeAt(t).attrs,u=1==r.colspan?0:a-i.colCount(t);if(r.colwidth&&r.colwidth[u]==n)continue;const d=r.colwidth?r.colwidth.slice():Gc(r.colspan);d[u]=n,l.setNodeMarkup(s+t,null,{...r,colwidth:d})}l.docChanged&&e.dispatch(l)}function Kc(e,t,n,r){const o=e.state.doc.resolve(t),i=o.node(-1),s=o.start(-1),a=$l.get(i).colCount(o.pos-s)+o.nodeAfter.attrs.colspan-1;let l=e.domAtPos(o.start(-1)).node;while(l&&"TABLE"!=l.nodeName)l=l.parentNode;l&&zc(i,l.firstChild,l,r,a,n)}function Gc(e){return Array(e).fill(0)}function Xc(e,t){const n=[],r=e.doc.resolve(t),o=r.node(-1);if(!o)return Di.empty;const i=$l.get(o),s=r.start(-1),a=i.colCount(r.pos-s)+r.nodeAfter.attrs.colspan;for(let l=0;l<i.height;l++){const e=a+l*i.width-1;if((a==i.width||i.map[e]!=i.map[e+1])&&(0==l||i.map[e]!=i.map[e-i.width])){const t=i.map[e],r=s+t+o.nodeAt(t).nodeSize-1,a=document.createElement("div");a.className="column-resize-handle",n.push(Ai.widget(r,a))}}return Di.create(e.doc,n)}function Zc(e){const t=e.selection,n=Xl(e),r=n.node(-1),o=n.start(-1),i=$l.get(r),s=t instanceof ic?i.rectBetween(t.$anchorCell.pos-o,t.$headCell.pos-o):i.findCell(n.pos-o);return{...s,tableStart:o,map:i,table:r}}function Yc(e,{map:t,tableStart:n,table:r},o){let i=o>0?-1:0;oc(t,r,o+i)&&(i=0==o||o==t.width?null:0);for(let s=0;s<t.height;s++){const a=s*t.width+o;if(o>0&&o<t.width&&t.map[a-1]==t.map[a]){const i=t.map[a],l=r.nodeAt(i);e.setNodeMarkup(e.mapping.map(n+i),null,rc(l.attrs,o-t.colCount(i))),s+=l.attrs.rowspan-1}else{const l=null==i?Wl(r.type.schema).cell:r.nodeAt(t.map[a+i]).type,c=t.positionAt(s,o,r);e.insert(e.mapping.map(n+c),l.createAndFill())}}return e}function Qc(e,t){if(!Gl(e))return!1;if(t){const n=Zc(e);t(Yc(e.tr,n,n.left))}return!0}function eu(e,t){if(!Gl(e))return!1;if(t){const n=Zc(e);t(Yc(e.tr,n,n.right))}return!0}function tu(e,{map:t,table:n,tableStart:r},o){const i=e.mapping.maps.length;for(let s=0;s<t.height;){const a=s*t.width+o,l=t.map[a],c=n.nodeAt(l),u=c.attrs;if(o>0&&t.map[a-1]==l||o<t.width-1&&t.map[a+1]==l)e.setNodeMarkup(e.mapping.slice(i).map(r+l),null,nc(u,o-t.colCount(l)));else{const t=e.mapping.slice(i).map(r+l);e.delete(t,t+c.nodeSize)}s+=u.rowspan}}function nu(e,t){if(!Gl(e))return!1;if(t){const n=Zc(e),r=e.tr;if(0==n.left&&n.right==n.map.width)return!1;for(let e=n.right-1;;e--){if(tu(r,n,e),e==n.left)break;const t=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc;if(!t)throw RangeError("No table found");n.table=t,n.map=$l.get(t)}t(r)}return!0}function ru(e,t,n){var r;const o=Wl(t.type.schema).header_cell;for(let i=0;i<e.width;i++)if((null==(r=t.nodeAt(e.map[i+n*e.width]))?void 0:r.type)!=o)return!1;return!0}function ou(e,{map:t,tableStart:n,table:r},o){var i;let s=n;for(let c=0;c<o;c++)s+=r.child(c).nodeSize;const a=[];let l=o>0?-1:0;ru(t,r,o+l)&&(l=0==o||o==t.height?null:0);for(let c=0,u=t.width*o;c<t.width;c++,u++)if(o>0&&o<t.height&&t.map[u]==t.map[u-t.width]){const o=t.map[u],i=r.nodeAt(o).attrs;e.setNodeMarkup(n+o,null,{...i,rowspan:i.rowspan+1}),c+=i.colspan-1}else{const e=null==l?Wl(r.type.schema).cell:null==(i=r.nodeAt(t.map[u+l*t.width]))?void 0:i.type,n=null==e?void 0:e.createAndFill();n&&a.push(n)}return e.insert(s,Wl(r.type.schema).row.create(null,a)),e}function iu(e,t){if(!Gl(e))return!1;if(t){const n=Zc(e);t(ou(e.tr,n,n.top))}return!0}function su(e,t){if(!Gl(e))return!1;if(t){const n=Zc(e);t(ou(e.tr,n,n.bottom))}return!0}function au(e,{map:t,table:n,tableStart:r},o){let i=0;for(let l=0;l<o;l++)i+=n.child(l).nodeSize;const s=i+n.child(o).nodeSize,a=e.mapping.maps.length;e.delete(i+r,s+r);for(let l=0,c=o*t.width;l<t.width;l++,c++){const i=t.map[c];if(o>0&&i==t.map[c-t.width]){const t=n.nodeAt(i).attrs;e.setNodeMarkup(e.mapping.slice(a).map(i+r),null,{...t,rowspan:t.rowspan-1}),l+=t.colspan-1}else if(o<t.width&&i==t.map[c+t.width]){const s=n.nodeAt(i),c=s.attrs,u=s.type.create({...c,rowspan:s.attrs.rowspan-1},s.content),d=t.positionAt(o+1,l,n);e.insert(e.mapping.slice(a).map(r+d),u),l+=c.colspan-1}}}function lu(e,t){if(!Gl(e))return!1;if(t){const n=Zc(e),r=e.tr;if(0==n.top&&n.bottom==n.map.height)return!1;for(let e=n.bottom-1;;e--){if(au(r,n,e),e==n.top)break;const t=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc;if(!t)throw RangeError("No table found");n.table=t,n.map=$l.get(n.table)}t(r)}return!0}function cu(e){const t=e.content;return 1==t.childCount&&t.child(0).isTextblock&&0==t.child(0).childCount}function uu({width:e,height:t,map:n},r){let o=r.top*e+r.left,i=o,s=(r.bottom-1)*e+r.left,a=o+(r.right-r.left-1);for(let l=r.top;l<r.bottom;l++){if(r.left>0&&n[i]==n[i-1]||r.right<e&&n[a]==n[a+1])return!0;i+=e,a+=e}for(let l=r.left;l<r.right;l++){if(r.top>0&&n[o]==n[o-e]||r.bottom<t&&n[s]==n[s+e])return!0;o++,s++}return!1}function du(e,t){const n=e.selection;if(!(n instanceof ic)||n.$anchorCell.pos==n.$headCell.pos)return!1;const r=Zc(e),{map:o}=r;if(uu(o,r))return!1;if(t){const n=e.tr,i={};let s,a,c=l.empty;for(let e=r.top;e<r.bottom;e++)for(let t=r.left;t<r.right;t++){const l=o.map[e*o.width+t],u=r.table.nodeAt(l);if(!i[l]&&u)if(i[l]=!0,null==s)s=l,a=u;else{cu(u)||(c=c.append(u.content));const e=n.mapping.map(l+r.tableStart);n.delete(e,e+u.nodeSize)}}if(null==s||null==a)return!0;if(n.setNodeMarkup(s+r.tableStart,null,{...rc(a.attrs,a.attrs.colspan,r.right-r.left-a.attrs.colspan),rowspan:r.bottom-r.top}),c.size){const e=s+1+a.content.size,t=cu(a)?s+1:e;n.replaceWith(t+r.tableStart,e+r.tableStart,c)}n.setSelection(new ic(n.doc.resolve(s+r.tableStart))),t(n)}return!0}function hu(e,t){const n=Wl(e.schema);return pu((({node:e})=>n[e.type.spec.tableRole]))(e,t)}function pu(e){return(t,n)=>{var r;const o=t.selection;let i,s;if(o instanceof ic){if(o.$anchorCell.pos!=o.$headCell.pos)return!1;i=o.$anchorCell.nodeAfter,s=o.$anchorCell.pos}else{if(i=Kl(o.$from),!i)return!1;s=null==(r=Ul(o.$from))?void 0:r.pos}if(null==i||null==s)return!1;if(1==i.attrs.colspan&&1==i.attrs.rowspan)return!1;if(n){let r=i.attrs;const a=[],l=r.colwidth;r.rowspan>1&&(r={...r,rowspan:1}),r.colspan>1&&(r={...r,colspan:1});const c=Zc(t),u=t.tr;for(let e=0;e<c.right-c.left;e++)a.push(l?{...r,colwidth:l&&l[e]?[l[e]]:null}:r);let d;for(let t=c.top;t<c.bottom;t++){let n=c.map.positionAt(t,c.left,c.table);t==c.top&&(n+=i.nodeSize);for(let r=c.left,o=0;r<c.right;r++,o++)r==c.left&&t==c.top||u.insert(d=u.mapping.map(n+c.tableStart,1),e({node:i,row:t,col:r}).createAndFill(a[o]))}u.setNodeMarkup(s,e({node:i,row:c.top,col:c.left}),a[0]),o instanceof ic&&u.setSelection(new ic(u.doc.resolve(o.$anchorCell.pos),d?u.doc.resolve(d):void 0)),n(u)}return!0}}function fu(e,t){return function(n,r){if(!Gl(n))return!1;const o=Xl(n);if(o.nodeAfter.attrs[e]===t)return!1;if(r){const i=n.tr;n.selection instanceof ic?n.selection.forEachCell(((n,r)=>{n.attrs[e]!==t&&i.setNodeMarkup(r,null,{...n.attrs,[e]:t})})):i.setNodeMarkup(o.pos,null,{...o.nodeAfter.attrs,[e]:t}),r(i)}return!0}}function mu(e){return function(t,n){if(!Gl(t))return!1;if(n){const r=Wl(t.schema),o=Zc(t),i=t.tr,s=o.map.cellsInRect("column"==e?{left:o.left,top:0,right:o.right,bottom:o.map.height}:"row"==e?{left:0,top:o.top,right:o.map.width,bottom:o.bottom}:o),a=s.map((e=>o.table.nodeAt(e)));for(let e=0;e<s.length;e++)a[e].type==r.header_cell&&i.setNodeMarkup(o.tableStart+s[e],r.cell,a[e].attrs);if(0==i.steps.length)for(let e=0;e<s.length;e++)i.setNodeMarkup(o.tableStart+s[e],r.header_cell,a[e].attrs);n(i)}return!0}}function gu(e,t,n){const r=t.map.cellsInRect({left:0,top:0,right:"row"==e?t.map.width:1,bottom:"column"==e?t.map.height:1});for(let o=0;o<r.length;o++){const e=t.table.nodeAt(r[o]);if(e&&e.type!==n.header_cell)return!1}return!0}function vu(e,t){return t=t||{useDeprecatedLogic:!1},t.useDeprecatedLogic?mu(e):function(t,n){if(!Gl(t))return!1;if(n){const r=Wl(t.schema),o=Zc(t),i=t.tr,s=gu("row",o,r),a=gu("column",o,r),l="column"===e?s:"row"===e&&a,c=l?1:0,u="column"==e?{left:0,top:c,right:1,bottom:o.map.height}:"row"==e?{left:c,top:0,right:o.map.width,bottom:1}:o,d="column"==e?a?r.cell:r.header_cell:"row"==e?s?r.cell:r.header_cell:r.cell;o.map.cellsInRect(u).forEach((e=>{const t=e+o.tableStart,n=i.doc.nodeAt(t);n&&i.setNodeMarkup(t,d,n.attrs)})),n(i)}return!0}}var yu=vu("row",{useDeprecatedLogic:!0}),bu=vu("column",{useDeprecatedLogic:!0}),wu=vu("cell",{useDeprecatedLogic:!0});function ku(e,t){if(t<0){const t=e.nodeBefore;if(t)return e.pos-t.nodeSize;for(let n=e.index(-1)-1,r=e.before();n>=0;n--){const t=e.node(-1).child(n),o=t.lastChild;if(o)return r-1-o.nodeSize;r-=t.nodeSize}}else{if(e.index()<e.parent.childCount-1)return e.pos+e.nodeAfter.nodeSize;const t=e.node(-1);for(let n=e.indexAfter(-1),r=e.after();n<t.childCount;n++){const e=t.child(n);if(e.childCount)return r+1;r+=e.nodeSize}}return null}function xu(e){return function(t,n){if(!Gl(t))return!1;const r=ku(Xl(t),e);if(null==r)return!1;if(n){const e=t.doc.resolve(r);n(t.tr.setSelection($t.between(e,Ql(e))).scrollIntoView())}return!0}}function Su(e,t){const n=e.selection.$anchor;for(let r=n.depth;r>0;r--){const o=n.node(r);if("table"==o.type.spec.tableRole)return t&&t(e.tr.delete(n.before(r),n.after(r)).scrollIntoView()),!0}return!1}function Cu({allowTableNodeSelection:e=!1}={}){return new tn({key:Jl,state:{init(){return null},apply(e,t){const n=e.getMeta(Jl);if(null!=n)return-1==n?null:n;if(null==t||!e.docChanged)return t;const{deleted:r,pos:o}=e.mapping.mapResult(t);return r?null:o}},props:{decorations:ac,handleDOMEvents:{mousedown:Ac},createSelectionBetween(e){return null!=Jl.getState(e.state)?e.state.selection:null},handleTripleClick:Ec,handleKeyDown:Sc,handlePaste:Tc},appendTransaction(t,n,r){return uc(r,pc(r,n),e)}})}var _u=200,Ou=function(){};Ou.prototype.append=function(e){return e.length?(e=Ou.from(e),!this.length&&e||e.length<_u&&this.leafAppend(e)||this.length<_u&&e.leafPrepend(this)||this.appendInner(e)):this},Ou.prototype.prepend=function(e){return e.length?Ou.from(e).append(this):this},Ou.prototype.appendInner=function(e){return new Eu(this,e)},Ou.prototype.slice=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=this.length),e>=t?Ou.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))},Ou.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)},Ou.prototype.forEach=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=this.length),t<=n?this.forEachInner(e,t,n,0):this.forEachInvertedInner(e,t,n,0)},Ou.prototype.map=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=this.length);var r=[];return this.forEach((function(t,n){return r.push(e(t,n))}),t,n),r},Ou.from=function(e){return e instanceof Ou?e:e&&e.length?new Mu(e):Ou.empty};var Mu=function(e){function t(t){e.call(this),this.values=t}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={length:{configurable:!0},depth:{configurable:!0}};return t.prototype.flatten=function(){return this.values},t.prototype.sliceInner=function(e,n){return 0==e&&n==this.length?this:new t(this.values.slice(e,n))},t.prototype.getInner=function(e){return this.values[e]},t.prototype.forEachInner=function(e,t,n,r){for(var o=t;o<n;o++)if(!1===e(this.values[o],r+o))return!1},t.prototype.forEachInvertedInner=function(e,t,n,r){for(var o=t-1;o>=n;o--)if(!1===e(this.values[o],r+o))return!1},t.prototype.leafAppend=function(e){if(this.length+e.length<=_u)return new t(this.values.concat(e.flatten()))},t.prototype.leafPrepend=function(e){if(this.length+e.length<=_u)return new t(e.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(t.prototype,n),t}(Ou);Ou.empty=new Mu([]);var Eu=function(e){function t(t,n){e.call(this),this.left=t,this.right=n,this.length=t.length+n.length,this.depth=Math.max(t.depth,n.depth)+1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},t.prototype.getInner=function(e){return e<this.left.length?this.left.get(e):this.right.get(e-this.left.length)},t.prototype.forEachInner=function(e,t,n,r){var o=this.left.length;return!(t<o&&!1===this.left.forEachInner(e,t,Math.min(n,o),r))&&(!(n>o&&!1===this.right.forEachInner(e,Math.max(t-o,0),Math.min(this.length,n)-o,r+o))&&void 0)},t.prototype.forEachInvertedInner=function(e,t,n,r){var o=this.left.length;return!(t>o&&!1===this.right.forEachInvertedInner(e,t-o,Math.max(n,o)-o,r+o))&&(!(n<o&&!1===this.left.forEachInvertedInner(e,Math.min(t,o),n,r))&&void 0)},t.prototype.sliceInner=function(e,t){if(0==e&&t==this.length)return this;var n=this.left.length;return t<=n?this.left.slice(e,t):e>=n?this.right.slice(e-n,t-n):this.left.slice(e,n).append(this.right.slice(0,t-n))},t.prototype.leafAppend=function(e){var n=this.right.leafAppend(e);if(n)return new t(this.left,n)},t.prototype.leafPrepend=function(e){var n=this.left.leafPrepend(e);if(n)return new t(n,this.right)},t.prototype.appendInner=function(e){return this.left.depth>=Math.max(this.right.depth,e.depth)+1?new t(this.left,new t(this.right,e)):new t(this,e)},t}(Ou),Tu=Ou;const Au=500;class Nu{constructor(e,t){this.items=e,this.eventCount=t}popEvent(e,t){if(0==this.eventCount)return null;let n,r,o=this.items.length;for(;;o--){let e=this.items.get(o-1);if(e.selection){--o;break}}t&&(n=this.remapping(o,this.items.length),r=n.maps.length);let i,s,a=e.tr,l=[],c=[];return this.items.forEach(((e,t)=>{if(!e.step)return n||(n=this.remapping(o,t+1),r=n.maps.length),r--,void c.push(e);if(n){c.push(new Du(e.map));let t,o=e.step.map(n.slice(r));o&&a.maybeStep(o).doc&&(t=a.mapping.maps[a.mapping.maps.length-1],l.push(new Du(t,void 0,void 0,l.length+c.length))),r--,t&&n.appendMap(t,r)}else a.maybeStep(e.step);return e.selection?(i=n?e.selection.map(n.slice(r)):e.selection,s=new Nu(this.items.slice(0,o).append(c.reverse().concat(l)),this.eventCount-1),!1):void 0}),this.items.length,0),{remaining:s,transform:a,selection:i}}addTransform(e,t,n,r){let o=[],i=this.eventCount,s=this.items,a=!r&&s.length?s.get(s.length-1):null;for(let c=0;c<e.steps.length;c++){let n,l=e.steps[c].invert(e.docs[c]),u=new Du(e.mapping.maps[c],l,t);(n=a&&a.merge(u))&&(u=n,c?o.pop():s=s.slice(0,s.length-1)),o.push(u),t&&(i++,t=void 0),r||(a=u)}let l=i-n.depth;return l>zu&&(s=Ru(s,l),i-=l),new Nu(s.append(o),i)}remapping(e,t){let n=new Ie;return this.items.forEach(((t,r)=>{let o=null!=t.mirrorOffset&&r-t.mirrorOffset>=e?n.maps.length-t.mirrorOffset:void 0;n.appendMap(t.map,o)}),e,t),n}addMaps(e){return 0==this.eventCount?this:new Nu(this.items.append(e.map((e=>new Du(e)))),this.eventCount)}rebased(e,t){if(!this.eventCount)return this;let n=[],r=Math.max(0,this.items.length-t),o=e.mapping,i=e.steps.length,s=this.eventCount;this.items.forEach((e=>{e.selection&&s--}),r);let a=t;this.items.forEach((t=>{let r=o.getMirror(--a);if(null==r)return;i=Math.min(i,r);let l=o.maps[r];if(t.step){let i=e.steps[r].invert(e.docs[r]),c=t.selection&&t.selection.map(o.slice(a+1,r));c&&s++,n.push(new Du(l,i,c))}else n.push(new Du(l))}),r);let l=[];for(let d=t;d<i;d++)l.push(new Du(o.maps[d]));let c=this.items.slice(0,r).append(l).append(n),u=new Nu(c,s);return u.emptyItemCount()>Au&&(u=u.compress(this.items.length-n.length)),u}emptyItemCount(){let e=0;return this.items.forEach((t=>{t.step||e++})),e}compress(e=this.items.length){let t=this.remapping(0,e),n=t.maps.length,r=[],o=0;return this.items.forEach(((i,s)=>{if(s>=e)r.push(i),i.selection&&o++;else if(i.step){let e=i.step.map(t.slice(n)),s=e&&e.getMap();if(n--,s&&t.appendMap(s,n),e){let a=i.selection&&i.selection.map(t.slice(n));a&&o++;let l,c=new Du(s.invert(),e,a),u=r.length-1;(l=r.length&&r[u].merge(c))?r[u]=l:r.push(c)}}else i.map&&n--}),this.items.length,0),new Nu(Tu.from(r.reverse()),o)}}function Ru(e,t){let n;return e.forEach(((e,r)=>{if(e.selection&&0==t--)return n=r,!1})),e.slice(n)}Nu.empty=new Nu(Tu.empty,0);class Du{constructor(e,t,n,r){this.map=e,this.step=t,this.selection=n,this.mirrorOffset=r}merge(e){if(this.step&&e.step&&!e.selection){let t=e.step.merge(this.step);if(t)return new Du(t.getMap().invert(),t,this.selection)}}}class Iu{constructor(e,t,n,r,o){this.done=e,this.undone=t,this.prevRanges=n,this.prevTime=r,this.prevComposition=o}}const zu=20;function Pu(e,t,n,r){let o,i=n.getMeta(Hu);if(i)return i.historyState;n.getMeta(Wu)&&(e=new Iu(e.done,e.undone,null,0,-1));let s=n.getMeta("appendedTransaction");if(0==n.steps.length)return e;if(s&&s.getMeta(Hu))return s.getMeta(Hu).redo?new Iu(e.done.addTransform(n,void 0,r,qu(t)),e.undone,Fu(n.mapping.maps[n.steps.length-1]),e.prevTime,e.prevComposition):new Iu(e.done,e.undone.addTransform(n,void 0,r,qu(t)),null,e.prevTime,e.prevComposition);if(!1===n.getMeta("addToHistory")||s&&!1===s.getMeta("addToHistory"))return(o=n.getMeta("rebased"))?new Iu(e.done.rebased(n,o),e.undone.rebased(n,o),Bu(e.prevRanges,n.mapping),e.prevTime,e.prevComposition):new Iu(e.done.addMaps(n.mapping.maps),e.undone.addMaps(n.mapping.maps),Bu(e.prevRanges,n.mapping),e.prevTime,e.prevComposition);{let o=n.getMeta("composition"),i=0==e.prevTime||!s&&e.prevComposition!=o&&(e.prevTime<(n.time||0)-r.newGroupDelay||!$u(n,e.prevRanges)),a=s?Bu(e.prevRanges,n.mapping):Fu(n.mapping.maps[n.steps.length-1]);return new Iu(e.done.addTransform(n,i?t.selection.getBookmark():void 0,r,qu(t)),Nu.empty,a,n.time,null==o?e.prevComposition:o)}}function $u(e,t){if(!t)return!1;if(!e.docChanged)return!0;let n=!1;return e.mapping.maps[0].forEach(((e,r)=>{for(let o=0;o<t.length;o+=2)e<=t[o+1]&&r>=t[o]&&(n=!0)})),n}function Fu(e){let t=[];return e.forEach(((e,n,r,o)=>t.push(r,o))),t}function Bu(e,t){if(!e)return null;let n=[];for(let r=0;r<e.length;r+=2){let o=t.map(e[r],1),i=t.map(e[r+1],-1);o<=i&&n.push(o,i)}return n}function ju(e,t,n,r){let o=qu(t),i=Hu.get(t).spec.config,s=(r?e.undone:e.done).popEvent(t,o);if(!s)return;let a=s.selection.resolve(s.transform.doc),l=(r?e.done:e.undone).addTransform(s.transform,t.selection.getBookmark(),i,o),c=new Iu(r?l:s.remaining,r?s.remaining:l,null,0,-1);n(s.transform.setSelection(a).setMeta(Hu,{redo:r,historyState:c}).scrollIntoView())}let Lu=!1,Vu=null;function qu(e){let t=e.plugins;if(Vu!=t){Lu=!1,Vu=t;for(let e=0;e<t.length;e++)if(t[e].spec.historyPreserveItems){Lu=!0;break}}return Lu}const Hu=new on("history"),Wu=new on("closeHistory");function Ju(e={}){return e={depth:e.depth||100,newGroupDelay:e.newGroupDelay||500},new tn({key:Hu,state:{init(){return new Iu(Nu.empty,Nu.empty,null,0,-1)},apply(t,n,r){return Pu(n,r,t,e)}},config:e,props:{handleDOMEvents:{beforeinput(e,t){let n=t.inputType,r="historyUndo"==n?Uu:"historyRedo"==n?Ku:null;return!!r&&(t.preventDefault(),r(e.state,e.dispatch))}}}})}const Uu=(e,t)=>{let n=Hu.getState(e);return!(!n||0==n.done.eventCount)&&(t&&ju(n,e,t,!1),!0)},Ku=(e,t)=>{let n=Hu.getState(e);return!(!n||0==n.undone.eventCount)&&(t&&ju(n,e,t,!0),!0)};function Gu(e){let t=Hu.getState(e);return t?t.done.eventCount:0}function Xu(e){let t=Hu.getState(e);return t?t.undone.eventCount:0}
/*!
* tiptap-extensions v1.35.1
* (c) 2021 berdosis GbR (limited liability)
* @license MIT
*/
class Zu extends bl{get name(){return"blockquote"}get schema(){return{content:"block*",group:"block",defining:!0,draggable:!1,parseDOM:[{tag:"blockquote"}],toDOM:()=>["blockquote",0]}}commands({type:e}){return()=>cl(e)}keys({type:e}){return{"Ctrl->":cl(e)}}inputRules({type:e}){return[Aa(/^\s*>\s$/,e)]}}class Yu extends bl{get name(){return"bullet_list"}get schema(){return{content:"list_item+",group:"block",parseDOM:[{tag:"ul"}],toDOM:()=>["ul",0]}}commands({type:e,schema:t}){return()=>ll(e,t.nodes.list_item)}keys({type:e,schema:t}){return{"Shift-Ctrl-8":ll(e,t.nodes.list_item)}}inputRules({type:e}){return[Aa(/^\s*([-+*])\s$/,e)]}}class Qu extends bl{get name(){return"code_block"}get schema(){return{content:"text*",marks:"",group:"block",code:!0,defining:!0,draggable:!1,parseDOM:[{tag:"pre",preserveWhitespace:"full"}],toDOM:()=>["pre",["code",0]]}}commands({type:e,schema:t}){return()=>sl(e,t.nodes.paragraph)}keys({type:e}){return{"Shift-Ctrl-\\":fa(e)}}inputRules({type:e}){return[Na(/^```$/,e)]}}class ed extends bl{get name(){return"heading"}get defaultOptions(){return{levels:[1,2,3,4,5,6]}}get schema(){return{attrs:{level:{default:1}},content:"inline*",group:"block",defining:!0,draggable:!1,parseDOM:this.options.levels.map((e=>({tag:`h${e}`,attrs:{level:e}}))),toDOM:e=>[`h${e.attrs.level}`,0]}}commands({type:e,schema:t}){return n=>sl(e,t.nodes.paragraph,n)}keys({type:e}){return this.options.levels.reduce(((t,n)=>({...t,[`Shift-Ctrl-${n}`]:fa(e,{level:n})})),{})}inputRules({type:e}){return this.options.levels.map((t=>Na(new RegExp(`^(#{1,${t}})\\s$`),e,(()=>({level:t})))))}}class td extends bl{get name(){return"horizontal_rule"}get schema(){return{group:"block",parseDOM:[{tag:"hr"}],toDOM:()=>["hr"]}}commands({type:e}){return()=>(t,n)=>n(t.tr.replaceSelectionWith(e.create()))}inputRules({type:e}){return[el(/^(?:---|___\s|\*\*\*\s)$/,e)]}}const nd=/!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\)/;class rd extends bl{get name(){return"image"}get schema(){return{inline:!0,attrs:{src:{},alt:{default:null},title:{default:null}},group:"inline",draggable:!0,parseDOM:[{tag:"img[src]",getAttrs:e=>({src:e.getAttribute("src"),title:e.getAttribute("title"),alt:e.getAttribute("alt")})}],toDOM:e=>["img",e.attrs]}}commands({type:e}){return t=>(n,r)=>{const{selection:o}=n,i=o.$cursor?o.$cursor.pos:o.$to.pos,s=e.create(t),a=n.tr.insert(i,s);r(a)}}inputRules({type:e}){return[el(nd,e,(e=>{const[,t,n,r]=e;return{src:n,alt:t,title:r}}))]}get plugins(){return[new tn({props:{handleDOMEvents:{drop(e,t){const n=t.dataTransfer&&t.dataTransfer.files&&t.dataTransfer.files.length;if(!n)return;const r=Array.from(t.dataTransfer.files).filter((e=>/image/i.test(e.type)));if(0===r.length)return;t.preventDefault();const{schema:o}=e.state,i=e.posAtCoords({left:t.clientX,top:t.clientY});r.forEach((t=>{const n=new FileReader;n.onload=t=>{const n=o.nodes.image.create({src:t.target.result}),r=e.state.tr.insert(i.pos,n);e.dispatch(r)},n.readAsDataURL(t)}))}}}})]}}class od extends bl{get name(){return"list_item"}get schema(){return{content:"paragraph block*",defining:!0,draggable:!1,parseDOM:[{tag:"li"}],toDOM:()=>["li",0]}}keys({type:e}){return{Enter:Ua(e),Tab:Za(e),"Shift-Tab":Ka(e)}}}class id extends bl{get name(){return"ordered_list"}get schema(){return{attrs:{order:{default:1}},content:"list_item+",group:"block",parseDOM:[{tag:"ol",getAttrs:e=>({order:e.hasAttribute("start")?+e.getAttribute("start"):1})}],toDOM:e=>1===e.attrs.order?["ol",0]:["ol",{start:e.attrs.order},0]}}commands({type:e,schema:t}){return()=>ll(e,t.nodes.list_item)}keys({type:e,schema:t}){return{"Shift-Ctrl-9":ll(e,t.nodes.list_item)}}inputRules({type:e}){return[Aa(/^(\d+)\.\s$/,e,(e=>({order:+e[1]})),((e,t)=>t.childCount+t.attrs.order===+e[1]))]}}var sd=Hl({tableGroup:"block",cellContent:"block+",cellAttributes:{background:{default:null,getFromDOM(e){return e.style.backgroundColor||null},setDOMAttr(e,t){if(e){const n={style:`${t.style||""}background-color: ${e};`};Object.assign(t,n)}}}}});class ad extends bl{get name(){return"table"}get defaultOptions(){return{resizable:!1}}get schema(){return sd.table}commands({schema:e}){return{createTable:({rowsCount:t,colsCount:n,withHeaderRow:r})=>(o,i)=>{const s=o.tr.selection.anchor+1,a=Ia(e,t,n,r),l=o.tr.replaceSelectionWith(a).scrollIntoView(),c=l.doc.resolve(s);l.setSelection($t.near(c)),i(l)},addColumnBefore:()=>Qc,addColumnAfter:()=>eu,deleteColumn:()=>nu,addRowBefore:()=>iu,addRowAfter:()=>su,deleteRow:()=>lu,deleteTable:()=>Su,toggleCellMerge:()=>(e,t)=>{du(e,t)||hu(e,t)},mergeCells:()=>du,splitCell:()=>hu,toggleHeaderColumn:()=>bu,toggleHeaderRow:()=>yu,toggleHeaderCell:()=>wu,setCellAttr:({name:e,value:t})=>fu(e,t),fixTables:()=>pc}}keys(){return{Tab:xu(1),"Shift-Tab":xu(-1)}}get plugins(){return[...this.options.resizable?[$c()]:[],Cu()]}}class ld extends bl{get name(){return"table_header"}get schema(){return sd.table_header}}class cd extends bl{get name(){return"table_cell"}get schema(){return sd.table_cell}}class ud extends bl{get name(){return"table_row"}get schema(){return sd.table_row}}class dd extends bl{get name(){return"todo_item"}get defaultOptions(){return{nested:!1}}get view(){return{props:["node","updateAttrs","view"],methods:{onChange(){this.updateAttrs({done:!this.node.attrs.done})}},template:'\n        <li :data-type="node.type.name" :data-done="node.attrs.done.toString()" data-drag-handle>\n          <span class="todo-checkbox" contenteditable="false" @click="onChange"></span>\n          <div class="todo-content" ref="content" :contenteditable="view.editable.toString()"></div>\n        </li>\n      '}}get schema(){return{attrs:{done:{default:!1}},draggable:!0,content:this.options.nested?"(paragraph|todo_list)+":"paragraph+",toDOM:e=>{const{done:t}=e.attrs;return["li",{"data-type":this.name,"data-done":t.toString()},["span",{class:"todo-checkbox",contenteditable:"false"}],["div",{class:"todo-content"},0]]},parseDOM:[{priority:51,tag:`[data-type="${this.name}"]`,getAttrs:e=>({done:"true"===e.getAttribute("data-done")})}]}}keys({type:e}){return{Enter:il(e),Tab:this.options.nested?Za(e):()=>{},"Shift-Tab":Ka(e)}}}class hd extends bl{get name(){return"todo_list"}get schema(){return{group:"block",content:"todo_item+",toDOM:()=>["ul",{"data-type":this.name},0],parseDOM:[{priority:51,tag:`[data-type="${this.name}"]`}]}}commands({type:e,schema:t}){return()=>ll(e,t.nodes.todo_item)}inputRules({type:e}){return[Aa(/^\s*(\[ \])\s$/,e)]}}class pd extends vl{get name(){return"bold"}get schema(){return{parseDOM:[{tag:"strong"},{tag:"b",getAttrs:e=>"normal"!==e.style.fontWeight&&null},{style:"font-weight",getAttrs:e=>/^(bold(er)?|[5-9]\d{2,})$/.test(e)&&null}],toDOM:()=>["strong",0]}}keys({type:e}){return{"Mod-b":ga(e)}}commands({type:e}){return()=>ga(e)}inputRules({type:e}){return[Qa(/(?:\*\*|__)([^*_]+)(?:\*\*|__)$/,e)]}pasteRules({type:e}){return[nl(/(?:\*\*|__)([^*_]+)(?:\*\*|__)/g,e)]}}class fd extends vl{get name(){return"italic"}get schema(){return{parseDOM:[{tag:"i"},{tag:"em"},{style:"font-style=italic"}],toDOM:()=>["em",0]}}keys({type:e}){return{"Mod-i":ga(e)}}commands({type:e}){return()=>ga(e)}inputRules({type:e}){return[Qa(/(?:^|[^_])(_([^_]+)_)$/,e),Qa(/(?:^|[^*])(\*([^*]+)\*)$/,e)]}pasteRules({type:e}){return[nl(/_([^_]+)_/g,e),nl(/\*([^*]+)\*/g,e)]}}class md extends vl{get name(){return"link"}get defaultOptions(){return{openOnClick:!0,target:null}}get schema(){return{attrs:{href:{default:null},target:{default:null}},inclusive:!1,parseDOM:[{tag:"a[href]",getAttrs:e=>({href:e.getAttribute("href"),target:e.getAttribute("target")})}],toDOM:e=>["a",{...e.attrs,rel:"noopener noreferrer nofollow",target:e.attrs.target||this.options.target},0]}}commands({type:e}){return t=>t.href?ul(e,t):rl(e)}pasteRules({type:e}){return[tl(/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z]{2,}\b([-a-zA-Z0-9@:%_+.~#?&//=,()!]*)/gi,e,(e=>({href:e})))]}get plugins(){return this.options.openOnClick?[new tn({props:{handleClick:(e,t,n)=>{const{schema:r}=e.state,o=ja(e.state,r.marks.link);o.href&&n.target instanceof HTMLAnchorElement&&(n.stopPropagation(),window.open(o.href,o.target))}}})]:[]}}class gd extends vl{get name(){return"strike"}get schema(){return{parseDOM:[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",getAttrs:e=>"line-through"===e}],toDOM:()=>["s",0]}}keys({type:e}){return{"Mod-d":ga(e)}}commands({type:e}){return()=>ga(e)}inputRules({type:e}){return[Qa(/~([^~]+)~$/,e)]}pasteRules({type:e}){return[nl(/~([^~]+)~/g,e)]}}class vd extends vl{get name(){return"underline"}get schema(){return{parseDOM:[{tag:"u"},{style:"text-decoration",getAttrs:e=>"underline"===e}],toDOM:()=>["u",0]}}keys({type:e}){return{"Mod-u":ga(e)}}commands({type:e}){return()=>ga(e)}}class yd extends fl{get name(){return"history"}get defaultOptions(){return{depth:"",newGroupDelay:""}}keys(){const e={"Mod-z":Uu,"Mod-y":Ku,"Shift-Mod-z":Ku,"Mod-":Uu,"Shift-Mod-":Ku};return e}get plugins(){return[Ju({depth:this.options.depth,newGroupDelay:this.options.newGroupDelay})]}commands(){return{undo:()=>Uu,redo:()=>Ku,undoDepth:()=>Gu,redoDepth:()=>Xu}}}class bd extends fl{get name(){return"placeholder"}get defaultOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",emptyNodeText:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0}}get plugins(){return[new tn({props:{decorations:({doc:e,plugins:t,selection:n})=>{const r=t.find((e=>e.key.startsWith("editable$"))),o=r.props.editable(),i=o||!this.options.showOnlyWhenEditable,{anchor:s}=n,a=[],l=0===e.textContent.length;return!!i&&(e.descendants(((e,t)=>{const n=s>=t&&s<=t+e.nodeSize,r=0===e.content.size;if((n||!this.options.showOnlyCurrent)&&r){const n=[this.options.emptyNodeClass];l&&n.push(this.options.emptyEditorClass);const r=Ai.node(t,t+e.nodeSize,{class:n.join(" "),"data-empty-text":"function"===typeof this.options.emptyNodeText?this.options.emptyNodeText(e):this.options.emptyNodeText});a.push(r)}return!1})),Di.create(e,a))}}})]}}var wd=n(4680),kd=n(488),xd=n.n(kd),Sd=n(1540),Cd=n.n(Sd),_d=n(4359),Od=n.n(_d),Md=n(2244),Ed=n.n(Md),Td=n(4438),Ad=n.n(Td),Nd=n(6213),Rd=n.n(Nd),Dd=n(4327),Id=n.n(Dd),zd=n(8902),Pd=n.n(zd),$d=n(8787),Fd=n.n($d),Bd=n(7881),jd=n.n(Bd),Ld="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof n.g?n.g:"undefined"!=typeof self?self:{};function Vd(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function qd(e,t){return e(t={exports:{}},t.exports),t.exports}function Hd(e){return e&&e.default||e}var Wd=function(e){return e&&e.Math==Math&&e},Jd=Wd("object"==typeof globalThis&&globalThis)||Wd("object"==typeof window&&window)||Wd("object"==typeof self&&self)||Wd("object"==typeof Ld&&Ld)||Function("return this")(),Ud=function(e){try{return!!e()}catch(e){return!0}},Kd=!Ud((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),Gd={}.propertyIsEnumerable,Xd=Object.getOwnPropertyDescriptor,Zd={f:Xd&&!Gd.call({1:2},1)?function(e){var t=Xd(this,e);return!!t&&t.enumerable}:Gd},Yd=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},Qd={}.toString,eh=function(e){return Qd.call(e).slice(8,-1)},th="".split,nh=Ud((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==eh(e)?th.call(e,""):Object(e)}:Object,rh=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e},oh=function(e){return nh(rh(e))},ih=function(e){return"object"==typeof e?null!==e:"function"==typeof e},sh=function(e,t){if(!ih(e))return e;var n,r;if(t&&"function"==typeof(n=e.toString)&&!ih(r=n.call(e)))return r;if("function"==typeof(n=e.valueOf)&&!ih(r=n.call(e)))return r;if(!t&&"function"==typeof(n=e.toString)&&!ih(r=n.call(e)))return r;throw TypeError("Can't convert object to primitive value")},ah={}.hasOwnProperty,lh=function(e,t){return ah.call(e,t)},ch=Jd.document,uh=ih(ch)&&ih(ch.createElement),dh=function(e){return uh?ch.createElement(e):{}},hh=!Kd&&!Ud((function(){return 7!=Object.defineProperty(dh("div"),"a",{get:function(){return 7}}).a})),ph=Object.getOwnPropertyDescriptor,fh={f:Kd?ph:function(e,t){if(e=oh(e),t=sh(t,!0),hh)try{return ph(e,t)}catch(e){}if(lh(e,t))return Yd(!Zd.f.call(e,t),e[t])}},mh=function(e){if(!ih(e))throw TypeError(String(e)+" is not an object");return e},gh=Object.defineProperty,vh={f:Kd?gh:function(e,t,n){if(mh(e),t=sh(t,!0),mh(n),hh)try{return gh(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},yh=Kd?function(e,t,n){return vh.f(e,t,Yd(1,n))}:function(e,t,n){return e[t]=n,e},bh=function(e,t){try{yh(Jd,e,t)}catch(n){Jd[e]=t}return t},wh=Jd["__core-js_shared__"]||bh("__core-js_shared__",{}),kh=Function.toString;"function"!=typeof wh.inspectSource&&(wh.inspectSource=function(e){return kh.call(e)});var xh,Sh,Ch,_h=wh.inspectSource,Oh=Jd.WeakMap,Mh="function"==typeof Oh&&/native code/.test(_h(Oh)),Eh=qd((function(e){(e.exports=function(e,t){return wh[e]||(wh[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.6.5",mode:"global",copyright:" 2020 Denis Pushkarev (zloirock.ru)"})})),Th=0,Ah=Math.random(),Nh=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++Th+Ah).toString(36)},Rh=Eh("keys"),Dh=function(e){return Rh[e]||(Rh[e]=Nh(e))},Ih={},zh=Jd.WeakMap;if(Mh){var Ph=new zh,$h=Ph.get,Fh=Ph.has,Bh=Ph.set;xh=function(e,t){return Bh.call(Ph,e,t),t},Sh=function(e){return $h.call(Ph,e)||{}},Ch=function(e){return Fh.call(Ph,e)}}else{var jh=Dh("state");Ih[jh]=!0,xh=function(e,t){return yh(e,jh,t),t},Sh=function(e){return lh(e,jh)?e[jh]:{}},Ch=function(e){return lh(e,jh)}}var Lh,Vh,qh={set:xh,get:Sh,has:Ch,enforce:function(e){return Ch(e)?Sh(e):xh(e,{})},getterFor:function(e){return function(t){var n;if(!ih(t)||(n=Sh(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return n}}},Hh=qd((function(e){var t=qh.get,n=qh.enforce,r=String(String).split("String");(e.exports=function(e,t,o,i){var s=!!i&&!!i.unsafe,a=!!i&&!!i.enumerable,l=!!i&&!!i.noTargetGet;"function"==typeof o&&("string"!=typeof t||lh(o,"name")||yh(o,"name",t),n(o).source=r.join("string"==typeof t?t:"")),e!==Jd?(s?!l&&e[t]&&(a=!0):delete e[t],a?e[t]=o:yh(e,t,o)):a?e[t]=o:bh(t,o)})(Function.prototype,"toString",(function(){return"function"==typeof this&&t(this).source||_h(this)}))})),Wh=Jd,Jh=function(e){return"function"==typeof e?e:void 0},Uh=function(e,t){return arguments.length<2?Jh(Wh[e])||Jh(Jd[e]):Wh[e]&&Wh[e][t]||Jd[e]&&Jd[e][t]},Kh=Math.ceil,Gh=Math.floor,Xh=function(e){return isNaN(e=+e)?0:(e>0?Gh:Kh)(e)},Zh=Math.min,Yh=function(e){return e>0?Zh(Xh(e),9007199254740991):0},Qh=Math.max,ep=Math.min,tp=function(e,t){var n=Xh(e);return n<0?Qh(n+t,0):ep(n,t)},np=function(e){return function(t,n,r){var o,i=oh(t),s=Yh(i.length),a=tp(r,s);if(e&&n!=n){for(;s>a;)if((o=i[a++])!=o)return!0}else for(;s>a;a++)if((e||a in i)&&i[a]===n)return e||a||0;return!e&&-1}},rp={includes:np(!0),indexOf:np(!1)},op=rp.indexOf,ip=function(e,t){var n,r=oh(e),o=0,i=[];for(n in r)!lh(Ih,n)&&lh(r,n)&&i.push(n);for(;t.length>o;)lh(r,n=t[o++])&&(~op(i,n)||i.push(n));return i},sp=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],ap=sp.concat("length","prototype"),lp={f:Object.getOwnPropertyNames||function(e){return ip(e,ap)}},cp={f:Object.getOwnPropertySymbols},up=Uh("Reflect","ownKeys")||function(e){var t=lp.f(mh(e)),n=cp.f;return n?t.concat(n(e)):t},dp=function(e,t){for(var n=up(t),r=vh.f,o=fh.f,i=0;i<n.length;i++){var s=n[i];lh(e,s)||r(e,s,o(t,s))}},hp=/#|\.prototype\./,pp=function(e,t){var n=mp[fp(e)];return n==vp||n!=gp&&("function"==typeof t?Ud(t):!!t)},fp=pp.normalize=function(e){return String(e).replace(hp,".").toLowerCase()},mp=pp.data={},gp=pp.NATIVE="N",vp=pp.POLYFILL="P",yp=pp,bp=fh.f,wp=function(e,t){var n,r,o,i,s,a=e.target,l=e.global,c=e.stat;if(n=l?Jd:c?Jd[a]||bh(a,{}):(Jd[a]||{}).prototype)for(r in t){if(i=t[r],o=e.noTargetGet?(s=bp(n,r))&&s.value:n[r],!yp(l?r:a+(c?".":"#")+r,e.forced)&&void 0!==o){if(typeof i==typeof o)continue;dp(i,o)}(e.sham||o&&o.sham)&&yh(i,"sham",!0),Hh(n,r,i,e)}},kp=Array.isArray||function(e){return"Array"==eh(e)},xp=function(e){return Object(rh(e))},Sp=function(e,t,n){var r=sh(t);r in e?vh.f(e,r,Yd(0,n)):e[r]=n},Cp=!!Object.getOwnPropertySymbols&&!Ud((function(){return!String(Symbol())})),_p=Cp&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,Op=Eh("wks"),Mp=Jd.Symbol,Ep=_p?Mp:Mp&&Mp.withoutSetter||Nh,Tp=function(e){return lh(Op,e)||(Cp&&lh(Mp,e)?Op[e]=Mp[e]:Op[e]=Ep("Symbol."+e)),Op[e]},Ap=Tp("species"),Np=function(e,t){var n;return kp(e)&&("function"!=typeof(n=e.constructor)||n!==Array&&!kp(n.prototype)?ih(n)&&null===(n=n[Ap])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===t?0:t)},Rp=Uh("navigator","userAgent")||"",Dp=Jd.process,Ip=Dp&&Dp.versions,zp=Ip&&Ip.v8;zp?Vh=(Lh=zp.split("."))[0]+Lh[1]:Rp&&(!(Lh=Rp.match(/Edge\/(\d+)/))||Lh[1]>=74)&&(Lh=Rp.match(/Chrome\/(\d+)/))&&(Vh=Lh[1]);var Pp=Vh&&+Vh,$p=Tp("species"),Fp=function(e){return Pp>=51||!Ud((function(){var t=[];return(t.constructor={})[$p]=function(){return{foo:1}},1!==t[e](Boolean).foo}))},Bp=Tp("isConcatSpreadable"),jp=Pp>=51||!Ud((function(){var e=[];return e[Bp]=!1,e.concat()[0]!==e})),Lp=Fp("concat"),Vp=function(e){if(!ih(e))return!1;var t=e[Bp];return void 0!==t?!!t:kp(e)};wp({target:"Array",proto:!0,forced:!jp||!Lp},{concat:function(e){var t,n,r,o,i,s=xp(this),a=Np(s,0),l=0;for(t=-1,r=arguments.length;t<r;t++)if(Vp(i=-1===t?s:arguments[t])){if(l+(o=Yh(i.length))>9007199254740991)throw TypeError("Maximum allowed index exceeded");for(n=0;n<o;n++,l++)n in i&&Sp(a,l,i[n])}else{if(l>=9007199254740991)throw TypeError("Maximum allowed index exceeded");Sp(a,l++,i)}return a.length=l,a}});var qp,Hp=Object.keys||function(e){return ip(e,sp)},Wp=Kd?Object.defineProperties:function(e,t){mh(e);for(var n,r=Hp(t),o=r.length,i=0;o>i;)vh.f(e,n=r[i++],t[n]);return e},Jp=Uh("document","documentElement"),Up=Dh("IE_PROTO"),Kp=function(){},Gp=function(e){return"<script>"+e+"<\/script>"},Xp=function(){try{qp=document.domain&&new ActiveXObject("htmlfile")}catch(e){}var e,t;Xp=qp?function(e){e.write(Gp("")),e.close();var t=e.parentWindow.Object;return e=null,t}(qp):((t=dh("iframe")).style.display="none",Jp.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(Gp("document.F=Object")),e.close(),e.F);for(var n=sp.length;n--;)delete Xp.prototype[sp[n]];return Xp()};Ih[Up]=!0;var Zp=Object.create||function(e,t){var n;return null!==e?(Kp.prototype=mh(e),n=new Kp,Kp.prototype=null,n[Up]=e):n=Xp(),void 0===t?n:Wp(n,t)},Yp=Tp("unscopables"),Qp=Array.prototype;null==Qp[Yp]&&vh.f(Qp,Yp,{configurable:!0,value:Zp(null)});var ef=function(e){Qp[Yp][e]=!0},tf=Object.defineProperty,nf={},rf=function(e){throw e},of=function(e,t){if(lh(nf,e))return nf[e];t||(t={});var n=[][e],r=!!lh(t,"ACCESSORS")&&t.ACCESSORS,o=lh(t,0)?t[0]:rf,i=lh(t,1)?t[1]:void 0;return nf[e]=!!n&&!Ud((function(){if(r&&!Kd)return!0;var e={length:-1};r?tf(e,1,{enumerable:!0,get:rf}):e[1]=1,n.call(e,o,i)}))},sf=rp.includes,af=of("indexOf",{ACCESSORS:!0,1:0});wp({target:"Array",proto:!0,forced:!af},{includes:function(e){return sf(this,e,arguments.length>1?arguments[1]:void 0)}}),ef("includes");var lf=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e},cf=function(e){return function(t,n,r,o){lf(n);var i=xp(t),s=nh(i),a=Yh(i.length),l=e?a-1:0,c=e?-1:1;if(r<2)for(;;){if(l in s){o=s[l],l+=c;break}if(l+=c,e?l<0:a<=l)throw TypeError("Reduce of empty array with no initial value")}for(;e?l>=0:a>l;l+=c)l in s&&(o=n(o,s[l],l,i));return o}},uf=function(e,t){var n=[][e];return!!n&&Ud((function(){n.call(null,t||function(){throw 1},1)}))},df={left:cf(!1),right:cf(!0)}.left,hf=uf("reduce"),pf=of("reduce",{1:0});wp({target:"Array",proto:!0,forced:!hf||!pf},{reduce:function(e){return df(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}});var ff=Ud((function(){Hp(1)}));wp({target:"Object",stat:!0,forced:ff},{keys:function(e){return Hp(xp(e))}});var mf=function(){var e=mh(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t};function gf(e,t){return RegExp(e,t)}var vf={UNSUPPORTED_Y:Ud((function(){var e=gf("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),BROKEN_CARET:Ud((function(){var e=gf("^r","gy");return e.lastIndex=2,null!=e.exec("str")}))},yf=RegExp.prototype.exec,bf=String.prototype.replace,wf=yf,kf=function(){var e=/a/,t=/b*/g;return yf.call(e,"a"),yf.call(t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),xf=vf.UNSUPPORTED_Y||vf.BROKEN_CARET,Sf=void 0!==/()??/.exec("")[1];(kf||Sf||xf)&&(wf=function(e){var t,n,r,o,i=this,s=xf&&i.sticky,a=mf.call(i),l=i.source,c=0,u=e;return s&&(-1===(a=a.replace("y","")).indexOf("g")&&(a+="g"),u=String(e).slice(i.lastIndex),i.lastIndex>0&&(!i.multiline||i.multiline&&"\n"!==e[i.lastIndex-1])&&(l="(?: "+l+")",u=" "+u,c++),n=new RegExp("^(?:"+l+")",a)),Sf&&(n=new RegExp("^"+l+"$(?!\\s)",a)),kf&&(t=i.lastIndex),r=yf.call(s?n:i,u),s?r?(r.input=r.input.slice(c),r[0]=r[0].slice(c),r.index=i.lastIndex,i.lastIndex+=r[0].length):i.lastIndex=0:kf&&r&&(i.lastIndex=i.global?r.index+r[0].length:t),Sf&&r&&r.length>1&&bf.call(r[0],n,(function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(r[o]=void 0)})),r});var Cf=wf;wp({target:"RegExp",proto:!0,forced:/./.exec!==Cf},{exec:Cf});var _f=Tp("match"),Of=function(e){var t;return ih(e)&&(void 0!==(t=e[_f])?!!t:"RegExp"==eh(e))},Mf=function(e){if(Of(e))throw TypeError("The method doesn't accept regular expressions");return e},Ef=Tp("match");wp({target:"String",proto:!0,forced:!function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[Ef]=!1,"/./"[e](t)}catch(e){}}return!1}("includes")},{includes:function(e){return!!~String(rh(this)).indexOf(Mf(e),arguments.length>1?arguments[1]:void 0)}});var Tf=Tp("species"),Af=!Ud((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),Nf="$0"==="a".replace(/./,"$0"),Rf=Tp("replace"),Df=!!/./[Rf]&&""===/./[Rf]("a","$0"),If=!Ud((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2!==n.length||"a"!==n[0]||"b"!==n[1]})),zf=function(e,t,n,r){var o=Tp(e),i=!Ud((function(){var t={};return t[o]=function(){return 7},7!=""[e](t)})),s=i&&!Ud((function(){var t=!1,n=/a/;return"split"===e&&((n={}).constructor={},n.constructor[Tf]=function(){return n},n.flags="",n[o]=/./[o]),n.exec=function(){return t=!0,null},n[o](""),!t}));if(!i||!s||"replace"===e&&(!Af||!Nf||Df)||"split"===e&&!If){var a=/./[o],l=n(o,""[e],(function(e,t,n,r,o){return t.exec===Cf?i&&!o?{done:!0,value:a.call(t,n,r)}:{done:!0,value:e.call(n,t,r)}:{done:!1}}),{REPLACE_KEEPS_$0:Nf,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:Df}),c=l[0],u=l[1];Hh(String.prototype,e,c),Hh(RegExp.prototype,o,2==t?function(e,t){return u.call(e,this,t)}:function(e){return u.call(e,this)})}r&&yh(RegExp.prototype[o],"sham",!0)},Pf=Tp("species"),$f=function(e,t){var n,r=mh(e).constructor;return void 0===r||null==(n=mh(r)[Pf])?t:lf(n)},Ff=function(e){return function(t,n){var r,o,i=String(rh(t)),s=Xh(n),a=i.length;return s<0||s>=a?e?"":void 0:(r=i.charCodeAt(s))<55296||r>56319||s+1===a||(o=i.charCodeAt(s+1))<56320||o>57343?e?i.charAt(s):r:e?i.slice(s,s+2):o-56320+(r-55296<<10)+65536}},Bf={codeAt:Ff(!1),charAt:Ff(!0)},jf=Bf.charAt,Lf=function(e,t,n){return t+(n?jf(e,t).length:1)},Vf=function(e,t){var n=e.exec;if("function"==typeof n){var r=n.call(e,t);if("object"!=typeof r)throw TypeError("RegExp exec method returned something other than an Object or null");return r}if("RegExp"!==eh(e))throw TypeError("RegExp#exec called on incompatible receiver");return Cf.call(e,t)},qf=[].push,Hf=Math.min,Wf=!Ud((function(){return!RegExp(4294967295,"y")}));function Jf(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Uf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Kf(e,t,n){return t&&Uf(e.prototype,t),n&&Uf(e,n),e}zf("split",2,(function(e,t,n){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,n){var r=String(rh(this)),o=void 0===n?4294967295:n>>>0;if(0===o)return[];if(void 0===e)return[r];if(!Of(e))return t.call(r,e,o);for(var i,s,a,l=[],c=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),u=0,d=new RegExp(e.source,c+"g");(i=Cf.call(d,r))&&!((s=d.lastIndex)>u&&(l.push(r.slice(u,i.index)),i.length>1&&i.index<r.length&&qf.apply(l,i.slice(1)),a=i[0].length,u=s,l.length>=o));)d.lastIndex===i.index&&d.lastIndex++;return u===r.length?!a&&d.test("")||l.push(""):l.push(r.slice(u)),l.length>o?l.slice(0,o):l}:"0".split(void 0,0).length?function(e,n){return void 0===e&&0===n?[]:t.call(this,e,n)}:t,[function(t,n){var o=rh(this),i=null==t?void 0:t[e];return void 0!==i?i.call(t,o,n):r.call(String(o),t,n)},function(e,o){var i=n(r,e,this,o,r!==t);if(i.done)return i.value;var s=mh(e),a=String(this),l=$f(s,RegExp),c=s.unicode,u=(s.ignoreCase?"i":"")+(s.multiline?"m":"")+(s.unicode?"u":"")+(Wf?"y":"g"),d=new l(Wf?s:"^(?:"+s.source+")",u),h=void 0===o?4294967295:o>>>0;if(0===h)return[];if(0===a.length)return null===Vf(d,a)?[a]:[];for(var p=0,f=0,m=[];f<a.length;){d.lastIndex=Wf?f:0;var g,v=Vf(d,Wf?a:a.slice(f));if(null===v||(g=Hf(Yh(d.lastIndex+(Wf?0:f)),a.length))===p)f=Lf(a,f,c);else{if(m.push(a.slice(p,f)),m.length===h)return m;for(var y=1;y<=v.length-1;y++)if(m.push(v[y]),m.length===h)return m;f=p=g}}return m.push(a.slice(p)),m}]}),!Wf);var Gf=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),t=n instanceof Array}catch(e){}return function(n,r){return mh(n),function(e){if(!ih(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype")}(r),t?e.call(n,r):n.__proto__=r,n}}():void 0),Xf=function(e,t,n){var r,o;return Gf&&"function"==typeof(r=t.constructor)&&r!==n&&ih(o=r.prototype)&&o!==n.prototype&&Gf(e,o),e},Zf=Tp("species"),Yf=function(e){var t=Uh(e),n=vh.f;Kd&&t&&!t[Zf]&&n(t,Zf,{configurable:!0,get:function(){return this}})},Qf=vh.f,em=lp.f,tm=qh.set,nm=Tp("match"),rm=Jd.RegExp,om=rm.prototype,im=/a/g,sm=/a/g,am=new rm(im)!==im,lm=vf.UNSUPPORTED_Y;if(Kd&&yp("RegExp",!am||lm||Ud((function(){return sm[nm]=!1,rm(im)!=im||rm(sm)==sm||"/a/i"!=rm(im,"i")})))){for(var cm=function(e,t){var n,r=this instanceof cm,o=Of(e),i=void 0===t;if(!r&&o&&e.constructor===cm&&i)return e;am?o&&!i&&(e=e.source):e instanceof cm&&(i&&(t=mf.call(e)),e=e.source),lm&&(n=!!t&&t.indexOf("y")>-1)&&(t=t.replace(/y/g,""));var s=Xf(am?new rm(e,t):rm(e,t),r?this:om,cm);return lm&&n&&tm(s,{sticky:n}),s},um=function(e){e in cm||Qf(cm,e,{configurable:!0,get:function(){return rm[e]},set:function(t){rm[e]=t}})},dm=em(rm),hm=0;dm.length>hm;)um(dm[hm++]);om.constructor=cm,cm.prototype=om,Hh(Jd,"RegExp",cm)}Yf("RegExp");var pm=RegExp.prototype,fm=pm.toString,mm=Ud((function(){return"/a/b"!=fm.call({source:"a",flags:"b"})})),gm="toString"!=fm.name;(mm||gm)&&Hh(RegExp.prototype,"toString",(function(){var e=mh(this),t=String(e.source),n=e.flags;return"/"+t+"/"+String(void 0===n&&e instanceof RegExp&&!("flags"in pm)?mf.call(e):n)}),{unsafe:!0});var vm=new RegExp("(".concat("left","|","center","|","right","|","justify",")")),ym=/(https?:\/\/(?:www\.|(?!www))[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s]{2,}|www\.[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s]{2,}|https?:\/\/(?:www\.|(?!www))[a-zA-Z0-9]+\.[^\s]{2,}|www\.[a-zA-Z0-9]+\.[^\s]{2,})/,bm=function(){function e(){Jf(this,e)}return Kf(e,null,[{key:"warn",value:function(e){console.warn("".concat("[Element-Tiptap Tip]"," ").concat(e))}},{key:"error",value:function(e){console.error("".concat("[Element-Tiptap Tip]"," ").concat(e))}}]),e}(),wm={en:{editor:{extensions:{Bold:{tooltip:"Bold"},Underline:{tooltip:"Underline"},Italic:{tooltip:"Italic"},Strike:{tooltip:"Strike through"},Heading:{tooltip:"Heading",buttons:{paragraph:"Paragraph",heading:"Heading"}},Blockquote:{tooltip:"Block quote"},CodeBlock:{tooltip:"Code block"},Link:{add:{tooltip:"Apply link",control:{title:"Apply Link",href:"Href",open_in_new_tab:"Open in new tab",confirm:"Apply",cancel:"Cancel"}},edit:{tooltip:"Edit link",control:{title:"Edit Link",href:"Href",open_in_new_tab:"Open in new tab",confirm:"Update",cancel:"Cancel"}},unlink:{tooltip:"Unlink"},open:{tooltip:"Open link"}},Image:{buttons:{insert_image:{tooltip:"Insert image",external:"Insert Image By Url",upload:"Upload Image"},remove_image:{tooltip:"Remove"},image_options:{tooltip:"Image options"},display:{tooltip:"Display",inline:"Inline",block:"Break Text",left:"Float Left",right:"Float Right"}},control:{insert_by_url:{title:"Insert image",placeholder:"Url of image",confirm:"Insert",cancel:"Cancel",invalid_url:"Please enter the correct url"},upload_image:{title:"Upload image",button:"Choose an image file or drag it here"},edit_image:{title:"Edit image",confirm:"Update",cancel:"Cancel",form:{src:"Image Url",alt:"Alternative Text",width:"Width",height:"Height"}}}},Iframe:{tooltip:"Insert video",control:{title:"Insert video",placeholder:"Href",confirm:"Insert",cancel:"Cancel"}},BulletList:{tooltip:"Bullet list"},OrderedList:{tooltip:"Ordered list"},TodoList:{tooltip:"Todo list"},TextAlign:{buttons:{align_left:{tooltip:"Align left"},align_center:{tooltip:"Align center"},align_right:{tooltip:"Align right"},align_justify:{tooltip:"Align justify"}}},FontType:{tooltip:"Font family"},FontSize:{tooltip:"Font size",default:"default"},TextColor:{tooltip:"Text color"},TextHighlight:{tooltip:"Text highlight"},LineHeight:{tooltip:"Line height"},Table:{tooltip:"Table",buttons:{insert_table:"Insert Table",add_column_before:"Add Column Before",add_column_after:"Add Column After",delete_column:"Delete Column",add_row_before:"Add Row Before",add_row_after:"Add Row After",delete_row:"Delete Row",merge_cells:"Merge Cells",split_cell:"Split Cell",delete_table:"Delete Table"}},Indent:{buttons:{indent:{tooltip:"Indent"},outdent:{tooltip:"Outdent"}}},FormatClear:{tooltip:"Clear format"},HorizontalRule:{tooltip:"Horizontal rule"},History:{tooltip:{undo:"Undo",redo:"Redo"}},Fullscreen:{tooltip:{fullscreen:"Full screen",exit_fullscreen:"Exit full screen"}},Print:{tooltip:"Print"},Preview:{tooltip:"Preview",dialog:{title:"Preview"}},SelectAll:{tooltip:"Select all"},CodeView:{tooltip:"Code view"}},characters:"Characters"}},zh:{editor:{extensions:{Bold:{tooltip:""},Underline:{tooltip:""},Italic:{tooltip:""},Strike:{tooltip:""},Heading:{tooltip:"",buttons:{paragraph:"",heading:""}},Blockquote:{tooltip:""},CodeBlock:{tooltip:""},Link:{add:{tooltip:"",control:{title:"",href:"",open_in_new_tab:"",confirm:"",cancel:""}},edit:{tooltip:"",control:{title:"",href:"",open_in_new_tab:"",confirm:"",cancel:""}},unlink:{tooltip:""},open:{tooltip:""}},Image:{buttons:{insert_image:{tooltip:"",external:"",upload:""},remove_image:{tooltip:""},image_options:{tooltip:""},display:{tooltip:"",inline:"",block:"",left:"",right:""}},control:{insert_by_url:{title:"",placeholder:"",confirm:"",cancel:"",invalid_url:""},upload_image:{title:"",button:""},edit_image:{title:"",confirm:"",cancel:"",form:{src:"",alt:"",width:"",height:""}}}},Iframe:{tooltip:"",control:{title:"",placeholder:"",confirm:"",cancel:""}},BulletList:{tooltip:""},OrderedList:{tooltip:""},TodoList:{tooltip:""},TextAlign:{buttons:{align_left:{tooltip:""},align_center:{tooltip:""},align_right:{tooltip:""},align_justify:{tooltip:""}}},FontType:{tooltip:""},FontSize:{tooltip:"",default:""},TextColor:{tooltip:""},TextHighlight:{tooltip:""},LineHeight:{tooltip:""},Table:{tooltip:"",buttons:{insert_table:"",add_column_before:"",add_column_after:"",delete_column:"",add_row_before:"",add_row_after:"",delete_row:"",merge_cells:"",split_cell:"",delete_table:""}},Indent:{buttons:{indent:{tooltip:""},outdent:{tooltip:""}}},FormatClear:{tooltip:""},HorizontalRule:{tooltip:""},History:{tooltip:{undo:"",redo:""}},Fullscreen:{tooltip:{fullscreen:"",exit_fullscreen:""}},Print:{tooltip:""},Preview:{tooltip:"",dialog:{title:""}},SelectAll:{tooltip:""},CodeView:{tooltip:""}},characters:""}},zh_tw:{editor:{extensions:{Bold:{tooltip:""},Underline:{tooltip:""},Italic:{tooltip:""},Strike:{tooltip:""},Heading:{tooltip:"",buttons:{paragraph:"",heading:""}},Blockquote:{tooltip:""},CodeBlock:{tooltip:""},Link:{add:{tooltip:"",control:{title:"",href:"",open_in_new_tab:"",confirm:"",cancel:""}},edit:{tooltip:"",control:{title:"",href:"",open_in_new_tab:"",confirm:"",cancel:""}},unlink:{tooltip:""},open:{tooltip:""}},Image:{buttons:{insert_image:{tooltip:"",external:"",upload:""},remove_image:{tooltip:""},image_options:{tooltip:""},display:{tooltip:"",inline:"",block:"",left:"",right:""}},control:{insert_by_url:{title:"",placeholder:"",confirm:"",cancel:"",invalid_url:""},upload_image:{title:"",button:""},edit_image:{title:"",confirm:"",cancel:"",form:{src:"",alt:"",width:"",height:""}}}},Iframe:{tooltip:"",control:{title:"",placeholder:"",confirm:"",cancel:""}},BulletList:{tooltip:""},OrderedList:{tooltip:""},TodoList:{tooltip:""},TextAlign:{buttons:{align_left:{tooltip:""},align_center:{tooltip:""},align_right:{tooltip:""},align_justify:{tooltip:""}}},FontType:{tooltip:""},FontSize:{tooltip:"",default:""},TextColor:{tooltip:""},TextHighlight:{tooltip:""},LineHeight:{tooltip:""},Table:{tooltip:"",buttons:{insert_table:"",add_column_before:"",add_column_after:"",delete_column:"",add_row_before:"",add_row_after:"",delete_row:"",merge_cells:"",split_cell:"",delete_table:""}},Indent:{buttons:{indent:{tooltip:""},outdent:{tooltip:""}}},FormatClear:{tooltip:""},HorizontalRule:{tooltip:""},History:{tooltip:{undo:"",redo:""}},Fullscreen:{tooltip:{fullscreen:"",exit_fullscreen:""}},Print:{tooltip:""},Preview:{tooltip:"",dialog:{title:""}},SelectAll:{tooltip:""},CodeView:{tooltip:""}},characters:""}},pl:{editor:{extensions:{Bold:{tooltip:"Pogrubienie"},Underline:{tooltip:"Podkrelenie"},Italic:{tooltip:"Kursywa"},Strike:{tooltip:"Przekrelenie"},Heading:{tooltip:"Nagwek",buttons:{paragraph:"Paragraf",heading:"Nagwek"}},Blockquote:{tooltip:"Cytat"},CodeBlock:{tooltip:"Kod"},Link:{add:{tooltip:"Dodaj link",control:{title:"Dodaj Link",href:"rdo",open_in_new_tab:"Otwrz w nowej karcie",confirm:"Dodaj",cancel:"Anuluj"}},edit:{tooltip:"Edytuj link",control:{title:"Edytuj link",href:"rdo",open_in_new_tab:"Otwrz w nowej karcie",confirm:"aktualizacja",cancel:"Anuluj"}},unlink:{tooltip:"Odczepi"},open:{tooltip:"Otwrz link"}},Image:{buttons:{insert_image:{tooltip:"Dodaj obraz",external:"Dodaj obraz online",upload:"Dodaj obraz z dysku"},remove_image:{tooltip:"Usu"},image_options:{tooltip:"Opcje obrazu"},display:{tooltip:"Pokaz",inline:"Inline",block:"Podziel tekst",left:"Przesu w lewo",right:"Py w prawo"}},control:{insert_by_url:{title:"Dodawanie obrazu online",placeholder:"URL obrazu",confirm:"Dodaj",cancel:"Zamknij",invalid_url:"Prosz poda prawidowy link prowadzcy do obrazu"},upload_image:{title:"Dodawanie obrazu z dysku",button:"Wska obraz lub przecignij go tutaj"},edit_image:{title:"Edytuj obraz",confirm:"Aktualizacja",cancel:"Zamknij",form:{src:"URL obrazu",alt:"Alternatywny Tekst",width:"Szeroko",height:"Wysoko"}}}},Iframe:{tooltip:"Dodaj film",control:{title:"Dodaj film",placeholder:"URL filmu",confirm:"Dodaj",cancel:"Zamknij"}},BulletList:{tooltip:"Lista wypunktowana"},OrderedList:{tooltip:"Lista uporzdkowana"},TodoList:{tooltip:"Lista rzeczy do zrobienia"},TextAlign:{buttons:{align_left:{tooltip:"Wyrwnaj do lewej"},align_center:{tooltip:"Wyrodkuj"},align_right:{tooltip:"Wyrwnaj do prawej"},align_justify:{tooltip:"Wyjustuj"}}},FontType:{tooltip:"Rodzina czcionek"},FontSize:{tooltip:"Rozmiar czcionki",default:"domylna"},TextColor:{tooltip:"Kolor tekstu"},TextHighlight:{tooltip:"Podwietlenie tekstu"},LineHeight:{tooltip:"Wysoko linii"},Table:{tooltip:"Tabela",buttons:{insert_table:"Dodaj tabel",add_column_before:"Dodaj kolumn przed",add_column_afer:"Dodaj kolumn za",delete_column:"Usu kolumn",add_row_before:"Dodaj wiersz przed",add_row_after:"Dodaj wiersz za",delete_row:"Usu wiersz",merge_cells:"Pocz komrki",split_cell:"Rozdziel komrki",delete_table:"Usu tabel"}},Indent:{buttons:{indent:{tooltip:"Zwiksz wcicie"},outdent:{tooltip:"Zmniejsz wcicie"}}},FormatClear:{tooltip:"Wyczy formatowanie"},HorizontalRule:{tooltip:"Linia pozioma"},History:{tooltip:{undo:"Cofnij",redo:"Powtrz"}},Fullscreen:{tooltip:{fullscreen:"Peny ekran",exit_fullscreen:"Zamknij peny ekran"}},Print:{tooltip:"Drukuj"},Preview:{tooltip:"Podgld",dialog:{title:"Podgld"}},SelectAll:{tooltip:"Zaznacz wszystko"},CodeView:{tooltip:"Widok kodu"}},characters:"Znaki"}},ru:{editor:{extensions:{Bold:{tooltip:""},Underline:{tooltip:""},Italic:{tooltip:""},Strike:{tooltip:""},Heading:{tooltip:"",buttons:{paragraph:"",heading:""}},Blockquote:{tooltip:""},CodeBlock:{tooltip:" "},Link:{add:{tooltip:" ",control:{title:" ",href:"",open_in_new_tab:"   ",confirm:"",cancel:""}},edit:{tooltip:" ",control:{title:" ",href:"",open_in_new_tab:"   ",confirm:"",cancel:""}},unlink:{tooltip:" "},open:{tooltip:" "}},Image:{buttons:{insert_image:{tooltip:" ",external:"   ",upload:" "},remove_image:{tooltip:""},image_options:{tooltip:" "},display:{tooltip:"",inline:" ",block:" ",left:"",right:""}},control:{insert_by_url:{title:" ",placeholder:" ",confirm:"",cancel:"",invalid_url:"   "},upload_image:{title:" ",button:"     "},edit_image:{title:" ",confirm:"",cancel:"",form:{src:" ",alt:" ",width:"",height:""}}}},Iframe:{tooltip:" ",control:{title:" ",placeholder:"",confirm:"",cancel:""}},BulletList:{tooltip:" "},OrderedList:{tooltip:" "},TodoList:{tooltip:" "},TextAlign:{buttons:{align_left:{tooltip:"   "},align_center:{tooltip:"  "},align_right:{tooltip:"   "},align_justify:{tooltip:"  "}}},FontType:{tooltip:""},FontSize:{tooltip:" ",default:" "},TextColor:{tooltip:" "},TextHighlight:{tooltip:"  "},LineHeight:{tooltip:""},Table:{tooltip:"",buttons:{insert_table:" ",add_column_before:"  ",add_column_after:"  ",delete_column:" ",add_row_before:"  ",add_row_after:"  ",delete_row:" ",merge_cells:" ",split_cell:" ",delete_table:" "}},Indent:{buttons:{indent:{tooltip:" "},outdent:{tooltip:" "}}},FormatClear:{tooltip:" "},HorizontalRule:{tooltip:" "},History:{tooltip:{undo:"",redo:""}},Fullscreen:{tooltip:{fullscreen:" ",exit_fullscreen:"   "}},Print:{tooltip:""},Preview:{tooltip:" ",dialog:{title:" "}},SelectAll:{tooltip:" "},CodeView:{tooltip:" "}},characters:" "}},de:{editor:{extensions:{Bold:{tooltip:"Fett"},Underline:{tooltip:"Unterstrichen"},Italic:{tooltip:"Kursiv"},Strike:{tooltip:"Durchgestrichen"},Heading:{tooltip:"berschrift",buttons:{paragraph:"Absatz",heading:"berschrift"}},Blockquote:{tooltip:"Zitat"},CodeBlock:{tooltip:"Codeblock"},Link:{add:{tooltip:"Link hinzufgen",control:{title:"Link hinzufgen",href:"Link",open_in_new_tab:"ffnen Sie in einem neuen Tab",confirm:"Hinzufgen",cancel:"Abbrechen"}},edit:{tooltip:"Link bearbeiten",control:{title:"Link bearbeiten",href:"Link",open_in_new_tab:"ffnen Sie in einem neuen Tab",confirm:"Speichern",cancel:"Abbrechen"}},unlink:{tooltip:"Link entfernen"},open:{tooltip:"Link ffnen"}},Image:{buttons:{insert_image:{tooltip:"Bild einfgen",external:"Bild von URL einfgen",upload:"Bild hochladen"},remove_image:{tooltip:"Entfernen"},image_options:{tooltip:"Bildoptionen"},display:{tooltip:"Textumbruch",inline:"In der Zeile",block:"Text teilen",left:"Links",right:"Rechts"}},control:{insert_by_url:{title:"Bild einfgen",placeholder:"Bild URL",confirm:"Einfgen",cancel:"Abbrechen",invalid_url:"Diese URL hat ein ungltiges Format"},upload_image:{title:"Bild hochladen",button:"Whlen Sie ein Bild aus, oder ziehen Sie ein Bild auf dieses Feld"},edit_image:{title:"Bild Bearbeiten",confirm:"Speichern",cancel:"Abbrechen",form:{src:"Bild URL",alt:"Alternativer Text (angezeigt beim berfahren mit Maus)",width:"Breite",height:"Hhe"}}}},Iframe:{tooltip:"Video einfgen",control:{title:"Video einfgen",placeholder:"Link",confirm:"Einfgen",cancel:"Abbrechen"}},BulletList:{tooltip:"Aufzhlungsliste"},OrderedList:{tooltip:"Nummerierte Liste"},TodoList:{tooltip:"Erledigungsliste"},TextAlign:{buttons:{align_left:{tooltip:"Linksbndig"},align_center:{tooltip:"Zentriert"},align_right:{tooltip:"Rechtsbndig"},align_justify:{tooltip:"Blocksatz"}}},FontType:{tooltip:"Schriftfamilie"},FontSize:{tooltip:"Schriftgre",default:"standard"},TextColor:{tooltip:"Textfarbe"},TextHighlight:{tooltip:"Hervorhebungsfarbe"},LineHeight:{tooltip:"Zeilenabstand"},Table:{tooltip:"Tabelle",buttons:{insert_table:"Tabelle einfgen",add_column_before:"Spalte vorher einfgen",add_column_after:"Spalte nachher einfgen",delete_column:"Spalte lschen",add_row_before:"Zeile vorher einfgen",add_row_after:"Zeile nachher einfgen",delete_row:"Zeile lschen",merge_cells:"Zellen verbinden",split_cell:"Zellen aufteilen",delete_table:"Tabelle lschen"}},Indent:{buttons:{indent:{tooltip:"Einzug vergrern"},outdent:{tooltip:"Einzug verringern"}}},FormatClear:{tooltip:"Formattierung entfernen"},HorizontalRule:{tooltip:"Horizontale Linie"},History:{tooltip:{undo:"Rckgngig",redo:"Wiederholen"}},Fullscreen:{tooltip:{fullscreen:"Vollbild",exit_fullscreen:"Vollbild verlassen"}},Print:{tooltip:"Drucken"},Preview:{tooltip:"Vorschau",dialog:{title:"Vorschau"}},SelectAll:{tooltip:"Alles auswhlen"},CodeView:{tooltip:"Codeansicht"}},characters:"Zeichen"}},ko:{editor:{extensions:{Bold:{tooltip:""},Underline:{tooltip:""},Italic:{tooltip:""},Strike:{tooltip:""},Heading:{tooltip:" ",buttons:{paragraph:"",heading:""}},Blockquote:{tooltip:""},CodeBlock:{tooltip:""},Link:{add:{tooltip:" ",control:{title:" ",href:"URL",open_in_new_tab:"  ",confirm:"",cancel:""}},edit:{tooltip:" ",control:{title:" ",href:"URL",open_in_new_tab:"  ",confirm:"",cancel:""}},unlink:{tooltip:" "},open:{tooltip:" "}},Image:{buttons:{insert_image:{tooltip:" ",external:" URL .",upload:" "},remove_image:{tooltip:""},image_options:{tooltip:" "},display:{tooltip:"",inline:"",block:"",left:" ",right:" "}},control:{insert_by_url:{title:" ",placeholder:" URL",confirm:"",cancel:"",invalid_url:" URL "},upload_image:{title:" ",button:"    "},edit_image:{title:" ",confirm:"",cancel:"",form:{src:" URL",alt:" ",width:"",height:""}}}},Iframe:{tooltip:" ",control:{title:" ",placeholder:" URL",confirm:"",cancel:""}},BulletList:{tooltip:" "},OrderedList:{tooltip:" "},TodoList:{tooltip:" "},TextAlign:{buttons:{align_left:{tooltip:" "},align_center:{tooltip:" "},align_right:{tooltip:" "},align_justify:{tooltip:" "}}},FontType:{tooltip:""},FontSize:{tooltip:" ",default:""},TextColor:{tooltip:" "},TextHighlight:{tooltip:" "},LineHeight:{tooltip:" "},Table:{tooltip:"",buttons:{insert_table:" ",add_column_before:"  ",add_column_after:"  ",delete_column:" ",add_row_before:"  ",add_row_after:"  ",delete_row:" ",merge_cells:" ",split_cell:" ",delete_table:" "}},Indent:{buttons:{indent:{tooltip:" "},outdent:{tooltip:" "}}},FormatClear:{tooltip:" "},HorizontalRule:{tooltip:" "},History:{tooltip:{undo:"",redo:" "}},Fullscreen:{tooltip:{fullscreen:"",exit_fullscreen:" "}},Print:{tooltip:""},Preview:{tooltip:"",dialog:{title:""}},SelectAll:{tooltip:""},CodeView:{tooltip:" "}},characters:""}},es:{editor:{extensions:{Bold:{tooltip:"Negrita"},Underline:{tooltip:"Subrayado"},Italic:{tooltip:"Cursiva"},Strike:{tooltip:"Texto tachado"},Heading:{tooltip:"Encabezado",buttons:{paragraph:"Prrafo",heading:"Encabezado"}},Blockquote:{tooltip:"Bloque de cita"},CodeBlock:{tooltip:"Bloque de cdigo"},Link:{add:{tooltip:"Crear enlace",control:{title:"Crear enlace",href:"Href",open_in_new_tab:"Abrir en una pestaa nueva",confirm:"Crear",cancel:"Cancelar"}},edit:{tooltip:"Editar enlace",control:{title:"Editar enlace",href:"Href",open_in_new_tab:"Abrir en una pestaa nueva",confirm:"Actualizar",cancel:"Cancelar"}},unlink:{tooltip:"Desenlazar"},open:{tooltip:"Abrir enlace"}},Image:{buttons:{insert_image:{tooltip:"Insertar imagen",external:"Insertar imagen desde Url",upload:"Cargar imagen"},remove_image:{tooltip:"Eliminar"},image_options:{tooltip:"Opciones de imagen"},display:{tooltip:"Visualizacin",inline:"En lnea",block:"Bloque",left:"Flotar a la izquierda",right:"Flotar a la derecha"}},control:{insert_by_url:{title:"Insertar imagen",placeholder:"Url de la imagen",confirm:"Insertar",cancel:"Cancelar",invalid_url:"Por favor introduce una Url vlida"},upload_image:{title:"Cargar imagen",button:"Selecciona una imagen o arrstrala aqu"},edit_image:{title:"Editar imagen",confirm:"Actualizar",cancel:"Cancelar",form:{src:"Url de la imagen",alt:"Texto alternativo",width:"Ancho",height:"Alto"}}}},Iframe:{tooltip:"Insertar vdeo",control:{title:"Insertar vdeo",placeholder:"Href",confirm:"Insertar",cancel:"Cancelar"}},BulletList:{tooltip:"Lista desordenada"},OrderedList:{tooltip:"Lista ordenada"},TodoList:{tooltip:"Lista de tareas"},TextAlign:{buttons:{align_left:{tooltip:"Alinear a la izquierda"},align_center:{tooltip:"Centrar texto"},align_right:{tooltip:"Alinear a la derecha"},align_justify:{tooltip:"Texto justificado"}}},FontType:{tooltip:"Fuente"},FontSize:{tooltip:"Tamao de fuente",default:"por defecto"},TextColor:{tooltip:"Color de texto"},TextHighlight:{tooltip:"Resaltar texto"},LineHeight:{tooltip:"Altura de lnea"},Table:{tooltip:"Tabla",buttons:{insert_table:"Insertar tabla",add_column_before:"Aadir columna antes",add_column_after:"Aadir columna despus",delete_column:"Eliminar columna",add_row_before:"Aadir fila antes",add_row_after:"Aadir fila despus",delete_row:"Eliminar fila",merge_cells:"Fusionar celdas",split_cell:"Separar celda",delete_table:"Eliminar la tabla"}},Indent:{buttons:{indent:{tooltip:"Indentar"},outdent:{tooltip:"Desindentar"}}},FormatClear:{tooltip:"Borrar formato"},HorizontalRule:{tooltip:"Separador horizontal"},History:{tooltip:{undo:"Deshacer",redo:"Rehacer"}},Fullscreen:{tooltip:{fullscreen:"Pantalla completa",exit_fullscreen:"Salir de pantalla completa"}},Print:{tooltip:"Imprimir"},Preview:{tooltip:"Vista previa",dialog:{title:"Vista previa"}},SelectAll:{tooltip:"Seleccionar todo"},CodeView:{tooltip:"Vista de cdigo"}},characters:"Caracteres"}},fr:{editor:{extensions:{Bold:{tooltip:"Gras"},Underline:{tooltip:"Soulign"},Italic:{tooltip:"Italique"},Strike:{tooltip:"Barr"},Heading:{tooltip:"Titre",buttons:{paragraph:"Paragraphe",heading:"Titre"}},Blockquote:{tooltip:"Citation"},CodeBlock:{tooltip:"Bloc de code"},Link:{add:{tooltip:"Appliquer le lien",control:{title:"Appliquer le lien",href:"Cible du lien",open_in_new_tab:"Ouvrir dans un nouvel onglet",confirm:"Appliquer",cancel:"Annuler"}},edit:{tooltip:"Editer le lien",control:{title:"Editer le lien",href:"Cible du lien",open_in_new_tab:"Ouvrir dans un nouvel onglet",confirm:"Mettre  jour",cancel:"Annuler"}},unlink:{tooltip:"Supprimer le lien"},open:{tooltip:"Ouvrir le lien"}},Image:{buttons:{insert_image:{tooltip:"Insrer une image",external:"Insrer une image via un lien",upload:"Tlcharger une image"},remove_image:{tooltip:"Retirer"},image_options:{tooltip:"Options de l'image"},display:{tooltip:"Affichage",inline:"En ligne",block:"Rupture du texte",left:"Floter  gauche",right:"Floter  droite"}},control:{insert_by_url:{title:"Insrer une image",placeholder:"Lien de l'image",confirm:"Insrer",cancel:"Annuler",invalid_url:"Lien de l'image incorrect, merci de corriger"},upload_image:{title:"Tlcharger une image",button:"Choisir une image ou dposer celle-ci ici"},edit_image:{title:"Editer l'image",confirm:"Mettre  jour",cancel:"Annuler",form:{src:"Lien de l'image",alt:"Texte alternatif",width:"Largeur",height:"Hauteur"}}}},Iframe:{tooltip:"Insrer une video",control:{title:"Insrer une video",placeholder:"Lien",confirm:"Insrer",cancel:"Annuler"}},BulletList:{tooltip:"Liste  puces"},OrderedList:{tooltip:"Liste ordonne"},TodoList:{tooltip:"Liste de choses  faire"},TextAlign:{buttons:{align_left:{tooltip:"Aligner  gauche"},align_center:{tooltip:"Aigner au centre"},align_right:{tooltip:"Aligner  droite"},align_justify:{tooltip:"Justifier"}}},FontType:{tooltip:"Police de caractre"},FontSize:{tooltip:"Taille de la police",default:"Par dfaut"},TextColor:{tooltip:"Couleur du texte"},TextHighlight:{tooltip:"Texte surlign"},LineHeight:{tooltip:"Hauteur de ligne"},Table:{tooltip:"Tableau",buttons:{insert_table:"Insrer un tableau",add_column_before:"Ajouter une colonne avant",add_column_after:"Ajouter une colonne aprs",delete_column:"Supprimer une colonne",add_row_before:"Ajouter une ligne avant",add_row_after:"Ajouter une ligna aprs",delete_row:"Supprimer une ligne",merge_cells:"Fusionner les cellules",split_cell:"Diviser la cellule",delete_table:"Supprimer le tableau"}},Indent:{buttons:{indent:{tooltip:"Retrait positif"},outdent:{tooltip:"Retrait ngatif"}}},FormatClear:{tooltip:"Supprimer le formatage"},HorizontalRule:{tooltip:"Ligne horizontal"},History:{tooltip:{undo:"Annuler",redo:"Refaire"}},Fullscreen:{tooltip:{fullscreen:"Plein cran",exit_fullscreen:"Sortir du plein cran"}},Print:{tooltip:"Impression"},Preview:{tooltip:"Prvisualisation",dialog:{title:"Prvisualisation"}},SelectAll:{tooltip:"Tout slectionner"},CodeView:{tooltip:"Voir le code source"}},characters:"Caractres"}},pt_br:{editor:{extensions:{Bold:{tooltip:"Negrito"},Underline:{tooltip:"Sublinhado"},Italic:{tooltip:"Itlico"},Strike:{tooltip:"Riscado"},Heading:{tooltip:"Cabealho",buttons:{paragraph:"Pargrafo",heading:"Cabealho"}},Blockquote:{tooltip:"Bloco de citao"},CodeBlock:{tooltip:"Bloco de cdigo"},Link:{add:{tooltip:"Inserir Link",control:{title:"Inserir Link",href:"Link de Referncia",open_in_new_tab:"Abrir em nova aba",confirm:"Inserir",cancel:"Cancelar"}},edit:{tooltip:"Editar link",control:{title:"Editar Link",href:"Link de Referncia",open_in_new_tab:"Abrir em nova aba",confirm:"Alterar",cancel:"Cancelar"}},unlink:{tooltip:"Excluir"},open:{tooltip:"Abrir link"}},Image:{buttons:{insert_image:{tooltip:"Inserir imagem",external:"Inserir Imagem com Url",upload:"Enviar Imagem"},remove_image:{tooltip:"Remover"},image_options:{tooltip:"Opes da Imagem"},display:{tooltip:"Visualizao",inline:"Em Linha",block:"Quebra de Texto",left:"Para esquerda",right:"Para direita"}},control:{insert_by_url:{title:"Inserir imagem",placeholder:"Url da imagem",confirm:"Inserir",cancel:"Cancelar",invalid_url:"Por favor, entre com o link correto"},upload_image:{title:"Enviar imagem",button:"Escolha uma imagem ou arraste para c"},edit_image:{title:"Editar imagem",confirm:"Alterar",cancel:"Cancelar",form:{src:"Imagem Url",alt:"Texto alternativo",width:"Largura",height:"Altura"}}}},Iframe:{tooltip:"Inserir vdeo",control:{title:"Inserir vdeo",placeholder:"Link de Referncia",confirm:"Inserir",cancel:"Cancelar"}},BulletList:{tooltip:"Lista de Marcadores"},OrderedList:{tooltip:"Lista Enumerada"},TodoList:{tooltip:"Lista de afazeres"},TextAlign:{buttons:{align_left:{tooltip:"Alinhar a esquerda"},align_center:{tooltip:"Alinhar ao centro"},align_right:{tooltip:"Alinhar a direita"},align_justify:{tooltip:"Alinhamento justificado"}}},FontType:{tooltip:"Fonte"},FontSize:{tooltip:"Tamnaho da Fonte",default:"padro"},TextColor:{tooltip:"Cor do Texto"},TextHighlight:{tooltip:"Cor de destaque"},LineHeight:{tooltip:"Altura da Linha"},Table:{tooltip:"Tabela",buttons:{insert_table:"Inserir Tabela",add_column_before:"Adicionar coluna antes",add_column_after:"Adicionar coluna depois",delete_column:"Deletar coluna",add_row_before:"Adicionar linha antes",add_row_after:"Adicionar linha depois",delete_row:"Deletar linha",merge_cells:"Mesclar clulas",split_cell:"Dividir clula",delete_table:"Deletar tabela"}},Indent:{buttons:{indent:{tooltip:"Aumentar Recuo"},outdent:{tooltip:"Diminuir Recuo"}}},FormatClear:{tooltip:"Limpar formatao"},HorizontalRule:{tooltip:"Linha horizontal"},History:{tooltip:{undo:"Desafazer",redo:"Refazer"}},Fullscreen:{tooltip:{fullscreen:"Tela cheia",exit_fullscreen:"Fechar tela cheia"}},Print:{tooltip:"Imprimir"},Preview:{tooltip:"Pre visualizar",dialog:{title:"Pre visualizar"}},SelectAll:{tooltip:"Selecionar Todos"},CodeView:{tooltip:"Visualizao de Cdigo"}},characters:"Caracteres"}},nl:{editor:{extensions:{Bold:{tooltip:"Vet"},Underline:{tooltip:"Onderstrepen"},Italic:{tooltip:"Cursief"},Strike:{tooltip:"Doorhalen"},Heading:{tooltip:"Hoofdstuk",buttons:{paragraph:"Paragraaf",heading:"Hoofdstuk"}},Blockquote:{tooltip:"Citaat blokkeren"},CodeBlock:{tooltip:"Codeblok"},Link:{add:{tooltip:"Link toepassen",control:{title:"Link toepassen",href:"Link",open_in_new_tab:"Openen in nieuw tabblad",confirm:"Toepassen",cancel:"Annuleren"}},edit:{tooltip:"Link bewerken",control:{title:"Link bewerken",href:"Link",open_in_new_tab:"Openen in nieuw tabblad",confirm:"Bijwerken",cancel:"Annuleren"}},unlink:{tooltip:"Link verwijderen"},open:{tooltip:"Link openen"}},Image:{buttons:{insert_image:{tooltip:"Afbeelding invoegen",external:"Afbeelding invoegen via URL",upload:"Afbeelding uploaden"},remove_image:{tooltip:"Verwijderen"},image_options:{tooltip:"Afbeeldingsopties"},display:{tooltip:"Weergeven",inline:"In tekstregel",block:"Tekst afbreken",left:"Links uitlijnen",right:"Rechts uitlijnen"}},control:{insert_by_url:{title:"Afbeelding invoegen",placeholder:"URL van afbeelding",confirm:"Invoegen",cancel:"Annuleren",invalid_url:"Vul een geldige URL in"},upload_image:{title:"Afbeelding uploaden",button:"Kies een afbeelding of sleep het hier"},edit_image:{title:"Afbeelding bewerken",confirm:"Bijwerken",cancel:"Annuleren",form:{src:"Afbeelding URL",alt:"Alternatieve tekst",width:"Breedte",height:"Hoogte"}}}},Iframe:{tooltip:"Video invoegen",control:{title:"Video invoegen",placeholder:"Link",confirm:"Invoegen",cancel:"Annuleren"}},BulletList:{tooltip:"Opsommingslijst"},OrderedList:{tooltip:"Genummerde lijst"},TodoList:{tooltip:"Takenlijst"},TextAlign:{buttons:{align_left:{tooltip:"Links uitlijnen"},align_center:{tooltip:"Centreren"},align_right:{tooltip:"Rechts uitlijnen"},align_justify:{tooltip:"Tekst uitvullen"}}},FontType:{tooltip:"Lettertype"},FontSize:{tooltip:"Tekengrootte",default:"Standaard"},TextColor:{tooltip:"Tekstkleur"},TextHighlight:{tooltip:"Tekst markeren"},LineHeight:{tooltip:"Regelafstand"},Table:{tooltip:"Tabel",buttons:{insert_table:"Tabel invoegen",add_column_before:"Kolom links invoegen",add_column_after:"Kolom rechts invoegen",delete_column:"Kolom verwijderen",add_row_before:"Rij boven toevoegen",add_row_after:"Rij onder toevoegen",delete_row:"Rij verwijderen",merge_cells:"Cellen samenvoegen",split_cell:"Cellen splitsen",delete_table:"Cellen verwijderen"}},Indent:{buttons:{indent:{tooltip:"Inspringen"},outdent:{tooltip:"Uitspringen"}}},FormatClear:{tooltip:"Opmaak wissen"},HorizontalRule:{tooltip:"Horizontale regel"},History:{tooltip:{undo:"Ongedaan maken",redo:"Herhalen"}},Fullscreen:{tooltip:{fullscreen:"Volledig scherm",exit_fullscreen:"Volledig scherm sluiten"}},Print:{tooltip:"Afdrukken"},Preview:{tooltip:"Voorbeeld",dialog:{title:"Voorbeeld"}},SelectAll:{tooltip:"Selecteer alles"},CodeView:{tooltip:"Codeweergave"}},characters:"Karakters"}},he:{editor:{extensions:{Bold:{tooltip:""},Underline:{tooltip:" "},Italic:{tooltip:""},Strike:{tooltip:" "},Heading:{tooltip:"",buttons:{paragraph:"",heading:""}},Blockquote:{tooltip:""},CodeBlock:{tooltip:""},Link:{add:{tooltip:" ",control:{title:" ",href:"",open_in_new_tab:"  ",confirm:"",cancel:""}},edit:{tooltip:" ",control:{title:" ",href:"",open_in_new_tab:"  ",confirm:"",cancel:""}},unlink:{tooltip:" "},open:{tooltip:" "}},Image:{buttons:{insert_image:{tooltip:" ",external:"   ",upload:" "},remove_image:{tooltip:""},image_options:{tooltip:" "},display:{tooltip:"",inline:"",block:" ",left:" ",right:" "}},control:{insert_by_url:{title:" ",placeholder:" ",confirm:"",cancel:"",invalid_url:"   "},upload_image:{title:" ",button:"        "},edit_image:{title:" ",confirm:"",cancel:"",form:{src:" ",alt:" ",width:"",height:""}}}},Iframe:{tooltip:" ",control:{title:" ",placeholder:"",confirm:"",cancel:""}},BulletList:{tooltip:""},OrderedList:{tooltip:""},TodoList:{tooltip:" "},TextAlign:{buttons:{align_left:{tooltip:" "},align_center:{tooltip:" "},align_right:{tooltip:" "},align_justify:{tooltip:"  "}}},FontType:{tooltip:""},FontSize:{tooltip:" ",default:" "},TextColor:{tooltip:" "},TextHighlight:{tooltip:"  "},LineHeight:{tooltip:" "},Table:{tooltip:"",buttons:{insert_table:" ",add_column_before:"  ",add_column_after:"  ",delete_column:" ",add_row_before:"  ",add_row_after:"  ",delete_row:" ",merge_cells:" ",split_cell:" ",delete_table:" "}},Indent:{buttons:{indent:{tooltip:" "},outdent:{tooltip:" "}}},FormatClear:{tooltip:" "},HorizontalRule:{tooltip:" "},History:{tooltip:{undo:"",redo:""}},Fullscreen:{tooltip:{fullscreen:" ",exit_fullscreen:"  "}},Print:{tooltip:""},Preview:{tooltip:" ",dialog:{title:" "}},SelectAll:{tooltip:" "},CodeView:{tooltip:" "}},characters:""}}},km={get defaultLanguage(){return"en"},get supportedLanguages(){return Object.keys(wm)},loadLanguage:function(e){return wm[e]},isLangSupported:function(e){return this.supportedLanguages.includes(e)},buildI18nHandler:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"en";this.isLangSupported(t)?e=t:(bm.warn("Can't find the current language \"".concat(t,'", Using language "').concat("en",'" by default. Welcome contribution to https://github.com/Leecason/element-tiptap')),e="en");var n=this.loadLanguage(e);return function(e){return e.split(".").reduce((function(e,t){return e[t]}),n)}}},xm=function(e,t,n){if(lf(e),void 0===t)return e;switch(n){case 0:return function(){return e.call(t)};case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,o){return e.call(t,n,r,o)}}return function(){return e.apply(t,arguments)}},Sm=[].push,Cm=function(e){var t=1==e,n=2==e,r=3==e,o=4==e,i=6==e,s=5==e||i;return function(a,l,c,u){for(var d,h,p=xp(a),f=nh(p),m=xm(l,c,3),g=Yh(f.length),v=0,y=u||Np,b=t?y(a,g):n?y(a,0):void 0;g>v;v++)if((s||v in f)&&(h=m(d=f[v],v,p),e))if(t)b[v]=h;else if(h)switch(e){case 3:return!0;case 5:return d;case 6:return v;case 2:Sm.call(b,d)}else if(o)return!1;return i?-1:r||o?o:b}},_m={forEach:Cm(0),map:Cm(1),filter:Cm(2),some:Cm(3),every:Cm(4),find:Cm(5),findIndex:Cm(6)},Om=_m.find,Mm=!0,Em=of("find");"find"in[]&&Array(1).find((function(){Mm=!1})),wp({target:"Array",proto:!0,forced:Mm||!Em},{find:function(e){return Om(this,e,arguments.length>1?arguments[1]:void 0)}}),ef("find");var Tm=vh.f,Am=Function.prototype,Nm=Am.toString,Rm=/^\s*function ([^ (]*)/;Kd&&!("name"in Am)&&Tm(Am,"name",{configurable:!0,get:function(){try{return Nm.call(this).match(Rm)[1]}catch(e){return""}}});var Dm=Object.assign,Im=Object.defineProperty,zm=!Dm||Ud((function(){if(Kd&&1!==Dm({b:1},Dm(Im({},"a",{enumerable:!0,get:function(){Im(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol();return e[n]=7,"abcdefghijklmnopqrst".split("").forEach((function(e){t[e]=e})),7!=Dm({},e)[n]||"abcdefghijklmnopqrst"!=Hp(Dm({},t)).join("")}))?function(e,t){for(var n=xp(e),r=arguments.length,o=1,i=cp.f,s=Zd.f;r>o;)for(var a,l=nh(arguments[o++]),c=i?Hp(l).concat(i(l)):Hp(l),u=c.length,d=0;u>d;)a=c[d++],Kd&&!s.call(l,a)||(n[a]=l[a]);return n}:Dm;function Pm(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function $m(e){return function(e){if(Array.isArray(e))return Pm(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Pm(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Pm(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fm(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Bm(e,t){return(Bm=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function jm(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Bm(e,t)}function Lm(e){return(Lm=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Vm(e){return(Vm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qm(e,t){return!t||"object"!==Vm(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Hm(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Lm(e);if(t){var o=Lm(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return qm(this,n)}}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function Wm(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s}function Jm(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{l(r.next(e))}catch(e){i(e)}}function a(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))}
/**
  * vue-class-component v7.2.3
  * (c) 2015-present Evan You
  * @license MIT
  */function Um(e){return(Um="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Km(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Gm(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Xm(){return"undefined"!=typeof Reflect&&Reflect.defineMetadata&&Reflect.getOwnMetadataKeys}function Zm(e,t){Ym(e,t),Object.getOwnPropertyNames(t.prototype).forEach((function(n){Ym(e.prototype,t.prototype,n)})),Object.getOwnPropertyNames(t).forEach((function(n){Ym(e,t,n)}))}function Ym(e,t,n){(n?Reflect.getOwnMetadataKeys(t,n):Reflect.getOwnMetadataKeys(t)).forEach((function(r){var o=n?Reflect.getOwnMetadata(r,t,n):Reflect.getOwnMetadata(r,t);n?Reflect.defineMetadata(r,o,e,n):Reflect.defineMetadata(r,o,e)}))}wp({target:"Object",stat:!0,forced:Object.assign!==zm},{assign:zm});var Qm={__proto__:[]}instanceof Array;function eg(e){return function(t,n,r){var o="function"==typeof t?t:t.constructor;o.__decorators__||(o.__decorators__=[]),"number"!=typeof r&&(r=void 0),o.__decorators__.push((function(t){return e(t,n,r)}))}}function tg(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r["default"].extend({mixins:t})}function ng(e,t){var n=t.prototype._init;t.prototype._init=function(){var t=this,n=Object.getOwnPropertyNames(e);if(e.$options.props)for(var r in e.$options.props)e.hasOwnProperty(r)||n.push(r);n.forEach((function(n){"_"!==n.charAt(0)&&Object.defineProperty(t,n,{get:function(){return e[n]},set:function(t){e[n]=t},configurable:!0})}))};var r=new t;t.prototype._init=n;var o={};return Object.keys(r).forEach((function(e){void 0!==r[e]&&(o[e]=r[e])})),o}var rg=["data","beforeCreate","created","beforeMount","mounted","beforeDestroy","destroyed","beforeUpdate","updated","activated","deactivated","render","errorCaptured","serverPrefetch"];function og(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.name=t.name||e._componentTag||e.name;var n=e.prototype;Object.getOwnPropertyNames(n).forEach((function(e){if("constructor"!==e)if(rg.indexOf(e)>-1)t[e]=n[e];else{var r=Object.getOwnPropertyDescriptor(n,e);void 0!==r.value?"function"==typeof r.value?(t.methods||(t.methods={}))[e]=r.value:(t.mixins||(t.mixins=[])).push({data:function(){return Km({},e,r.value)}}):(r.get||r.set)&&((t.computed||(t.computed={}))[e]={get:r.get,set:r.set})}})),(t.mixins||(t.mixins=[])).push({data:function(){return ng(this,e)}});var o=e.__decorators__;o&&(o.forEach((function(e){return e(t)})),delete e.__decorators__);var i=Object.getPrototypeOf(e.prototype),s=i instanceof r["default"]?i.constructor:r["default"],a=s.extend(t);return sg(a,e,s),Xm()&&Zm(a,e),a}var ig={prototype:!0,arguments:!0,callee:!0,caller:!0};function sg(e,t,n){Object.getOwnPropertyNames(t).forEach((function(r){if(!ig[r]){var o=Object.getOwnPropertyDescriptor(e,r);if(!o||o.configurable){var i=Object.getOwnPropertyDescriptor(t,r);if(!Qm){if("cid"===r)return;var s=Object.getOwnPropertyDescriptor(n,r);if(!function(e){var t=Um(e);return null==e||"object"!==t&&"function"!==t}(i.value)&&s&&s.value===i.value)return}Object.defineProperty(e,r,i)}}}))}function ag(e){return"function"==typeof e?og(e):function(t){return og(t,e)}}function lg(e){return eg((function(t,n){void 0===t.inject&&(t.inject={}),Array.isArray(t.inject)||(t.inject[n]=e||n)}))}ag.registerHooks=function(e){rg.push.apply(rg,Gm(e))};var cg="undefined"!=typeof Reflect&&void 0!==Reflect.getMetadata;function ug(e,t,n){if(cg&&!Array.isArray(e)&&"function"!=typeof e&&void 0===e.type){var r=Reflect.getMetadata("design:type",t,n);r!==Object&&(e.type=r)}}function dg(e){return void 0===e&&(e={}),function(t,n){ug(e,t,n),eg((function(t,n){(t.props||(t.props={}))[n]=e}))(t,n)}}function hg(e,t){void 0===t&&(t={});var n=t.deep,r=void 0!==n&&n,o=t.immediate,i=void 0!==o&&o;return eg((function(t,n){"object"!=typeof t.watch&&(t.watch=Object.create(null));var o=t.watch;"object"!=typeof o[e]||Array.isArray(o[e])?void 0===o[e]&&(o[e]=[]):o[e]=[o[e]],o[e].push({handler:n,deep:r,immediate:i})}))}var pg=/\B([A-Z])/g;function fg(e){return function(t,n,r){var o=n.replace(pg,"-$1").toLowerCase(),i=r.value;r.value=function(){for(var t=this,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var s=function(r){var i=e||o;void 0===r?0===n.length?t.$emit(i):1===n.length?t.$emit(i,n[0]):t.$emit.apply(t,[i].concat(n)):0===n.length?t.$emit(i,r):1===n.length?t.$emit(i,r,n[0]):t.$emit.apply(t,[i,r].concat(n))},a=i.apply(this,n);return mg(a)?a.then((function(e){s(e)})):s(a),a}}}function mg(e){return e instanceof Promise||e&&"function"==typeof e.then}var gg=function(e){jm(n,fl);var t=Hm(n);function n(){return Jf(this,n),t.apply(this,arguments)}return Kf(n,[{key:"name",get:function(){return"content_attributes"}},{key:"defaultOptions",get:function(){return{spellcheck:!0}}},{key:"plugins",get:function(){return[new tn({props:{attributes:Object.assign({},this.options)}})]}}]),n}(),vg=Fp("slice"),yg=of("slice",{ACCESSORS:!0,0:0,1:2}),bg=Tp("species"),wg=[].slice,kg=Math.max;wp({target:"Array",proto:!0,forced:!vg||!yg},{slice:function(e,t){var n,r,o,i=oh(this),s=Yh(i.length),a=tp(e,s),l=tp(void 0===t?s:t,s);if(kp(i)&&("function"!=typeof(n=i.constructor)||n!==Array&&!kp(n.prototype)?ih(n)&&null===(n=n[bg])&&(n=void 0):n=void 0,n===Array||void 0===n))return wg.call(i,a,l);for(r=new(void 0===n?Array:n)(kg(l-a,0)),o=0;a<l;a++,o++)a in i&&Sp(r,o,i[a]);return r.length=o,r}});var xg="\t\n\v\f\r \u2028\u2029\ufeff",Sg="["+xg+"]",Cg=RegExp("^"+Sg+Sg+"*"),_g=RegExp(Sg+Sg+"*$"),Og=function(e){return function(t){var n=String(rh(t));return 1&e&&(n=n.replace(Cg,"")),2&e&&(n=n.replace(_g,"")),n}},Mg={start:Og(1),end:Og(2),trim:Og(3)},Eg=lp.f,Tg=fh.f,Ag=vh.f,Ng=Mg.trim,Rg=Jd.Number,Dg=Rg.prototype,Ig="Number"==eh(Zp(Dg)),zg=function(e){var t,n,r,o,i,s,a,l,c=sh(e,!1);if("string"==typeof c&&c.length>2)if(43===(t=(c=Ng(c)).charCodeAt(0))||45===t){if(88===(n=c.charCodeAt(2))||120===n)return NaN}else if(48===t){switch(c.charCodeAt(1)){case 66:case 98:r=2,o=49;break;case 79:case 111:r=8,o=55;break;default:return+c}for(s=(i=c.slice(2)).length,a=0;a<s;a++)if((l=i.charCodeAt(a))<48||l>o)return NaN;return parseInt(i,r)}return+c};if(yp("Number",!Rg(" 0o1")||!Rg("0b1")||Rg("+0x1"))){for(var Pg,$g=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof $g&&(Ig?Ud((function(){Dg.valueOf.call(n)})):"Number"!=eh(n))?Xf(new Rg(zg(t)),n,$g):zg(t)},Fg=Kd?Eg(Rg):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),Bg=0;Fg.length>Bg;Bg++)lh(Rg,Pg=Fg[Bg])&&!lh($g,Pg)&&Ag($g,Pg,Tg(Rg,Pg));$g.prototype=Dg,Dg.constructor=$g,Hh(Jd,"Number",$g)}wp({target:"Number",stat:!0},{isNaN:function(e){return e!=e}});var jg={};jg[Tp("toStringTag")]="z";var Lg="[object z]"===String(jg),Vg=Tp("toStringTag"),qg="Arguments"==eh(function(){return arguments}()),Hg=Lg?eh:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),Vg))?n:qg?eh(t):"Object"==(r=eh(t))&&"function"==typeof t.callee?"Arguments":r},Wg=Lg?{}.toString:function(){return"[object "+Hg(this)+"]"};Lg||Hh(Object.prototype,"toString",Wg,{unsafe:!0});var Jg=Jd.Promise,Ug=function(e,t,n){for(var r in t)Hh(e,r,t[r],n);return e},Kg=vh.f,Gg=Tp("toStringTag"),Xg=function(e,t,n){e&&!lh(e=n?e:e.prototype,Gg)&&Kg(e,Gg,{configurable:!0,value:t})},Zg=function(e,t,n){if(!(e instanceof t))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return e},Yg={},Qg=Tp("iterator"),ev=Array.prototype,tv=function(e){return void 0!==e&&(Yg.Array===e||ev[Qg]===e)},nv=Tp("iterator"),rv=function(e){if(null!=e)return e[nv]||e["@@iterator"]||Yg[Hg(e)]},ov=function(e,t,n,r){try{return r?t(mh(n)[0],n[1]):t(n)}catch(t){var o=e.return;throw void 0!==o&&mh(o.call(e)),t}},iv=qd((function(e){var t=function(e,t){this.stopped=e,this.result=t};(e.exports=function(e,n,r,o,i){var s,a,l,c,u,d,h,p=xm(n,r,o?2:1);if(i)s=e;else{if("function"!=typeof(a=rv(e)))throw TypeError("Target is not iterable");if(tv(a)){for(l=0,c=Yh(e.length);c>l;l++)if((u=o?p(mh(h=e[l])[0],h[1]):p(e[l]))&&u instanceof t)return u;return new t(!1)}s=a.call(e)}for(d=s.next;!(h=d.call(s)).done;)if("object"==typeof(u=ov(s,p,h.value,o))&&u&&u instanceof t)return u;return new t(!1)}).stop=function(e){return new t(!0,e)}})),sv=Tp("iterator"),av=!1;try{var lv=0,cv={next:function(){return{done:!!lv++}},return:function(){av=!0}};cv[sv]=function(){return this},Array.from(cv,(function(){throw 2}))}catch(UO){}var uv,dv,hv,pv=function(e,t){if(!t&&!av)return!1;var n=!1;try{var r={};r[sv]=function(){return{next:function(){return{done:n=!0}}}},e(r)}catch(e){}return n},fv=/(iphone|ipod|ipad).*applewebkit/i.test(Rp),mv=Jd.location,gv=Jd.setImmediate,vv=Jd.clearImmediate,yv=Jd.process,bv=Jd.MessageChannel,wv=Jd.Dispatch,kv=0,xv={},Sv=function(e){if(xv.hasOwnProperty(e)){var t=xv[e];delete xv[e],t()}},Cv=function(e){return function(){Sv(e)}},_v=function(e){Sv(e.data)},Ov=function(e){Jd.postMessage(e+"",mv.protocol+"//"+mv.host)};gv&&vv||(gv=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return xv[++kv]=function(){("function"==typeof e?e:Function(e)).apply(void 0,t)},uv(kv),kv},vv=function(e){delete xv[e]},"process"==eh(yv)?uv=function(e){yv.nextTick(Cv(e))}:wv&&wv.now?uv=function(e){wv.now(Cv(e))}:bv&&!fv?(hv=(dv=new bv).port2,dv.port1.onmessage=_v,uv=xm(hv.postMessage,hv,1)):!Jd.addEventListener||"function"!=typeof postMessage||Jd.importScripts||Ud(Ov)||"file:"===mv.protocol?uv="onreadystatechange"in dh("script")?function(e){Jp.appendChild(dh("script")).onreadystatechange=function(){Jp.removeChild(this),Sv(e)}}:function(e){setTimeout(Cv(e),0)}:(uv=Ov,Jd.addEventListener("message",_v,!1)));var Mv,Ev,Tv,Av,Nv,Rv,Dv,Iv,zv={set:gv,clear:vv},Pv=fh.f,$v=zv.set,Fv=Jd.MutationObserver||Jd.WebKitMutationObserver,Bv=Jd.process,jv=Jd.Promise,Lv="process"==eh(Bv),Vv=Pv(Jd,"queueMicrotask"),qv=Vv&&Vv.value;qv||(Mv=function(){var e,t;for(Lv&&(e=Bv.domain)&&e.exit();Ev;){t=Ev.fn,Ev=Ev.next;try{t()}catch(e){throw Ev?Av():Tv=void 0,e}}Tv=void 0,e&&e.enter()},Lv?Av=function(){Bv.nextTick(Mv)}:Fv&&!fv?(Nv=!0,Rv=document.createTextNode(""),new Fv(Mv).observe(Rv,{characterData:!0}),Av=function(){Rv.data=Nv=!Nv}):jv&&jv.resolve?(Dv=jv.resolve(void 0),Iv=Dv.then,Av=function(){Iv.call(Dv,Mv)}):Av=function(){$v.call(Jd,Mv)});var Hv,Wv,Jv,Uv,Kv=qv||function(e){var t={fn:e,next:void 0};Tv&&(Tv.next=t),Ev||(Ev=t,Av()),Tv=t},Gv=function(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r})),this.resolve=lf(t),this.reject=lf(n)},Xv={f:function(e){return new Gv(e)}},Zv=function(e,t){if(mh(e),ih(t)&&t.constructor===e)return t;var n=Xv.f(e);return(0,n.resolve)(t),n.promise},Yv=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}},Qv=zv.set,ey=Tp("species"),ty="Promise",ny=qh.get,ry=qh.set,oy=qh.getterFor(ty),iy=Jg,sy=Jd.TypeError,ay=Jd.document,ly=Jd.process,cy=Uh("fetch"),uy=Xv.f,dy=uy,hy="process"==eh(ly),py=!!(ay&&ay.createEvent&&Jd.dispatchEvent),fy=yp(ty,(function(){if(_h(iy)===String(iy)){if(66===Pp)return!0;if(!hy&&"function"!=typeof PromiseRejectionEvent)return!0}if(Pp>=51&&/native code/.test(iy))return!1;var e=iy.resolve(1),t=function(e){e((function(){}),(function(){}))};return(e.constructor={})[ey]=t,!(e.then((function(){}))instanceof t)})),my=fy||!pv((function(e){iy.all(e).catch((function(){}))})),gy=function(e){var t;return!(!ih(e)||"function"!=typeof(t=e.then))&&t},vy=function(e,t,n){if(!t.notified){t.notified=!0;var r=t.reactions;Kv((function(){for(var o=t.value,i=1==t.state,s=0;r.length>s;){var a,l,c,u=r[s++],d=i?u.ok:u.fail,h=u.resolve,p=u.reject,f=u.domain;try{d?(i||(2===t.rejection&&ky(e,t),t.rejection=1),!0===d?a=o:(f&&f.enter(),a=d(o),f&&(f.exit(),c=!0)),a===u.promise?p(sy("Promise-chain cycle")):(l=gy(a))?l.call(a,h,p):h(a)):p(o)}catch(e){f&&!c&&f.exit(),p(e)}}t.reactions=[],t.notified=!1,n&&!t.rejection&&by(e,t)}))}},yy=function(e,t,n){var r,o;py?((r=ay.createEvent("Event")).promise=t,r.reason=n,r.initEvent(e,!1,!0),Jd.dispatchEvent(r)):r={promise:t,reason:n},(o=Jd["on"+e])?o(r):"unhandledrejection"===e&&function(e,t){var n=Jd.console;n&&n.error&&(1===arguments.length?n.error(e):n.error(e,t))}("Unhandled promise rejection",n)},by=function(e,t){Qv.call(Jd,(function(){var n,r=t.value;if(wy(t)&&(n=Yv((function(){hy?ly.emit("unhandledRejection",r,e):yy("unhandledrejection",e,r)})),t.rejection=hy||wy(t)?2:1,n.error))throw n.value}))},wy=function(e){return 1!==e.rejection&&!e.parent},ky=function(e,t){Qv.call(Jd,(function(){hy?ly.emit("rejectionHandled",e):yy("rejectionhandled",e,t.value)}))},xy=function(e,t,n,r){return function(o){e(t,n,o,r)}},Sy=function(e,t,n,r){t.done||(t.done=!0,r&&(t=r),t.value=n,t.state=2,vy(e,t,!0))},Cy=function(e,t,n,r){if(!t.done){t.done=!0,r&&(t=r);try{if(e===n)throw sy("Promise can't be resolved itself");var o=gy(n);o?Kv((function(){var r={done:!1};try{o.call(n,xy(Cy,e,r,t),xy(Sy,e,r,t))}catch(n){Sy(e,r,n,t)}})):(t.value=n,t.state=1,vy(e,t,!1))}catch(n){Sy(e,{done:!1},n,t)}}};function _y(e){return Number.isNaN(e)}function Oy(e,t,n){return e<t?t:e>n?n:e}function My(e){var t=new FileReader;return new Promise((function(n,r){t.onload=function(e){return n(e.target.result)},t.onerror=r,t.readAsDataURL(e)}))}fy&&(iy=function(e){Zg(this,iy,ty),lf(e),Hv.call(this);var t=ny(this);try{e(xy(Cy,this,t),xy(Sy,this,t))}catch(e){Sy(this,t,e)}},(Hv=function(e){ry(this,{type:ty,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=Ug(iy.prototype,{then:function(e,t){var n=oy(this),r=uy($f(this,iy));return r.ok="function"!=typeof e||e,r.fail="function"==typeof t&&t,r.domain=hy?ly.domain:void 0,n.parent=!0,n.reactions.push(r),0!=n.state&&vy(this,n,!1),r.promise},catch:function(e){return this.then(void 0,e)}}),Wv=function(){var e=new Hv,t=ny(e);this.promise=e,this.resolve=xy(Cy,e,t),this.reject=xy(Sy,e,t)},Xv.f=uy=function(e){return e===iy||e===Jv?new Wv(e):dy(e)},"function"==typeof Jg&&(Uv=Jg.prototype.then,Hh(Jg.prototype,"then",(function(e,t){var n=this;return new iy((function(e,t){Uv.call(n,e,t)})).then(e,t)}),{unsafe:!0}),"function"==typeof cy&&wp({global:!0,enumerable:!0,forced:!0},{fetch:function(e){return Zv(iy,cy.apply(Jd,arguments))}}))),wp({global:!0,wrap:!0,forced:fy},{Promise:iy}),Xg(iy,ty,!1),Yf(ty),Jv=Uh(ty),wp({target:ty,stat:!0,forced:fy},{reject:function(e){var t=uy(this);return t.reject.call(void 0,e),t.promise}}),wp({target:ty,stat:!0,forced:fy},{resolve:function(e){return Zv(this,e)}}),wp({target:ty,stat:!0,forced:my},{all:function(e){var t=this,n=uy(t),r=n.resolve,o=n.reject,i=Yv((function(){var n=lf(t.resolve),i=[],s=0,a=1;iv(e,(function(e){var l=s++,c=!1;i.push(void 0),a++,n.call(t,e).then((function(e){c||(c=!0,i[l]=e,--a||r(i))}),o)})),--a||r(i)}));return i.error&&o(i.value),n.promise},race:function(e){var t=this,n=uy(t),r=n.reject,o=Yv((function(){var o=lf(t.resolve);iv(e,(function(e){o.call(t,e).then(n.resolve,r)}))}));return o.error&&r(o.value),n.promise}});var Ey=function(e){var t=Object.create(null);return function(n){return t[n]||(t[n]=e(n))}}((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})),Ty=function(e){jm(n,r["default"]);var t=Hm(n);function n(){return Jf(this,n),t.apply(this,arguments)}return Kf(n,[{key:"elTiptapEditorStyle",get:function(){return[this.editorSizeStyle]}},{key:"editorSizeStyle",get:function(){var e=this.width,t=this.height;return{width:e=_y(Number(e))?e:"".concat(e).concat("px"),height:t=_y(Number(t))?t:"".concat(t).concat("px")}}}]),n}();Wm([dg({type:[String,Number],default:void 0})],Ty.prototype,"width",void 0),Wm([dg({type:[String,Number],default:void 0})],Ty.prototype,"height",void 0),Wm([dg({type:Boolean,default:!0})],Ty.prototype,"showMenubar",void 0),Wm([dg({type:Boolean,default:!0})],Ty.prototype,"charCounterCount",void 0);var Ay=Ty=Wm([ag],Ty),Ny=function(e){jm(n,r["default"]);var t=Hm(n);function n(){var e;return Jf(this,n),(e=t.apply(this,arguments)).cmInstance=null,e.isCodeViewMode=!1,e}return Kf(n,[{key:"onCodeViewModeChange",value:function(e){var t=this;if(e)this.$nextTick((function(){return!t.cmInstance&&t.initCodemirror()}));else if(this.cmInstance){var n=this.cmInstance.getValue();this.editor.setContent(n,!0),this.destroyCodemirror()}}},{key:"initCodemirror",value:function(){var e=this.extensions.find((function(e){return"code_view"===e.name}));if(e){var t=e.options,n=t.codemirror,r=t.codemirrorOptions;if(n){var o=Object.assign(Object.assign({},r),{readOnly:this.readonly,spellcheck:this.spellcheckEnabled});this.cmInstance=n.fromTextArea(this.$refs.cmTextArea,o),this.cmInstance.setValue(this.editor.getHTML()),this.formatCode()}}}},{key:"destroyCodemirror",value:function(){var e=this.cmInstance.doc.cm.getWrapperElement();e&&e.remove&&e.remove(),this.cmInstance=null}},{key:"formatCode",value:function(){var e=this.cmInstance;e.execCommand("selectAll");var t={from:e.getCursor(!0),to:e.getCursor(!1)};e.autoFormatRange(t.from,t.to),e.setCursor(0)}}]),n}();Wm([hg("isCodeViewMode")],Ny.prototype,"onCodeViewModeChange",null);var Ry=Ny=Wm([ag],Ny),Dy=function(e){jm(n,r["default"]);var t=Hm(n);function n(){return Jf(this,n),t.apply(this,arguments)}return Kf(n,[{key:"generateCommandButtonComponentSpecs",value:function(e){var t=this;return this.editor.extensions.extensions.reduce((function(n,r){if(!1===r.options.menubar)return n;if("function"!=typeof r.menuBtnView)return n;var o=r.menuBtnView(Object.assign(Object.assign({},e),{editor:t.editor,t:t.et.t}));return Array.isArray(o)?[].concat($m(n),$m(o)):[].concat($m(n),[o])}),[])}}]),n}();function Iy(e,t,n,r,o,i,s,a,l,c){"boolean"!=typeof s&&(l=a,a=s,s=!1);const u="function"==typeof n?n.options:n;let d;if(e&&e.render&&(u.render=e.render,u.staticRenderFns=e.staticRenderFns,u._compiled=!0,o&&(u.functional=!0)),r&&(u._scopeId=r),i?(d=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),t&&t.call(this,l(e)),e&&e._registeredComponents&&e._registeredComponents.add(i)},u._ssrRegister=d):t&&(d=s?function(e){t.call(this,c(e,this.$root.$options.shadowRoot))}:function(e){t.call(this,a(e))}),d)if(u.functional){const e=u.render;u.render=function(t,n){return d.call(n),e(t,n)}}else{const e=u.beforeCreate;u.beforeCreate=e?[].concat(e,d):[d]}return n}Wm([dg({type:Cl,required:!0})],Dy.prototype,"editor",void 0),Wm([lg()],Dy.prototype,"et",void 0);const zy=Iy({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("editor-menu-bar",{attrs:{editor:e.editor},scopedSlots:e._u([{key:"default",fn:function(t){return[e._t("default",[n("div",{staticClass:"el-tiptap-editor__menu-bar"},e._l(e.generateCommandButtonComponentSpecs(t),(function(t,r){return n(t.component,e._g(e._b({key:"command-button"+r,tag:"component",attrs:{"enable-tooltip":e.et.tooltip,readonly:e.et.isCodeViewMode}},"component",t.componentProps,!1),t.componentEvents))})),1)],null,t)]}}],null,!0)})},staticRenderFns:[]},void 0,Dy=Wm([ag({components:{EditorMenuBar:El}})],Dy),void 0,!1,void 0,!1,void 0,void 0,void 0);var Py=_m.some,$y=uf("some"),Fy=of("some");wp({target:"Array",proto:!0,forced:!$y||!Fy},{some:function(e){return Py(this,e,arguments.length>1?arguments[1]:void 0)}});var By=/"/g,jy=function(e,t,n,r){var o=String(rh(e)),i="<"+t;return""!==n&&(i+=" "+n+'="'+String(r).replace(By,"&quot;")+'"'),i+">"+o+"</"+t+">"},Ly=function(e){return Ud((function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3}))};wp({target:"String",proto:!0,forced:Ly("link")},{link:function(e){return jy(this,"a","href",e)}});for(var Vy="-_",qy=36;qy--;)Vy+=qy.toString(36);for(qy=36;qy---10;)Vy+=qy.toString(36).toUpperCase();let Hy={};function Wy(e,t){t?t.constructor.super.util.warn(e,t):console.error(e)}var Jy={name:"fa-icon",props:{name:{type:String,validator(e){return!e||e in Hy||(Wy(`Invalid prop: prop "name" is referring to an unregistered icon "${e}".\nPlease make sure you have imported this icon before using it.`,this),!1)}},title:String,scale:[Number,String],spin:Boolean,inverse:Boolean,pulse:Boolean,flip:{validator:e=>"horizontal"===e||"vertical"===e||"both"===e},label:String,tabindex:[Number,String]},data:()=>({id:Ky("va-"),x:!1,y:!1,childrenWidth:0,childrenHeight:0,outerScale:1}),computed:{normalizedScale(){let e=this.scale;return e=void 0===e?1:Number(e),isNaN(e)||e<=0?(Wy('Invalid prop: prop "scale" should be a number over 0.',this),this.outerScale):e*this.outerScale},klass(){let e={"fa-icon":!0,"fa-spin":this.spin,"fa-flip-horizontal":"horizontal"===this.flip,"fa-flip-vertical":"vertical"===this.flip,"fa-flip-both":"both"===this.flip,"fa-inverse":this.inverse,"fa-pulse":this.pulse};return this.classes&&Object.keys(this.classes).forEach((t=>{this.classes[t]&&(e[t]=!0)})),e},icon(){return this.name?Hy[this.name]:null},box(){return this.icon?`0 0 ${this.icon.width} ${this.icon.height}`:`0 0 ${this.width} ${this.height}`},ratio(){if(!this.icon)return 1;let{width:e,height:t}=this.icon;return Math.max(e,t)/16},width(){return this.childrenWidth||this.icon&&this.icon.width/this.ratio*this.normalizedScale||0},height(){return this.childrenHeight||this.icon&&this.icon.height/this.ratio*this.normalizedScale||0},style(){return 1!==this.normalizedScale&&{fontSize:this.normalizedScale+"em"}},raw(){if(!this.icon||!this.icon.raw)return null;let e=this.icon.raw,t={};return e=e.replace(/\s(?:xml:)?id=(["']?)([^"')\s]+)\1/g,((e,n,r)=>{let o=Ky("vat-");return t[r]=o,` id="${o}"`})),e=e.replace(/#(?:([^'")\s]+)|xpointer\(id\((['"]?)([^')]+)\2\)\))/g,((e,n,r,o)=>{let i=n||o;return i&&t[i]?"#"+t[i]:e})),e},focusable(){let{tabindex:e}=this;return null==e?"false":("string"==typeof e?parseInt(e,10):e)>=0?null:"false"}},mounted(){this.updateStack()},updated(){this.updateStack()},methods:{updateStack(){if(!this.name&&null!==this.name&&0===this.$children.length)return void Wy('Invalid prop: prop "name" is required.',this);if(this.icon)return;let e=0,t=0;this.$children.forEach((n=>{n.outerScale=this.normalizedScale,e=Math.max(e,n.width),t=Math.max(t,n.height)})),this.childrenWidth=e,this.childrenHeight=t,this.$children.forEach((n=>{n.x=(e-n.width)/2,n.y=(t-n.height)/2}))}},render(e){if(null===this.name)return e();let t={class:this.klass,style:this.style,attrs:{role:this.$attrs.role||(this.label||this.title?"img":null),"aria-label":this.label||null,"aria-hidden":!(this.label||this.title),tabindex:this.tabindex,x:this.x,y:this.y,width:this.width,height:this.height,viewBox:this.box,focusable:this.focusable},on:this.$listeners},n=this.id;if(this.title&&(t.attrs["aria-labelledby"]=n),this.raw){let e=`<g>${this.raw}</g>`;this.title&&(e=`<title id="${n}">${function(e){return e.replace(/[<>"&]/g,(e=>Gy[e]||e))}(this.title)}</title>${e}`),t.domProps={innerHTML:e}}let r=this.title?[e("title",{attrs:{id:n}},this.title)]:[];return e("svg",t,this.raw?null:r.concat([e("g",this.$slots.default||(this.icon?[...this.icon.paths.map(((t,n)=>e("path",{attrs:t,key:"path-"+n}))),...this.icon.polygons.map(((t,n)=>e("polygon",{attrs:t,key:"polygon-"+n})))]:[]))]))},register(e){for(let t in e){let n=e[t],{paths:r=[],d:o,polygons:i=[],points:s}=n;o&&r.push({d:o}),s&&i.push({points:s}),Hy[t]=Uy({},n,{paths:r,polygons:i})}},icons:Hy};function Uy(e,...t){return t.forEach((t=>{for(let n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})),e}function Ky(e=""){return e+function(e){var t="";for(qy=e||21;qy--;)t+=Vy[64*Math.random()|0];return t}(7)}const Gy={"<":"&lt;",">":"&gt;",'"':"&quot;","&":"&amp;"},Xy=Iy({},void 0,Jy,void 0,void 0,void 0,!1,void 0,void 0,void 0);function Zy(e){return function(e){if(Array.isArray(e))return Yy(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Yy(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Yy(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Yy(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Qy(e,t){var n=e.selection,r=n.from,o=n.to,i=[];e.doc.nodesBetween(r,o,(function(e){i=[].concat(Zy(i),Zy(e.marks))}));var s=i.find((function(e){return e.type.name===t.name}));return s?s.attrs:{}}function eb(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!e||!t)return!1;var n=e.parent.childAfter(e.parentOffset);if(!n.node)return!1;var r=n.node.marks.find((function(e){return e.type===t}));if(!r)return!1;for(var o=e.index(),i=e.start()+n.offset,s=o+1,a=i+n.node.nodeSize;o>0&&r.isInSet(e.parent.child(o-1).marks);)o-=1,i-=e.parent.child(o).nodeSize;for(;s<e.parent.childCount&&r.isInSet(e.parent.child(s).marks);)a+=e.parent.child(s).nodeSize,s+=1;return{from:i,to:a}}Xy.register({heading:{width:512,height:512,paths:[{d:"M448 96v320h32c8.8 0 16 7.2 16 16v32c0 8.8-7.2 16-16 16h-160c-8.8 0-16-7.2-16-16v-32c0-8.8 7.2-16 16-16h32v-128h-192v128h32c8.8 0 16 7.2 16 16v32c0 8.8-7.2 16-16 16h-160c-8.8 0-16-7.2-16-16v-32c0-8.8 7.2-16 16-16h32v-320h-32c-8.8 0-16-7.2-16-16v-32c0-8.8 7.2-16 16-16h160c8.8 0 16 7.2 16 16v32c0 8.8-7.2 16-16 16h-32v128h192v-128h-32c-8.8 0-16-7.2-16-16v-32c0-8.8 7.2-16 16-16h160c8.8 0 16 7.2 16 16v32c0 8.8-7.2 16-16 16h-32z"}]}}),Xy.register({font:{width:448,height:512,paths:[{d:"M432 416c8.8 0 16 7.2 16 16v32c0 8.8-7.2 16-16 16h-128c-8.8 0-16-7.2-16-16v-32c0-8.8 7.2-16 16-16h19.6l-23.3-64h-152.6l-23.3 64h19.6c8.8 0 16 7.2 16 16v32c0 8.8-7.2 16-16 16h-128c-8.8 0-16-7.2-16-16v-32c0-8.8 7.2-16 16-16h23.4l130.7-362.3c4.1-12 17.6-21.7 30.3-21.7h0 47.2 0c12.6 0 26.2 9.7 30.3 21.7l130.7 362.3h23.4zM176.8 272h94.3l-47.2-129.5z"}]}}),Xy.register({tint:{width:352,height:512,paths:[{d:"M205.2 22.1c47 158.5 146.8 200.1 146.8 311.8 0 98.4-78.7 178.1-176 178.1s-176-79.7-176-178.1c0-111.2 100-154.1 146.8-311.8 9-30.1 50.5-28.8 58.4 0zM176 448c8.8 0 16-7.2 16-16s-7.2-16-16-16c-44.1 0-80-35.9-80-80 0-8.8-7.2-16-16-16s-16 7.2-16 16c0 61.8 50.3 112 112 112z"}]}}),Xy.register({highlighter:{width:544,height:512,paths:[{d:"M0 480l68.3-70.5 67 67-35.5 35.5zM124.6 240l41.5-35.4 173.3 173.3-35.5 41.6c-9.5 10.8-24.4 15-38.2 10.8l-42.7-13.1-50.9 50.9-96.2-96.2 50.9-50.9-13-42.8c-0.9-2.9-1.6-7.7-1.6-10.7 0-9.1 5.5-21.4 12.4-27.4zM527.9 79.3c20.5 20.5 21.5 53.4 2.3 75.1l-169.9 199.1-169.8-169.8 199.1-170c21.7-19.2 54.6-18.1 75.1 2.4z"}]}}),Xy.register({bold:{width:384,height:512,paths:[{d:"M333.5 238c34.4 27.5 55.6 71.2 50.8 119.6-6.9 70.7-70.2 122.4-141 122.4h-209.3c-8.8 0-16-7.2-16-16v-48c0-8.8 7.2-16 16-16h31.9v-288h-31.9c-8.8 0-16-7.2-16-16v-48c0-8.8 7.2-16 16-16h199.4c74.6 0 134.4 64.5 127.1 140.8-2 20.3-14.1 49.5-27 65.2zM145.7 112v96h87.8c26.5 0 48-21.5 48-48s-21.5-48-48-48h-87.8zM233.4 400c30.9 0 56-25.1 56-56s-25.1-56-56-56h-87.8v112h87.8z"}]}}),Xy.register({underline:{width:448,height:512,paths:[{d:"M32 64c-8.8 0-16-7.2-16-16v-32c0-8.8 7.2-16 16-16h144c8.8 0 16 7.2 16 16v32c0 8.8-7.2 16-16 16h-32v160c0 44.2 35.8 80 80 80s80-35.8 80-80v-160h-32c-8.8 0-16-7.2-16-16v-32c0-8.8 7.2-16 16-16h144c8.8 0 16 7.2 16 16v32c0 8.8-7.2 16-16 16h-32v160c0 88.2-71.8 160-160 160s-160-71.8-160-160v-160h-32zM432 448c8.8 0 16 7.2 16 16v32c0 8.8-7.2 16-16 16h-416c-8.8 0-16-7.2-16-16v-32c0-8.8 7.2-16 16-16h416z"}]}}),Xy.register({italic:{width:320,height:512,paths:[{d:"M320 48v32c0 8.8-7.2 16-16 16h-62.8l-80 320h46.8c8.8 0 16 7.2 16 16v32c0 8.8-7.2 16-16 16h-192c-8.8 0-16-7.2-16-16v-32c0-8.8 7.2-16 16-16h62.8l80-320h-46.8c-8.8 0-16-7.2-16-16v-32c0-8.8 7.2-16 16-16h192c8.8 0 16 7.2 16 16z"}]}}),Xy.register({strikethrough:{width:512,height:512,paths:[{d:"M496 224c8.8 0 16 7.2 16 16v32c0 8.8-7.2 16-16 16h-480c-8.8 0-16-7.2-16-16v-32c0-8.8 7.2-16 16-16h102.3c-11.7-16.5-19.8-35.5-21.8-56.4-0.3-3.3-0.6-8.7-0.6-12 0-68.2 55.4-123.6 123.6-123.7h68 0c43.7 0 95 31.7 114.5 70.8l0.5 1c0.9 1.9 1.7 5.1 1.7 7.1 0 5.5-4 11.9-8.8 14.3l-42.9 21.5c-1.9 0.9-5.1 1.7-7.2 1.7-5.5 0-11.9-4-14.3-8.8-7.6-15.2-27.6-27.6-44.6-27.6h0-66.8c-24 0-43.5 19.5-43.5 43.5 0 17.7 13.8 36.4 30.7 41.6l87.2 26.8h202.1zM315.8 320h94.4c2.2 6.6 4.6 17.5 5.3 24.4 0.3 3.3 0.6 8.7 0.6 12 0 68.2-55.4 123.6-123.6 123.7h-68 0c-43.7 0-95-31.7-114.5-70.8l-0.5-1c-0.9-1.9-1.7-5.1-1.7-7.1 0-5.5 4-11.9 8.8-14.3l42.9-21.5c1.9-0.9 5.1-1.7 7.2-1.7 5.5 0 11.9 4 14.3 8.8 7.6 15.2 27.6 27.6 44.6 27.6h0 66.8c24 0 43.5-19.5 43.5-43.5 0-13.2-9.1-29.5-20.2-36.5z"}]}}),Xy.register({link:{width:512,height:512,paths:[{d:"M326.6 185.4c59.7 59.8 58.9 155.7 0.4 214.6-0.1 0.1-0.2 0.3-0.4 0.4l-67.2 67.2c-59.3 59.3-155.7 59.3-215 0-59.3-59.3-59.3-155.7 0-215l37.1-37.1c9.8-9.8 26.8-3.3 27.3 10.6 0.6 17.7 3.8 35.5 9.7 52.7 2 5.8 0.6 12.3-3.8 16.6l-13.1 13.1c-28 28-28.9 73.7-1.2 102 28 28.6 74.1 28.7 102.3 0.5l67.2-67.2c28.2-28.2 28.1-73.8 0-101.8-3.7-3.7-7.4-6.6-10.3-8.6-3.7-2.5-6.8-8.2-6.9-12.6-0.4-10.6 3.3-21.5 11.7-29.8l21.1-21.1c5.5-5.5 14.2-6.2 20.6-1.7 6.1 4.2 15.3 12 20.5 17.2zM467.5 44.4c59.3 59.3 59.3 155.7 0 215l-37.1 37.1c-9.8 9.8-26.8 3.3-27.3-10.6-0.6-17.7-3.8-35.5-9.7-52.7-2-5.8-0.6-12.3 3.8-16.6l13.1-13.1c28-28 28.9-73.7 1.2-102-28-28.6-74.1-28.7-102.3-0.5l-67.2 67.2c-28.2 28.2-28.1 73.8 0 101.8 3.7 3.7 7.4 6.6 10.3 8.6 3.7 2.5 6.8 8.2 6.9 12.6 0.4 10.6-3.3 21.5-11.7 29.8l-21.1 21.1c-5.5 5.5-14.2 6.2-20.6 1.7-6.1-4.2-15.3-12-20.5-17.2-59.7-59.8-58.9-155.7-0.4-214.6 0.1-0.1 0.2-0.3 0.4-0.4l67.2-67.2c59.3-59.3 155.7-59.3 215 0z"}]}}),Xy.register({edit:{width:576,height:512,paths:[{d:"M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8l-218.4 218.4-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8 218.4-218.4c3.8-3.8 10-3.8 13.8 0zM564.6 60.3c15.2 15.2 15.2 39.9 0 55.2l-35.4 35.4c-3.8 3.8-10 3.8-13.8 0l-90.2-90.2c-3.8-3.8-3.8-10 0-13.8l35.4-35.4c15.3-15.2 40-15.2 55.2 0zM384 346.2c0-3.2 1.3-6.2 3.5-8.5l40-40c7.6-7.5 20.5-2.2 20.5 8.5v157.8c0 26.5-21.5 48-48 48h-352c-26.5 0-48-21.5-48-48v-352c0-26.5 21.5-48 48-48h285.8c10.7 0 16.1 12.9 8.5 20.5l-40 40c-2.3 2.2-5.3 3.5-8.5 3.5h-229.8v320h320v-101.8z"}]}}),Xy.register({unlink:{width:512,height:512,paths:[{d:"M304.1 405.9c4.7 4.7 4.7 12.3 0 17l-44.7 44.7c-59.3 59.3-155.7 59.3-215 0-59.3-59.3-59.3-155.7 0-215l44.7-44.7c4.7-4.7 12.3-4.7 17 0l39.6 39.6c4.7 4.7 4.7 12.3 0 17l-44.7 44.7c-28.1 28.1-28.1 73.8 0 101.8 28.1 28.1 73.8 28.1 101.8 0l44.7-44.7c4.7-4.7 12.3-4.7 17 0zM247.5 145.7l-39.6-39.6c-4.7-4.7-4.7-12.3 0-17l44.7-44.7c59.3-59.3 155.7-59.3 215 0s59.3 155.7 0 215l-44.7 44.7c-4.7 4.7-12.3 4.7-17 0l-39.6-39.6c-4.7-4.7-4.7-12.3 0-17l44.7-44.7c28.1-28.1 28.1-73.8 0-101.8-28.1-28.1-73.8-28.1-101.8 0l-44.7 44.7c-4.7 4.7-12.3 4.7-17 0zM482.3 505c-9.4 9.4-24.6 9.4-33.9 0l-441.4-441.4c-9.4-9.4-9.4-24.6 0-33.9l22.6-22.6c9.4-9.4 24.6-9.4 33.9 0l441.4 441.4c9.4 9.4 9.4 24.6 0 33.9z"}]}}),Xy.register({"external-link-alt":{width:512,height:512,paths:[{d:"M432 320c8.8 0 16 7.2 16 16v128c0 26.5-21.5 48-48 48h-352c-26.5 0-48-21.5-48-48v-352c0-26.5 21.5-48 48-48h160c8.8 0 16 7.2 16 16v32c0 8.8-7.2 16-16 16h-144v320h320v-112c0-8.8 7.2-16 16-16h32zM488 0c13.2 0 24 10.8 24 24v128c0 21.5-26 32-41 17l-35.7-35.7-243.6 243.7c-3.9 3.9-11.5 7.1-17 7.1s-13.1-3.2-17-7.1l-22.7-22.6c-3.9-3.9-7.1-11.5-7.1-17s3.2-13.1 7.1-17l243.7-243.6-35.7-35.7c-15-15.1-4.4-41 17-41h128z"}]}}),Xy.register({image:{width:512,height:512,paths:[{d:"M464 448h-416c-26.5 0-48-21.5-48-48v-288c0-26.5 21.5-48 48-48h416c26.5 0 48 21.5 48 48v288c0 26.5-21.5 48-48 48zM112 120c-30.9 0-56 25.1-56 56s25.1 56 56 56 56-25.1 56-56-25.1-56-56-56zM64 384h384v-112l-87.5-87.5c-4.7-4.7-12.3-4.7-17 0l-135.5 135.5-55.5-55.5c-4.7-4.7-12.3-4.7-17 0l-71.5 71.5v48z"}]}}),Xy.register({"regular/image":{width:512,height:512,paths:[{d:"M464 64c26.5 0 48 21.5 48 48v288c0 26.5-21.5 48-48 48h-416c-26.5 0-48-21.5-48-48v-288c0-26.5 21.5-48 48-48h416zM458 400c3.3 0 6-2.7 6-6v-276c0-3.3-2.7-6-6-6h-404c-3.3 0-6 2.7-6 6v276c0 3.3 2.7 6 6 6h404zM128 152c22.1 0 40 17.9 40 40s-17.9 40-40 40-40-17.9-40-40 17.9-40 40-40zM96 352v-48l39.5-39.5c4.7-4.7 12.3-4.7 17 0l39.5 39.5 119.5-119.5c4.7-4.7 12.3-4.7 17 0l87.5 87.5v80h-320z"}]}}),Xy.register({"ellipsis-h":{width:512,height:512,paths:[{d:"M328 256c0 39.8-32.2 72-72 72s-72-32.2-72-72 32.2-72 72-72 72 32.2 72 72zM432 184c39.8 0 72 32.2 72 72s-32.2 72-72 72-72-32.2-72-72 32.2-72 72-72zM80 184c39.8 0 72 32.2 72 72s-32.2 72-72 72-72-32.2-72-72 32.2-72 72-72z"}]}}),Xy.register({"regular/trash-alt":{width:448,height:512,paths:[{d:"M268 416c-6.6 0-12-5.4-12-12v-216c0-6.6 5.4-12 12-12h24c6.6 0 12 5.4 12 12v216c0 6.6-5.4 12-12 12h-24zM432 80c8.8 0 16 7.2 16 16v16c0 8.8-7.2 16-16 16h-16v336c0 26.5-21.5 48-48 48h-288c-26.5 0-48-21.5-48-48v-336h-16c-8.8 0-16-7.2-16-16v-16c0-8.8 7.2-16 16-16h82.4l34-56.7c7.7-12.9 26.2-23.3 41.2-23.3h0 100.8 0c15 0 33.4 10.4 41.2 23.3l34 56.7h82.4zM171.8 50.9l-17.5 29.1h139.2l-17.5-29.1c-1-1.6-3.3-2.9-5.1-2.9h0-94 0c-1.9 0-4.2 1.3-5.1 2.9zM368 464v-336h-288v336h288zM156 416c-6.6 0-12-5.4-12-12v-216c0-6.6 5.4-12 12-12h24c6.6 0 12 5.4 12 12v216c0 6.6-5.4 12-12 12h-24z"}]}}),Xy.register({video:{width:576,height:512,paths:[{d:"M336.2 64c26.4 0 47.8 21.4 47.8 47.8v288.4c0 26.4-21.4 47.8-47.8 47.8h-288.4c-26.4 0-47.8-21.4-47.8-47.8v-288.4c0-26.4 21.4-47.8 47.8-47.8h288.4zM525.6 101.7c21.3-14.6 50.4 0.4 50.4 25.8v256.9c0 25.5-29.2 40.4-50.4 25.8l-109.6-75.5v-157.4z"}]}}),Xy.register({code:{width:640,height:512,paths:[{d:"M278.9 511.5l-61-17.7c-6.4-1.8-10-8.5-8.2-14.9l136.5-470.2c1.8-6.4 8.5-10 14.9-8.2l61 17.7c6.4 1.8 10 8.5 8.2 14.9l-136.5 470.2c-1.9 6.4-8.5 10.1-14.9 8.2zM164.9 399.3c-4.5 4.9-12.1 5.1-17 0.5l-144.1-135.1c-5.1-4.7-5.1-12.8 0-17.5l144.1-135c4.9-4.6 12.5-4.3 17 0.5l43.5 46.4c4.7 4.9 4.3 12.7-0.8 17.2l-90.6 79.7 90.6 79.7c5.1 4.5 5.4 12.3 0.8 17.2zM492.1 399.9c-4.9 4.5-12.5 4.3-17-0.6l-43.5-46.4c-4.7-4.9-4.3-12.7 0.8-17.2l90.6-79.7-90.6-79.8c-5.1-4.5-5.4-12.3-0.8-17.2l43.5-46.4c4.6-4.8 12.2-5 17-0.5l144.1 135.2c5.1 4.7 5.1 12.8 0 17.5z"}]}}),Xy.register({"quote-right":{width:512,height:512,paths:[{d:"M464 32c26.5 0 48 21.5 48 48v240c0 88.4-71.6 160-160 160h-8c-13.3 0-24-10.7-24-24v-48c0-13.3 10.7-24 24-24h8c35.3 0 64-28.7 64-64v-64h-80c-26.5 0-48-21.5-48-48v-128c0-26.5 21.5-48 48-48h128zM176 32c26.5 0 48 21.5 48 48v240c0 88.4-71.6 160-160 160h-8c-13.3 0-24-10.7-24-24v-48c0-13.3 10.7-24 24-24h8c35.3 0 64-28.7 64-64v-64h-80c-26.5 0-48-21.5-48-48v-128c0-26.5 21.5-48 48-48h128z"}]}}),Xy.register({"align-left":{width:448,height:512,paths:[{d:"M12.8 352c-7.1 0-12.8-5.7-12.8-12.8v0-38.3 0c0-7.1 5.7-12.8 12.8-12.8h0 262.3 0c7.1 0 12.8 5.7 12.8 12.8v0 38.3 0c0 7.1-5.7 12.8-12.8 12.8h0-262.3zM12.8 96c-7.1 0-12.8-5.7-12.8-12.8v0-38.3 0c0-7.1 5.7-12.8 12.8-12.8h0 262.3 0c7.1 0 12.8 5.7 12.8 12.8v0 38.3 0c0 7.1-5.7 12.8-12.8 12.8h0-262.3zM432 160c8.8 0 16 7.2 16 16v32c0 8.8-7.2 16-16 16h-416c-8.8 0-16-7.2-16-16v-32c0-8.8 7.2-16 16-16h416zM432 416c8.8 0 16 7.2 16 16v32c0 8.8-7.2 16-16 16h-416c-8.8 0-16-7.2-16-16v-32c0-8.8 7.2-16 16-16h416z"}]}}),Xy.register({"align-center":{width:448,height:512,paths:[{d:"M432 160c8.8 0 16 7.2 16 16v32c0 8.8-7.2 16-16 16h-416c-8.8 0-16-7.2-16-16v-32c0-8.8 7.2-16 16-16h416zM432 416c8.8 0 16 7.2 16 16v32c0 8.8-7.2 16-16 16h-416c-8.8 0-16-7.2-16-16v-32c0-8.8 7.2-16 16-16h416zM108.1 96c-6.7 0-12.1-5.4-12.1-12.1v-39.8c0-6.7 5.4-12.1 12.1-12.1h0 231.8c6.7 0 12.1 5.4 12.1 12.1v39.8 0c0 6.7-5.4 12.1-12.1 12.1v0h-231.8zM339.9 352h-231.8c-6.7 0-12.1-5.4-12.1-12.1v-39.8c0-6.7 5.4-12.1 12.1-12.1h0 231.8c6.7 0 12.1 5.4 12.1 12.1v39.8 0c0 6.7-5.4 12.1-12.1 12.1v0z"}]}}),Xy.register({"align-right":{width:448,height:512,paths:[{d:"M16 224c-8.8 0-16-7.2-16-16v-32c0-8.8 7.2-16 16-16h416c8.8 0 16 7.2 16 16v32c0 8.8-7.2 16-16 16h-416zM432 416c8.8 0 16 7.2 16 16v32c0 8.8-7.2 16-16 16h-416c-8.8 0-16-7.2-16-16v-32c0-8.8 7.2-16 16-16h416zM435.2 32c7.1 0 12.8 5.7 12.8 12.8v0 38.3 0c0 7.1-5.7 12.8-12.8 12.8h0-262.3 0c-7.1 0-12.8-5.7-12.8-12.8v0-38.3 0c0-7.1 5.7-12.8 12.8-12.8h0 262.3zM435.2 288c7.1 0 12.8 5.7 12.8 12.8v0 38.3 0c0 7.1-5.7 12.8-12.8 12.8h0-262.3 0c-7.1 0-12.8-5.7-12.8-12.8v0-38.3 0c0-7.1 5.7-12.8 12.8-12.8h0 262.3z"}]}}),Xy.register({"align-justify":{width:448,height:512,paths:[{d:"M432 416c8.8 0 16 7.2 16 16v32c0 8.8-7.2 16-16 16h-416c-8.8 0-16-7.2-16-16v-32c0-8.8 7.2-16 16-16h416zM432 288c8.8 0 16 7.2 16 16v32c0 8.8-7.2 16-16 16h-416c-8.8 0-16-7.2-16-16v-32c0-8.8 7.2-16 16-16h416zM432 160c8.8 0 16 7.2 16 16v32c0 8.8-7.2 16-16 16h-416c-8.8 0-16-7.2-16-16v-32c0-8.8 7.2-16 16-16h416zM432 32c8.8 0 16 7.2 16 16v32c0 8.8-7.2 16-16 16h-416c-8.8 0-16-7.2-16-16v-32c0-8.8 7.2-16 16-16h416z"}]}}),Xy.register({"text-width":{width:448,height:512,paths:[{d:"M432 32c8.8 0 16 7.2 16 16v80c0 8.8-7.2 16-16 16h-32c-8.8 0-16-7.2-16-16v-16h-120v112h24c8.8 0 16 7.2 16 16v32c0 8.8-7.2 16-16 16h-128c-8.8 0-16-7.2-16-16v-32c0-8.8 7.2-16 16-16h24v-112h-120v16c0 8.8-7.2 16-16 16h-32c-8.8 0-16-7.2-16-16v-80c0-8.8 7.2-16 16-16h416zM363.3 292.7l80 80c2.6 2.6 4.7 7.7 4.7 11.3s-2.1 8.7-4.7 11.3l-80 80c-10 10-27.3 3-27.3-11.3v-48h-224v48c0 15.6-18 20.6-27.3 11.3l-80-80c-2.6-2.6-4.7-7.7-4.7-11.3s2.1-8.7 4.7-11.3l80-80c10-10 27.3-3 27.3 11.3v48h224v-48c0-15.6 18-20.6 27.3-11.3z"}]}}),Xy.register({"text-height":{width:576,height:512,paths:[{d:"M304 32c8.8 0 16 7.2 16 16v96c0 8.8-7.2 16-16 16h-32c-8.8 0-16-7.2-16-16v-32h-56v304h40c8.8 0 16 7.2 16 16v32c0 8.8-7.2 16-16 16h-160c-8.8 0-16-7.2-16-16v-32c0-8.8 7.2-16 16-16h40v-304h-56v32c0 8.8-7.2 16-16 16h-32c-8.8 0-16-7.2-16-16v-96c0-8.8 7.2-16 16-16h288zM560 368c15.6 0 20.6 18 11.3 27.3l-80 80c-2.6 2.6-7.7 4.7-11.3 4.7s-8.7-2.1-11.3-4.7l-80-80c-10-10-3-27.3 11.3-27.3h48v-224h-48c-15.6 0-20.6-18-11.3-27.3l80-80c2.6-2.6 7.7-4.7 11.3-4.7s8.7 2.1 11.3 4.7l80 80c10 10 3 27.3-11.3 27.3h-48v224h48z"}]}}),Xy.register({"list-ul":{width:512,height:512,paths:[{d:"M48 48c26.5 0 48 21.5 48 48s-21.5 48-48 48-48-21.5-48-48 21.5-48 48-48zM48 208c26.5 0 48 21.5 48 48s-21.5 48-48 48-48-21.5-48-48 21.5-48 48-48zM48 368c26.5 0 48 21.5 48 48s-21.5 48-48 48-48-21.5-48-48 21.5-48 48-48zM496 384c8.8 0 16 7.2 16 16v32c0 8.8-7.2 16-16 16h-320c-8.8 0-16-7.2-16-16v-32c0-8.8 7.2-16 16-16h320zM496 64c8.8 0 16 7.2 16 16v32c0 8.8-7.2 16-16 16h-320c-8.8 0-16-7.2-16-16v-32c0-8.8 7.2-16 16-16h320zM496 224c8.8 0 16 7.2 16 16v32c0 8.8-7.2 16-16 16h-320c-8.8 0-16-7.2-16-16v-32c0-8.8 7.2-16 16-16h320z"}]}}),Xy.register({"list-ol":{width:512,height:512,paths:[{d:"M61.8 401c19.6 5.1 28.7 20.5 28.7 34.9 0 21.4-14.3 44.1-48.5 44.1-16.6 0-29.3-4.8-37-9.4-5.8-4.2-6.3-9.8-2.6-15.9l5.6-9.3c3.9-6.6 9.1-7 15.6-3.1 4.1 1.7 11 3.1 15.5 3.1 10.2 0 14.4-3.5 14.4-8.2 0-6.6-5.6-9.1-15.9-9.1h-4.7c-6 0-9.3-2.1-12.3-7.9l-1-1.9c-2.5-4.8-1.2-9.8 2.8-14.9l5.6-7c2.9-3.6 7.8-9.1 11-12.3h-22.8c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h57c7.5 0 11.3 4 11.3 11.3v3.3c0 0.2 0 0.6 0 0.9 0 4.2-2.3 10.2-5.1 13.3zM496 224c8.8 0 16 7.2 16 16v32c0 8.8-7.2 16-16 16h-320c-8.8 0-16-7.2-16-16v-32c0-8.8 7.2-16 16-16h320zM496 64c8.8 0 16 7.2 16 16v32c0 8.8-7.2 16-16 16h-320c-8.8 0-16-7.2-16-16v-32c0-8.8 7.2-16 16-16h320zM496 384c8.8 0 16 7.2 16 16v32c0 8.8-7.2 16-16 16h-320c-8.8 0-16-7.2-16-16v-32c0-8.8 7.2-16 16-16h320zM16 160c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h16v-64h-8c-4.4 0-8-3.6-8-8 0-1 0.4-2.6 0.8-3.6l8-16c1.2-2.4 4.4-4.4 7.1-4.4h24c4.4 0 8 3.6 8 8v88h16c4.4 0 8 3.6 8 8v16c0 4.4-3.6 8-8 8h-64zM12.1 320c-7 0-12.1-4-12.1-11.4v-4c0-47.3 51-56.4 51-69.1 0-7.2-6-8.8-9.3-8.8h-0.1c-3 0-7.2 1.7-9.4 3.8-5.1 4.9-10.5 7-16.1 2.4l-8.6-6.9c-5.8-4.5-7.2-9.8-2.8-15.4 6.7-8.8 19.1-18.8 40.5-18.8 19.5 0 44.5 10.5 44.5 39.6 0 37.8-45 46.2-48.3 56.4h38.7c4.4 0 8 3.6 8 8v16c0 4.4-3.6 8-8 8h-67.9z"}]}}),Xy.register({tasks:{width:512,height:512,paths:[{d:"M139.6 35.5l17 16.5c1.9 1.9 3.4 5.7 3.4 8.5 0 2.8-1.6 6.6-3.5 8.5l-72.2 72.2-15.6 15.6c-2 1.9-6 3.5-8.8 3.5-2.8 0-6.8-1.6-8.8-3.5l-47.6-47.4c-1.9-1.9-3.5-5.8-3.5-8.5 0-2.8 1.6-6.6 3.5-8.5l15.7-15.7c1.9-1.9 5.7-3.5 8.5-3.5 2.8 0 6.6 1.6 8.5 3.5l22.7 22.1 63.7-63.3c1.9-1.9 5.7-3.5 8.5-3.5 2.8 0 6.6 1.6 8.5 3.5zM139.6 194.7l17 17c1.9 1.9 3.4 5.7 3.4 8.4 0 2.7-1.6 6.6-3.5 8.5l-72.2 72.2-15.7 15.7c-2 1.9-6 3.5-8.8 3.5s-6.8-1.6-8.8-3.5l-47.5-47.5c-1.9-1.9-3.5-5.7-3.5-8.5s1.6-6.6 3.5-8.5l15.7-15.7c1.9-1.9 5.7-3.5 8.5-3.5 2.8 0 6.6 1.6 8.5 3.5l22.7 22.1 63.7-63.7c1.9-1.9 5.7-3.5 8.5-3.5 2.8 0 6.6 1.6 8.5 3.5zM64 368c26.5 0 48 21.5 48 48s-21.5 48-48 48c-26.5 0-48.6-21.5-48.6-48s22.1-48 48.6-48zM496 384c8.8 0 16 7.2 16 16v32c0 8.8-7.2 16-16 16h-288c-8.8 0-16-7.2-16-16v-32c0-8.8 7.2-16 16-16h288zM496 64c8.8 0 16 7.2 16 16v32c0 8.8-7.2 16-16 16h-288c-8.8 0-16-7.2-16-16v-32c0-8.8 7.2-16 16-16h288zM496 224c8.8 0 16 7.2 16 16v32c0 8.8-7.2 16-16 16h-288c-8.8 0-16-7.2-16-16v-32c0-8.8 7.2-16 16-16h288z"}]}}),Xy.register({indent:{width:448,height:512,paths:[{d:"M27.3 363.3c-10 10-27.3 3-27.3-11.3v-192c0-14.2 17.3-21.3 27.3-11.3l96 96c2.6 2.6 4.7 7.7 4.7 11.3 0 3.7-2.1 8.7-4.7 11.3zM432 416c8.8 0 16 7.2 16 16v32c0 8.8-7.2 16-16 16h-416c-8.8 0-16-7.2-16-16v-32c0-8.8 7.2-16 16-16h416zM435.2 288c7.1 0 12.8 5.7 12.8 12.8v0 38.3 0c0 7.1-5.7 12.8-12.8 12.8h0-230.3 0c-7.1 0-12.8-5.7-12.8-12.8v0-38.3 0c0-7.1 5.7-12.8 12.8-12.8h0 230.3zM435.2 160c7.1 0 12.8 5.7 12.8 12.8v0 38.3 0c0 7.1-5.7 12.8-12.8 12.8h0-230.3 0c-7.1 0-12.8-5.7-12.8-12.8v0-38.3 0c0-7.1 5.7-12.8 12.8-12.8h0 230.3zM432 32c8.8 0 16 7.2 16 16v32c0 8.8-7.2 16-16 16h-416c-8.8 0-16-7.2-16-16v-32c0-8.8 7.2-16 16-16h416z"}]}}),Xy.register({outdent:{width:448,height:512,paths:[{d:"M100.7 363.3l-96-96c-2.6-2.6-4.7-7.7-4.7-11.3s2.1-8.7 4.7-11.3l96-96c10-10 27.3-3 27.3 11.3v192c0 14.2-17.3 21.3-27.3 11.3zM432 416c8.8 0 16 7.2 16 16v32c0 8.8-7.2 16-16 16h-416c-8.8 0-16-7.2-16-16v-32c0-8.8 7.2-16 16-16h416zM435.2 288c7.1 0 12.8 5.7 12.8 12.8v0 38.3 0c0 7.1-5.7 12.8-12.8 12.8h0-230.3 0c-7.1 0-12.8-5.7-12.8-12.8v0-38.3 0c0-7.1 5.7-12.8 12.8-12.8h0 230.3zM435.2 160c7.1 0 12.8 5.7 12.8 12.8v0 38.3 0c0 7.1-5.7 12.8-12.8 12.8h0-230.3 0c-7.1 0-12.8-5.7-12.8-12.8v0-38.3 0c0-7.1 5.7-12.8 12.8-12.8h0 230.3zM432 32c8.8 0 16 7.2 16 16v32c0 8.8-7.2 16-16 16h-416c-8.8 0-16-7.2-16-16v-32c0-8.8 7.2-16 16-16h416z"}]}}),Xy.register({minus:{width:448,height:512,paths:[{d:"M416 208c17.7 0 32 14.3 32 32v32c0 17.7-14.3 32-32 32h-384c-17.7 0-32-14.3-32-32v-32c0-17.7 14.3-32 32-32h384z"}]}}),Xy.register({table:{width:512,height:512,paths:[{d:"M464 32c26.5 0 48 21.5 48 48v352c0 26.5-21.5 48-48 48h-416c-26.5 0-48-21.5-48-48v-352c0-26.5 21.5-48 48-48h416zM224 416v-96h-160v96h160zM224 256v-96h-160v96h160zM448 416v-96h-160v96h160zM448 256v-96h-160v96h160z"}]}}),Xy.register({"remove-format":{width:640,height:512,paths:[{d:"M336 416c8.8 0 16 7.2 16 16v32c0 8.8-7.2 16-16 16h-128c-8.8 0-16-7.2-16-16v-32c0-8.8 7.2-16 16-16h32.5l26.5-79.6 67.1 51.8-9.3 27.8h11.2zM633.8 458.1c3.4 2.7 6.2 8.3 6.2 12.6 0 3-1.5 7.4-3.4 9.8l-19.6 25.3c-2.7 3.4-8.3 6.2-12.6 6.2-3 0-7.4-1.5-9.8-3.4l-588.4-454.7c-3.4-2.7-6.2-8.3-6.2-12.6 0-3 1.5-7.4 3.4-9.8l19.6-25.3c2.7-3.4 8.3-6.2 12.6-6.2 3 0 7.4 1.5 9.8 3.4l114.5 88.5v-43.9c0-8.8 7.2-16 16-16h416c8.8 0 16 7.2 16 16v96c0 8.8-7.2 16-16 16h-32c-8.8 0-16-7.2-16-16v-32h-117.8l-49.2 147.6zM309.9 207.8l31.9-95.8h-117.8v29.4z"}]}}),Xy.register({undo:{width:512,height:512,paths:[{d:"M212.3 224.3h-200.3c-6.6 0-12-5.4-12-12v-200.3c0-6.6 5.4-12 12-12h48c6.6 0 12 5.4 12 12v78.1c45.8-50.8 112.3-82.6 186.2-82.1 136.9 1 246.4 111.6 246.2 248.5-0.3 136.7-111.2 247.5-248 247.5-64.1 0-122.5-24.3-166.5-64.2-5.1-4.6-5.3-12.6-0.5-17.4l34-34c4.5-4.5 11.7-4.7 16.4-0.5 31 27.5 71.9 44.1 116.6 44.1 97.3 0 176-78.7 176-176 0-97.3-78.7-176-176-176-58.5 0-110.3 28.5-142.3 72.3h98.3c6.6 0 12 5.4 12 12v48c0 6.6-5.4 12-12 12z"}]}}),Xy.register({redo:{width:512,height:512,paths:[{d:"M500.3 0c6.6 0 12 5.4 12 12v200.3c0 6.6-5.4 12-12 12h-200.3c-6.6 0-12-5.4-12-12v-47.4 0c0-6.6 5.4-12 12-12 0.2 0 0.4 0 0.6 0l101.5 4.9c-28.9-43-94.3-77.8-146.1-77.8-97.2 0-176 78.8-176 176 0 97.2 78.8 176 176 176 36.7 0 88.7-19.7 116.3-43.9 1.9-1.6 5.4-3 7.9-3 2.7 0 6.5 1.6 8.5 3.5l34 34c1.9 1.9 3.5 5.7 3.5 8.5 0 3-1.8 7-4 8.9-39 35.3-113.3 63.9-165.8 63.9h-0.3c-136.9 0-247.9-110.9-248-247.8-0.1-136.7 111.3-248.2 248-248.2h0.3c63.2 0 147.7 39.1 188.6 87.3l-4-82.8c0-0.2 0-0.4 0-0.6 0-6.6 5.4-12 12-12h0 47.4z"}]}}),Xy.register({expand:{width:448,height:512,paths:[{d:"M0 180v-124c0-13.3 10.7-24 24-24h124c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-84v84c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12zM288 44c0-6.6 5.4-12 12-12h124c13.3 0 24 10.7 24 24v124c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-84h-84c-6.6 0-12-5.4-12-12v-40zM436 320c6.6 0 12 5.4 12 12v124c0 13.3-10.7 24-24 24h-124c-6.6 0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h84v-84c0-6.6 5.4-12 12-12h40zM160 468c0 6.6-5.4 12-12 12h-124c-13.3 0-24-10.7-24-24v-124c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v84h84c6.6 0 12 5.4 12 12v40z"}]}}),Xy.register({compress:{width:448,height:512,paths:[{d:"M436 192h-124c-13.3 0-24-10.7-24-24v-124c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v84h84c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12zM160 168c0 13.3-10.7 24-24 24h-124c-6.6 0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h84v-84c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v124zM160 468c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-84h-84c-6.6 0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h124c13.3 0 24 10.7 24 24v124zM352 468c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-124c0-13.3 10.7-24 24-24h124c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-84v84z"}]}}),Xy.register({print:{width:512,height:512,paths:[{d:"M448 192c35.3 0 64 28.7 64 64v112c0 8.8-7.2 16-16 16h-48v96c0 17.7-14.3 32-32 32h-320c-17.7 0-32-14.3-32-32v-96h-48c-8.8 0-16-7.2-16-16v-112c0-35.3 28.7-64 64-64v-160c0-17.7 14.3-32 32-32h274.7c8.5 0 16.6 3.4 22.6 9.4l45.3 45.3c6 6 9.4 14.1 9.4 22.6v114.8zM384 448v-96h-256v96h256zM384 224v-96h-48c-8.8 0-16-7.2-16-16v-48h-192v160h256zM432 296c13.3 0 24-10.8 24-24 0-13.3-10.8-24-24-24s-24 10.7-24 24c0 13.3 10.8 24 24 24z"}]}}),Xy.register({eye:{width:576,height:512,paths:[{d:"M572.5 241.4c1.9 3.8 3.5 10.3 3.5 14.6s-1.6 10.8-3.5 14.6c-54.2 105.8-161.6 177.4-284.5 177.4s-230.3-71.6-284.5-177.4c-1.9-3.8-3.5-10.3-3.5-14.6s1.6-10.8 3.5-14.6c54.2-105.8 161.6-177.4 284.5-177.4s230.3 71.6 284.5 177.4zM288 400h0.1c79.4 0 143.9-64.5 143.9-143.9v-0.1c0-79.5-64.5-144-144-144s-144 64.5-144 144 64.5 144 144 144zM288 160h0.2c52.9 0 95.8 42.9 95.8 95.8 0 52.9-42.9 95.8-95.8 95.8-52.9 0-95.8-42.9-95.8-95.8 0-7 1.5-18.3 3.3-25.1 7 5.1 19.7 9.3 28.4 9.3 26.4 0 47.8-21.4 47.8-47.8 0-8.7-4.2-21.4-9.3-28.4 6.8-2 18.2-3.7 25.3-3.8z"}]}}),Xy.register({"regular/object-group":{width:512,height:512,paths:[{d:"M500 128h-12v256h12c6.6 0 12 5.4 12 12v72c0 6.6-5.4 12-12 12h-72c-6.6 0-12-5.4-12-12v-12h-320v12c0 6.6-5.4 12-12 12h-72c-6.6 0-12-5.4-12-12v-72c0-6.6 5.4-12 12-12h12v-256h-12c-6.6 0-12-5.4-12-12v-72c0-6.6 5.4-12 12-12h72c6.6 0 12 5.4 12 12v12h320v-12c0-6.6 5.4-12 12-12h72c6.6 0 12 5.4 12 12v72c0 6.6-5.4 12-12 12zM448 64v32h32v-32h-32zM32 64v32h32v-32h-32zM64 448v-32h-32v32h32zM480 448v-32h-32v32h32zM440 384v-256h-12c-6.6 0-12-5.4-12-12v-12h-320v12c0 6.6-5.4 12-12 12h-12v256h12c6.6 0 12 5.4 12 12v12h320v-12c0-6.6 5.4-12 12-12h12zM404 192c6.6 0 12 5.4 12 12v168c0 6.6-5.4 12-12 12h-200c-6.6 0-12-5.4-12-12v-52h-84c-6.6 0-12-5.4-12-12v-168c0-6.6 5.4-12 12-12h200c6.6 0 12 5.4 12 12v52h84zM136 168v112h144v-112h-144zM376 344v-112h-56v76c0 6.6-5.4 12-12 12h-76v24h144z"}]}}),Xy.register({"regular/file-code":{width:384,height:512,paths:[{d:"M149.9 349.1c3.5 3.3 3.7 8.9 0.4 12.4l-17.4 18.6c-1.6 1.8-4 2.8-6.4 2.8-2.2 0-4.4-0.9-6-2.4l-57.7-54.1c-3.7-3.4-3.7-9.3 0-12.8l57.7-54.1c3.4-3.3 9-3.2 12.4 0.4l17.4 18.6 0.2 0.2c3.2 3.6 2.8 9.2-0.8 12.4l-32.8 28.9 32.8 28.9zM369.9 97.9c9 9 14.1 21.3 14.1 34v332.1c0 26.5-21.5 48-48 48h-288c-26.5 0-48-21.5-48-48v-416c0-26.5 21.5-48 48-48.1h204.1c12.7 0 24.9 5.1 33.9 14.1zM256 51.9v76.1h76.1zM336 464v-288h-104c-13.3 0-24-10.7-24-24v-104h-160v416h288zM209.6 214l24.4 7c4.7 1.3 7.4 6.2 6 10.9l-54.7 188.2c-1.3 4.6-6.2 7.4-10.9 6l-24.4-7.1c-4.7-1.3-7.4-6.2-6-10.9l54.7-188.1c1.4-4.7 6.2-7.4 10.9-6zM234.1 290.9c-3.5-3.3-3.7-8.9-0.4-12.4l17.4-18.6c3.3-3.6 8.9-3.7 12.4-0.4l57.7 54.1c3.7 3.4 3.7 9.3 0 12.8l-57.7 54.1c-3.5 3.3-9.1 3.1-12.4-0.4l-17.4-18.6-0.2-0.2c-3.2-3.6-2.8-9.2 0.8-12.4l32.8-28.9-32.8-28.9z"}]}}),Xy.register({"arrow-left":{width:448,height:512,paths:[{d:"M257.5 445.1l-22.2 22.2c-9.4 9.4-24.6 9.4-33.9 0l-194.4-194.3c-9.4-9.4-9.4-24.6 0-33.9l194.4-194.4c9.4-9.4 24.6-9.4 33.9 0l22.2 22.2c9.5 9.5 9.3 25-0.4 34.3l-120.5 114.8h287.4c13.3 0 24 10.7 24 24v32c0 13.3-10.7 24-24 24h-287.4l120.5 114.8c9.8 9.3 10 24.8 0.4 34.3z"}]}});var tb=function(e){jm(n,r["default"]);var t=Hm(n);function n(){return Jf(this,n),t.apply(this,arguments)}return Kf(n,[{key:"onClick",value:function(){this.readonly||this.command()}},{key:"commandButtonClass",get:function(){return{"el-tiptap-editor__command-button":!0,"el-tiptap-editor__command-button--active":this.isActive,"el-tiptap-editor__command-button--readonly":this.readonly}}}]),n}();Wm([dg({type:String,required:!0})],tb.prototype,"icon",void 0),Wm([dg({type:Boolean,default:!1})],tb.prototype,"isActive",void 0),Wm([dg({type:String,required:!0})],tb.prototype,"tooltip",void 0),Wm([dg({type:Boolean,required:!0})],tb.prototype,"enableTooltip",void 0),Wm([dg({type:Function,default:function(){}})],tb.prototype,"command",void 0),Wm([dg({type:Boolean,default:!1})],tb.prototype,"readonly",void 0);const nb=Iy({render:function(){var e=this.$createElement,t=this._self._c||e;return t("el-tooltip",{attrs:{content:this.tooltip,"open-delay":350,disabled:!this.enableTooltip||this.readonly,transition:"el-zoom-in-bottom",effect:"dark",placement:"top"}},[t("div",{class:this.commandButtonClass,on:{mousedown:function(e){e.preventDefault()},click:this.onClick}},[t("v-icon",{attrs:{name:this.icon}})],1)])},staticRenderFns:[]},void 0,tb=Wm([ag({components:Fm({"v-icon":Xy},xd().name,xd())})],tb),void 0,!1,void 0,!1,void 0,void 0,void 0);var rb=function(e){jm(n,r["default"]);var t=Hm(n);function n(){return Jf(this,n),t.apply(this,arguments)}return Kf(n,[{key:"openLink",value:function(){if(this.url){var e=window.open();e&&(e.opener=null,e.location.href=this.url)}}}]),n}();Wm([dg({type:String,required:!0})],rb.prototype,"url",void 0),Wm([lg()],rb.prototype,"et",void 0);const ob=Iy({render:function(){var e=this.$createElement;return(this._self._c||e)("command-button",{attrs:{command:this.openLink,"enable-tooltip":this.et.tooltip,tooltip:this.et.t("editor.extensions.Link.open.tooltip"),icon:"external-link-alt"}})},staticRenderFns:[]},void 0,rb=Wm([ag({components:{CommandButton:nb}})],rb),void 0,!1,void 0,!1,void 0,void 0,void 0);var ib=qd((function(e,t){t.__esModule=!0,t.isString=function(e){return"[object String]"===Object.prototype.toString.call(e)},t.isObject=function(e){return"[object Object]"===Object.prototype.toString.call(e)},t.isHtmlElement=function(e){return e&&e.nodeType===Node.ELEMENT_NODE},t.isFunction=function(e){return e&&"[object Function]"==={}.toString.call(e)},t.isUndefined=function(e){return void 0===e},t.isDefined=function(e){return null!=e}}));Vd(ib),ib.isString,ib.isObject,ib.isHtmlElement,ib.isFunction,ib.isUndefined,ib.isDefined;var sb=qd((function(e,t){t.__esModule=!0,t.isEmpty=t.isEqual=t.arrayEquals=t.looseEqual=t.capitalize=t.kebabCase=t.autoprefixer=t.isFirefox=t.isEdge=t.isIE=t.coerceTruthyValueToArray=t.arrayFind=t.arrayFindIndex=t.escapeRegexpString=t.valueEquals=t.generateId=t.getValueByPath=void 0;var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.noop=function(){},t.hasOwn=function(e,t){return s.call(e,t)},t.toObject=function(e){for(var t={},n=0;n<e.length;n++)e[n]&&a(t,e[n]);return t},t.getPropByPath=function(e,t,n){for(var r=e,o=(t=(t=t.replace(/\[(\w+)\]/g,".$1")).replace(/^\./,"")).split("."),i=0,s=o.length;i<s-1&&(r||n);++i){var a=o[i];if(!(a in r)){if(n)throw new Error("please transfer a valid prop path to form item!");break}r=r[a]}return{o:r,k:o[i],v:r?r[o[i]]:null}},t.rafThrottle=function(e){var t=!1;return function(){for(var n=this,r=arguments.length,o=Array(r),i=0;i<r;i++)o[i]=arguments[i];t||(t=!0,window.requestAnimationFrame((function(r){e.apply(n,o),t=!1})))}},t.objToArray=function(e){return Array.isArray(e)?e:d(e)?[]:[e]};var o,i=(o=r["default"])&&o.__esModule?o:{default:o},s=Object.prototype.hasOwnProperty;function a(e,t){for(var n in t)e[n]=t[n];return e}t.getValueByPath=function(e,t){for(var n=(t=t||"").split("."),r=e,o=null,i=0,s=n.length;i<s;i++){var a=n[i];if(!r)break;if(i===s-1){o=r[a];break}r=r[a]}return o},t.generateId=function(){return Math.floor(1e4*Math.random())},t.valueEquals=function(e,t){if(e===t)return!0;if(!(e instanceof Array))return!1;if(!(t instanceof Array))return!1;if(e.length!==t.length)return!1;for(var n=0;n!==e.length;++n)if(e[n]!==t[n])return!1;return!0},t.escapeRegexpString=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return String(e).replace(/[|\\{}()[\]^$+*?.]/g,"\\$&")};var l=t.arrayFindIndex=function(e,t){for(var n=0;n!==e.length;++n)if(t(e[n]))return n;return-1},c=(t.arrayFind=function(e,t){var n=l(e,t);return-1!==n?e[n]:void 0},t.coerceTruthyValueToArray=function(e){return Array.isArray(e)?e:e?[e]:[]},t.isIE=function(){return!i.default.prototype.$isServer&&!isNaN(Number(document.documentMode))},t.isEdge=function(){return!i.default.prototype.$isServer&&navigator.userAgent.indexOf("Edge")>-1},t.isFirefox=function(){return!i.default.prototype.$isServer&&!!window.navigator.userAgent.match(/firefox/i)},t.autoprefixer=function(e){if("object"!==(void 0===e?"undefined":n(e)))return e;var t=["ms-","webkit-"];return["transform","transition","animation"].forEach((function(n){var r=e[n];n&&r&&t.forEach((function(t){e[t+n]=r}))})),e},t.kebabCase=function(e){var t=/([^-])([A-Z])/g;return e.replace(t,"$1-$2").replace(t,"$1-$2").toLowerCase()},t.capitalize=function(e){return(0,ib.isString)(e)?e.charAt(0).toUpperCase()+e.slice(1):e},t.looseEqual=function(e,t){var n=(0,ib.isObject)(e),r=(0,ib.isObject)(t);return n&&r?JSON.stringify(e)===JSON.stringify(t):!n&&!r&&String(e)===String(t)}),u=t.arrayEquals=function(e,t){if(t=t||[],(e=e||[]).length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!c(e[n],t[n]))return!1;return!0},d=(t.isEqual=function(e,t){return Array.isArray(e)&&Array.isArray(t)?u(e,t):c(e,t)},t.isEmpty=function(e){if(null==e)return!0;if("boolean"==typeof e)return!1;if("number"==typeof e)return!e;if(e instanceof Error)return""===e.message;switch(Object.prototype.toString.call(e)){case"[object String]":case"[object Array]":return!e.length;case"[object File]":case"[object Map]":case"[object Set]":return!e.size;case"[object Object]":return!Object.keys(e).length}return!1})}));Vd(sb),sb.isEmpty,sb.isEqual,sb.arrayEquals,sb.looseEqual,sb.capitalize,sb.kebabCase,sb.autoprefixer,sb.isFirefox,sb.isEdge,sb.isIE,sb.coerceTruthyValueToArray,sb.arrayFind,sb.arrayFindIndex,sb.escapeRegexpString,sb.valueEquals,sb.generateId,sb.getValueByPath,sb.noop,sb.hasOwn,sb.toObject,sb.getPropByPath,sb.rafThrottle,sb.objToArray;var ab=qd((function(e,t){t.__esModule=!0,t.default={mounted:function(){},methods:{getMigratingConfig:function(){return{props:{},events:{}}}}}}));Vd(ab);var lb=qd((function(e,t){t.__esModule=!0,t.isDef=function(e){return null!=e},t.isKorean=function(e){return/([(\uAC00-\uD7AF)|(\u3130-\u318F)])+/gi.test(e)}}));Vd(lb),lb.isDef,lb.isKorean;var cb=qd((function(e,t){function n(e,t,r){this.$children.forEach((function(o){o.$options.componentName===e?o.$emit.apply(o,[t].concat(r)):n.apply(o,[e,t].concat([r]))}))}t.__esModule=!0,t.default={methods:{dispatch:function(e,t,n){for(var r=this.$parent||this.$root,o=r.$options.componentName;r&&(!o||o!==e);)(r=r.$parent)&&(o=r.$options.componentName);r&&r.$emit.apply(r,[t].concat(n))},broadcast:function(e,t,r){n.call(this,e,t,r)}}}}));Vd(cb);var ub=qd((function(e,t){t.__esModule=!0,t.default=function(e){for(var t=1,n=arguments.length;t<n;t++){var r=arguments[t]||{};for(var o in r)if(r.hasOwnProperty(o)){var i=r[o];void 0!==i&&(e[o]=i)}}return e}}));Vd(ub);var db=Vd(qd((function(e){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/",n(n.s=76)}({0:function(e,t,n){function r(e,t,n,r,o,i,s,a){var l,c="function"==typeof e?e.options:e;if(t&&(c.render=t,c.staticRenderFns=n,c._compiled=!0),r&&(c.functional=!0),i&&(c._scopeId="data-v-"+i),s?(l=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),o&&o.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(s)},c._ssrRegister=l):o&&(l=a?function(){o.call(this,this.$root.$options.shadowRoot)}:o),l)if(c.functional){c._injectStyles=l;var u=c.render;c.render=function(e,t){return l.call(t),u(e,t)}}else{var d=c.beforeCreate;c.beforeCreate=d?[].concat(d,l):[l]}return{exports:e,options:c}}n.d(t,"a",(function(){return r}))},11:function(e,t){e.exports=ab},21:function(e,t){e.exports=lb},4:function(e,t){e.exports=cb},76:function(e,t,n){n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:["textarea"===e.type?"el-textarea":"el-input",e.inputSize?"el-input--"+e.inputSize:"",{"is-disabled":e.inputDisabled,"is-exceed":e.inputExceed,"el-input-group":e.$slots.prepend||e.$slots.append,"el-input-group--append":e.$slots.append,"el-input-group--prepend":e.$slots.prepend,"el-input--prefix":e.$slots.prefix||e.prefixIcon,"el-input--suffix":e.$slots.suffix||e.suffixIcon||e.clearable||e.showPassword}],on:{mouseenter:function(t){e.hovering=!0},mouseleave:function(t){e.hovering=!1}}},["textarea"!==e.type?[e.$slots.prepend?n("div",{staticClass:"el-input-group__prepend"},[e._t("prepend")],2):e._e(),"textarea"!==e.type?n("input",e._b({ref:"input",staticClass:"el-input__inner",attrs:{tabindex:e.tabindex,type:e.showPassword?e.passwordVisible?"text":"password":e.type,disabled:e.inputDisabled,readonly:e.readonly,autocomplete:e.autoComplete||e.autocomplete,"aria-label":e.label},on:{compositionstart:e.handleCompositionStart,compositionupdate:e.handleCompositionUpdate,compositionend:e.handleCompositionEnd,input:e.handleInput,focus:e.handleFocus,blur:e.handleBlur,change:e.handleChange}},"input",e.$attrs,!1)):e._e(),e.$slots.prefix||e.prefixIcon?n("span",{staticClass:"el-input__prefix"},[e._t("prefix"),e.prefixIcon?n("i",{staticClass:"el-input__icon",class:e.prefixIcon}):e._e()],2):e._e(),e.getSuffixVisible()?n("span",{staticClass:"el-input__suffix"},[n("span",{staticClass:"el-input__suffix-inner"},[e.showClear&&e.showPwdVisible&&e.isWordLimitVisible?e._e():[e._t("suffix"),e.suffixIcon?n("i",{staticClass:"el-input__icon",class:e.suffixIcon}):e._e()],e.showClear?n("i",{staticClass:"el-input__icon el-icon-circle-close el-input__clear",on:{mousedown:function(e){e.preventDefault()},click:e.clear}}):e._e(),e.showPwdVisible?n("i",{staticClass:"el-input__icon el-icon-view el-input__clear",on:{click:e.handlePasswordVisible}}):e._e(),e.isWordLimitVisible?n("span",{staticClass:"el-input__count"},[n("span",{staticClass:"el-input__count-inner"},[e._v("\n            "+e._s(e.textLength)+"/"+e._s(e.upperLimit)+"\n          ")])]):e._e()],2),e.validateState?n("i",{staticClass:"el-input__icon",class:["el-input__validateIcon",e.validateIcon]}):e._e()]):e._e(),e.$slots.append?n("div",{staticClass:"el-input-group__append"},[e._t("append")],2):e._e()]:n("textarea",e._b({ref:"textarea",staticClass:"el-textarea__inner",style:e.textareaStyle,attrs:{tabindex:e.tabindex,disabled:e.inputDisabled,readonly:e.readonly,autocomplete:e.autoComplete||e.autocomplete,"aria-label":e.label},on:{compositionstart:e.handleCompositionStart,compositionupdate:e.handleCompositionUpdate,compositionend:e.handleCompositionEnd,input:e.handleInput,focus:e.handleFocus,blur:e.handleBlur,change:e.handleChange}},"textarea",e.$attrs,!1)),e.isWordLimitVisible&&"textarea"===e.type?n("span",{staticClass:"el-input__count"},[e._v(e._s(e.textLength)+"/"+e._s(e.upperLimit))]):e._e()],2)};r._withStripped=!0;var o=n(4),i=n.n(o),s=n(11),a=n.n(s),l=void 0,c="\n  height:0 !important;\n  visibility:hidden !important;\n  overflow:hidden !important;\n  position:absolute !important;\n  z-index:-1000 !important;\n  top:0 !important;\n  right:0 !important\n",u=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function d(e){var t=window.getComputedStyle(e),n=t.getPropertyValue("box-sizing"),r=parseFloat(t.getPropertyValue("padding-bottom"))+parseFloat(t.getPropertyValue("padding-top")),o=parseFloat(t.getPropertyValue("border-bottom-width"))+parseFloat(t.getPropertyValue("border-top-width"));return{contextStyle:u.map((function(e){return e+":"+t.getPropertyValue(e)})).join(";"),paddingSize:r,borderSize:o,boxSizing:n}}function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;l||(l=document.createElement("textarea"),document.body.appendChild(l));var r=d(e),o=r.paddingSize,i=r.borderSize,s=r.boxSizing,a=r.contextStyle;l.setAttribute("style",a+";"+c),l.value=e.value||e.placeholder||"";var u=l.scrollHeight,h={};"border-box"===s?u+=i:"content-box"===s&&(u-=o),l.value="";var p=l.scrollHeight-o;if(null!==t){var f=p*t;"border-box"===s&&(f=f+o+i),u=Math.max(f,u),h.minHeight=f+"px"}if(null!==n){var m=p*n;"border-box"===s&&(m=m+o+i),u=Math.min(m,u)}return h.height=u+"px",l.parentNode&&l.parentNode.removeChild(l),l=null,h}var p=n(9),f=n.n(p),m=n(21),g={name:"ElInput",componentName:"ElInput",mixins:[i.a,a.a],inheritAttrs:!1,inject:{elForm:{default:""},elFormItem:{default:""}},data:function(){return{textareaCalcStyle:{},hovering:!1,focused:!1,isComposing:!1,passwordVisible:!1}},props:{value:[String,Number],size:String,resize:String,form:String,disabled:Boolean,readonly:Boolean,type:{type:String,default:"text"},autosize:{type:[Boolean,Object],default:!1},autocomplete:{type:String,default:"off"},autoComplete:{type:String,validator:function(e){return!0}},validateEvent:{type:Boolean,default:!0},suffixIcon:String,prefixIcon:String,label:String,clearable:{type:Boolean,default:!1},showPassword:{type:Boolean,default:!1},showWordLimit:{type:Boolean,default:!1},tabindex:String},computed:{_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},validateState:function(){return this.elFormItem?this.elFormItem.validateState:""},needStatusIcon:function(){return!!this.elForm&&this.elForm.statusIcon},validateIcon:function(){return{validating:"el-icon-loading",success:"el-icon-circle-check",error:"el-icon-circle-close"}[this.validateState]},textareaStyle:function(){return f()({},this.textareaCalcStyle,{resize:this.resize})},inputSize:function(){return this.size||this._elFormItemSize||(this.$ELEMENT||{}).size},inputDisabled:function(){return this.disabled||(this.elForm||{}).disabled},nativeInputValue:function(){return null===this.value||void 0===this.value?"":String(this.value)},showClear:function(){return this.clearable&&!this.inputDisabled&&!this.readonly&&this.nativeInputValue&&(this.focused||this.hovering)},showPwdVisible:function(){return this.showPassword&&!this.inputDisabled&&!this.readonly&&(!!this.nativeInputValue||this.focused)},isWordLimitVisible:function(){return this.showWordLimit&&this.$attrs.maxlength&&("text"===this.type||"textarea"===this.type)&&!this.inputDisabled&&!this.readonly&&!this.showPassword},upperLimit:function(){return this.$attrs.maxlength},textLength:function(){return"number"==typeof this.value?String(this.value).length:(this.value||"").length},inputExceed:function(){return this.isWordLimitVisible&&this.textLength>this.upperLimit}},watch:{value:function(e){this.$nextTick(this.resizeTextarea),this.validateEvent&&this.dispatch("ElFormItem","el.form.change",[e])},nativeInputValue:function(){this.setNativeInputValue()},type:function(){var e=this;this.$nextTick((function(){e.setNativeInputValue(),e.resizeTextarea(),e.updateIconOffset()}))}},methods:{focus:function(){this.getInput().focus()},blur:function(){this.getInput().blur()},getMigratingConfig:function(){return{props:{icon:"icon is removed, use suffix-icon / prefix-icon instead.","on-icon-click":"on-icon-click is removed."},events:{click:"click is removed."}}},handleBlur:function(e){this.focused=!1,this.$emit("blur",e),this.validateEvent&&this.dispatch("ElFormItem","el.form.blur",[this.value])},select:function(){this.getInput().select()},resizeTextarea:function(){if(!this.$isServer){var e=this.autosize;if("textarea"===this.type)if(e){var t=e.minRows,n=e.maxRows;this.textareaCalcStyle=h(this.$refs.textarea,t,n)}else this.textareaCalcStyle={minHeight:h(this.$refs.textarea).minHeight}}},setNativeInputValue:function(){var e=this.getInput();e&&e.value!==this.nativeInputValue&&(e.value=this.nativeInputValue)},handleFocus:function(e){this.focused=!0,this.$emit("focus",e)},handleCompositionStart:function(){this.isComposing=!0},handleCompositionUpdate:function(e){var t=e.target.value,n=t[t.length-1]||"";this.isComposing=!Object(m.isKorean)(n)},handleCompositionEnd:function(e){this.isComposing&&(this.isComposing=!1,this.handleInput(e))},handleInput:function(e){this.isComposing||e.target.value!==this.nativeInputValue&&(this.$emit("input",e.target.value),this.$nextTick(this.setNativeInputValue))},handleChange:function(e){this.$emit("change",e.target.value)},calcIconOffset:function(e){var t=[].slice.call(this.$el.querySelectorAll(".el-input__"+e)||[]);if(t.length){for(var n=null,r=0;r<t.length;r++)if(t[r].parentNode===this.$el){n=t[r];break}if(n){var o={suffix:"append",prefix:"prepend"}[e];this.$slots[o]?n.style.transform="translateX("+("suffix"===e?"-":"")+this.$el.querySelector(".el-input-group__"+o).offsetWidth+"px)":n.removeAttribute("style")}}},updateIconOffset:function(){this.calcIconOffset("prefix"),this.calcIconOffset("suffix")},clear:function(){this.$emit("input",""),this.$emit("change",""),this.$emit("clear")},handlePasswordVisible:function(){this.passwordVisible=!this.passwordVisible,this.focus()},getInput:function(){return this.$refs.input||this.$refs.textarea},getSuffixVisible:function(){return this.$slots.suffix||this.suffixIcon||this.showClear||this.showPassword||this.isWordLimitVisible||this.validateState&&this.needStatusIcon}},created:function(){this.$on("inputSelect",this.select)},mounted:function(){this.setNativeInputValue(),this.resizeTextarea(),this.updateIconOffset()},updated:function(){this.$nextTick(this.updateIconOffset)}},v=n(0),y=Object(v.a)(g,r,[],!1,null,null,null);y.options.__file="packages/input/src/input.vue";var b=y.exports;b.install=function(e){e.component(b.name,b)},t.default=b},9:function(e,t){e.exports=ub}})}))),hb=qd((function(e){var t=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=t)})),pb=qd((function(e){var t=e.exports={version:"2.6.11"};"number"==typeof __e&&(__e=t)})),fb=(pb.version,function(e,t,n){if(function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!")}(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,o){return e.call(t,n,r,o)}}return function(){return e.apply(t,arguments)}}),mb=function(e){return"object"==typeof e?null!==e:"function"==typeof e},gb=function(e){if(!mb(e))throw TypeError(e+" is not an object!");return e},vb=function(e){try{return!!e()}catch(e){return!0}},yb=!vb((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})),bb=hb.document,wb=mb(bb)&&mb(bb.createElement),kb=function(e){return wb?bb.createElement(e):{}},xb=!yb&&!vb((function(){return 7!=Object.defineProperty(kb("div"),"a",{get:function(){return 7}}).a})),Sb=function(e,t){if(!mb(e))return e;var n,r;if(t&&"function"==typeof(n=e.toString)&&!mb(r=n.call(e)))return r;if("function"==typeof(n=e.valueOf)&&!mb(r=n.call(e)))return r;if(!t&&"function"==typeof(n=e.toString)&&!mb(r=n.call(e)))return r;throw TypeError("Can't convert object to primitive value")},Cb=Object.defineProperty,_b={f:yb?Object.defineProperty:function(e,t,n){if(gb(e),t=Sb(t,!0),gb(n),xb)try{return Cb(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},Ob=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},Mb=yb?function(e,t,n){return _b.f(e,t,Ob(1,n))}:function(e,t,n){return e[t]=n,e},Eb={}.hasOwnProperty,Tb=function(e,t){return Eb.call(e,t)},Ab=function(e,t,n){var r,o,i,s=e&Ab.F,a=e&Ab.G,l=e&Ab.S,c=e&Ab.P,u=e&Ab.B,d=e&Ab.W,h=a?pb:pb[t]||(pb[t]={}),p=h.prototype,f=a?hb:l?hb[t]:(hb[t]||{}).prototype;for(r in a&&(n=t),n)(o=!s&&f&&void 0!==f[r])&&Tb(h,r)||(i=o?f[r]:n[r],h[r]=a&&"function"!=typeof f[r]?n[r]:u&&o?fb(i,hb):d&&f[r]==i?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(i):c&&"function"==typeof i?fb(Function.call,i):i,c&&((h.virtual||(h.virtual={}))[r]=i,e&Ab.R&&p&&!p[r]&&Mb(p,r,i)))};Ab.F=1,Ab.G=2,Ab.S=4,Ab.P=8,Ab.B=16,Ab.W=32,Ab.U=64,Ab.R=128;var Nb,Rb=Ab,Db={}.toString,Ib=function(e){return Db.call(e).slice(8,-1)},zb=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==Ib(e)?e.split(""):Object(e)},Pb=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e},$b=function(e){return zb(Pb(e))},Fb=Math.ceil,Bb=Math.floor,jb=function(e){return isNaN(e=+e)?0:(e>0?Bb:Fb)(e)},Lb=Math.min,Vb=Math.max,qb=Math.min,Hb=qd((function(e){var t=hb["__core-js_shared__"]||(hb["__core-js_shared__"]={});(e.exports=function(e,n){return t[e]||(t[e]=void 0!==n?n:{})})("versions",[]).push({version:pb.version,mode:"pure",copyright:" 2019 Denis Pushkarev (zloirock.ru)"})})),Wb=0,Jb=Math.random(),Ub=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++Wb+Jb).toString(36))},Kb=Hb("keys"),Gb=function(e){return Kb[e]||(Kb[e]=Ub(e))},Xb=(Nb=!1,function(e,t,n){var r,o,i=$b(e),s=(r=i.length)>0?Lb(jb(r),9007199254740991):0,a=function(e,t){return(e=jb(e))<0?Vb(e+t,0):qb(e,t)}(n,s);if(Nb&&t!=t){for(;s>a;)if((o=i[a++])!=o)return!0}else for(;s>a;a++)if((Nb||a in i)&&i[a]===t)return Nb||a||0;return!Nb&&-1}),Zb=Gb("IE_PROTO"),Yb=function(e,t){var n,r=$b(e),o=0,i=[];for(n in r)n!=Zb&&Tb(r,n)&&i.push(n);for(;t.length>o;)Tb(r,n=t[o++])&&(~Xb(i,n)||i.push(n));return i},Qb="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),ew=Object.keys||function(e){return Yb(e,Qb)},tw={f:Object.getOwnPropertySymbols},nw={f:{}.propertyIsEnumerable},rw=function(e){return Object(Pb(e))},ow=Object.assign,iw=!ow||vb((function(){var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach((function(e){t[e]=e})),7!=ow({},e)[n]||Object.keys(ow({},t)).join("")!=r}))?function(e,t){for(var n=rw(e),r=arguments.length,o=1,i=tw.f,s=nw.f;r>o;)for(var a,l=zb(arguments[o++]),c=i?ew(l).concat(i(l)):ew(l),u=c.length,d=0;u>d;)a=c[d++],yb&&!s.call(l,a)||(n[a]=l[a]);return n}:ow;Rb(Rb.S+Rb.F,"Object",{assign:iw});var sw=pb.Object.assign,aw=qd((function(e){e.exports={default:sw,__esModule:!0}}));Vd(aw);var lw=Vd(qd((function(e,t){t.__esModule=!0;var n,r=(n=aw)&&n.__esModule?n:{default:n};t.default=r.default||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}}))),cw=Mb,uw=yb?Object.defineProperties:function(e,t){gb(e);for(var n,r=ew(t),o=r.length,i=0;o>i;)_b.f(e,n=r[i++],t[n]);return e},dw=hb.document,hw=dw&&dw.documentElement,pw=Gb("IE_PROTO"),fw=function(){},mw=function(){var e,t=kb("iframe"),n=Qb.length;for(t.style.display="none",hw.appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),mw=e.F;n--;)delete mw.prototype[Qb[n]];return mw()},gw=Object.create||function(e,t){var n;return null!==e?(fw.prototype=gb(e),n=new fw,fw.prototype=null,n[pw]=e):n=mw(),void 0===t?n:uw(n,t)},vw=qd((function(e){var t=Hb("wks"),n=hb.Symbol,r="function"==typeof n;(e.exports=function(e){return t[e]||(t[e]=r&&n[e]||(r?n:Ub)("Symbol."+e))}).store=t})),yw=_b.f,bw=vw("toStringTag"),ww=function(e,t,n){e&&!Tb(e=n?e:e.prototype,bw)&&yw(e,bw,{configurable:!0,value:t})},kw={};Mb(kw,vw("iterator"),(function(){return this}));var xw=function(e,t,n){e.prototype=gw(kw,{next:Ob(1,n)}),ww(e,t+" Iterator")},Sw=Gb("IE_PROTO"),Cw=Object.prototype,_w=Object.getPrototypeOf||function(e){return e=rw(e),Tb(e,Sw)?e[Sw]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?Cw:null},Ow=vw("iterator"),Mw=!([].keys&&"next"in[].keys()),Ew=function(e,t,n,r,o,i,s){xw(n,t,r);var a,l,c,u=function(e){if(!Mw&&e in f)return f[e];switch(e){case"keys":case"values":return function(){return new n(this,e)}}return function(){return new n(this,e)}},d=t+" Iterator",h="values"==o,p=!1,f=e.prototype,m=f[Ow]||f["@@iterator"]||o&&f[o],g=m||u(o),v=o?h?u("entries"):g:void 0,y="Array"==t&&f.entries||m;if(y&&(c=_w(y.call(new e)))!==Object.prototype&&c.next&&ww(c,d,!0),h&&m&&"values"!==m.name&&(p=!0,g=function(){return m.call(this)}),s&&(Mw||p||!f[Ow])&&Mb(f,Ow,g),o)if(a={values:h?g:u("values"),keys:i?g:u("keys"),entries:v},s)for(l in a)l in f||cw(f,l,a[l]);else Rb(Rb.P+Rb.F*(Mw||p),t,a);return a},Tw=function(e){return function(t,n){var r,o,i=String(Pb(t)),s=jb(n),a=i.length;return s<0||s>=a?e?"":void 0:(r=i.charCodeAt(s))<55296||r>56319||s+1===a||(o=i.charCodeAt(s+1))<56320||o>57343?e?i.charAt(s):r:e?i.slice(s,s+2):o-56320+(r-55296<<10)+65536}}(!0);Ew(String,"String",(function(e){this._t=String(e),this._i=0}),(function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=Tw(t,n),this._i+=e.length,{value:e,done:!1})}));for(var Aw=function(e,t){return{value:t,done:!!e}},Nw=(Ew(Array,"Array",(function(e,t){this._t=$b(e),this._i=0,this._k=t}),(function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,Aw(1)):Aw(0,"keys"==t?n:"values"==t?e[n]:[n,e[n]])}),"values"),vw("toStringTag")),Rw="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),Dw=0;Dw<Rw.length;Dw++){var Iw=Rw[Dw],zw=hb[Iw],Pw=zw&&zw.prototype;Pw&&!Pw[Nw]&&Mb(Pw,Nw,Iw)}var $w={f:vw},Fw=$w.f("iterator"),Bw=qd((function(e){e.exports={default:Fw,__esModule:!0}}));Vd(Bw);var jw=qd((function(e){var t=Ub("meta"),n=_b.f,r=0,o=Object.isExtensible||function(){return!0},i=!vb((function(){return o(Object.preventExtensions({}))})),s=function(e){n(e,t,{value:{i:"O"+ ++r,w:{}}})},a=e.exports={KEY:t,NEED:!1,fastKey:function(e,n){if(!mb(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!Tb(e,t)){if(!o(e))return"F";if(!n)return"E";s(e)}return e[t].i},getWeak:function(e,n){if(!Tb(e,t)){if(!o(e))return!0;if(!n)return!1;s(e)}return e[t].w},onFreeze:function(e){return i&&a.NEED&&o(e)&&!Tb(e,t)&&s(e),e}}})),Lw=(jw.KEY,jw.NEED,jw.fastKey,jw.getWeak,jw.onFreeze,_b.f),Vw=function(e){var t=pb.Symbol||(pb.Symbol={});"_"==e.charAt(0)||e in t||Lw(t,e,{value:$w.f(e)})},qw=Array.isArray||function(e){return"Array"==Ib(e)},Hw=Qb.concat("length","prototype"),Ww={f:Object.getOwnPropertyNames||function(e){return Yb(e,Hw)}},Jw=Ww.f,Uw={}.toString,Kw="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],Gw={f:function(e){return Kw&&"[object Window]"==Uw.call(e)?function(e){try{return Jw(e)}catch(e){return Kw.slice()}}(e):Jw($b(e))}},Xw=Object.getOwnPropertyDescriptor,Zw={f:yb?Xw:function(e,t){if(e=$b(e),t=Sb(t,!0),xb)try{return Xw(e,t)}catch(e){}if(Tb(e,t))return Ob(!nw.f.call(e,t),e[t])}},Yw=jw.KEY,Qw=Zw.f,ek=_b.f,tk=Gw.f,nk=hb.Symbol,rk=hb.JSON,ok=rk&&rk.stringify,ik=vw("_hidden"),sk=vw("toPrimitive"),ak={}.propertyIsEnumerable,lk=Hb("symbol-registry"),ck=Hb("symbols"),uk=Hb("op-symbols"),dk=Object.prototype,hk="function"==typeof nk&&!!tw.f,pk=hb.QObject,fk=!pk||!pk.prototype||!pk.prototype.findChild,mk=yb&&vb((function(){return 7!=gw(ek({},"a",{get:function(){return ek(this,"a",{value:7}).a}})).a}))?function(e,t,n){var r=Qw(dk,t);r&&delete dk[t],ek(e,t,n),r&&e!==dk&&ek(dk,t,r)}:ek,gk=function(e){var t=ck[e]=gw(nk.prototype);return t._k=e,t},vk=hk&&"symbol"==typeof nk.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof nk},yk=function(e,t,n){return e===dk&&yk(uk,t,n),gb(e),t=Sb(t,!0),gb(n),Tb(ck,t)?(n.enumerable?(Tb(e,ik)&&e[ik][t]&&(e[ik][t]=!1),n=gw(n,{enumerable:Ob(0,!1)})):(Tb(e,ik)||ek(e,ik,Ob(1,{})),e[ik][t]=!0),mk(e,t,n)):ek(e,t,n)},bk=function(e,t){gb(e);for(var n,r=function(e){var t=ew(e),n=tw.f;if(n)for(var r,o=n(e),i=nw.f,s=0;o.length>s;)i.call(e,r=o[s++])&&t.push(r);return t}(t=$b(t)),o=0,i=r.length;i>o;)yk(e,n=r[o++],t[n]);return e},wk=function(e){var t=ak.call(this,e=Sb(e,!0));return!(this===dk&&Tb(ck,e)&&!Tb(uk,e))&&(!(t||!Tb(this,e)||!Tb(ck,e)||Tb(this,ik)&&this[ik][e])||t)},kk=function(e,t){if(e=$b(e),t=Sb(t,!0),e!==dk||!Tb(ck,t)||Tb(uk,t)){var n=Qw(e,t);return!n||!Tb(ck,t)||Tb(e,ik)&&e[ik][t]||(n.enumerable=!0),n}},xk=function(e){for(var t,n=tk($b(e)),r=[],o=0;n.length>o;)Tb(ck,t=n[o++])||t==ik||t==Yw||r.push(t);return r},Sk=function(e){for(var t,n=e===dk,r=tk(n?uk:$b(e)),o=[],i=0;r.length>i;)!Tb(ck,t=r[i++])||n&&!Tb(dk,t)||o.push(ck[t]);return o};hk||(cw((nk=function(){if(this instanceof nk)throw TypeError("Symbol is not a constructor!");var e=Ub(arguments.length>0?arguments[0]:void 0),t=function(n){this===dk&&t.call(uk,n),Tb(this,ik)&&Tb(this[ik],e)&&(this[ik][e]=!1),mk(this,e,Ob(1,n))};return yb&&fk&&mk(dk,e,{configurable:!0,set:t}),gk(e)}).prototype,"toString",(function(){return this._k})),Zw.f=kk,_b.f=yk,Ww.f=Gw.f=xk,nw.f=wk,tw.f=Sk,$w.f=function(e){return gk(vw(e))}),Rb(Rb.G+Rb.W+Rb.F*!hk,{Symbol:nk});for(var Ck="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),_k=0;Ck.length>_k;)vw(Ck[_k++]);for(var Ok=ew(vw.store),Mk=0;Ok.length>Mk;)Vw(Ok[Mk++]);Rb(Rb.S+Rb.F*!hk,"Symbol",{for:function(e){return Tb(lk,e+="")?lk[e]:lk[e]=nk(e)},keyFor:function(e){if(!vk(e))throw TypeError(e+" is not a symbol!");for(var t in lk)if(lk[t]===e)return t},useSetter:function(){fk=!0},useSimple:function(){fk=!1}}),Rb(Rb.S+Rb.F*!hk,"Object",{create:function(e,t){return void 0===t?gw(e):bk(gw(e),t)},defineProperty:yk,defineProperties:bk,getOwnPropertyDescriptor:kk,getOwnPropertyNames:xk,getOwnPropertySymbols:Sk});var Ek=vb((function(){tw.f(1)}));Rb(Rb.S+Rb.F*Ek,"Object",{getOwnPropertySymbols:function(e){return tw.f(rw(e))}}),rk&&Rb(Rb.S+Rb.F*(!hk||vb((function(){var e=nk();return"[null]"!=ok([e])||"{}"!=ok({a:e})||"{}"!=ok(Object(e))}))),"JSON",{stringify:function(e){for(var t,n,r=[e],o=1;arguments.length>o;)r.push(arguments[o++]);if(n=t=r[1],(mb(t)||void 0!==e)&&!vk(e))return qw(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!vk(t))return t}),r[1]=t,ok.apply(rk,r)}}),nk.prototype[sk]||Mb(nk.prototype,sk,nk.prototype.valueOf),ww(nk,"Symbol"),ww(Math,"Math",!0),ww(hb.JSON,"JSON",!0);var Tk=Object.freeze({__proto__:null});Vw("asyncIterator"),Vw("observable"),Hd(Tk);var Ak=pb.Symbol,Nk=qd((function(e){e.exports={default:Ak,__esModule:!0}}));Vd(Nk);var Rk=Vd(qd((function(e,t){t.__esModule=!0;var n=i(Bw),r=i(Nk),o="function"==typeof r.default&&"symbol"==typeof n.default?function(e){return typeof e}:function(e){return e&&"function"==typeof r.default&&e.constructor===r.default&&e!==r.default.prototype?"symbol":typeof e};function i(e){return e&&e.__esModule?e:{default:e}}t.default="function"==typeof r.default&&"symbol"===o(n.default)?function(e){return void 0===e?"undefined":o(e)}:function(e){return e&&"function"==typeof r.default&&e.constructor===r.default&&e!==r.default.prototype?"symbol":void 0===e?"undefined":o(e)}}))),Dk=/%[sdj%]/g;function Ik(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=1,o=t[0],i=t.length;if("function"==typeof o)return o.apply(null,t.slice(1));if("string"==typeof o){for(var s=String(o).replace(Dk,(function(e){if("%%"===e)return"%";if(r>=i)return e;switch(e){case"%s":return String(t[r++]);case"%d":return Number(t[r++]);case"%j":try{return JSON.stringify(t[r++])}catch(e){return"[Circular]"}break;default:return e}})),a=t[r];r<i;a=t[++r])s+=" "+a;return s}return o}function zk(e,t){return null==e||!("array"!==t||!Array.isArray(e)||e.length)||!(!function(e){return"string"===e||"url"===e||"hex"===e||"email"===e||"pattern"===e}(t)||"string"!=typeof e||e)}function Pk(e,t,n){var r=0,o=e.length;!function i(s){if(s&&s.length)n(s);else{var a=r;r+=1,a<o?t(e[a],i):n([])}}([])}function $k(e,t,n,r){if(t.first)return Pk(function(e){var t=[];return Object.keys(e).forEach((function(n){t.push.apply(t,e[n])})),t}(e),n,r);var o=t.firstFields||[];!0===o&&(o=Object.keys(e));var i=Object.keys(e),s=i.length,a=0,l=[],c=function(e){l.push.apply(l,e),++a===s&&r(l)};i.forEach((function(t){var r=e[t];-1!==o.indexOf(t)?Pk(r,n,c):function(e,t,n){var r=[],o=0,i=e.length;function s(e){r.push.apply(r,e),++o===i&&n(r)}e.forEach((function(e){t(e,s)}))}(r,n,c)}))}function Fk(e){return function(t){return t&&t.message?(t.field=t.field||e.fullField,t):{message:t,field:t.field||e.fullField}}}function Bk(e,t){if(t)for(var n in t)if(t.hasOwnProperty(n)){var r=t[n];"object"===(void 0===r?"undefined":Rk(r))&&"object"===Rk(e[n])?e[n]=lw({},e[n],r):e[n]=r}return e}function jk(e,t,n,r,o,i){!e.required||n.hasOwnProperty(e.field)&&!zk(t,i||e.type)||r.push(Ik(o.messages.required,e.fullField))}var Lk={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,url:new RegExp("^(?!mailto:)(?:(?:http|https|ftp)://|//)(?:\\S+(?::\\S*)?@)?(?:(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[0-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))|localhost)(?::\\d{2,5})?(?:(/|\\?|#)[^\\s]*)?$","i"),hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},Vk={integer:function(e){return Vk.number(e)&&parseInt(e,10)===e},float:function(e){return Vk.number(e)&&!Vk.integer(e)},array:function(e){return Array.isArray(e)},regexp:function(e){if(e instanceof RegExp)return!0;try{return!!new RegExp(e)}catch(e){return!1}},date:function(e){return"function"==typeof e.getTime&&"function"==typeof e.getMonth&&"function"==typeof e.getYear},number:function(e){return!isNaN(e)&&"number"==typeof e},object:function(e){return"object"===(void 0===e?"undefined":Rk(e))&&!Vk.array(e)},method:function(e){return"function"==typeof e},email:function(e){return"string"==typeof e&&!!e.match(Lk.email)&&e.length<255},url:function(e){return"string"==typeof e&&!!e.match(Lk.url)},hex:function(e){return"string"==typeof e&&!!e.match(Lk.hex)}},qk={required:jk,whitespace:function(e,t,n,r,o){(/^\s+$/.test(t)||""===t)&&r.push(Ik(o.messages.whitespace,e.fullField))},type:function(e,t,n,r,o){if(e.required&&void 0===t)jk(e,t,n,r,o);else{var i=e.type;["integer","float","array","regexp","object","method","email","number","date","url","hex"].indexOf(i)>-1?Vk[i](t)||r.push(Ik(o.messages.types[i],e.fullField,e.type)):i&&(void 0===t?"undefined":Rk(t))!==e.type&&r.push(Ik(o.messages.types[i],e.fullField,e.type))}},range:function(e,t,n,r,o){var i="number"==typeof e.len,s="number"==typeof e.min,a="number"==typeof e.max,l=t,c=null,u="number"==typeof t,d="string"==typeof t,h=Array.isArray(t);if(u?c="number":d?c="string":h&&(c="array"),!c)return!1;h&&(l=t.length),d&&(l=t.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"_").length),i?l!==e.len&&r.push(Ik(o.messages[c].len,e.fullField,e.len)):s&&!a&&l<e.min?r.push(Ik(o.messages[c].min,e.fullField,e.min)):a&&!s&&l>e.max?r.push(Ik(o.messages[c].max,e.fullField,e.max)):s&&a&&(l<e.min||l>e.max)&&r.push(Ik(o.messages[c].range,e.fullField,e.min,e.max))},enum:function(e,t,n,r,o){e.enum=Array.isArray(e.enum)?e.enum:[],-1===e.enum.indexOf(t)&&r.push(Ik(o.messages.enum,e.fullField,e.enum.join(", ")))},pattern:function(e,t,n,r,o){e.pattern&&(e.pattern instanceof RegExp?(e.pattern.lastIndex=0,e.pattern.test(t)||r.push(Ik(o.messages.pattern.mismatch,e.fullField,t,e.pattern))):"string"==typeof e.pattern&&(new RegExp(e.pattern).test(t)||r.push(Ik(o.messages.pattern.mismatch,e.fullField,t,e.pattern))))}};function Hk(e,t,n,r,o){var i=e.type,s=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(zk(t,i)&&!e.required)return n();qk.required(e,t,r,s,o,i),zk(t,i)||qk.type(e,t,r,s,o)}n(s)}var Wk={string:function(e,t,n,r,o){var i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(zk(t,"string")&&!e.required)return n();qk.required(e,t,r,i,o,"string"),zk(t,"string")||(qk.type(e,t,r,i,o),qk.range(e,t,r,i,o),qk.pattern(e,t,r,i,o),!0===e.whitespace&&qk.whitespace(e,t,r,i,o))}n(i)},method:function(e,t,n,r,o){var i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(zk(t)&&!e.required)return n();qk.required(e,t,r,i,o),void 0!==t&&qk.type(e,t,r,i,o)}n(i)},number:function(e,t,n,r,o){var i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(zk(t)&&!e.required)return n();qk.required(e,t,r,i,o),void 0!==t&&(qk.type(e,t,r,i,o),qk.range(e,t,r,i,o))}n(i)},boolean:function(e,t,n,r,o){var i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(zk(t)&&!e.required)return n();qk.required(e,t,r,i,o),void 0!==t&&qk.type(e,t,r,i,o)}n(i)},regexp:function(e,t,n,r,o){var i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(zk(t)&&!e.required)return n();qk.required(e,t,r,i,o),zk(t)||qk.type(e,t,r,i,o)}n(i)},integer:function(e,t,n,r,o){var i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(zk(t)&&!e.required)return n();qk.required(e,t,r,i,o),void 0!==t&&(qk.type(e,t,r,i,o),qk.range(e,t,r,i,o))}n(i)},float:function(e,t,n,r,o){var i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(zk(t)&&!e.required)return n();qk.required(e,t,r,i,o),void 0!==t&&(qk.type(e,t,r,i,o),qk.range(e,t,r,i,o))}n(i)},array:function(e,t,n,r,o){var i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(zk(t,"array")&&!e.required)return n();qk.required(e,t,r,i,o,"array"),zk(t,"array")||(qk.type(e,t,r,i,o),qk.range(e,t,r,i,o))}n(i)},object:function(e,t,n,r,o){var i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(zk(t)&&!e.required)return n();qk.required(e,t,r,i,o),void 0!==t&&qk.type(e,t,r,i,o)}n(i)},enum:function(e,t,n,r,o){var i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(zk(t)&&!e.required)return n();qk.required(e,t,r,i,o),t&&qk.enum(e,t,r,i,o)}n(i)},pattern:function(e,t,n,r,o){var i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(zk(t,"string")&&!e.required)return n();qk.required(e,t,r,i,o),zk(t,"string")||qk.pattern(e,t,r,i,o)}n(i)},date:function(e,t,n,r,o){var i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(zk(t)&&!e.required)return n();if(qk.required(e,t,r,i,o),!zk(t)){var s=void 0;s="number"==typeof t?new Date(t):t,qk.type(e,s,r,i,o),s&&qk.range(e,s.getTime(),r,i,o)}}n(i)},url:Hk,hex:Hk,email:Hk,required:function(e,t,n,r,o){var i=[],s=Array.isArray(t)?"array":void 0===t?"undefined":Rk(t);qk.required(e,t,r,i,o,s),n(i)}};function Jk(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var e=JSON.parse(JSON.stringify(this));return e.clone=this.clone,e}}}var Uk=Jk();function Kk(e){this.rules=null,this._messages=Uk,this.define(e)}Kk.prototype={messages:function(e){return e&&(this._messages=Bk(Jk(),e)),this._messages},define:function(e){if(!e)throw new Error("Cannot configure a schema with no rules");if("object"!==(void 0===e?"undefined":Rk(e))||Array.isArray(e))throw new Error("Rules must be an object");this.rules={};var t=void 0,n=void 0;for(t in e)e.hasOwnProperty(t)&&(n=e[t],this.rules[t]=Array.isArray(n)?n:[n])},validate:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments[2],o=e,i=n,s=r;if("function"==typeof i&&(s=i,i={}),this.rules&&0!==Object.keys(this.rules).length){if(i.messages){var a=this.messages();a===Uk&&(a=Jk()),Bk(a,i.messages),i.messages=a}else i.messages=this.messages();var l=void 0,c=void 0,u={},d=i.keys||Object.keys(this.rules);d.forEach((function(n){l=t.rules[n],c=o[n],l.forEach((function(r){var i=r;"function"==typeof i.transform&&(o===e&&(o=lw({},o)),c=o[n]=i.transform(c)),(i="function"==typeof i?{validator:i}:lw({},i)).validator=t.getValidationMethod(i),i.field=n,i.fullField=i.fullField||n,i.type=t.getType(i),i.validator&&(u[n]=u[n]||[],u[n].push({rule:i,value:c,source:o,field:n}))}))}));var h={};$k(u,i,(function(e,t){var n=e.rule,r=!("object"!==n.type&&"array"!==n.type||"object"!==Rk(n.fields)&&"object"!==Rk(n.defaultField));function o(e,t){return lw({},t,{fullField:n.fullField+"."+e})}function s(){var s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=s;if(Array.isArray(a)||(a=[a]),a.length,a.length&&n.message&&(a=[].concat(n.message)),a=a.map(Fk(n)),i.first&&a.length)return h[n.field]=1,t(a);if(r){if(n.required&&!e.value)return a=n.message?[].concat(n.message).map(Fk(n)):i.error?[i.error(n,Ik(i.messages.required,n.field))]:[],t(a);var l={};if(n.defaultField)for(var c in e.value)e.value.hasOwnProperty(c)&&(l[c]=n.defaultField);for(var u in l=lw({},l,e.rule.fields))if(l.hasOwnProperty(u)){var d=Array.isArray(l[u])?l[u]:[l[u]];l[u]=d.map(o.bind(null,u))}var p=new Kk(l);p.messages(i.messages),e.rule.options&&(e.rule.options.messages=i.messages,e.rule.options.error=i.error),p.validate(e.value,e.rule.options||i,(function(e){t(e&&e.length?a.concat(e):e)}))}else t(a)}r=r&&(n.required||!n.required&&e.value),n.field=e.field;var a=n.validator(n,e.value,s,e.source,i);a&&a.then&&a.then((function(){return s()}),(function(e){return s(e)}))}),(function(e){p(e)}))}else s&&s();function p(e){var t,n=void 0,r=void 0,o=[],i={};for(n=0;n<e.length;n++)t=e[n],Array.isArray(t)?o=o.concat.apply(o,t):o.push(t);if(o.length)for(n=0;n<o.length;n++)i[r=o[n].field]=i[r]||[],i[r].push(o[n]);else o=null,i=null;s(o,i)}},getType:function(e){if(void 0===e.type&&e.pattern instanceof RegExp&&(e.type="pattern"),"function"!=typeof e.validator&&e.type&&!Wk.hasOwnProperty(e.type))throw new Error(Ik("Unknown rule type %s",e.type));return e.type||"string"},getValidationMethod:function(e){if("function"==typeof e.validator)return e.validator;var t=Object.keys(e),n=t.indexOf("message");return-1!==n&&t.splice(n,1),1===t.length&&"required"===t[0]?Wk.required:Wk[this.getType(e)]||!1}},Kk.register=function(e,t){if("function"!=typeof t)throw new Error("Cannot register a validator by type, validator is not a function");Wk[e]=t},Kk.messages=Uk;var Gk,Xk=Hd(Object.freeze({__proto__:null,default:Kk})),Zk=Vd(qd((function(e){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/",n(n.s=67)}({0:function(e,t,n){function r(e,t,n,r,o,i,s,a){var l,c="function"==typeof e?e.options:e;if(t&&(c.render=t,c.staticRenderFns=n,c._compiled=!0),r&&(c.functional=!0),i&&(c._scopeId="data-v-"+i),s?(l=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),o&&o.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(s)},c._ssrRegister=l):o&&(l=a?function(){o.call(this,this.$root.$options.shadowRoot)}:o),l)if(c.functional){c._injectStyles=l;var u=c.render;c.render=function(e,t){return l.call(t),u(e,t)}}else{var d=c.beforeCreate;c.beforeCreate=d?[].concat(d,l):[l]}return{exports:e,options:c}}n.d(t,"a",(function(){return r}))},3:function(e,t){e.exports=sb},4:function(e,t){e.exports=cb},48:function(e,t){e.exports=Xk},67:function(e,t,n){n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"el-form-item",class:[{"el-form-item--feedback":e.elForm&&e.elForm.statusIcon,"is-error":"error"===e.validateState,"is-validating":"validating"===e.validateState,"is-success":"success"===e.validateState,"is-required":e.isRequired||e.required,"is-no-asterisk":e.elForm&&e.elForm.hideRequiredAsterisk},e.sizeClass?"el-form-item--"+e.sizeClass:""]},[n("label-wrap",{attrs:{"is-auto-width":e.labelStyle&&"auto"===e.labelStyle.width,"update-all":"auto"===e.form.labelWidth}},[e.label||e.$slots.label?n("label",{staticClass:"el-form-item__label",style:e.labelStyle,attrs:{for:e.labelFor}},[e._t("label",[e._v(e._s(e.label+e.form.labelSuffix))])],2):e._e()]),n("div",{staticClass:"el-form-item__content",style:e.contentStyle},[e._t("default"),n("transition",{attrs:{name:"el-zoom-in-top"}},["error"===e.validateState&&e.showMessage&&e.form.showMessage?e._t("error",[n("div",{staticClass:"el-form-item__error",class:{"el-form-item__error--inline":"boolean"==typeof e.inlineMessage?e.inlineMessage:e.elForm&&e.elForm.inlineMessage||!1}},[e._v("\n          "+e._s(e.validateMessage)+"\n        ")])],{error:e.validateMessage}):e._e()],2)],2)],1)};r._withStripped=!0;var o=n(48),i=n.n(o),s=n(4),a=n.n(s),l=n(9),c=n.n(l),u=n(3),d={props:{isAutoWidth:Boolean,updateAll:Boolean},inject:["elForm","elFormItem"],render:function(){var e=arguments[0],t=this.$slots.default;if(!t)return null;if(this.isAutoWidth){var n=this.elForm.autoLabelWidth,r={};if(n&&"auto"!==n){var o=parseInt(n,10)-this.computedWidth;o&&(r.marginLeft=o+"px")}return e("div",{class:"el-form-item__label-wrap",style:r},[t])}return t[0]},methods:{getLabelWidth:function(){if(this.$el&&this.$el.firstElementChild){var e=window.getComputedStyle(this.$el.firstElementChild).width;return Math.ceil(parseFloat(e))}return 0},updateLabelWidth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"update";this.$slots.default&&this.isAutoWidth&&this.$el.firstElementChild&&("update"===e?this.computedWidth=this.getLabelWidth():"remove"===e&&this.elForm.deregisterLabelWidth(this.computedWidth))}},watch:{computedWidth:function(e,t){this.updateAll&&(this.elForm.registerLabelWidth(e,t),this.elFormItem.updateComputedLabelWidth(e))}},data:function(){return{computedWidth:0}},mounted:function(){this.updateLabelWidth("update")},updated:function(){this.updateLabelWidth("update")},beforeDestroy:function(){this.updateLabelWidth("remove")}},h=n(0),p=Object(h.a)(d,void 0,void 0,!1,null,null,null);p.options.__file="packages/form/src/label-wrap.vue";var f=p.exports,m={name:"ElFormItem",componentName:"ElFormItem",mixins:[a.a],provide:function(){return{elFormItem:this}},inject:["elForm"],props:{label:String,labelWidth:String,prop:String,required:{type:Boolean,default:void 0},rules:[Object,Array],error:String,validateStatus:String,for:String,inlineMessage:{type:[String,Boolean],default:""},showMessage:{type:Boolean,default:!0},size:String},components:{LabelWrap:f},watch:{error:{immediate:!0,handler:function(e){this.validateMessage=e,this.validateState=e?"error":""}},validateStatus:function(e){this.validateState=e}},computed:{labelFor:function(){return this.for||this.prop},labelStyle:function(){var e={};if("top"===this.form.labelPosition)return e;var t=this.labelWidth||this.form.labelWidth;return t&&(e.width=t),e},contentStyle:function(){var e={},t=this.label;if("top"===this.form.labelPosition||this.form.inline)return e;if(!t&&!this.labelWidth&&this.isNested)return e;var n=this.labelWidth||this.form.labelWidth;return"auto"===n?"auto"===this.labelWidth?e.marginLeft=this.computedLabelWidth:"auto"===this.form.labelWidth&&(e.marginLeft=this.elForm.autoLabelWidth):e.marginLeft=n,e},form:function(){for(var e=this.$parent,t=e.$options.componentName;"ElForm"!==t;)"ElFormItem"===t&&(this.isNested=!0),t=(e=e.$parent).$options.componentName;return e},fieldValue:function(){var e=this.form.model;if(e&&this.prop){var t=this.prop;return-1!==t.indexOf(":")&&(t=t.replace(/:/,".")),Object(u.getPropByPath)(e,t,!0).v}},isRequired:function(){var e=this.getRules(),t=!1;return e&&e.length&&e.every((function(e){return!e.required||(t=!0,!1)})),t},_formSize:function(){return this.elForm.size},elFormItemSize:function(){return this.size||this._formSize},sizeClass:function(){return this.elFormItemSize||(this.$ELEMENT||{}).size}},data:function(){return{validateState:"",validateMessage:"",validateDisabled:!1,validator:{},isNested:!1,computedLabelWidth:""}},methods:{validate:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u.noop;this.validateDisabled=!1;var r=this.getFilteredRule(e);if((!r||0===r.length)&&void 0===this.required)return n(),!0;this.validateState="validating";var o={};r&&r.length>0&&r.forEach((function(e){delete e.trigger})),o[this.prop]=r;var s=new i.a(o),a={};a[this.prop]=this.fieldValue,s.validate(a,{firstFields:!0},(function(e,r){t.validateState=e?"error":"success",t.validateMessage=e?e[0].message:"",n(t.validateMessage,r),t.elForm&&t.elForm.$emit("validate",t.prop,!e,t.validateMessage||null)}))},clearValidate:function(){this.validateState="",this.validateMessage="",this.validateDisabled=!1},resetField:function(){var e=this;this.validateState="",this.validateMessage="";var t=this.form.model,n=this.fieldValue,r=this.prop;-1!==r.indexOf(":")&&(r=r.replace(/:/,"."));var o=Object(u.getPropByPath)(t,r,!0);this.validateDisabled=!0,Array.isArray(n)?o.o[o.k]=[].concat(this.initialValue):o.o[o.k]=this.initialValue,this.$nextTick((function(){e.validateDisabled=!1})),this.broadcast("ElTimeSelect","fieldReset",this.initialValue)},getRules:function(){var e=this.form.rules,t=this.rules,n=void 0!==this.required?{required:!!this.required}:[],r=Object(u.getPropByPath)(e,this.prop||"");return e=e?r.o[this.prop||""]||r.v:[],[].concat(t||e||[]).concat(n)},getFilteredRule:function(e){return this.getRules().filter((function(t){return!t.trigger||""===e||(Array.isArray(t.trigger)?t.trigger.indexOf(e)>-1:t.trigger===e)})).map((function(e){return c()({},e)}))},onFieldBlur:function(){this.validate("blur")},onFieldChange:function(){this.validateDisabled?this.validateDisabled=!1:this.validate("change")},updateComputedLabelWidth:function(e){this.computedLabelWidth=e?e+"px":""},addValidateEvents:function(){(this.getRules().length||void 0!==this.required)&&(this.$on("el.form.blur",this.onFieldBlur),this.$on("el.form.change",this.onFieldChange))},removeValidateEvents:function(){this.$off()}},mounted:function(){if(this.prop){this.dispatch("ElForm","el.form.addField",[this]);var e=this.fieldValue;Array.isArray(e)&&(e=[].concat(e)),Object.defineProperty(this,"initialValue",{value:e}),this.addValidateEvents()}},beforeDestroy:function(){this.dispatch("ElForm","el.form.removeField",[this])}},g=Object(h.a)(m,r,[],!1,null,null,null);g.options.__file="packages/form/src/form-item.vue";var v=g.exports;v.install=function(e){e.component(v.name,v)},t.default=v},9:function(e,t){e.exports=ub}})}))),Yk=Vd(qd((function(e){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/",n(n.s=121)}({0:function(e,t,n){function r(e,t,n,r,o,i,s,a){var l,c="function"==typeof e?e.options:e;if(t&&(c.render=t,c.staticRenderFns=n,c._compiled=!0),r&&(c.functional=!0),i&&(c._scopeId="data-v-"+i),s?(l=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),o&&o.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(s)},c._ssrRegister=l):o&&(l=a?function(){o.call(this,this.$root.$options.shadowRoot)}:o),l)if(c.functional){c._injectStyles=l;var u=c.render;c.render=function(e,t){return l.call(t),u(e,t)}}else{var d=c.beforeCreate;c.beforeCreate=d?[].concat(d,l):[l]}return{exports:e,options:c}}n.d(t,"a",(function(){return r}))},121:function(e,t,n){n.r(t);var r=function(){var e=this.$createElement;return(this._self._c||e)("form",{staticClass:"el-form",class:[this.labelPosition?"el-form--label-"+this.labelPosition:"",{"el-form--inline":this.inline}]},[this._t("default")],2)};r._withStripped=!0;var o=n(9),i=n.n(o),s={name:"ElForm",componentName:"ElForm",provide:function(){return{elForm:this}},props:{model:Object,rules:Object,labelPosition:String,labelWidth:String,labelSuffix:{type:String,default:""},inline:Boolean,inlineMessage:Boolean,statusIcon:Boolean,showMessage:{type:Boolean,default:!0},size:String,disabled:Boolean,validateOnRuleChange:{type:Boolean,default:!0},hideRequiredAsterisk:{type:Boolean,default:!1}},watch:{rules:function(){this.fields.forEach((function(e){e.removeValidateEvents(),e.addValidateEvents()})),this.validateOnRuleChange&&this.validate((function(){}))}},computed:{autoLabelWidth:function(){if(!this.potentialLabelWidthArr.length)return 0;var e=Math.max.apply(Math,this.potentialLabelWidthArr);return e?e+"px":""}},data:function(){return{fields:[],potentialLabelWidthArr:[]}},created:function(){var e=this;this.$on("el.form.addField",(function(t){t&&e.fields.push(t)})),this.$on("el.form.removeField",(function(t){t.prop&&e.fields.splice(e.fields.indexOf(t),1)}))},methods:{resetFields:function(){this.model?this.fields.forEach((function(e){e.resetField()})):console.warn("[Element Warn][Form]model is required for resetFields to work.")},clearValidate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=e.length?"string"==typeof e?this.fields.filter((function(t){return e===t.prop})):this.fields.filter((function(t){return e.indexOf(t.prop)>-1})):this.fields;t.forEach((function(e){e.clearValidate()}))},validate:function(e){var t=this;if(this.model){var n=void 0;"function"!=typeof e&&window.Promise&&(n=new window.Promise((function(t,n){e=function(e){e?t(e):n(e)}})));var r=!0,o=0;0===this.fields.length&&e&&e(!0);var s={};return this.fields.forEach((function(n){n.validate("",(function(n,a){n&&(r=!1),s=i()({},s,a),"function"==typeof e&&++o===t.fields.length&&e(r,s)}))})),n||void 0}console.warn("[Element Warn][Form]model is required for validate to work!")},validateField:function(e,t){e=[].concat(e);var n=this.fields.filter((function(t){return-1!==e.indexOf(t.prop)}));n.length?n.forEach((function(e){e.validate("",t)})):console.warn("[Element Warn]please pass correct props!")},getLabelWidthIndex:function(e){var t=this.potentialLabelWidthArr.indexOf(e);if(-1===t)throw new Error("[ElementForm]unpected width ",e);return t},registerLabelWidth:function(e,t){if(e&&t){var n=this.getLabelWidthIndex(t);this.potentialLabelWidthArr.splice(n,1,e)}else e&&this.potentialLabelWidthArr.push(e)},deregisterLabelWidth:function(e){var t=this.getLabelWidthIndex(e);this.potentialLabelWidthArr.splice(t,1)}}},a=n(0),l=Object(a.a)(s,r,[],!1,null,null,null);l.options.__file="packages/form/src/form.vue";var c=l.exports;c.install=function(e){e.component(c.name,c)},t.default=c},9:function(e,t){e.exports=ub}})}))),Qk=function(e){jm(n,r["default"]);var t=Hm(n);function n(){var e;return Jf(this,n),(e=t.apply(this,arguments)).linkAttrs=e.initLinkAttrs,e.editLinkDialogVisible=!1,e}return Kf(n,[{key:"updateLinkAttrs",value:function(){this.editorContext.commands.link(this.linkAttrs),this.closeEditLinkDialog()}},{key:"openEditLinkDialog",value:function(){this.editLinkDialogVisible=!0}},{key:"closeEditLinkDialog",value:function(){this.editLinkDialogVisible=!1}}]),n}();Wm([dg({type:Object,required:!0})],Qk.prototype,"editorContext",void 0),Wm([dg({type:Object,required:!0})],Qk.prototype,"initLinkAttrs",void 0),Wm([lg()],Qk.prototype,"et",void 0);const ex=Iy({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("command-button",{attrs:{command:e.openEditLinkDialog,"enable-tooltip":e.et.tooltip,tooltip:e.et.t("editor.extensions.Link.edit.tooltip"),icon:"edit"}}),e._v(" "),n("el-dialog",{attrs:{title:e.et.t("editor.extensions.Link.edit.control.title"),visible:e.editLinkDialogVisible,"append-to-body":!0,width:"400px","custom-class":"el-tiptap-edit-link-dialog"},on:{"update:visible":function(t){e.editLinkDialogVisible=t}},scopedSlots:e._u([{key:"footer",fn:function(){return[n("el-button",{attrs:{size:"small",round:""},on:{click:e.closeEditLinkDialog}},[e._v("\n        "+e._s(e.et.t("editor.extensions.Link.edit.control.cancel"))+"\n      ")]),e._v(" "),n("el-button",{attrs:{type:"primary",size:"small",round:""},on:{mousedown:function(e){e.preventDefault()},click:e.updateLinkAttrs}},[e._v("\n        "+e._s(e.et.t("editor.extensions.Link.edit.control.confirm"))+"\n      ")])]},proxy:!0}])},[n("el-form",{attrs:{model:e.linkAttrs,"label-position":"right",size:"small"}},[n("el-form-item",{attrs:{label:e.et.t("editor.extensions.Link.edit.control.href"),prop:"href"}},[n("el-input",{attrs:{autocomplete:"off"},model:{value:e.linkAttrs.href,callback:function(t){e.$set(e.linkAttrs,"href",t)},expression:"linkAttrs.href"}})],1),e._v(" "),n("el-form-item",{attrs:{prop:"openInNewTab"}},[n("el-checkbox",{model:{value:e.linkAttrs.openInNewTab,callback:function(t){e.$set(e.linkAttrs,"openInNewTab",t)},expression:"linkAttrs.openInNewTab"}},[e._v("\n          "+e._s(e.et.t("editor.extensions.Link.edit.control.open_in_new_tab"))+"\n        ")])],1)],1)],1)],1)},staticRenderFns:[]},void 0,Qk=Wm([ag({components:(Gk={},Fm(Gk,Ed().name,Ed()),Fm(Gk,Yk.name,Yk),Fm(Gk,Zk.name,Zk),Fm(Gk,db.name,db),Fm(Gk,Od().name,Od()),Fm(Gk,Cd().name,Cd()),Fm(Gk,"CommandButton",nb),Gk)})],Qk),void 0,!1,void 0,!1,void 0,void 0,void 0);var tx=function(e){jm(n,r["default"]);var t=Hm(n);function n(){return Jf(this,n),t.apply(this,arguments)}return n}();Wm([dg({type:Object,required:!0})],tx.prototype,"editorContext",void 0),Wm([lg()],tx.prototype,"et",void 0);const nx=Iy({render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("command-button",{attrs:{command:function(){return e.editorContext.commands.link({href:""})},"enable-tooltip":e.et.tooltip,tooltip:e.et.t("editor.extensions.Link.unlink.tooltip"),icon:"unlink"}})},staticRenderFns:[]},void 0,tx=Wm([ag({components:{CommandButton:nb}})],tx),void 0,!1,void 0,!1,void 0,void 0,void 0);var rx=function(e){jm(n,r["default"]);var t=Hm(n);function n(){return Jf(this,n),t.apply(this,arguments)}return Kf(n,[{key:"linkAttrs",get:function(){return(0,this.editorContext.getMarkAttrs)("link")}}]),n}();Wm([dg({type:Object,required:!0})],rx.prototype,"editorContext",void 0);const ox=Iy({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"link-bubble-menu"},[e._t("prepend"),e._v(" "),n("open-link-command-button",{attrs:{url:e.linkAttrs.href}}),e._v(" "),n("edit-link-command-button",{attrs:{"editor-context":e.editorContext,"init-link-attrs":e.linkAttrs}}),e._v(" "),n("unlink-command-button",{attrs:{"editor-context":e.editorContext}})],2)},staticRenderFns:[]},void 0,rx=Wm([ag({components:{OpenLinkCommandButton:ob,EditLinkCommandButton:ex,UnlinkCommandButton:nx}})],rx),void 0,!1,void 0,!1,void 0,void 0,void 0);var ix=function(e){jm(n,r["default"]);var t=Hm(n);function n(){var e;return Jf(this,n),(e=t.apply(this,arguments)).activeMenu="none",e.isLinkBack=!1,e}return Kf(n,[{key:"linkBack",value:function(){this.setMenuType("default"),this.isLinkBack=!0}},{key:"onSelectionChange",value:function(e){this.$_isLinkSelection(e)?this.isLinkBack||this.setMenuType("link"):(this.activeMenu=this.$_getCurrentMenuType(),this.isLinkBack=!1)}},{key:"generateCommandButtonComponentSpecs",value:function(e){var t=this;return this.editor.extensions.extensions.reduce((function(n,r){if(!r.options.bubble)return n;if("function"!=typeof r.menuBtnView)return n;var o=r.menuBtnView(Object.assign(Object.assign({},e),{editor:t.editor,t:t.et.t}));return Array.isArray(o)?[].concat($m(n),$m(o)):[].concat($m(n),[o])}),[])}},{key:"setMenuType",value:function(e){this.activeMenu=e}},{key:"$_isLinkSelection",value:function(e){var t=this.editor.schema.marks.link;if(!t)return!1;if(!e)return!1;var n=e.$from,r=e.$to,o=eb(n,t);return!!o&&o.to===r.pos}},{key:"$_getCurrentMenuType",value:function(){return this.isLinkSelection?"link":this.editor.state.selection instanceof $t||this.editor.state.selection instanceof Lt?"default":"none"}},{key:"bubbleMenuEnable",get:function(){return this.linkMenuEnable||this.textMenuEnable}},{key:"linkMenuEnable",get:function(){return!!this.editor.schema.marks.link}},{key:"textMenuEnable",get:function(){return this.editor.extensions.extensions.some((function(e){return e.options.bubble}))}},{key:"isLinkSelection",get:function(){var e=this.editor.state.tr.selection;return this.$_isLinkSelection(e)}}]),n}();Wm([dg({type:Cl,required:!0})],ix.prototype,"editor",void 0),Wm([dg({type:Object,default:function(){return{}}})],ix.prototype,"menuBubbleOptions",void 0),Wm([lg()],ix.prototype,"et",void 0),Wm([hg("editor.state.selection")],ix.prototype,"onSelectionChange",null);const sx=Iy({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("editor-menu-bubble",e._b({attrs:{editor:e.editor},scopedSlots:e._u([{key:"default",fn:function(t){return[n("div",{staticClass:"el-tiptap-editor__menu-bubble",class:{"el-tiptap-editor__menu-bubble--active":t.menu.isActive&&e.bubbleMenuEnable},style:"\n      left: "+t.menu.left+"px;\n      bottom: "+(t.menu.bottom+10)+"px;\n    "},["link"===e.activeMenu?n("link-bubble-menu",{attrs:{editorContext:Object.assign({},t,{editor:e.editor})},scopedSlots:e._u([{key:"prepend",fn:function(){return[e.textMenuEnable?n("div",{staticClass:"el-tiptap-editor__command-button",on:{mousedown:function(e){e.preventDefault()},click:e.linkBack}},[n("v-icon",{attrs:{name:"arrow-left"}})],1):e._e()]},proxy:!0}],null,!0)}):"default"===e.activeMenu?e._l(e.generateCommandButtonComponentSpecs(t),(function(t,r){return n(t.component,e._g(e._b({key:"command-button"+r,tag:"component",attrs:{"enable-tooltip":e.et.tooltip}},"component",t.componentProps,!1),t.componentEvents))})):e._e()],2)]}}])},"editor-menu-bubble",e.menuBubbleOptions,!1))},staticRenderFns:[]},void 0,ix=Wm([ag({components:{"v-icon":Xy,EditorMenuBubble:Il,LinkBubbleMenu:ox}})],ix),void 0,!1,void 0,!1,void 0,void 0,void 0);var ax,lx,cx=["transaction","focus","blur","paste","drop"],ux=function(e){jm(n,tg(Ay,Ry));var t=Hm(n);function n(){var e;return Jf(this,n),(e=t.apply(this,arguments)).editor=null,e.emitAfterOnUpdate=!1,e.isFullscreen=!1,e}return Kf(n,[{key:"onContentChange",value:function(e){this.emitAfterOnUpdate?this.emitAfterOnUpdate=!1:this.editor&&this.editor.setContent(e)}},{key:"onReadonlyChange",value:function(){this.editor&&this.editor.setOptions({editable:!this.readonly})}},{key:"mounted",value:function(){var e=this,t=this.generateExtensions(),n=cx.reduce((function(t,n){return Object.assign(Object.assign({},t),Fm({},"on".concat(Ey(n)),(function(){return e.emitEvent.bind(e)(n)})))}),{});this.editor=new Cl(Object.assign(Object.assign(Object.assign(Object.assign({},this.editorProperties),{editable:!this.readonly,useBuiltInExtensions:!1,extensions:t}),n),{content:this.content,onUpdate:this.onUpdate.bind(this)})),this.$emit(this.genEvent("init"),{editor:this.editor})}},{key:"beforeDestroy",value:function(){this.editor&&this.editor.destroy()}},{key:"generateExtensions",value:function(){var e=$m(this.extensions);return e.push(new gg({spellcheck:this.spellcheckEnabled})),e.push(this.initPlaceholderExtension()),e}},{key:"emitEvent",value:function(e){this.$emit(this.genEvent(e),{editor:this.editor})}},{key:"onUpdate",value:function(e){var t;this.emitAfterOnUpdate=!0,t="html"===this.output?e.getHTML():JSON.stringify(e.getJSON()),this.$emit(this.genEvent("update"),t,e)}},{key:"t",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.i18nHandler.apply(this,t)}},{key:"genEvent",value:function(e){return"on".concat(Ey(e))}},{key:"getTitleExtension",value:function(){if(this.extensions.find((function(e){return"doc"===e.name})).options.title){var e=this.extensions.find((function(e){return"title"===e.name}));if(e)return e}return null}},{key:"initPlaceholderExtension",value:function(){var e=this,t=this.getTitleExtension();return new bd(t?{emptyEditorClass:"el-tiptap-editor--empty",emptyNodeClass:"el-tiptap-editor__with-title-placeholder",showOnlyCurrent:!1,emptyNodeText:function(n){return"title"===n.type.name?t.options.placeholder:e.placeholder}}:{emptyEditorClass:"el-tiptap-editor--empty",emptyNodeClass:"el-tiptap-editor__placeholder",emptyNodeText:this.placeholder})}},{key:"et",get:function(){return this}},{key:"characters",get:function(){return this.editor?this.editor.state.doc.textContent.length:0}},{key:"showFooter",get:function(){return this.charCounterCount&&!this.isCodeViewMode}},{key:"spellcheckEnabled",get:function(){return null==this.spellcheck?!this.$elementTiptapPlugin||this.$elementTiptapPlugin.spellcheck:this.spellcheck}},{key:"i18nHandler",get:function(){var e=this.lang||this.$elementTiptapPlugin.lang;return km.buildI18nHandler(e)}}]),n}();Wm([dg({type:Array,default:function(){return[]}})],ux.prototype,"extensions",void 0),Wm([(ax="onUpdate",lx={type:String,default:""},void 0===lx&&(lx={}),function(e,t){ug(lx,e,t),eg((function(e,t){(e.props||(e.props={}))[t]=lx,e.model={prop:t,event:ax||t}}))(e,t)})],ux.prototype,"content",void 0),Wm([dg({type:String,default:""})],ux.prototype,"placeholder",void 0),Wm([dg({type:Object,default:function(){return{}}})],ux.prototype,"editorProperties",void 0),Wm([dg({type:String,default:"html",validator:function(e){return["html","json"].includes(e)}})],ux.prototype,"output",void 0),Wm([dg({type:Boolean,default:!1})],ux.prototype,"readonly",void 0),Wm([dg({type:Boolean,default:void 0})],ux.prototype,"spellcheck",void 0),Wm([dg({type:Boolean,default:!0})],ux.prototype,"tooltip",void 0),Wm([dg({type:String,default:void 0,validator:function(e){return km.isLangSupported(e)}})],ux.prototype,"lang",void 0),Wm([dg({type:[String,Array,Object],default:void 0})],ux.prototype,"editorClass",void 0),Wm([dg({type:[String,Array,Object],default:void 0})],ux.prototype,"editorContentClass",void 0),Wm([dg({type:[String,Array,Object],default:void 0})],ux.prototype,"editorMenubarClass",void 0),Wm([dg({type:[String,Array,Object],default:void 0})],ux.prototype,"editorBubbleMenuClass",void 0),Wm([dg({type:[String,Array,Object],default:void 0})],ux.prototype,"editorFooterClass",void 0),Wm([dg({type:Object,default:function(){return{}}})],ux.prototype,"menuBubbleOptions",void 0),Wm([function(e){return eg((function(t,n){var r,o=t.provide;("function"!=typeof(r=o)||!r.managed&&!r.managedReactive)&&(o=t.provide=function(e){var t=function(){var n=this,r="function"==typeof e?e.call(this):e;for(var o in(r=Object.create(r||null)).__reactiveInject__=this.__reactiveInject__||{},t.managed)r[t.managed[o]]=this[o];var i=function(e){r[t.managedReactive[e]]=s[e],r.__reactiveInject__.hasOwnProperty(t.managedReactive[e])||Object.defineProperty(r.__reactiveInject__,t.managedReactive[e],{enumerable:!0,get:function(){return n[e]}})},s=this;for(var o in t.managedReactive)i(o);return r};return t.managed={},t.managedReactive={},t}(o)),o.managed[n]=e||n}))}()],ux.prototype,"et",null),Wm([hg("content")],ux.prototype,"onContentChange",null),Wm([hg("readonly")],ux.prototype,"onReadonlyChange",null);const dx=Iy({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.editor?n("div",{class:[{"el-tiptap-editor":!0,"el-tiptap-editor--fullscreen":e.isFullscreen},e.editorClass],style:e.elTiptapEditorStyle},[n("menu-bubble",{class:e.editorBubbleMenuClass,attrs:{editor:e.editor,menuBubbleOptions:e.menuBubbleOptions}}),e._v(" "),e.showMenubar?n("menu-bar",{class:[{"border-top-radius":e.showMenubar},e.editorMenubarClass],attrs:{editor:e.editor},scopedSlots:e._u([e.$scopedSlots.menubar?{key:"default",fn:function(t){return[e._t("menubar",null,null,t)]}}:null],null,!0)}):e._e(),e._v(" "),e.isCodeViewMode?n("div",{class:{"el-tiptap-editor__codemirror":!0,"border-bottom-radius":e.isCodeViewMode}},[n("textarea",{ref:"cmTextArea"})]):e._e(),e._v(" "),n("editor-content",{directives:[{name:"show",rawName:"v-show",value:!e.isCodeViewMode,expression:"!isCodeViewMode"}],class:[{"el-tiptap-editor__content":!0,"border-top-radius":!e.showMenubar,"border-bottom-radius":!e.showFooter},e.editorContentClass],attrs:{editor:e.editor}}),e._v(" "),e._t("footer",[e.showFooter?n("div",{class:[{"el-tiptap-editor__footer":!0,"border-bottom-radius":e.showFooter},e.editorFooterClass]},[n("span",{staticClass:"el-tiptap-editor__characters"},[e._v("\n        "+e._s(e.t("editor.characters"))+": "+e._s(e.characters)+"\n      ")])]):e._e()],{editor:e.editor})],2):e._e()},staticRenderFns:[]},void 0,ux=Wm([ag({components:{MenuBar:zy,MenuBubble:sx,EditorContent:_l},inject:[]})],ux),void 0,!1,void 0,!1,void 0,void 0,void 0);var hx=function(e){jm(n,wl);var t=Hm(n);function n(){return Jf(this,n),t.apply(this,arguments)}return Kf(n,[{key:"defaultOptions",get:function(){return{title:!1}}},{key:"schema",get:function(){return{content:this.options.title?"title block+":"block+"}}}]),n}(),px=_m.forEach,fx=uf("forEach"),mx=of("forEach"),gx=fx&&mx?[].forEach:function(e){return px(this,e,arguments.length>1?arguments[1]:void 0)};wp({target:"Array",proto:!0,forced:[].forEach!=gx},{forEach:gx});var vx=["paragraph","heading","list_item","todo_item"],yx=/^\d+(.\d+)?$/;function bx(e){if(!e)return"";var t=String(e);if(yx.test(t)){var n=parseFloat(t);t=String(Math.round(100*n))+"%"}return 1.7*parseFloat(t)+"%"}function wx(e,t){var n=e,r=n.selection,o=n.doc;if(!r||!o)return e;if(!(r instanceof $t||r instanceof Lt))return e;var i=r.from,s=r.to,a=[],l=t&&"100%"!==t?t:null;return o.nodesBetween(i,s,(function(e,t){var n=e.type;return!vx.includes(n.name)||((e.attrs.lineHeight||null)!==l&&a.push({node:e,pos:t,nodeType:n}),"list_item"!==n.name&&"todo_item"!==n.name)})),a.length?(a.forEach((function(t){var n=t.node,r=t.pos,o=t.nodeType,i=n.attrs;i=Object.assign(Object.assign({},i),{lineHeight:l}),e=e.setNodeMarkup(r,o,i,n.marks)})),e):e}var kx={attrs:{textAlign:{default:null},indent:{default:null},lineHeight:{default:null}},content:"inline*",group:"block",parseDOM:[{tag:"p",getAttrs:xx}],toDOM:Sx};function xx(e){var t=e.style,n=t.textAlign,r=t.lineHeight,o=e.getAttribute("data-text-align")||n||"";return{textAlign:o=vm.test(o)?o:null,indent:parseInt(e.getAttribute("data-indent"),10)||0,lineHeight:r=function(e){if(!e)return"";if("100%"===e)return"";var t=e;if(yx.test(e)){var n=parseFloat(e);if("100%"===(t=String(Math.round(100*n))+"%"))return""}return parseFloat(t)/1.7+"%"}(r)||null}}function Sx(e){var t=e.attrs,n=t.textAlign,r=t.indent,o=t.lineHeight,i="",s={};if(n&&"left"!==n&&(i+="text-align: ".concat(n,";")),r&&(s["data-indent"]=r),o){var a=bx(o);i+="line-height: ".concat(a,";")}return i&&(s.style=i),["p",s,0]}var Cx,_x=function(e){jm(n,kl);var t=Hm(n);function n(){return Jf(this,n),t.apply(this,arguments)}return Kf(n,[{key:"schema",get:function(){return kx}}]),n}(),Ox=Sx,Mx=xx,Ex=(function(e){jm(n,bl);var t=Hm(n);function n(){return Jf(this,n),t.apply(this,arguments)}Kf(n,[{key:"name",get:function(){return"title"}},{key:"defaultOptions",get:function(){return{placeholder:"",class:""}}},{key:"schema",get:function(){var e=this;return{attrs:{textAlign:{default:null}},content:"inline*",parseDOM:[{tag:"h1",getAttrs:Mx}],toDOM:function(t){var n=Ox(t);return["h1",Object.assign(Object.assign({},n[1]),{class:e.options.class}),0]}}}}])}(),_m.map),Tx=Fp("map"),Ax=of("map");function Nx(e,t){var n=function(e){var t=e.schema.nodes.heading;return(0,wd.Tr)(t)(e.selection)}(e);return null==t?!!n:!!(n&&n.node&&n.node.attrs&&n.node.attrs.level===t)}wp({target:"Array",proto:!0,forced:!Tx||!Ax},{map:function(e){return Ex(this,e,arguments.length>1?arguments[1]:void 0)}}),zf("match",1,(function(e,t,n){return[function(t){var n=rh(this),r=null==t?void 0:t[e];return void 0!==r?r.call(t,n):new RegExp(t)[e](String(n))},function(e){var r=n(t,e,this);if(r.done)return r.value;var o=mh(e),i=String(this);if(!o.global)return Vf(o,i);var s=o.unicode;o.lastIndex=0;for(var a,l=[],c=0;null!==(a=Vf(o,i));){var u=String(a[0]);l[c]=u,""===u&&(o.lastIndex=Lf(i,Yh(o.lastIndex),s)),c++}return 0===c?null:l}]}));var Rx=function(e){jm(n,r["default"]);var t=Hm(n);function n(){return Jf(this,n),t.apply(this,arguments)}return Kf(n,[{key:"isHeadingActive",value:function(e){return Nx(this.editor.state,e)}},{key:"editor",get:function(){return this.editorContext.editor}},{key:"level",get:function(){return this.editor.extensions.options.heading.level}}]),n}();Wm([dg({type:Object,required:!0})],Rx.prototype,"editorContext",void 0),Wm([lg()],Rx.prototype,"et",void 0);const Dx=Iy({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dropdown",{attrs:{placement:"bottom",trigger:"click"},on:{command:function(t){return t>0?e.editorContext.commands.heading({level:t}):e.editorContext.commands.paragraph()}}},[n("command-button",{attrs:{"is-active":e.isHeadingActive(),"enable-tooltip":e.et.tooltip,tooltip:e.et.t("editor.extensions.Heading.tooltip"),readonly:e.et.isCodeViewMode,icon:"heading"}}),e._v(" "),n("el-dropdown-menu",{staticClass:"el-tiptap-dropdown-menu",attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{staticClass:"el-tiptap-dropdown-menu__item",class:{"el-tiptap-dropdown-menu__item--active":e.editorContext.isActive.paragraph()},attrs:{command:0}},[n("span",[e._v(e._s(e.et.t("editor.extensions.Heading.buttons.paragraph")))])]),e._v(" "),e._l(e.level,(function(t){return n("el-dropdown-item",{key:t,staticClass:"el-tiptap-dropdown-menu__item",class:{"el-tiptap-dropdown-menu__item--active":e.isHeadingActive(t)},attrs:{command:t}},[n("h"+t,{tag:"component",attrs:{"data-item-type":"heading"}},[e._v("\n        "+e._s(e.et.t("editor.extensions.Heading.buttons.heading"))+" "+e._s(t)+"\n      ")])],1)}))],2)],1)},staticRenderFns:[]},void 0,Rx=Wm([ag({components:(Cx={},Fm(Cx,Id().name,Id()),Fm(Cx,Rd().name,Rd()),Fm(Cx,Ad().name,Ad()),Fm(Cx,"CommandButton",nb),Cx)})],Rx),void 0,!1,void 0,!1,void 0,void 0,void 0);function Ix(e){var t=Mx(e),n=e.nodeName.match(/[H|h](\d)/)[1];return t.level=Number(n),t}function zx(e){var t=Ox(e),n=e.attrs.level||1;return t[0]="h".concat(n),t}var Px=function(e){jm(n,ed);var t=Hm(n);function n(){return Jf(this,n),t.apply(this,arguments)}return Kf(n,[{key:"menuBtnView",value:function(e){return{component:Dx,componentProps:{editorContext:e}}}},{key:"schema",get:function(){return Object.assign(Object.assign({},kx),{attrs:Object.assign(Object.assign({},kx.attrs),{level:{default:1}}),defining:!0,draggable:!1,parseDOM:this.options.levels.map((function(e){return{tag:"h".concat(e),getAttrs:Ix}})),toDOM:zx})}}]),n}(),$x=Object.assign(Object.assign({},kx),{attrs:{textAlign:{default:null},indent:{default:null}},content:"block*",defining:!0,parseDOM:[{tag:"blockquote",getAttrs:function(e){return Mx(e)}}],toDOM:function(e){var t=Ox(e);return t[0]="blockquote",t}}),Fx=function(e){jm(n,Zu);var t=Hm(n);function n(){return Jf(this,n),t.apply(this,arguments)}return Kf(n,[{key:"menuBtnView",value:function(e){var t=e.isActive,n=e.commands,r=e.t;return{component:nb,componentProps:{command:n.blockquote,isActive:t.blockquote(),icon:"quote-right",tooltip:r("editor.extensions.Blockquote.tooltip")}}}},{key:"schema",get:function(){return $x}}]),n}(),Bx=function(e){jm(n,Qu);var t=Hm(n);function n(){return Jf(this,n),t.apply(this,arguments)}return Kf(n,[{key:"menuBtnView",value:function(e){var t=e.isActive,n=e.commands,r=e.t;return{component:nb,componentProps:{command:n.code_block,isActive:t.code_block(),icon:"code",tooltip:r("editor.extensions.CodeBlock.tooltip")}}}}]),n}(),jx={attrs:{textAlign:{default:null},lineHeight:{default:null}},content:"paragraph block*",defining:!0,draggable:!1,parseDOM:[{tag:"li",getAttrs:function(e){var t=e.style,n=t.textAlign,r=t.lineHeight,o=e.getAttribute("data-text-align")||n||"";return o=vm.test(o)?o:null,r=r&&r!==bx(1.7)?r:null,{textAlign:o,lineHeight:r}}}],toDOM:function(e){var t=e.attrs,n=t.textAlign,r=t.lineHeight,o="",i={};if(n&&"left"!==n&&(o+="text-align: ".concat(n)),r){var s=bx(r);o+="line-height: ".concat(s,";")}return o&&(i.style=o),["li",i,0]}},Lx=function(e){jm(n,od);var t=Hm(n);function n(){return Jf(this,n),t.apply(this,arguments)}return Kf(n,[{key:"schema",get:function(){return jx}}]),n}(),Vx=function(e){jm(n,Yu);var t=Hm(n);function n(){return Jf(this,n),t.apply(this,arguments)}return Kf(n,[{key:"menuBtnView",value:function(e){var t=e.isActive,n=e.commands,r=e.t;return{component:nb,componentProps:{isActive:t.bullet_list(),command:n.bullet_list,icon:"list-ul",tooltip:r("editor.extensions.BulletList.tooltip")}}}}]),n}(),qx=function(e){jm(n,id);var t=Hm(n);function n(){return Jf(this,n),t.apply(this,arguments)}return Kf(n,[{key:"menuBtnView",value:function(e){var t=e.isActive,n=e.commands,r=e.t;return{component:nb,componentProps:{isActive:t.ordered_list(),command:n.ordered_list,icon:"list-ol",tooltip:r("editor.extensions.OrderedList.tooltip")}}}}]),n}(),Hx=qd((function(e,t){t.__esModule=!0,t.isInContainer=t.getScrollContainer=t.isScroll=t.getStyle=t.once=t.off=t.on=void 0;var n,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.hasClass=h,t.addClass=function(e,t){if(e){for(var n=e.className,r=(t||"").split(" "),o=0,i=r.length;o<i;o++){var s=r[o];s&&(e.classList?e.classList.add(s):h(e,s)||(n+=" "+s))}e.classList||(e.className=n)}},t.removeClass=function(e,t){if(e&&t){for(var n=t.split(" "),r=" "+e.className+" ",o=0,i=n.length;o<i;o++){var s=n[o];s&&(e.classList?e.classList.remove(s):h(e,s)&&(r=r.replace(" "+s+" "," ")))}e.classList||(e.className=function(e){return(e||"").replace(/^[\s\uFEFF]+|[\s\uFEFF]+$/g,"")}(r))}},t.setStyle=function e(t,n,r){if(t&&n)if("object"===(void 0===n?"undefined":o(n)))for(var i in n)n.hasOwnProperty(i)&&e(t,i,n[i]);else"opacity"===(n=c(n))&&l<9?t.style.filter=isNaN(r)?"":"alpha(opacity="+100*r+")":t.style[n]=r};var i=((n=r["default"])&&n.__esModule?n:{default:n}).default.prototype.$isServer,s=/([\:\-\_]+(.))/g,a=/^moz([A-Z])/,l=i?0:Number(document.documentMode),c=function(e){return e.replace(s,(function(e,t,n,r){return r?n.toUpperCase():n})).replace(a,"Moz$1")},u=t.on=!i&&document.addEventListener?function(e,t,n){e&&t&&n&&e.addEventListener(t,n,!1)}:function(e,t,n){e&&t&&n&&e.attachEvent("on"+t,n)},d=t.off=!i&&document.removeEventListener?function(e,t,n){e&&t&&e.removeEventListener(t,n,!1)}:function(e,t,n){e&&t&&e.detachEvent("on"+t,n)};function h(e,t){if(!e||!t)return!1;if(-1!==t.indexOf(" "))throw new Error("className should not contain space.");return e.classList?e.classList.contains(t):(" "+e.className+" ").indexOf(" "+t+" ")>-1}t.once=function(e,t,n){u(e,t,(function r(){n&&n.apply(this,arguments),d(e,t,r)}))};var p=t.getStyle=l<9?function(e,n){if(!i){if(!e||!n)return null;"float"===(n=c(n))&&(n="styleFloat");try{switch(n){case"opacity":try{return e.filters.item("alpha").opacity/100}catch(e){return 1}default:return e.style[n]||e.currentStyle?e.currentStyle[n]:null}}catch(t){return e.style[n]}}}:function(e,t){if(!i){if(!e||!t)return null;"float"===(t=c(t))&&(t="cssFloat");try{var n=document.defaultView.getComputedStyle(e,"");return e.style[t]||n?n[t]:null}catch(n){return e.style[t]}}},f=t.isScroll=function(e,t){if(!i)return p(e,null!==t||void 0!==t?t?"overflow-y":"overflow-x":"overflow").match(/(scroll|auto)/)};t.getScrollContainer=function(e,t){if(!i){for(var n=e;n;){if([window,document,document.documentElement].includes(n))return window;if(f(n,t))return n;n=n.parentNode}return n}},t.isInContainer=function(e,t){if(i||!e||!t)return!1;var n=e.getBoundingClientRect(),r=void 0;return r=[window,document,document.documentElement,null,void 0].includes(t)?{top:0,right:window.innerWidth,bottom:window.innerHeight,left:0}:t.getBoundingClientRect(),n.top<r.bottom&&n.bottom>r.top&&n.right>r.left&&n.left<r.right}}));Vd(Hx),Hx.isInContainer,Hx.getScrollContainer,Hx.isScroll,Hx.getStyle,Hx.once,Hx.off,Hx.on,Hx.hasClass,Hx.addClass,Hx.removeClass,Hx.setStyle;var Wx=qd((function(e,t){t.__esModule=!0;var n,o=(n=r["default"])&&n.__esModule?n:{default:n},i=!1,s=!1,a=void 0,l=function(){if(!o.default.prototype.$isServer){var e=u.modalDom;return e?i=!0:(i=!1,e=document.createElement("div"),u.modalDom=e,e.addEventListener("touchmove",(function(e){e.preventDefault(),e.stopPropagation()})),e.addEventListener("click",(function(){u.doOnModalClick&&u.doOnModalClick()}))),e}},c={},u={modalFade:!0,getInstance:function(e){return c[e]},register:function(e,t){e&&t&&(c[e]=t)},deregister:function(e){e&&(c[e]=null,delete c[e])},nextZIndex:function(){return u.zIndex++},modalStack:[],doOnModalClick:function(){var e=u.modalStack[u.modalStack.length-1];if(e){var t=u.getInstance(e.id);t&&t.closeOnClickModal&&t.close()}},openModal:function(e,t,n,r,s){if(!o.default.prototype.$isServer&&e&&void 0!==t){this.modalFade=s;for(var a=this.modalStack,c=0,u=a.length;c<u;c++)if(a[c].id===e)return;var d=l();(0,Hx.addClass)(d,"v-modal"),this.modalFade&&!i&&(0,Hx.addClass)(d,"v-modal-enter"),r&&r.trim().split(/\s+/).forEach((function(e){return(0,Hx.addClass)(d,e)})),setTimeout((function(){(0,Hx.removeClass)(d,"v-modal-enter")}),200),n&&n.parentNode&&11!==n.parentNode.nodeType?n.parentNode.appendChild(d):document.body.appendChild(d),t&&(d.style.zIndex=t),d.tabIndex=0,d.style.display="",this.modalStack.push({id:e,zIndex:t,modalClass:r})}},closeModal:function(e){var t=this.modalStack,n=l();if(t.length>0){var r=t[t.length-1];if(r.id===e)r.modalClass&&r.modalClass.trim().split(/\s+/).forEach((function(e){return(0,Hx.removeClass)(n,e)})),t.pop(),t.length>0&&(n.style.zIndex=t[t.length-1].zIndex);else for(var o=t.length-1;o>=0;o--)if(t[o].id===e){t.splice(o,1);break}}0===t.length&&(this.modalFade&&(0,Hx.addClass)(n,"v-modal-leave"),setTimeout((function(){0===t.length&&(n.parentNode&&n.parentNode.removeChild(n),n.style.display="none",u.modalDom=void 0),(0,Hx.removeClass)(n,"v-modal-leave")}),200))}};Object.defineProperty(u,"zIndex",{configurable:!0,get:function(){return s||(a=a||(o.default.prototype.$ELEMENT||{}).zIndex||2e3,s=!0),a},set:function(e){a=e}}),o.default.prototype.$isServer||window.addEventListener("keydown",(function(e){if(27===e.keyCode){var t=function(){if(!o.default.prototype.$isServer&&u.modalStack.length>0){var e=u.modalStack[u.modalStack.length-1];if(!e)return;return u.getInstance(e.id)}}();t&&t.closeOnPressEscape&&(t.handleClose?t.handleClose():t.handleAction?t.handleAction("cancel"):t.close())}})),t.default=u}));Vd(Wx);var Jx=qd((function(e,t){t.__esModule=!0,t.default=function(){if(o.default.prototype.$isServer)return 0;if(void 0!==i)return i;var e=document.createElement("div");e.className="el-scrollbar__wrap",e.style.visibility="hidden",e.style.width="100px",e.style.position="absolute",e.style.top="-9999px",document.body.appendChild(e);var t=e.offsetWidth;e.style.overflow="scroll";var n=document.createElement("div");n.style.width="100%",e.appendChild(n);var r=n.offsetWidth;return e.parentNode.removeChild(e),i=t-r};var n,o=(n=r["default"])&&n.__esModule?n:{default:n},i=void 0}));Vd(Jx);var Ux=qd((function(e,t){t.__esModule=!0,t.PopupManager=void 0;var n=a(r["default"]),o=a(ub),i=a(Wx),s=a(Jx);function a(e){return e&&e.__esModule?e:{default:e}}var l=1,c=void 0;t.default={props:{visible:{type:Boolean,default:!1},openDelay:{},closeDelay:{},zIndex:{},modal:{type:Boolean,default:!1},modalFade:{type:Boolean,default:!0},modalClass:{},modalAppendToBody:{type:Boolean,default:!1},lockScroll:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!1},closeOnClickModal:{type:Boolean,default:!1}},beforeMount:function(){this._popupId="popup-"+l++,i.default.register(this._popupId,this)},beforeDestroy:function(){i.default.deregister(this._popupId),i.default.closeModal(this._popupId),this.restoreBodyStyle()},data:function(){return{opened:!1,bodyPaddingRight:null,computedBodyPaddingRight:0,withoutHiddenClass:!0,rendered:!1}},watch:{visible:function(e){var t=this;if(e){if(this._opening)return;this.rendered?this.open():(this.rendered=!0,n.default.nextTick((function(){t.open()})))}else this.close()}},methods:{open:function(e){var t=this;this.rendered||(this.rendered=!0);var n=(0,o.default)({},this.$props||this,e);this._closeTimer&&(clearTimeout(this._closeTimer),this._closeTimer=null),clearTimeout(this._openTimer);var r=Number(n.openDelay);r>0?this._openTimer=setTimeout((function(){t._openTimer=null,t.doOpen(n)}),r):this.doOpen(n)},doOpen:function(e){if(!this.$isServer&&(!this.willOpen||this.willOpen())&&!this.opened){this._opening=!0;var t=this.$el,n=e.modal,r=e.zIndex;if(r&&(i.default.zIndex=r),n&&(this._closing&&(i.default.closeModal(this._popupId),this._closing=!1),i.default.openModal(this._popupId,i.default.nextZIndex(),this.modalAppendToBody?void 0:t,e.modalClass,e.modalFade),e.lockScroll)){this.withoutHiddenClass=!(0,Hx.hasClass)(document.body,"el-popup-parent--hidden"),this.withoutHiddenClass&&(this.bodyPaddingRight=document.body.style.paddingRight,this.computedBodyPaddingRight=parseInt((0,Hx.getStyle)(document.body,"paddingRight"),10)),c=(0,s.default)();var o=document.documentElement.clientHeight<document.body.scrollHeight,a=(0,Hx.getStyle)(document.body,"overflowY");c>0&&(o||"scroll"===a)&&this.withoutHiddenClass&&(document.body.style.paddingRight=this.computedBodyPaddingRight+c+"px"),(0,Hx.addClass)(document.body,"el-popup-parent--hidden")}"static"===getComputedStyle(t).position&&(t.style.position="absolute"),t.style.zIndex=i.default.nextZIndex(),this.opened=!0,this.onOpen&&this.onOpen(),this.doAfterOpen()}},doAfterOpen:function(){this._opening=!1},close:function(){var e=this;if(!this.willClose||this.willClose()){null!==this._openTimer&&(clearTimeout(this._openTimer),this._openTimer=null),clearTimeout(this._closeTimer);var t=Number(this.closeDelay);t>0?this._closeTimer=setTimeout((function(){e._closeTimer=null,e.doClose()}),t):this.doClose()}},doClose:function(){this._closing=!0,this.onClose&&this.onClose(),this.lockScroll&&setTimeout(this.restoreBodyStyle,200),this.opened=!1,this.doAfterClose()},doAfterClose:function(){i.default.closeModal(this._popupId),this._closing=!1},restoreBodyStyle:function(){this.modal&&this.withoutHiddenClass&&(document.body.style.paddingRight=this.bodyPaddingRight,(0,Hx.removeClass)(document.body,"el-popup-parent--hidden")),this.withoutHiddenClass=!0}}},t.PopupManager=i.default}));Vd(Ux),Ux.PopupManager;var Kx=qd((function(e,t){t.__esModule=!0,t.default=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:300,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!e||!t)throw new Error("instance & callback is required");var o=!1,i=function(){o||(o=!0,t&&t.apply(null,arguments))};r?e.$once("after-leave",i):e.$on("after-leave",i),setTimeout((function(){i()}),n+100)}}));Vd(Kx);var Gx,Xx=Vd(qd((function(e){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/",n(n.s=68)}({0:function(e,t,n){function r(e,t,n,r,o,i,s,a){var l,c="function"==typeof e?e.options:e;if(t&&(c.render=t,c.staticRenderFns=n,c._compiled=!0),r&&(c.functional=!0),i&&(c._scopeId="data-v-"+i),s?(l=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),o&&o.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(s)},c._ssrRegister=l):o&&(l=a?function(){o.call(this,this.$root.$options.shadowRoot)}:o),l)if(c.functional){c._injectStyles=l;var u=c.render;c.render=function(e,t){return l.call(t),u(e,t)}}else{var d=c.beforeCreate;c.beforeCreate=d?[].concat(d,l):[l]}return{exports:e,options:c}}n.d(t,"a",(function(){return r}))},15:function(e,t){e.exports=Ux},2:function(e,t){e.exports=Hx},41:function(e,t){e.exports=Kx},68:function(e,t,n){n.r(t);var r=n(7),o=n.n(r),i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"el-loading-fade"},on:{"after-leave":e.handleAfterLeave}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"el-loading-mask",class:[e.customClass,{"is-fullscreen":e.fullscreen}],style:{backgroundColor:e.background||""}},[n("div",{staticClass:"el-loading-spinner"},[e.spinner?n("i",{class:e.spinner}):n("svg",{staticClass:"circular",attrs:{viewBox:"25 25 50 50"}},[n("circle",{staticClass:"path",attrs:{cx:"50",cy:"50",r:"20",fill:"none"}})]),e.text?n("p",{staticClass:"el-loading-text"},[e._v(e._s(e.text))]):e._e()])])])};i._withStripped=!0;var s={data:function(){return{text:null,spinner:null,background:null,fullscreen:!0,visible:!1,customClass:""}},methods:{handleAfterLeave:function(){this.$emit("after-leave")},setText:function(e){this.text=e}}},a=n(0),l=Object(a.a)(s,i,[],!1,null,null,null);l.options.__file="packages/loading/src/loading.vue";var c=l.exports,u=n(2),d=n(15),h=n(41),p=n.n(h),f=o.a.extend(c),m={install:function(e){if(!e.prototype.$isServer){var t=function(t,r){r.value?e.nextTick((function(){r.modifiers.fullscreen?(t.originalPosition=Object(u.getStyle)(document.body,"position"),t.originalOverflow=Object(u.getStyle)(document.body,"overflow"),t.maskStyle.zIndex=d.PopupManager.nextZIndex(),Object(u.addClass)(t.mask,"is-fullscreen"),n(document.body,t,r)):(Object(u.removeClass)(t.mask,"is-fullscreen"),r.modifiers.body?(t.originalPosition=Object(u.getStyle)(document.body,"position"),["top","left"].forEach((function(e){var n="top"===e?"scrollTop":"scrollLeft";t.maskStyle[e]=t.getBoundingClientRect()[e]+document.body[n]+document.documentElement[n]-parseInt(Object(u.getStyle)(document.body,"margin-"+e),10)+"px"})),["height","width"].forEach((function(e){t.maskStyle[e]=t.getBoundingClientRect()[e]+"px"})),n(document.body,t,r)):(t.originalPosition=Object(u.getStyle)(t,"position"),n(t,t,r)))})):(p()(t.instance,(function(e){if(t.instance.hiding){t.domVisible=!1;var n=r.modifiers.fullscreen||r.modifiers.body?document.body:t;Object(u.removeClass)(n,"el-loading-parent--relative"),Object(u.removeClass)(n,"el-loading-parent--hidden"),t.instance.hiding=!1}}),300,!0),t.instance.visible=!1,t.instance.hiding=!0)},n=function(t,n,r){n.domVisible||"none"===Object(u.getStyle)(n,"display")||"hidden"===Object(u.getStyle)(n,"visibility")?n.domVisible&&!0===n.instance.hiding&&(n.instance.visible=!0,n.instance.hiding=!1):(Object.keys(n.maskStyle).forEach((function(e){n.mask.style[e]=n.maskStyle[e]})),"absolute"!==n.originalPosition&&"fixed"!==n.originalPosition&&Object(u.addClass)(t,"el-loading-parent--relative"),r.modifiers.fullscreen&&r.modifiers.lock&&Object(u.addClass)(t,"el-loading-parent--hidden"),n.domVisible=!0,t.appendChild(n.mask),e.nextTick((function(){n.instance.hiding?n.instance.$emit("after-leave"):n.instance.visible=!0})),n.domInserted=!0)};e.directive("loading",{bind:function(e,n,r){var o=e.getAttribute("element-loading-text"),i=e.getAttribute("element-loading-spinner"),s=e.getAttribute("element-loading-background"),a=e.getAttribute("element-loading-custom-class"),l=r.context,c=new f({el:document.createElement("div"),data:{text:l&&l[o]||o,spinner:l&&l[i]||i,background:l&&l[s]||s,customClass:l&&l[a]||a,fullscreen:!!n.modifiers.fullscreen}});e.instance=c,e.mask=c.$el,e.maskStyle={},n.value&&t(e,n)},update:function(e,n){e.instance.setText(e.getAttribute("element-loading-text")),n.oldValue!==n.value&&t(e,n)},unbind:function(e,n){e.domInserted&&(e.mask&&e.mask.parentNode&&e.mask.parentNode.removeChild(e.mask),t(e,{value:!1,modifiers:n.modifiers})),e.instance&&e.instance.$destroy()}})}}},g=m,v=n(9),y=n.n(v),b=o.a.extend(c),w={text:null,fullscreen:!0,body:!1,lock:!1,customClass:""},k=void 0;b.prototype.originalPosition="",b.prototype.originalOverflow="",b.prototype.close=function(){var e=this;this.fullscreen&&(k=void 0),p()(this,(function(t){var n=e.fullscreen||e.body?document.body:e.target;Object(u.removeClass)(n,"el-loading-parent--relative"),Object(u.removeClass)(n,"el-loading-parent--hidden"),e.$el&&e.$el.parentNode&&e.$el.parentNode.removeChild(e.$el),e.$destroy()}),300),this.visible=!1};var x=function(e,t,n){var r={};e.fullscreen?(n.originalPosition=Object(u.getStyle)(document.body,"position"),n.originalOverflow=Object(u.getStyle)(document.body,"overflow"),r.zIndex=d.PopupManager.nextZIndex()):e.body?(n.originalPosition=Object(u.getStyle)(document.body,"position"),["top","left"].forEach((function(t){var n="top"===t?"scrollTop":"scrollLeft";r[t]=e.target.getBoundingClientRect()[t]+document.body[n]+document.documentElement[n]+"px"})),["height","width"].forEach((function(t){r[t]=e.target.getBoundingClientRect()[t]+"px"}))):n.originalPosition=Object(u.getStyle)(t,"position"),Object.keys(r).forEach((function(e){n.$el.style[e]=r[e]}))},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!o.a.prototype.$isServer){if("string"==typeof(e=y()({},w,e)).target&&(e.target=document.querySelector(e.target)),e.target=e.target||document.body,e.target!==document.body?e.fullscreen=!1:e.body=!0,e.fullscreen&&k)return k;var t=e.body?document.body:e.target,n=new b({el:document.createElement("div"),data:e});return x(e,t,n),"absolute"!==n.originalPosition&&"fixed"!==n.originalPosition&&Object(u.addClass)(t,"el-loading-parent--relative"),e.fullscreen&&e.lock&&Object(u.addClass)(t,"el-loading-parent--hidden"),t.appendChild(n.$el),o.a.nextTick((function(){n.visible=!0})),e.fullscreen&&(k=n),n}};t.default={install:function(e){e.use(g),e.prototype.$loading=S},directive:g,service:S}},7:function(e,t){e.exports=r["default"]},9:function(e,t){e.exports=ub}})}))),Zx=(qd((function(e){!function(t){var n=Object.prototype,r=n.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",a=o.toStringTag||"@@toStringTag",l=t.regeneratorRuntime;if(l)e.exports=l;else{(l=t.regeneratorRuntime=e.exports).wrap=f;var c={},u={};u[i]=function(){return this};var d=Object.getPrototypeOf,h=d&&d(d(_([])));h&&h!==n&&r.call(h,i)&&(u=h);var p=y.prototype=g.prototype=Object.create(u);v.prototype=p.constructor=y,y.constructor=v,y[a]=v.displayName="GeneratorFunction",l.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},l.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,a in e||(e[a]="GeneratorFunction")),e.prototype=Object.create(p),e},l.awrap=function(e){return{__await:e}},b(w.prototype),w.prototype[s]=function(){return this},l.AsyncIterator=w,l.async=function(e,t,n,r){var o=new w(f(e,t,n,r));return l.isGeneratorFunction(t)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},b(p),p[a]="Generator",p[i]=function(){return this},p.toString=function(){return"[object Generator]"},l.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},l.values=_,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,r){return s.type="throw",s.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],s=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var a=r.call(i,"catchLoc"),l=r.call(i,"finallyLoc");if(a&&l){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=e,s.arg=t,i?(this.method="next",this.next=i.finallyLoc,c):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),c},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),c}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:_(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),c}}}function f(e,t,n,r){var o=t&&t.prototype instanceof g?t:g,i=Object.create(o.prototype),s=new C(r||[]);return i._invoke=function(e,t,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return O()}for(n.method=o,n.arg=i;;){var s=n.delegate;if(s){var a=k(s,n);if(a){if(a===c)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=m(e,t,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===c)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}(e,n,s),i}function m(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}function g(){}function v(){}function y(){}function b(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function w(e){var t;this._invoke=function(n,o){function i(){return new Promise((function(t,i){!function t(n,o,i,s){var a=m(e[n],e,o);if("throw"!==a.type){var l=a.arg,c=l.value;return c&&"object"==typeof c&&r.call(c,"__await")?Promise.resolve(c.__await).then((function(e){t("next",e,i,s)}),(function(e){t("throw",e,i,s)})):Promise.resolve(c).then((function(e){l.value=e,i(l)}),s)}s(a.arg)}(n,o,t,i)}))}return t=t?t.then(i,i):i()}}function k(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,k(e,t),"throw"===t.method))return c;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var r=m(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,c;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,c):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,c)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function _(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:O}}function O(){return{value:void 0,done:!0}}}(function(){return this}()||Function("return this")())})),function(e){jm(n,r["default"]);var t=Hm(n);function n(){var e;return Jf(this,n),(e=t.apply(this,arguments)).imageUploadDialogVisible=!1,e.uploading=!1,e}return Kf(n,[{key:"openUrlPrompt",value:function(){var e=this;jd().prompt("",this.et.t("editor.extensions.Image.control.insert_by_url.title"),{confirmButtonText:this.et.t("editor.extensions.Image.control.insert_by_url.confirm"),cancelButtonText:this.et.t("editor.extensions.Image.control.insert_by_url.cancel"),inputPlaceholder:this.et.t("editor.extensions.Image.control.insert_by_url.placeholder"),inputPattern:this.imageNodeOptions.urlPattern,inputErrorMessage:this.et.t("editor.extensions.Image.control.insert_by_url.invalid_url"),roundButton:!0}).then((function(t){var n=t.value;e.editorContext.commands.image({src:n})})).catch((function(){}))}},{key:"uploadImage",value:function(e){return Jm(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,r,o,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.file,r=this.imageNodeOptions.uploadRequest,o=Xx.service({target:".el-tiptap-upload"}),t.prev=3,t.next=6,r?r(n):My(n);case 6:i=t.sent,this.editorContext.commands.image({src:i}),this.imageUploadDialogVisible=!1,t.next=14;break;case 11:t.prev=11,t.t0=t.catch(3),bm.error(t.t0);case 14:return t.prev=14,this.$nextTick((function(){o.close()})),t.finish(14);case 17:case"end":return t.stop()}}),t,this,[[3,11,14,17]])})))}},{key:"imageNodeOptions",get:function(){return this.editorContext.editor.extensions.options.image}}]),n}());Wm([dg({type:Object,required:!0})],Zx.prototype,"editorContext",void 0),Wm([lg()],Zx.prototype,"et",void 0);const Yx=Iy({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-popover",{attrs:{disabled:e.et.isCodeViewMode,placement:"bottom",trigger:"click","popper-class":"el-tiptap-popper"}},[n("div",{staticClass:"el-tiptap-popper__menu"},[n("div",{staticClass:"el-tiptap-popper__menu__item",on:{click:e.openUrlPrompt}},[n("span",[e._v(e._s(e.et.t("editor.extensions.Image.buttons.insert_image.external")))])]),e._v(" "),n("div",{staticClass:"el-tiptap-popper__menu__item",on:{click:function(t){e.imageUploadDialogVisible=!0}}},[n("span",[e._v(e._s(e.et.t("editor.extensions.Image.buttons.insert_image.upload")))])])]),e._v(" "),n("command-button",{attrs:{slot:"reference","enable-tooltip":e.et.tooltip,tooltip:e.et.t("editor.extensions.Image.buttons.insert_image.tooltip"),readonly:e.et.isCodeViewMode,icon:"image"},slot:"reference"})],1),e._v(" "),n("el-dialog",{attrs:{title:e.et.t("editor.extensions.Image.control.upload_image.title"),visible:e.imageUploadDialogVisible,"append-to-body":!0},on:{"update:visible":function(t){e.imageUploadDialogVisible=t}}},[n("el-upload",{staticClass:"el-tiptap-upload",attrs:{"http-request":e.uploadImage,"show-file-list":!1,action:"#",drag:"",accept:"image/*"}},[n("div",{staticClass:"el-tiptap-upload__icon"},[n("i",{staticClass:"fa fa-upload"})]),e._v(" "),n("div",{staticClass:"el-tiptap-upload__text"},[e._v("\n        "+e._s(e.et.t("editor.extensions.Image.control.upload_image.button"))+"\n      ")])])],1)],1)},staticRenderFns:[]},void 0,Zx=Wm([ag({components:(Gx={},Fm(Gx,Ed().name,Ed()),Fm(Gx,Fd().name,Fd()),Fm(Gx,Pd().name,Pd()),Fm(Gx,"CommandButton",nb),Gx)})],Zx),void 0,!1,void 0,!1,void 0,void 0,void 0);var Qx,eS=[],tS="ResizeObserver loop completed with undelivered notifications.";!function(e){e.BORDER_BOX="border-box",e.CONTENT_BOX="content-box",e.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"}(Qx||(Qx={}));var nS,rS,oS=function(){function e(e,t,n,r){return this.x=e,this.y=t,this.width=n,this.height=r,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,Object.freeze(this)}return e.prototype.toJSON=function(){var e=this;return{x:e.x,y:e.y,top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.width,height:e.height}},e.fromRect=function(t){return new e(t.x,t.y,t.width,t.height)},e}(),iS=function(e){return e instanceof SVGElement&&"getBBox"in e},sS=function(e){if(iS(e)){var t=e.getBBox(),n=t.width,r=t.height;return!n&&!r}var o=e,i=o.offsetWidth,s=o.offsetHeight;return!(i||s||e.getClientRects().length)},aS=function(e){var t,n,r=null===(n=null===(t=e)||void 0===t?void 0:t.ownerDocument)||void 0===n?void 0:n.defaultView;return!!(r&&e instanceof r.Element)},lS="undefined"!=typeof window?window:{},cS=new WeakMap,uS=/auto|scroll/,dS=/^tb|vertical/,hS=/msie|trident/i.test(lS.navigator&&lS.navigator.userAgent),pS=function(e){return parseFloat(e||"0")},fS=function(e,t,n){return void 0===e&&(e=0),void 0===t&&(t=0),void 0===n&&(n=!1),Object.freeze({inlineSize:(n?t:e)||0,blockSize:(n?e:t)||0})},mS=Object.freeze({devicePixelContentBoxSize:fS(),borderBoxSize:fS(),contentBoxSize:fS(),contentRect:new oS(0,0,0,0)}),gS=function(e,t){if(void 0===t&&(t=!1),cS.has(e)&&!t)return cS.get(e);if(sS(e))return cS.set(e,mS),mS;var n=getComputedStyle(e),r=iS(e)&&e.ownerSVGElement&&e.getBBox(),o=!hS&&"border-box"===n.boxSizing,i=dS.test(n.writingMode||""),s=!r&&uS.test(n.overflowY||""),a=!r&&uS.test(n.overflowX||""),l=r?0:pS(n.paddingTop),c=r?0:pS(n.paddingRight),u=r?0:pS(n.paddingBottom),d=r?0:pS(n.paddingLeft),h=r?0:pS(n.borderTopWidth),p=r?0:pS(n.borderRightWidth),f=r?0:pS(n.borderBottomWidth),m=d+c,g=l+u,v=(r?0:pS(n.borderLeftWidth))+p,y=h+f,b=a?e.offsetHeight-y-e.clientHeight:0,w=s?e.offsetWidth-v-e.clientWidth:0,k=o?m+v:0,x=o?g+y:0,S=r?r.width:pS(n.width)-k-w,C=r?r.height:pS(n.height)-x-b,_=S+m+w+v,O=C+g+b+y,M=Object.freeze({devicePixelContentBoxSize:fS(Math.round(S*devicePixelRatio),Math.round(C*devicePixelRatio),i),borderBoxSize:fS(_,O,i),contentBoxSize:fS(S,C,i),contentRect:new oS(d,l,S,C)});return cS.set(e,M),M},vS=function(e,t,n){var r=gS(e,n),o=r.borderBoxSize,i=r.contentBoxSize,s=r.devicePixelContentBoxSize;switch(t){case Qx.DEVICE_PIXEL_CONTENT_BOX:return s;case Qx.BORDER_BOX:return o;default:return i}},yS=function(e){var t=gS(e);this.target=e,this.contentRect=t.contentRect,this.borderBoxSize=[t.borderBoxSize],this.contentBoxSize=[t.contentBoxSize],this.devicePixelContentBoxSize=[t.devicePixelContentBoxSize]},bS=function(e){if(sS(e))return 1/0;for(var t=0,n=e.parentNode;n;)t+=1,n=n.parentNode;return t},wS=function(){var e=1/0,t=[];eS.forEach((function(n){if(0!==n.activeTargets.length){var r=[];n.activeTargets.forEach((function(t){var n=new yS(t.target),o=bS(t.target);r.push(n),t.lastReportedSize=vS(t.target,t.observedBox),o<e&&(e=o)})),t.push((function(){n.callback.call(n.observer,r,n.observer)})),n.activeTargets.splice(0,n.activeTargets.length)}}));for(var n=0,r=t;n<r.length;n++)(0,r[n])();return e},kS=function(e){eS.forEach((function(t){t.activeTargets.splice(0,t.activeTargets.length),t.skippedTargets.splice(0,t.skippedTargets.length),t.observationTargets.forEach((function(n){n.isActive()&&(bS(n.target)>e?t.activeTargets.push(n):t.skippedTargets.push(n))}))}))},xS=function(){var e=0;for(kS(e);eS.some((function(e){return e.activeTargets.length>0}));)e=wS(),kS(e);return eS.some((function(e){return e.skippedTargets.length>0}))&&function(){var e;"function"==typeof ErrorEvent?e=new ErrorEvent("error",{message:tS}):((e=document.createEvent("Event")).initEvent("error",!1,!1),e.message=tS),window.dispatchEvent(e)}(),e>0},SS=[],CS=function(e){if(!nS){var t=0,n=document.createTextNode("");new MutationObserver((function(){return SS.splice(0).forEach((function(e){return e()}))})).observe(n,{characterData:!0}),nS=function(){n.textContent=""+(t?t--:t++)}}SS.push(e),nS()},_S=0,OS={attributes:!0,characterData:!0,childList:!0,subtree:!0},MS=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],ES=function(e){return void 0===e&&(e=0),Date.now()+e},TS=!1,AS=new(function(){function e(){var e=this;this.stopped=!0,this.listener=function(){return e.schedule()}}return e.prototype.run=function(e){var t=this;if(void 0===e&&(e=250),!TS){TS=!0;var n,r=ES(e);n=function(){var n=!1;try{n=xS()}finally{if(TS=!1,e=r-ES(),!_S)return;n?t.run(1e3):e>0?t.run(e):t.start()}},CS((function(){requestAnimationFrame(n)}))}},e.prototype.schedule=function(){this.stop(),this.run()},e.prototype.observe=function(){var e=this,t=function(){return e.observer&&e.observer.observe(document.body,OS)};document.body?t():lS.addEventListener("DOMContentLoaded",t)},e.prototype.start=function(){var e=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),MS.forEach((function(t){return lS.addEventListener(t,e.listener,!0)})))},e.prototype.stop=function(){var e=this;this.stopped||(this.observer&&this.observer.disconnect(),MS.forEach((function(t){return lS.removeEventListener(t,e.listener,!0)})),this.stopped=!0)},e}()),NS=function(e){!_S&&e>0&&AS.start(),!(_S+=e)&&AS.stop()},RS=function(){function e(e,t){this.target=e,this.observedBox=t||Qx.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return e.prototype.isActive=function(){var e,t=vS(this.target,this.observedBox,!0);return e=this.target,iS(e)||function(e){switch(e.tagName){case"INPUT":if("image"!==e.type)break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1}(e)||"inline"!==getComputedStyle(e).display||(this.lastReportedSize=t),this.lastReportedSize.inlineSize!==t.inlineSize||this.lastReportedSize.blockSize!==t.blockSize},e}(),DS=function(e,t){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=e,this.callback=t},IS=new WeakMap,zS=function(e,t){for(var n=0;n<e.length;n+=1)if(e[n].target===t)return n;return-1},PS=function(){function e(){}return e.connect=function(e,t){var n=new DS(e,t);IS.set(e,n)},e.observe=function(e,t,n){var r=IS.get(e),o=0===r.observationTargets.length;zS(r.observationTargets,t)<0&&(o&&eS.push(r),r.observationTargets.push(new RS(t,n&&n.box)),NS(1),AS.schedule())},e.unobserve=function(e,t){var n=IS.get(e),r=zS(n.observationTargets,t),o=1===n.observationTargets.length;r>=0&&(o&&eS.splice(eS.indexOf(n),1),n.observationTargets.splice(r,1),NS(-1))},e.disconnect=function(e){var t=this,n=IS.get(e);n.observationTargets.slice().forEach((function(n){return t.unobserve(e,n.target)})),n.activeTargets.splice(0,n.activeTargets.length)},e}(),$S=function(){function e(e){if(0===arguments.length)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if("function"!=typeof e)throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");PS.connect(this,e)}return e.prototype.observe=function(e,t){if(0===arguments.length)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!aS(e))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");PS.observe(this,e,t)},e.prototype.unobserve=function(e){if(0===arguments.length)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!aS(e))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");PS.unobserve(this,e)},e.prototype.disconnect=function(){PS.disconnect(this)},e.toString=function(){return"function ResizeObserver () { [polyfill code] }"},e}(),FS={};function BS(e){return new Promise((function(t,n){var r={complete:!1,width:0,height:0,src:e};if(e)if(FS[e])t(Object.assign({},FS[e]));else{var o=new Image;o.onload=function(){r.width=o.width,r.height=o.height,r.complete=!0,FS[e]=Object.assign({},r),t(r)},o.onerror=function(){n(r)},o.src=e}else n(r)}))}var jS=function(e){jm(n,r["default"]);var t=Hm(n);function n(){var e;return Jf(this,n),(e=t.apply(this,arguments)).popoverVisible=!1,e.displayCollection=["inline","block","left","right"],e}return Kf(n,[{key:"hidePopover",value:function(){this.popoverVisible=!1}},{key:"currDisplay",get:function(){return this.node.attrs.display}}]),n}();Wm([dg({type:D,required:!0})],jS.prototype,"node",void 0),Wm([dg({type:Function,required:!0})],jS.prototype,"updateAttrs",void 0),Wm([lg()],jS.prototype,"et",void 0);const LS=Iy({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-popover",{attrs:{placement:"top",trigger:"click","popper-class":"el-tiptap-popper"},model:{value:e.popoverVisible,callback:function(t){e.popoverVisible=t},expression:"popoverVisible"}},[n("div",{staticClass:"el-tiptap-popper__menu"},e._l(e.displayCollection,(function(t){return n("div",{key:t,staticClass:"el-tiptap-popper__menu__item",class:{"el-tiptap-popper__menu__item--active":t===e.currDisplay},on:{mousedown:e.hidePopover,click:function(n){return e.updateAttrs({display:t})}}},[n("span",[e._v(e._s(e.et.t("editor.extensions.Image.buttons.display."+t)))])])})),0),e._v(" "),n("command-button",{attrs:{slot:"reference","enable-tooltip":e.et.tooltip,tooltip:e.et.t("editor.extensions.Image.buttons.display.tooltip"),icon:"regular/image"},slot:"reference"})],1)},staticRenderFns:[]},void 0,jS=Wm([ag({components:(rS={},Fm(rS,Pd().name,Pd()),Fm(rS,"CommandButton",nb),rS)})],jS),void 0,!1,void 0,!1,void 0,void 0,void 0);var VS,qS=Vd(qd((function(e){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/",n(n.s=134)}({134:function(e,t,n){n.r(t);var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o={name:"ElCol",props:{span:{type:Number,default:24},tag:{type:String,default:"div"},offset:Number,pull:Number,push:Number,xs:[Number,Object],sm:[Number,Object],md:[Number,Object],lg:[Number,Object],xl:[Number,Object]},computed:{gutter:function(){for(var e=this.$parent;e&&"ElRow"!==e.$options.componentName;)e=e.$parent;return e?e.gutter:0}},render:function(e){var t=this,n=[],o={};return this.gutter&&(o.paddingLeft=this.gutter/2+"px",o.paddingRight=o.paddingLeft),["span","offset","pull","push"].forEach((function(e){(t[e]||0===t[e])&&n.push("span"!==e?"el-col-"+e+"-"+t[e]:"el-col-"+t[e])})),["xs","sm","md","lg","xl"].forEach((function(e){if("number"==typeof t[e])n.push("el-col-"+e+"-"+t[e]);else if("object"===r(t[e])){var o=t[e];Object.keys(o).forEach((function(t){n.push("span"!==t?"el-col-"+e+"-"+t+"-"+o[t]:"el-col-"+e+"-"+o[t])}))}})),e(this.tag,{class:["el-col",n],style:o},this.$slots.default)},install:function(e){e.component(o.name,o)}};t.default=o}})}))),HS=function(e){jm(n,r["default"]);var t=Hm(n);function n(){var e;return Jf(this,n),(e=t.apply(this,arguments)).editImageDialogVisible=!1,e.imageAttrs=e.getImageAttrs(),e}return Kf(n,[{key:"syncImageAttrs",value:function(){this.imageAttrs=this.getImageAttrs()}},{key:"getImageAttrs",value:function(){return{src:this.node.attrs.src,alt:this.node.attrs.alt,width:this.node.attrs.width,height:this.node.attrs.height}}},{key:"updateImageAttrs",value:function(){var e=this.imageAttrs,t=e.width,n=e.height;t=parseInt(t,10),n=parseInt(n,10),this.updateAttrs({alt:this.imageAttrs.alt,width:t>=0?t:null,height:n>=0?n:null}),this.closeEditImageDialog()}},{key:"openEditImageDialog",value:function(){this.editImageDialogVisible=!0}},{key:"closeEditImageDialog",value:function(){this.editImageDialogVisible=!1}}]),n}();Wm([dg({type:D,required:!0})],HS.prototype,"node",void 0),Wm([dg({type:Function,required:!0})],HS.prototype,"updateAttrs",void 0),Wm([lg()],HS.prototype,"et",void 0);const WS=Iy({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("command-button",{attrs:{command:e.openEditImageDialog,"enable-tooltip":e.et.tooltip,tooltip:e.et.t("editor.extensions.Image.buttons.image_options.tooltip"),icon:"ellipsis-h"}}),e._v(" "),n("el-dialog",{attrs:{title:e.et.t("editor.extensions.Image.control.edit_image.title"),visible:e.editImageDialogVisible,"append-to-body":!0,width:"400px","custom-class":"el-tiptap-edit-image-dialog"},on:{"update:visible":function(t){e.editImageDialogVisible=t},open:e.syncImageAttrs},scopedSlots:e._u([{key:"footer",fn:function(){return[n("el-button",{attrs:{size:"small",round:""},on:{click:e.closeEditImageDialog}},[e._v("\n        "+e._s(e.et.t("editor.extensions.Image.control.edit_image.cancel"))+"\n      ")]),e._v(" "),n("el-button",{attrs:{type:"primary",size:"small",round:""},on:{click:e.updateImageAttrs}},[e._v("\n        "+e._s(e.et.t("editor.extensions.Image.control.edit_image.confirm"))+"\n      ")])]},proxy:!0}])},[n("el-form",{attrs:{model:e.imageAttrs,"label-position":"top",size:"small"}},[n("el-form-item",{attrs:{label:e.et.t("editor.extensions.Image.control.edit_image.form.src")}},[n("el-input",{attrs:{value:e.imageAttrs.src,autocomplete:"off",disabled:""}})],1),e._v(" "),n("el-form-item",{attrs:{label:e.et.t("editor.extensions.Image.control.edit_image.form.alt")}},[n("el-input",{attrs:{autocomplete:"off"},model:{value:e.imageAttrs.alt,callback:function(t){e.$set(e.imageAttrs,"alt",t)},expression:"imageAttrs.alt"}})],1),e._v(" "),n("el-form-item",[n("el-col",{attrs:{span:11}},[n("el-form-item",{attrs:{label:e.et.t("editor.extensions.Image.control.edit_image.form.width")}},[n("el-input",{attrs:{type:"number"},model:{value:e.imageAttrs.width,callback:function(t){e.$set(e.imageAttrs,"width",t)},expression:"imageAttrs.width"}})],1)],1),e._v(" "),n("el-col",{attrs:{span:11,push:2}},[n("el-form-item",{attrs:{label:e.et.t("editor.extensions.Image.control.edit_image.form.height")}},[n("el-input",{attrs:{type:"number"},model:{value:e.imageAttrs.height,callback:function(t){e.$set(e.imageAttrs,"height",t)},expression:"imageAttrs.height"}})],1)],1)],1)],1)],1)],1)},staticRenderFns:[]},void 0,HS=Wm([ag({components:(VS={},Fm(VS,Ed().name,Ed()),Fm(VS,Yk.name,Yk),Fm(VS,Zk.name,Zk),Fm(VS,db.name,db),Fm(VS,qS.name,qS),Fm(VS,Cd().name,Cd()),Fm(VS,"CommandButton",nb),VS)})],HS),void 0,!1,void 0,!1,void 0,void 0,void 0);var JS=Math.pow(2,16);function US(e,t){return e+t*JS}function KS(e){return 65535&e}var GS=function(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=null),this.pos=e,this.deleted=t,this.recover=n},XS=function(e,t){void 0===t&&(t=!1),this.ranges=e,this.inverted=t};XS.prototype.recover=function(e){var t=0,n=KS(e);if(!this.inverted)for(var r=0;r<n;r++)t+=this.ranges[3*r+2]-this.ranges[3*r+1];return this.ranges[3*n]+t+function(e){return(e-(65535&e))/JS}(e)},XS.prototype.mapResult=function(e,t){return void 0===t&&(t=1),this._map(e,t,!1)},XS.prototype.map=function(e,t){return void 0===t&&(t=1),this._map(e,t,!0)},XS.prototype._map=function(e,t,n){for(var r=0,o=this.inverted?2:1,i=this.inverted?1:2,s=0;s<this.ranges.length;s+=3){var a=this.ranges[s]-(this.inverted?r:0);if(a>e)break;var l=this.ranges[s+o],c=this.ranges[s+i],u=a+l;if(e<=u){var d=a+r+((l?e==a?-1:e==u?1:t:t)<0?0:c);if(n)return d;var h=e==(t<0?a:u)?null:US(s/3,e-a);return new GS(d,t<0?e!=a:e!=u,h)}r+=c-l}return n?e+r:new GS(e+r)},XS.prototype.touches=function(e,t){for(var n=0,r=KS(t),o=this.inverted?2:1,i=this.inverted?1:2,s=0;s<this.ranges.length;s+=3){var a=this.ranges[s]-(this.inverted?n:0);if(a>e)break;var l=this.ranges[s+o];if(e<=a+l&&s==3*r)return!0;n+=this.ranges[s+i]-l}return!1},XS.prototype.forEach=function(e){for(var t=this.inverted?2:1,n=this.inverted?1:2,r=0,o=0;r<this.ranges.length;r+=3){var i=this.ranges[r],s=i-(this.inverted?o:0),a=i+(this.inverted?0:o),l=this.ranges[r+t],c=this.ranges[r+n];e(s,s+l,a,a+c),o+=c-l}},XS.prototype.invert=function(){return new XS(this.ranges,!this.inverted)},XS.prototype.toString=function(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)},XS.offset=function(e){return 0==e?XS.empty:new XS(e<0?[0,-e,0]:[0,0,e])},XS.empty=new XS([]);var ZS=function(e,t,n,r){this.maps=e||[],this.from=n||0,this.to=null==r?this.maps.length:r,this.mirror=t};function YS(e){var t=Error.call(this,e);return t.__proto__=YS.prototype,t}ZS.prototype.slice=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=this.maps.length),new ZS(this.maps,this.mirror,e,t)},ZS.prototype.copy=function(){return new ZS(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)},ZS.prototype.appendMap=function(e,t){this.to=this.maps.push(e),null!=t&&this.setMirror(this.maps.length-1,t)},ZS.prototype.appendMapping=function(e){for(var t=0,n=this.maps.length;t<e.maps.length;t++){var r=e.getMirror(t);this.appendMap(e.maps[t],null!=r&&r<t?n+r:null)}},ZS.prototype.getMirror=function(e){if(this.mirror)for(var t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]},ZS.prototype.setMirror=function(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)},ZS.prototype.appendMappingInverted=function(e){for(var t=e.maps.length-1,n=this.maps.length+e.maps.length;t>=0;t--){var r=e.getMirror(t);this.appendMap(e.maps[t].invert(),null!=r&&r>t?n-r-1:null)}},ZS.prototype.invert=function(){var e=new ZS;return e.appendMappingInverted(this),e},ZS.prototype.map=function(e,t){if(void 0===t&&(t=1),this.mirror)return this._map(e,t,!0);for(var n=this.from;n<this.to;n++)e=this.maps[n].map(e,t);return e},ZS.prototype.mapResult=function(e,t){return void 0===t&&(t=1),this._map(e,t,!1)},ZS.prototype._map=function(e,t,n){for(var r=!1,o=this.from;o<this.to;o++){var i=this.maps[o].mapResult(e,t);if(null!=i.recover){var s=this.getMirror(o);if(null!=s&&s>o&&s<this.to){o=s,e=this.maps[s].recover(i.recover);continue}}i.deleted&&(r=!0),e=i.pos}return n?e:new GS(e,r)},YS.prototype=Object.create(Error.prototype),YS.prototype.constructor=YS,YS.prototype.name="TransformError";var QS=function(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new ZS},eC={before:{configurable:!0},docChanged:{configurable:!0}};function tC(){throw new Error("Override me")}eC.before.get=function(){return this.docs.length?this.docs[0]:this.doc},QS.prototype.step=function(e){var t=this.maybeStep(e);if(t.failed)throw new YS(t.failed);return this},QS.prototype.maybeStep=function(e){var t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t},eC.docChanged.get=function(){return this.steps.length>0},QS.prototype.addStep=function(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t},Object.defineProperties(QS.prototype,eC);var nC=Object.create(null),rC=function(){};rC.prototype.apply=function(e){return tC()},rC.prototype.getMap=function(){return XS.empty},rC.prototype.invert=function(e){return tC()},rC.prototype.map=function(e){return tC()},rC.prototype.merge=function(e){return null},rC.prototype.toJSON=function(){return tC()},rC.fromJSON=function(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");var n=nC[t.stepType];if(!n)throw new RangeError("No step type "+t.stepType+" defined");return n.fromJSON(e,t)},rC.jsonID=function(e,t){if(e in nC)throw new RangeError("Duplicate use of step JSON ID "+e);return nC[e]=t,t.prototype.jsonID=e,t};var oC=function(e,t){this.doc=e,this.failed=t};oC.ok=function(e){return new oC(e,null)},oC.fail=function(e){return new oC(null,e)},oC.fromReplace=function(e,t,n,r){try{return oC.ok(e.replace(t,n,r))}catch(e){if(e instanceof p)return oC.fail(e.message);throw e}};var iC=function(e){function t(t,n,r,o){e.call(this),this.from=t,this.to=n,this.slice=r,this.structure=!!o}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.apply=function(e){return this.structure&&aC(e,this.from,this.to)?oC.fail("Structure replace would overwrite content"):oC.fromReplace(e,this.from,this.to,this.slice)},t.prototype.getMap=function(){return new XS([this.from,this.to-this.from,this.slice.size])},t.prototype.invert=function(e){return new t(this.from,this.from+this.slice.size,e.slice(this.from,this.to))},t.prototype.map=function(e){var n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted?null:new t(n.pos,Math.max(n.pos,r.pos),this.slice)},t.prototype.merge=function(e){if(!(e instanceof t)||e.structure!=this.structure)return null;if(this.from+this.slice.size!=e.from||this.slice.openEnd||e.slice.openStart){if(e.to!=this.from||this.slice.openStart||e.slice.openEnd)return null;var n=this.slice.size+e.slice.size==0?f.empty:new f(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new t(e.from,this.to,n,this.structure)}var r=this.slice.size+e.slice.size==0?f.empty:new f(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new t(this.from,this.to+(e.to-e.from),r,this.structure)},t.prototype.toJSON=function(){var e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e},t.fromJSON=function(e,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new t(n.from,n.to,f.fromJSON(e,n.slice),!!n.structure)},t}(rC);rC.jsonID("replace",iC);var sC=function(e){function t(t,n,r,o,i,s,a){e.call(this),this.from=t,this.to=n,this.gapFrom=r,this.gapTo=o,this.slice=i,this.insert=s,this.structure=!!a}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.apply=function(e){if(this.structure&&(aC(e,this.from,this.gapFrom)||aC(e,this.gapTo,this.to)))return oC.fail("Structure gap-replace would overwrite content");var t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return oC.fail("Gap is not a flat range");var n=this.slice.insertAt(this.insert,t.content);return n?oC.fromReplace(e,this.from,this.to,n):oC.fail("Content does not fit in gap")},t.prototype.getMap=function(){return new XS([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])},t.prototype.invert=function(e){var n=this.gapTo-this.gapFrom;return new t(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)},t.prototype.map=function(e){var n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),o=e.map(this.gapFrom,-1),i=e.map(this.gapTo,1);return n.deleted&&r.deleted||o<n.pos||i>r.pos?null:new t(n.pos,r.pos,o,i,this.slice,this.insert,this.structure)},t.prototype.toJSON=function(){var e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e},t.fromJSON=function(e,n){if("number"!=typeof n.from||"number"!=typeof n.to||"number"!=typeof n.gapFrom||"number"!=typeof n.gapTo||"number"!=typeof n.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new t(n.from,n.to,n.gapFrom,n.gapTo,f.fromJSON(e,n.slice),n.insert,!!n.structure)},t}(rC);function aC(e,t,n){for(var r=e.resolve(t),o=n-t,i=r.depth;o>0&&i>0&&r.indexAfter(i)==r.node(i).childCount;)i--,o--;if(o>0)for(var s=r.node(i).maybeChild(r.indexAfter(i));o>0;){if(!s||s.isLeaf)return!0;s=s.firstChild,o--}return!1}function lC(e,t,n){return(0==t||e.canReplace(t,e.childCount))&&(n==e.childCount||e.canReplace(0,n))}function cC(e){for(var t=e.parent.content.cutByIndex(e.startIndex,e.endIndex),n=e.depth;;--n){var r=e.$from.node(n),o=e.$from.index(n),i=e.$to.indexAfter(n);if(n<e.depth&&r.canReplace(o,i,t))return n;if(0==n||r.type.spec.isolating||!lC(r,o,i))break}}function uC(e,t,n,r){void 0===n&&(n=1);var o=e.resolve(t),i=o.depth-n,s=r&&r[r.length-1]||o.parent;if(i<0||o.parent.type.spec.isolating||!o.parent.canReplace(o.index(),o.parent.childCount)||!s.type.validContent(o.parent.content.cutByIndex(o.index(),o.parent.childCount)))return!1;for(var a=o.depth-1,l=n-2;a>i;a--,l--){var c=o.node(a),u=o.index(a);if(c.type.spec.isolating)return!1;var d=c.content.cutByIndex(u,c.childCount),h=r&&r[l]||c;if(h!=c&&(d=d.replaceChild(0,h.type.create(h.attrs))),!c.canReplace(u+1,c.childCount)||!h.type.validContent(d))return!1}var p=o.indexAfter(i),f=r&&r[0];return o.node(i).canReplaceWith(p,p,f?f.type:o.node(i+1).type)}function dC(e,t){var n,r,o=e.resolve(t),i=o.index();return n=o.nodeBefore,r=o.nodeAfter,n&&r&&!n.isLeaf&&n.canAppend(r)&&o.parent.canReplace(i,i+1)}function hC(e,t,n){for(var r=[],o=0;o<e.childCount;o++){var i=e.child(o);i.content.size&&(i=i.copy(hC(i.content,t,i))),i.isInline&&(i=t(i,n,o)),r.push(i)}return l.fromArray(r)}rC.jsonID("replaceAround",sC),QS.prototype.lift=function(e,t){for(var n=e.$from,r=e.$to,o=e.depth,i=n.before(o+1),s=r.after(o+1),a=i,c=s,u=l.empty,d=0,h=o,p=!1;h>t;h--)p||n.index(h)>0?(p=!0,u=l.from(n.node(h).copy(u)),d++):a--;for(var m=l.empty,g=0,v=o,y=!1;v>t;v--)y||r.after(v+1)<r.end(v)?(y=!0,m=l.from(r.node(v).copy(m)),g++):c++;return this.step(new sC(a,c,i,s,new f(u.append(m),d,g),u.size-d,!0))},QS.prototype.wrap=function(e,t){for(var n=l.empty,r=t.length-1;r>=0;r--)n=l.from(t[r].type.create(t[r].attrs,n));var o=e.start,i=e.end;return this.step(new sC(o,i,o,i,new f(n,0,0),t.length,!0))},QS.prototype.setBlockType=function(e,t,n,r){var o=this;if(void 0===t&&(t=e),!n.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");var i=this.steps.length;return this.doc.nodesBetween(e,t,(function(e,t){if(e.isTextblock&&!e.hasMarkup(n,r)&&function(e,t,n){var r=e.resolve(t),o=r.index();return r.parent.canReplaceWith(o,o+1,n)}(o.doc,o.mapping.slice(i).map(t),n)){o.clearIncompatible(o.mapping.slice(i).map(t,1),n);var s=o.mapping.slice(i),a=s.map(t,1),c=s.map(t+e.nodeSize,1);return o.step(new sC(a,c,a+1,c-1,new f(l.from(n.create(r,null,e.marks)),0,0),1,!0)),!1}})),this},QS.prototype.setNodeMarkup=function(e,t,n,r){var o=this.doc.nodeAt(e);if(!o)throw new RangeError("No node at given position");t||(t=o.type);var i=t.create(n,null,r||o.marks);if(o.isLeaf)return this.replaceWith(e,e+o.nodeSize,i);if(!t.validContent(o.content))throw new RangeError("Invalid content for node type "+t.name);return this.step(new sC(e,e+o.nodeSize,e+1,e+o.nodeSize-1,new f(l.from(i),0,0),1,!0))},QS.prototype.split=function(e,t,n){void 0===t&&(t=1);for(var r=this.doc.resolve(e),o=l.empty,i=l.empty,s=r.depth,a=r.depth-t,c=t-1;s>a;s--,c--){o=l.from(r.node(s).copy(o));var u=n&&n[c];i=l.from(u?u.type.create(u.attrs,i):r.node(s).copy(i))}return this.step(new iC(e,e,new f(o.append(i),t,t),!0))},QS.prototype.join=function(e,t){void 0===t&&(t=1);var n=new iC(e-t,e+t,f.empty,!0);return this.step(n)};var pC=function(e){function t(t,n,r){e.call(this),this.from=t,this.to=n,this.mark=r}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.apply=function(e){var t=this,n=e.slice(this.from,this.to),r=e.resolve(this.from),o=r.node(r.sharedDepth(this.to)),i=new f(hC(n.content,(function(e,n){return n.type.allowsMarkType(t.mark.type)?e.mark(t.mark.addToSet(e.marks)):e}),o),n.openStart,n.openEnd);return oC.fromReplace(e,this.from,this.to,i)},t.prototype.invert=function(){return new fC(this.from,this.to,this.mark)},t.prototype.map=function(e){var n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new t(n.pos,r.pos,this.mark)},t.prototype.merge=function(e){if(e instanceof t&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from)return new t(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark)},t.prototype.toJSON=function(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},t.fromJSON=function(e,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new t(n.from,n.to,e.markFromJSON(n.mark))},t}(rC);rC.jsonID("addMark",pC);var fC=function(e){function t(t,n,r){e.call(this),this.from=t,this.to=n,this.mark=r}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.apply=function(e){var t=this,n=e.slice(this.from,this.to),r=new f(hC(n.content,(function(e){return e.mark(t.mark.removeFromSet(e.marks))})),n.openStart,n.openEnd);return oC.fromReplace(e,this.from,this.to,r)},t.prototype.invert=function(){return new pC(this.from,this.to,this.mark)},t.prototype.map=function(e){var n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new t(n.pos,r.pos,this.mark)},t.prototype.merge=function(e){if(e instanceof t&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from)return new t(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark)},t.prototype.toJSON=function(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},t.fromJSON=function(e,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new t(n.from,n.to,e.markFromJSON(n.mark))},t}(rC);function mC(e,t,n){return!n.openStart&&!n.openEnd&&e.start()==t.start()&&e.parent.canReplace(e.index(),t.index(),n.content)}rC.jsonID("removeMark",fC),QS.prototype.addMark=function(e,t,n){var r=this,o=[],i=[],s=null,a=null;return this.doc.nodesBetween(e,t,(function(r,l,c){if(r.isInline){var u=r.marks;if(!n.isInSet(u)&&c.type.allowsMarkType(n.type)){for(var d=Math.max(l,e),h=Math.min(l+r.nodeSize,t),p=n.addToSet(u),f=0;f<u.length;f++)u[f].isInSet(p)||(s&&s.to==d&&s.mark.eq(u[f])?s.to=h:o.push(s=new fC(d,h,u[f])));a&&a.to==d?a.to=h:i.push(a=new pC(d,h,n))}}})),o.forEach((function(e){return r.step(e)})),i.forEach((function(e){return r.step(e)})),this},QS.prototype.removeMark=function(e,t,n){var r=this;void 0===n&&(n=null);var o=[],i=0;return this.doc.nodesBetween(e,t,(function(r,s){if(r.isInline){i++;var a=null;if(n instanceof te){var l=n.isInSet(r.marks);l&&(a=[l])}else n?n.isInSet(r.marks)&&(a=[n]):a=r.marks;if(a&&a.length)for(var c=Math.min(s+r.nodeSize,t),u=0;u<a.length;u++){for(var d=a[u],h=void 0,p=0;p<o.length;p++){var f=o[p];f.step==i-1&&d.eq(o[p].style)&&(h=f)}h?(h.to=c,h.step=i):o.push({style:d,from:Math.max(s,e),to:c,step:i})}}})),o.forEach((function(e){return r.step(new fC(e.from,e.to,e.style))})),this},QS.prototype.clearIncompatible=function(e,t,n){void 0===n&&(n=t.contentMatch);for(var r=this.doc.nodeAt(e),o=[],i=e+1,s=0;s<r.childCount;s++){var a=r.child(s),c=i+a.nodeSize,u=n.matchType(a.type,a.attrs);if(u){n=u;for(var d=0;d<a.marks.length;d++)t.allowsMarkType(a.marks[d].type)||this.step(new fC(i,c,a.marks[d]))}else o.push(new iC(i,c,f.empty));i=c}if(!n.validEnd){var h=n.fillBefore(l.empty,!0);this.replace(i,i,new f(h,0,0))}for(var p=o.length-1;p>=0;p--)this.step(o[p]);return this},QS.prototype.replace=function(e,t,n){void 0===t&&(t=e),void 0===n&&(n=f.empty);var r=function(e,t,n,r){if(void 0===n&&(n=t),void 0===r&&(r=f.empty),t==n&&!r.size)return null;var o=e.resolve(t),i=e.resolve(n);return mC(o,i,r)?new iC(t,n,r):new gC(o,i,r).fit()}(this.doc,e,t,n);return r&&this.step(r),this},QS.prototype.replaceWith=function(e,t,n){return this.replace(e,t,new f(l.from(n),0,0))},QS.prototype.delete=function(e,t){return this.replace(e,t,f.empty)},QS.prototype.insert=function(e,t){return this.replaceWith(e,e,t)};var gC=function(e,t,n){this.$to=t,this.$from=e,this.unplaced=n,this.frontier=[];for(var r=0;r<=e.depth;r++){var o=e.node(r);this.frontier.push({type:o.type,match:o.contentMatchAt(e.indexAfter(r))})}this.placed=l.empty;for(var i=e.depth;i>0;i--)this.placed=l.from(e.node(i).copy(this.placed))},vC={depth:{configurable:!0}};function yC(e,t,n){return 0==t?e.cutByIndex(n):e.replaceChild(0,e.firstChild.copy(yC(e.firstChild.content,t-1,n)))}function bC(e,t,n){return 0==t?e.append(n):e.replaceChild(e.childCount-1,e.lastChild.copy(bC(e.lastChild.content,t-1,n)))}function wC(e,t){for(var n=0;n<t;n++)e=e.firstChild.content;return e}function kC(e,t,n){if(t<=0)return e;var r=e.content;return t>1&&(r=r.replaceChild(0,kC(r.firstChild,t-1,1==r.childCount?n-1:0))),t>0&&(r=e.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(e.type.contentMatch.matchFragment(r).fillBefore(l.empty,!0)))),e.copy(r)}function xC(e,t,n,r,o){var i=e.node(t),s=o?e.indexAfter(t):e.index(t);if(s==i.childCount&&!n.compatibleContent(i.type))return null;var a=r.fillBefore(i.content,!0,s);return a&&!function(e,t,n){for(var r=n;r<t.childCount;r++)if(!e.allowsMarks(t.child(r).marks))return!0;return!1}(n,i.content,s)?a:null}function SC(e,t,n,r,o){if(t<n){var i=e.firstChild;e=e.replaceChild(0,i.copy(SC(i.content,t+1,n,r,i)))}if(t>r){var s=o.contentMatchAt(0),a=s.fillBefore(e).append(e);e=a.append(s.matchFragment(a).fillBefore(l.empty,!0))}return e}function CC(e,t){for(var n=[],r=Math.min(e.depth,t.depth);r>=0;r--){var o=e.start(r);if(o<e.pos-(e.depth-r)||t.end(r)>t.pos+(t.depth-r)||e.node(r).type.spec.isolating||t.node(r).type.spec.isolating)break;o==t.start(r)&&n.push(r)}return n}function _C(e,t){return!e.selection.empty&&(t&&t(e.tr.deleteSelection().scrollIntoView()),!0)}function OC(e,t){for(;e;e="start"==t?e.firstChild:e.lastChild)if(e.isTextblock)return!0;return!1}function MC(e){if(!e.parent.type.spec.isolating)for(var t=e.depth-1;t>=0;t--){if(e.index(t)>0)return e.doc.resolve(e.before(t+1));if(e.node(t).type.spec.isolating)break}return null}function EC(e){if(!e.parent.type.spec.isolating)for(var t=e.depth-1;t>=0;t--){var n=e.node(t);if(e.index(t)+1<n.childCount)return e.doc.resolve(e.after(t+1));if(n.type.spec.isolating)break}return null}function TC(e){for(var t=0;t<e.edgeCount;t++){var n=e.edge(t).type;if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function AC(e,t){return t&&t(e.tr.setSelection(new Lt(e.doc))),!0}function NC(e,t,n){var r,o,i=t.nodeBefore,s=t.nodeAfter;if(i.type.spec.isolating||s.type.spec.isolating)return!1;if(function(e,t,n){var r=t.nodeBefore,o=t.nodeAfter,i=t.index();return!!(r&&o&&r.type.compatibleContent(o.type))&&(!r.content.size&&t.parent.canReplace(i-1,i)?(n&&n(e.tr.delete(t.pos-r.nodeSize,t.pos).scrollIntoView()),!0):!(!t.parent.canReplace(i,i+1)||!o.isTextblock&&!dC(e.doc,t.pos))&&(n&&n(e.tr.clearIncompatible(t.pos,r.type,r.contentMatchAt(r.childCount)).join(t.pos).scrollIntoView()),!0))}(e,t,n))return!0;if(t.parent.canReplace(t.index(),t.index()+1)&&(r=(o=i.contentMatchAt(i.childCount)).findWrapping(s.type))&&o.matchType(r[0]||s.type).validEnd){if(n){for(var a=t.pos+s.nodeSize,c=l.empty,u=r.length-1;u>=0;u--)c=l.from(r[u].create(null,c));c=l.from(i.copy(c));var d=e.tr.step(new sC(t.pos-1,a,t.pos,a,new f(c,1,0),r.length,!0)),h=a+2*r.length;dC(d.doc,h)&&d.join(h),n(d.scrollIntoView())}return!0}var p=Dt.findFrom(t,1),m=p&&p.$from.blockRange(p.$to),g=m&&cC(m);return null!=g&&g>=t.depth&&(n&&n(e.tr.lift(m,g).scrollIntoView()),!0)}function RC(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return function(t,n,r){for(var o=0;o<e.length;o++)if(e[o](t,n,r))return!0;return!1}}vC.depth.get=function(){return this.frontier.length-1},gC.prototype.fit=function(){for(;this.unplaced.size;){var e=this.findFittable();e?this.placeNodes(e):this.openMore()||this.dropNode()}var t=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,o=this.close(t<0?this.$to:r.doc.resolve(t));if(!o)return null;for(var i=this.placed,s=r.depth,a=o.depth;s&&a&&1==i.childCount;)i=i.firstChild.content,s--,a--;var l=new f(i,s,a);return t>-1?new sC(r.pos,t,this.$to.pos,this.$to.end(),l,n):l.size||r.pos!=this.$to.pos?new iC(r.pos,o.pos,l):void 0},gC.prototype.findFittable=function(){for(var e=1;e<=2;e++)for(var t=this.unplaced.openStart;t>=0;t--)for(var n=void 0,r=(t?(n=wC(this.unplaced.content,t-1).firstChild).content:this.unplaced.content).firstChild,o=this.depth;o>=0;o--){var i=this.frontier[o],s=i.type,a=i.match,c=void 0,u=void 0;if(1==e&&(r?a.matchType(r.type)||(u=a.fillBefore(l.from(r),!1)):s.compatibleContent(n.type)))return{sliceDepth:t,frontierDepth:o,parent:n,inject:u};if(2==e&&r&&(c=a.findWrapping(r.type)))return{sliceDepth:t,frontierDepth:o,parent:n,wrap:c};if(n&&a.matchType(n.type))break}},gC.prototype.openMore=function(){var e=this.unplaced,t=e.content,n=e.openStart,r=e.openEnd,o=wC(t,n);return!(!o.childCount||o.firstChild.isLeaf)&&(this.unplaced=new f(t,n+1,Math.max(r,o.size+n>=t.size-r?n+1:0)),!0)},gC.prototype.dropNode=function(){var e=this.unplaced,t=e.content,n=e.openStart,r=e.openEnd,o=wC(t,n);if(o.childCount<=1&&n>0){var i=t.size-n<=n+o.size;this.unplaced=new f(yC(t,n-1,1),n-1,i?n-1:r)}else this.unplaced=new f(yC(t,n,1),n,r)},gC.prototype.placeNodes=function(e){for(var t=e.sliceDepth,n=e.frontierDepth,r=e.parent,o=e.inject,i=e.wrap;this.depth>n;)this.closeFrontierNode();if(i)for(var s=0;s<i.length;s++)this.openFrontierNode(i[s]);var a=this.unplaced,c=r?r.content:a.content,u=a.openStart-t,d=0,h=[],p=this.frontier[n],m=p.match,g=p.type;if(o){for(var v=0;v<o.childCount;v++)h.push(o.child(v));m=m.matchFragment(o)}for(var y=c.size+t-(a.content.size-a.openEnd);d<c.childCount;){var b=c.child(d),w=m.matchType(b.type);if(!w)break;(++d>1||0==u||b.content.size)&&(m=w,h.push(kC(b.mark(g.allowedMarks(b.marks)),1==d?u:0,d==c.childCount?y:-1)))}var k=d==c.childCount;k||(y=-1),k&&y<0&&r&&r.type==this.frontier[this.depth].type?this.closeFrontierNode():this.frontier[n].match=m;for(var x=0,S=c;x<y;x++){var C=S.lastChild;this.frontier.push({type:C.type,match:C.contentMatchAt(C.childCount)}),S=C.content}this.unplaced=k?0==t?f.empty:new f(yC(a.content,t-1,1),t-1,y<0?a.openEnd:t-1):new f(yC(a.content,t,d),a.openStart,a.openEnd),this.placed=bC(this.placed,n,l.from(h))},gC.prototype.mustMoveInline=function(){if(!this.$to.parent.isTextblock||this.$to.end()==this.$to.pos)return-1;var e,t=this.frontier[this.depth];if(!t.type.isTextblock||!xC(this.$to,this.$to.depth,t.type,t.match,!1)||this.$to.depth==this.depth&&(e=this.findCloseLevel(this.$to))&&e.depth==this.depth)return-1;for(var n=this.$to.depth,r=this.$to.after(n);n>1&&r==this.$to.end(--n);)++r;return r},gC.prototype.findCloseLevel=function(e){e:for(var t=Math.min(this.depth,e.depth);t>=0;t--){var n=this.frontier[t],r=n.match,o=n.type,i=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),s=xC(e,t,o,r,i);if(s){for(var a=t-1;a>=0;a--){var l=this.frontier[a],c=l.match,u=xC(e,a,l.type,c,!0);if(!u||u.childCount)continue e}return{depth:t,fit:s,move:i?e.doc.resolve(e.after(t+1)):e}}}},gC.prototype.close=function(e){var t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=bC(this.placed,t.depth,t.fit)),e=t.move;for(var n=t.depth+1;n<=e.depth;n++){var r=e.node(n),o=r.type.contentMatch.fillBefore(r.content,!0,e.index(n));this.openFrontierNode(r.type,r.attrs,o)}return e},gC.prototype.openFrontierNode=function(e,t,n){var r=this.frontier[this.depth];r.match=r.match.matchType(e),this.placed=bC(this.placed,this.depth,l.from(e.create(t,n))),this.frontier.push({type:e,match:e.contentMatch})},gC.prototype.closeFrontierNode=function(){var e=this.frontier.pop().match.fillBefore(l.empty,!0);e.childCount&&(this.placed=bC(this.placed,this.frontier.length,e))},Object.defineProperties(gC.prototype,vC),QS.prototype.replaceRange=function(e,t,n){if(!n.size)return this.deleteRange(e,t);var r=this.doc.resolve(e),o=this.doc.resolve(t);if(mC(r,o,n))return this.step(new iC(e,t,n));var i=CC(r,this.doc.resolve(t));0==i[i.length-1]&&i.pop();var s=-(r.depth+1);i.unshift(s);for(var a=r.depth,l=r.pos-1;a>0;a--,l--){var c=r.node(a).type.spec;if(c.defining||c.isolating)break;i.indexOf(a)>-1?s=a:r.before(a)==l&&i.splice(1,0,-a)}for(var u=i.indexOf(s),d=[],h=n.openStart,p=n.content,m=0;;m++){var g=p.firstChild;if(d.push(g),m==n.openStart)break;p=g.content}h>0&&d[h-1].type.spec.defining&&r.node(u).type!=d[h-1].type?h-=1:h>=2&&d[h-1].isTextblock&&d[h-2].type.spec.defining&&r.node(u).type!=d[h-2].type&&(h-=2);for(var v=n.openStart;v>=0;v--){var y=(v+h+1)%(n.openStart+1),b=d[y];if(b)for(var w=0;w<i.length;w++){var k=i[(w+u)%i.length],x=!0;k<0&&(x=!1,k=-k);var S=r.node(k-1),C=r.index(k-1);if(S.canReplaceWith(C,C,b.type,b.marks))return this.replace(r.before(k),x?o.after(k):t,new f(SC(n.content,0,n.openStart,y),y,n.openEnd))}}for(var _=this.steps.length,O=i.length-1;O>=0&&(this.replace(e,t,n),!(this.steps.length>_));O--){var M=i[O];O<0||(e=r.before(M),t=o.after(M))}return this},QS.prototype.replaceRangeWith=function(e,t,n){if(!n.isInline&&e==t&&this.doc.resolve(e).parent.content.size){var r=function(e,t,n){var r=e.resolve(t);if(r.parent.canReplaceWith(r.index(),r.index(),n))return t;if(0==r.parentOffset)for(var o=r.depth-1;o>=0;o--){var i=r.index(o);if(r.node(o).canReplaceWith(i,i,n))return r.before(o+1);if(i>0)return null}if(r.parentOffset==r.parent.content.size)for(var s=r.depth-1;s>=0;s--){var a=r.indexAfter(s);if(r.node(s).canReplaceWith(a,a,n))return r.after(s+1);if(a<r.node(s).childCount)return null}}(this.doc,e,n.type);null!=r&&(e=t=r)}return this.replaceRange(e,t,new f(l.from(n),0,0))},QS.prototype.deleteRange=function(e,t){for(var n=this.doc.resolve(e),r=this.doc.resolve(t),o=CC(n,r),i=0;i<o.length;i++){var s=o[i],a=i==o.length-1;if(a&&0==s||n.node(s).type.contentMatch.validEnd)return this.delete(n.start(s),r.end(s));if(s>0&&(a||n.node(s-1).canReplace(n.index(s-1),r.indexAfter(s-1))))return this.delete(n.before(s),r.after(s))}for(var l=1;l<=n.depth&&l<=r.depth;l++)if(e-n.start(l)==n.depth-l&&t>n.end(l)&&r.end(l)-t!=r.depth-l)return this.delete(n.before(l),t);return this.delete(e,t)};var DC=RC(_C,(function(e,t,n){var r=e.selection.$cursor;if(!r||(n?!n.endOfTextblock("backward",e):r.parentOffset>0))return!1;var o=MC(r);if(!o){var i=r.blockRange(),s=i&&cC(i);return null!=s&&(t&&t(e.tr.lift(i,s).scrollIntoView()),!0)}var a=o.nodeBefore;if(!a.type.spec.isolating&&NC(e,o,t))return!0;if(0==r.parent.content.size&&(OC(a,"end")||Bt.isSelectable(a))){if(t){var l=e.tr.deleteRange(r.before(),r.after());l.setSelection(OC(a,"end")?Dt.findFrom(l.doc.resolve(l.mapping.map(o.pos,-1)),-1):Bt.create(l.doc,o.pos-a.nodeSize)),t(l.scrollIntoView())}return!0}return!(!a.isAtom||o.depth!=r.depth-1)&&(t&&t(e.tr.delete(o.pos-a.nodeSize,o.pos).scrollIntoView()),!0)}),(function(e,t,n){var r=e.selection,o=r.$head,i=o;if(!r.empty)return!1;if(o.parent.isTextblock){if(n?!n.endOfTextblock("backward",e):o.parentOffset>0)return!1;i=MC(o)}var s=i&&i.nodeBefore;return!(!s||!Bt.isSelectable(s))&&(t&&t(e.tr.setSelection(Bt.create(e.doc,i.pos-s.nodeSize)).scrollIntoView()),!0)})),IC=RC(_C,(function(e,t,n){var r=e.selection.$cursor;if(!r||(n?!n.endOfTextblock("forward",e):r.parentOffset<r.parent.content.size))return!1;var o=EC(r);if(!o)return!1;var i=o.nodeAfter;if(NC(e,o,t))return!0;if(0==r.parent.content.size&&(OC(i,"start")||Bt.isSelectable(i))){if(t){var s=e.tr.deleteRange(r.before(),r.after());s.setSelection(OC(i,"start")?Dt.findFrom(s.doc.resolve(s.mapping.map(o.pos)),1):Bt.create(s.doc,s.mapping.map(o.pos))),t(s.scrollIntoView())}return!0}return!(!i.isAtom||o.depth!=r.depth-1)&&(t&&t(e.tr.delete(o.pos,o.pos+i.nodeSize).scrollIntoView()),!0)}),(function(e,t,n){var r=e.selection,o=r.$head,i=o;if(!r.empty)return!1;if(o.parent.isTextblock){if(n?!n.endOfTextblock("forward",e):o.parentOffset<o.parent.content.size)return!1;i=EC(o)}var s=i&&i.nodeAfter;return!(!s||!Bt.isSelectable(s))&&(t&&t(e.tr.setSelection(Bt.create(e.doc,i.pos)).scrollIntoView()),!0)})),zC={Enter:RC((function(e,t){var n=e.selection,r=n.$head,o=n.$anchor;return!(!r.parent.type.spec.code||!r.sameParent(o))&&(t&&t(e.tr.insertText("\n").scrollIntoView()),!0)}),(function(e,t){var n=e.selection,r=n.$from,o=n.$to;if(r.parent.inlineContent||o.parent.inlineContent)return!1;var i=TC(r.parent.contentMatchAt(o.indexAfter()));if(!i||!i.isTextblock)return!1;if(t){var s=(!r.parentOffset&&o.index()<o.parent.childCount?r:o).pos,a=e.tr.insert(s,i.createAndFill());a.setSelection($t.create(a.doc,s+1)),t(a.scrollIntoView())}return!0}),(function(e,t){var n=e.selection.$cursor;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){var r=n.before();if(uC(e.doc,r))return t&&t(e.tr.split(r).scrollIntoView()),!0}var o=n.blockRange(),i=o&&cC(o);return null!=i&&(t&&t(e.tr.lift(o,i).scrollIntoView()),!0)}),(function(e,t){var n=e.selection,r=n.$from,o=n.$to;if(e.selection instanceof Bt&&e.selection.node.isBlock)return!(!r.parentOffset||!uC(e.doc,r.pos))&&(t&&t(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.parent.isBlock)return!1;if(t){var i=o.parentOffset==o.parent.content.size,s=e.tr;e.selection instanceof $t&&s.deleteSelection();var a=0==r.depth?null:TC(r.node(-1).contentMatchAt(r.indexAfter(-1))),c=i&&a?[{type:a}]:null,u=uC(s.doc,s.mapping.map(r.pos),1,c);c||u||!uC(s.doc,s.mapping.map(r.pos),1,a&&[{type:a}])||(c=[{type:a}],u=!0),u&&(s.split(s.mapping.map(r.pos),1,c),i||r.parentOffset||r.parent.type==a||!r.node(-1).canReplace(r.index(-1),r.indexAfter(-1),l.from(a.create(),r.parent))||s.setNodeMarkup(s.mapping.map(r.before()),a)),t(s.scrollIntoView())}return!0})),"Mod-Enter":function(e,t){var n=e.selection,r=n.$head,o=n.$anchor;if(!r.parent.type.spec.code||!r.sameParent(o))return!1;var i=r.node(-1),s=r.indexAfter(-1),a=TC(i.contentMatchAt(s));if(!i.canReplaceWith(s,s,a))return!1;if(t){var l=r.after(),c=e.tr.replaceWith(l,l,a.createAndFill());c.setSelection(Dt.near(c.doc.resolve(l),1)),t(c.scrollIntoView())}return!0},Backspace:DC,"Mod-Backspace":DC,Delete:IC,"Mod-Delete":IC,"Mod-a":AC},PC={"Ctrl-h":zC.Backspace,"Alt-Backspace":zC["Mod-Backspace"],"Ctrl-d":zC.Delete,"Ctrl-Alt-Backspace":zC["Mod-Delete"],"Alt-Delete":zC["Mod-Delete"],"Alt-d":zC["Mod-Delete"]};for(var $C in zC)PC[$C]=zC[$C];"undefined"!=typeof navigator?/Mac/.test(navigator.platform):"undefined"!=typeof os&&os.platform();var FC=function(e){jm(n,r["default"]);var t=Hm(n);function n(){return Jf(this,n),t.apply(this,arguments)}return Kf(n,[{key:"removeImage",value:function(){var e=this.view;_C(e.state,e.dispatch)}}]),n}();Wm([dg({type:Object,required:!0})],FC.prototype,"view",void 0),Wm([lg()],FC.prototype,"et",void 0);const BC=Iy({render:function(){var e=this.$createElement;return(this._self._c||e)("command-button",{attrs:{command:this.removeImage,"enable-tooltip":this.et.tooltip,tooltip:this.et.t("editor.extensions.Image.buttons.remove_image.tooltip"),icon:"regular/trash-alt"}})},staticRenderFns:[]},void 0,FC=Wm([ag({components:{CommandButton:nb}})],FC),void 0,!1,void 0,!1,void 0,void 0,void 0);var jC=function(e){jm(n,r["default"]);var t=Hm(n);function n(){return Jf(this,n),t.apply(this,arguments)}return n}();Wm([dg({type:D,required:!0})],jC.prototype,"node",void 0),Wm([dg({type:Object,required:!0})],jC.prototype,"view",void 0),Wm([dg({type:Function,required:!0})],jC.prototype,"updateAttrs",void 0);const LC=Iy({render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"image-bubble-menu"},[t("image-display-command-button",{attrs:{node:this.node,"update-attrs":this.updateAttrs}}),this._v(" "),t("edit-image-command-button",{attrs:{node:this.node,"update-attrs":this.updateAttrs}}),this._v(" "),t("remove-image-command-button",{attrs:{view:this.view}})],1)},staticRenderFns:[]},void 0,jC=Wm([ag({components:{ImageDisplayCommandButton:LS,EditImageCommandButton:WS,RemoveImageCommandButton:BC}})],jC),void 0,!1,void 0,!1,void 0,void 0,void 0);var VC,qC=function(e){jm(n,r["default"]);var t=Hm(n);function n(){var e;return Jf(this,n),(e=t.apply(this,arguments)).maxSize={width:1e5,height:1e5},e.originalSize={width:0,height:0},e.resizeOb=new $S((function(){e.getMaxSize()})),e.resizeDirections=["tl","tr","bl","br"],e.resizing=!1,e.resizerState={x:0,y:0,w:0,h:0,dir:""},e}return Kf(n,[{key:"created",value:function(){return Jm(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,BS(this.src);case 2:(t=e.sent).complete||(t.width=20,t.height=20),this.originalSize={width:t.width,height:t.height};case 5:case"end":return e.stop()}}),e,this)})))}},{key:"mounted",value:function(){this.resizeOb.observe(this.view.dom)}},{key:"beforeDestroy",value:function(){this.resizeOb.disconnect()}},{key:"selectImage",value:function(){var e=this.view.state,t=e.tr,n=Bt.create(e.doc,this.getPos());t=t.setSelection(n),this.view.dispatch(t)}},{key:"getMaxSize",value:function(){var e=getComputedStyle(this.view.dom).width;this.maxSize.width=parseInt(e,10)}},{key:"onMouseDown",value:function(e,t){e.preventDefault(),e.stopPropagation(),this.resizerState.x=e.clientX,this.resizerState.y=e.clientY;var n=this.originalSize.width,r=n/this.originalSize.height,o=this.node.attrs,i=o.width,s=o.height,a=this.maxSize.width;i&&!s?(i=i>a?a:i,s=Math.round(i/r)):s&&!i?i=(i=Math.round(s*r))>a?a:i:i||s?i=i>a?a:i:(i=n>a?a:n,s=Math.round(i/r)),this.resizerState.w=i,this.resizerState.h=s,this.resizerState.dir=t,this.resizing=!0,this.onEvents()}},{key:"onMouseMove",value:function(e){if(e.preventDefault(),e.stopPropagation(),this.resizing){var t=this.resizerState,n=t.x,r=t.y,o=t.w,i=t.h,s=t.dir,a=(e.clientX-n)*(/l/.test(s)?-1:1),l=(e.clientY-r)*(/t/.test(s)?-1:1);this.updateAttrs({width:Oy(o+a,20,this.maxSize.width),height:Math.max(i+l,20)})}}},{key:"onMouseUp",value:function(e){e.preventDefault(),e.stopPropagation(),this.resizing&&(this.resizing=!1,this.resizerState={x:0,y:0,w:0,h:0,dir:""},this.offEvents(),this.selectImage())}},{key:"onEvents",value:function(){document.addEventListener("mousemove",this.onMouseMove,!0),document.addEventListener("mouseup",this.onMouseUp,!0)}},{key:"offEvents",value:function(){document.removeEventListener("mousemove",this.onMouseMove,!0),document.removeEventListener("mouseup",this.onMouseUp,!0)}},{key:"src",get:function(){return this.node.attrs.src}},{key:"width",get:function(){return this.node.attrs.width}},{key:"height",get:function(){return this.node.attrs.height}},{key:"display",get:function(){return this.node.attrs.display}},{key:"imageViewClass",get:function(){return["image-view","image-view--".concat(this.display)]}}]),n}();Wm([dg({type:D,required:!0})],qC.prototype,"node",void 0),Wm([dg({type:Object,required:!0})],qC.prototype,"view",void 0),Wm([dg({type:Function,required:!0})],qC.prototype,"getPos",void 0),Wm([dg({type:Function,required:!0})],qC.prototype,"updateAttrs",void 0),Wm([dg({type:Boolean,required:!0})],qC.prototype,"selected",void 0);const HC=Iy({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{class:e.imageViewClass},[n("div",{staticClass:"image-view__body",class:{"image-view__body--focused":e.selected,"image-view__body--resizing":e.resizing}},[n("img",{staticClass:"image-view__body__image",attrs:{src:e.src,title:e.node.attrs.title,alt:e.node.attrs.alt,width:e.width,height:e.height},on:{click:e.selectImage}}),e._v(" "),e.view.editable?n("div",{directives:[{name:"show",rawName:"v-show",value:e.selected||e.resizing,expression:"selected || resizing"}],staticClass:"image-resizer"},e._l(e.resizeDirections,(function(t){return n("span",{key:t,staticClass:"image-resizer__handler",class:"image-resizer__handler--"+t,on:{mousedown:function(n){return e.onMouseDown(n,t)}}})})),0):e._e(),e._v(" "),n("el-popover",{attrs:{value:e.selected,"visible-arrow":!1,placement:"top",trigger:"manual","popper-class":"el-tiptap-image-popper"}},[n("image-bubble-menu",{attrs:{node:e.node,view:e.view,"update-attrs":e.updateAttrs}}),e._v(" "),n("div",{staticClass:"image-view__body__placeholder",attrs:{slot:"reference"},slot:"reference"})],1)],1)])},staticRenderFns:[]},void 0,qC=Wm([ag({components:(VC={},Fm(VC,Pd().name,Pd()),Fm(VC,"ImageBubbleMenu",LC),VC)})],qC),void 0,!1,void 0,!1,void 0,void 0,void 0);function WC(e){var t=e.style,n=t.cssFloat,r=t.display,o=e.style,i=o.width,s=o.height,a=e.getAttribute("data-display")||e.getAttribute("display");return a=a?/(inline|block|left|right)/.test(a)?a:"inline":"left"!==n||r?"right"!==n||r?n||"block"!==r?"inline":"block":"right":"left",i=i||e.getAttribute("width")||null,s=s||e.getAttribute("height")||null,{src:e.getAttribute("src")||"",title:e.getAttribute("title")||"",alt:e.getAttribute("alt")||"",width:null==i?null:parseInt(i,10),height:null==s?null:parseInt(s,10),display:a}}function JC(e){var t=e.attrs,n=t.src,r=t.alt,o=t.title,i=t.width,s=t.height,a=t.display,l={src:n,alt:r,title:o,width:i,height:s};return l["data-display"]=a,["img",l]}var UC=function(e){jm(n,rd);var t=Hm(n);function n(){return Jf(this,n),t.apply(this,arguments)}return Kf(n,[{key:"menuBtnView",value:function(e){return{component:Yx,componentProps:{editorContext:e}}}},{key:"defaultOptions",get:function(){return{defaultWidth:200,defaultDisplay:"inline",urlPattern:ym,uploadRequest:null}}},{key:"schema",get:function(){return{inline:!0,attrs:{src:{default:""},alt:{default:""},title:{default:""},width:{default:this.imageDefaultWidth>0?this.imageDefaultWidth:200},height:{default:null},display:{default:/(inline|block|left|right)/.test(this.defaultDisplay)?this.defaultDisplay:"inline"}},group:"inline",draggable:!0,parseDOM:[{tag:"img[src]",getAttrs:WC}],toDOM:JC}}},{key:"view",get:function(){return HC}}]),n}(),KC=function(e){jm(n,r["default"]);var t=Hm(n);function n(){return Jf(this,n),t.apply(this,arguments)}return Kf(n,[{key:"done",get:function(){return this.node.attrs.done},set:function(e){this.updateAttrs({done:e})}},{key:"todoItemStyle",get:function(){return{lineHeight:bx(this.node.attrs.lineHeight)}}}]),n}();Wm([dg({type:D,required:!0})],KC.prototype,"node",void 0),Wm([dg({type:Object,required:!0})],KC.prototype,"view",void 0),Wm([dg({type:Function,required:!0})],KC.prototype,"updateAttrs",void 0);const GC=Iy({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("li",{staticClass:"todo-item",class:{"todo-item--done":e.done},style:e.todoItemStyle,attrs:{"data-type":e.node.type.name,"data-done":e.done.toString(),"data-text-align":e.node.attrs.textAlign,"data-drag-handle":""}},[n("span",{attrs:{contenteditable:"false"}},[n("el-checkbox",{model:{value:e.done,callback:function(t){e.done=t},expression:"done"}})],1),e._v(" "),n("div",{ref:"content",staticClass:"todo-content",attrs:{contenteditable:e.view.editable.toString()}})])},staticRenderFns:[]},void 0,KC=Wm([ag({components:Fm({},Od().name,Od())})],KC),void 0,!1,void 0,!1,void 0,void 0,void 0);function XC(e){var t=e.style,n=t.textAlign,r=t.lineHeight,o=e.getAttribute("data-text-align")||n||"";return{textAlign:(o=vm.test(o)?o:"")||null,lineHeight:(r=r&&r!==bx(1.7)?r:"")||null,done:"true"===e.getAttribute("data-done")}}function ZC(e){var t=e.attrs,n=t.done,r=t.textAlign,o=t.lineHeight,i="",s={"data-type":"todo_item"};if(s["data-done"]=n.toString(),r&&"left"!==r&&(i+="text-align: ".concat(r)),o){var a=bx(o);i+="line-height: ".concat(a,";")}return i&&(s.style=i),["li",Object.assign(Object.assign({},s),{class:"todo-item ".concat(n?"todo-item--done":"")}),["span",{contenteditable:"false"},["span",{class:"el-checkbox ".concat(n?"is-checked":""),style:"pointer-events: none;"},["span",{class:"el-checkbox__input ".concat(n?"is-checked":"")},["span",{class:"el-checkbox__inner"}]]]],["div",{class:"todo-content"},0]]}(function(e){jm(n,dd);var t=Hm(n);function n(){return Jf(this,n),t.apply(this,arguments)}Kf(n,[{key:"schema",get:function(){return{attrs:{done:{default:!1},textAlign:{default:null},lineHeight:{default:null}},draggable:!0,content:this.options.nested?"(paragraph|todo_list)+":"paragraph+",parseDOM:[{priority:51,tag:'[data-type="'.concat(this.name,'"]'),getAttrs:XC}],toDOM:ZC}}},{key:"view",get:function(){return GC}}])})(),function(e){jm(n,hd);var t=Hm(n);function n(){return Jf(this,n),t.apply(this,arguments)}Kf(n,[{key:"menuBtnView",value:function(e){var t=e.isActive,n=e.commands,r=e.t;return{component:nb,componentProps:{isActive:t.todo_list(),command:n.todo_list,icon:"tasks",tooltip:r("editor.extensions.TodoList.tooltip")}}}},{key:"schema",get:function(){var e=this;return{group:"block",content:"todo_item+",parseDOM:[{priority:51,tag:'[data-type="'.concat(this.name,'"]'),getAttrs:function(){return{"data-type":e.name}}}],toDOM:function(){var t={};return t["data-type"]=e.name,["ul",t,0]}}}}])}();function YC(e){var t=e.selection,n=e.doc,r=t.from,o=t.to,i=!0,s=!1;return n.nodesBetween(r,o,(function(e){var t=e.type.name;return!i||"table"!==t&&"table_row"!==t&&"table_column"!==t&&"table_cell"!==t||(i=!1,s=!0),i})),s}var QC=function(e){jm(n,r["default"]);var t=Hm(n);function n(){var e;return Jf(this,n),(e=t.apply(this,arguments)).popoverVisible=!1,e.tableGridSize={row:5,col:5},e.selectedTableGridSize={row:2,col:2},e}return Kf(n,[{key:"selectTableGridSize",value:function(e,t){e===this.tableGridSize.row&&(this.tableGridSize.row=Math.min(e+1,10)),t===this.tableGridSize.col&&(this.tableGridSize.col=Math.min(t+1,10)),this.selectedTableGridSize.row=e,this.selectedTableGridSize.col=t}},{key:"onMouseDown",value:function(e,t){return this.popoverVisible=!1,{row:e,col:t}}},{key:"resetTableGridSize",value:function(){this.tableGridSize={row:5,col:5},this.selectedTableGridSize={row:2,col:2}}}]),n}();Wm([lg()],QC.prototype,"et",void 0),Wm([fg("createTable")],QC.prototype,"onMouseDown",null);const e_=Iy({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-popover",{attrs:{placement:"right",trigger:"hover","popper-class":"el-tiptap-popper"},on:{"after-leave":e.resetTableGridSize},model:{value:e.popoverVisible,callback:function(t){e.popoverVisible=t},expression:"popoverVisible"}},[n("div",{staticClass:"table-grid-size-editor"},[n("div",{staticClass:"table-grid-size-editor__body"},e._l(e.tableGridSize.row,(function(t){return n("div",{key:"r"+t,staticClass:"table-grid-size-editor__row"},e._l(e.tableGridSize.col,(function(r){return n("div",{key:"c"+r,staticClass:"table-grid-size-editor__cell",class:{"table-grid-size-editor__cell--selected":r<=e.selectedTableGridSize.col&&t<=e.selectedTableGridSize.row},on:{mouseover:function(n){return e.selectTableGridSize(t,r)},mousedown:function(n){return e.onMouseDown(t,r)}}},[n("div",{staticClass:"table-grid-size-editor__cell__inner"})])})),0)})),0),e._v(" "),n("div",{staticClass:"table-grid-size-editor__footer"},[e._v("\n      "+e._s(e.selectedTableGridSize.row)+" X "+e._s(e.selectedTableGridSize.col)+"\n    ")])]),e._v(" "),n("div",{attrs:{slot:"reference"},on:{mouseover:function(t){e.popoverVisible=!0}},slot:"reference"},[n("span",[e._v(e._s(e.et.t("editor.extensions.Table.buttons.insert_table")))])])])},staticRenderFns:[]},void 0,QC=Wm([ag({components:Fm({},Pd().name,Pd())})],QC),void 0,!1,void 0,!1,void 0,void 0,void 0);var t_,n_=function(e){jm(n,r["default"]);var t=Hm(n);function n(){var e;return Jf(this,n),(e=t.apply(this,arguments)).popoverVisible=!1,e}return Kf(n,[{key:"hidePopover",value:function(){this.popoverVisible=!1}},{key:"createTable",value:function(e){var t=e.row,n=e.col;this.editorContext.commands.createTable({rowsCount:t,colsCount:n,withHeaderRow:!0}),this.hidePopover()}},{key:"editor",get:function(){return this.editorContext.editor}},{key:"isTableActive",get:function(){return YC(this.editor.state)}},{key:"enableMergeCells",get:function(){return YC(e=this.editor.state)&&du(e);var e}},{key:"enableSplitCell",get:function(){return YC(e=this.editor.state)&&hu(e);var e}}]),n}();Wm([dg({type:Object,required:!0})],n_.prototype,"editorContext",void 0),Wm([lg()],n_.prototype,"et",void 0);const r_=Iy({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-popover",{attrs:{disabled:e.et.isCodeViewMode,placement:"bottom",trigger:"click","popper-class":"el-tiptap-popper"},model:{value:e.popoverVisible,callback:function(t){e.popoverVisible=t},expression:"popoverVisible"}},[n("div",{staticClass:"el-tiptap-popper__menu"},[n("div",{staticClass:"el-tiptap-popper__menu__item"},[n("create-table-popover",{on:{createTable:e.createTable}})],1),e._v(" "),n("div",{staticClass:"el-tiptap-popper__menu__item__separator"}),e._v(" "),n("div",{staticClass:"el-tiptap-popper__menu__item",class:{"el-tiptap-popper__menu__item--disabled":!e.isTableActive},on:{mousedown:e.hidePopover,click:e.editorContext.commands.addColumnBefore}},[n("span",[e._v(e._s(e.et.t("editor.extensions.Table.buttons.add_column_before")))])]),e._v(" "),n("div",{staticClass:"el-tiptap-popper__menu__item",class:{"el-tiptap-popper__menu__item--disabled":!e.isTableActive},on:{mousedown:e.hidePopover,click:e.editorContext.commands.addColumnAfter}},[n("span",[e._v(e._s(e.et.t("editor.extensions.Table.buttons.add_column_after")))])]),e._v(" "),n("div",{staticClass:"el-tiptap-popper__menu__item",class:{"el-tiptap-popper__menu__item--disabled":!e.isTableActive},on:{mousedown:e.hidePopover,click:e.editorContext.commands.deleteColumn}},[n("span",[e._v(e._s(e.et.t("editor.extensions.Table.buttons.delete_column")))])]),e._v(" "),n("div",{staticClass:"el-tiptap-popper__menu__item__separator"}),e._v(" "),n("div",{staticClass:"el-tiptap-popper__menu__item",class:{"el-tiptap-popper__menu__item--disabled":!e.isTableActive},on:{mousedown:e.hidePopover,click:e.editorContext.commands.addRowBefore}},[n("span",[e._v(e._s(e.et.t("editor.extensions.Table.buttons.add_row_before")))])]),e._v(" "),n("div",{staticClass:"el-tiptap-popper__menu__item",class:{"el-tiptap-popper__menu__item--disabled":!e.isTableActive},on:{mousedown:e.hidePopover,click:e.editorContext.commands.addRowAfter}},[n("span",[e._v(e._s(e.et.t("editor.extensions.Table.buttons.add_row_after")))])]),e._v(" "),n("div",{staticClass:"el-tiptap-popper__menu__item",class:{"el-tiptap-popper__menu__item--disabled":!e.isTableActive},on:{mousedown:e.hidePopover,click:e.editorContext.commands.deleteRow}},[n("span",[e._v(e._s(e.et.t("editor.extensions.Table.buttons.delete_row")))])]),e._v(" "),n("div",{staticClass:"el-tiptap-popper__menu__item__separator"}),e._v(" "),n("div",{staticClass:"el-tiptap-popper__menu__item",class:{"el-tiptap-popper__menu__item--disabled":!e.enableMergeCells},on:{mousedown:e.hidePopover,click:e.editorContext.commands.mergeCells}},[n("span",[e._v(e._s(e.et.t("editor.extensions.Table.buttons.merge_cells")))])]),e._v(" "),n("div",{staticClass:"el-tiptap-popper__menu__item",class:{"el-tiptap-popper__menu__item--disabled":!e.enableSplitCell},on:{mousedown:e.hidePopover,click:e.editorContext.commands.splitCell}},[n("span",[e._v(e._s(e.et.t("editor.extensions.Table.buttons.split_cell")))])]),e._v(" "),n("div",{staticClass:"el-tiptap-popper__menu__item__separator"}),e._v(" "),n("div",{staticClass:"el-tiptap-popper__menu__item",class:{"el-tiptap-popper__menu__item--disabled":!e.isTableActive},on:{mousedown:e.hidePopover,click:e.editorContext.commands.deleteTable}},[n("span",[e._v(e._s(e.et.t("editor.extensions.Table.buttons.delete_table")))])])]),e._v(" "),n("command-button",{attrs:{slot:"reference","is-active":e.isTableActive,"enable-tooltip":e.et.tooltip,tooltip:e.et.t("editor.extensions.Table.tooltip"),readonly:e.et.isCodeViewMode,icon:"table"},slot:"reference"})],1)},staticRenderFns:[]},void 0,n_=Wm([ag({components:(t_={},Fm(t_,Pd().name,Pd()),Fm(t_,"CommandButton",nb),Fm(t_,"CreateTablePopover",e_),t_)})],n_),void 0,!1,void 0,!1,void 0,void 0,void 0);var o_=function(e){jm(n,ad);var t=Hm(n);function n(){return Jf(this,n),t.apply(this,arguments)}return Kf(n,[{key:"menuBtnView",value:function(e){return{component:r_,componentProps:{editorContext:e}}}}]),n}(),i_=function(e){jm(n,r["default"]);var t=Hm(n);function n(){return Jf(this,n),t.apply(this,arguments)}return Kf(n,[{key:"openInsertVideoControl",value:function(){var e=this;jd().prompt("",this.et.t("editor.extensions.Iframe.control.title"),{confirmButtonText:this.et.t("editor.extensions.Iframe.control.confirm"),cancelButtonText:this.et.t("editor.extensions.Iframe.control.cancel"),inputPlaceholder:this.et.t("editor.extensions.Iframe.control.placeholder"),roundButton:!0}).then((function(t){var n=t.value;e.editorContext.commands.iframe({src:n})})).catch((function(){}))}}]),n}();Wm([dg({type:Object,required:!0})],i_.prototype,"editorContext",void 0),Wm([lg()],i_.prototype,"et",void 0);const s_=Iy({render:function(){var e=this.$createElement;return(this._self._c||e)("command-button",{attrs:{command:this.openInsertVideoControl,"enable-tooltip":this.et.tooltip,tooltip:this.et.t("editor.extensions.Iframe.tooltip"),readonly:this.et.isCodeViewMode,icon:"video"}})},staticRenderFns:[]},void 0,i_=Wm([ag({components:{CommandButton:nb}})],i_),void 0,!1,void 0,!1,void 0,void 0,void 0);(function(e){jm(n,bl);var t=Hm(n);function n(){return Jf(this,n),t.apply(this,arguments)}Kf(n,[{key:"commands",value:function(e){var t=e.type;return function(e){return function(n,r){var o=n.selection,i=o.$cursor?o.$cursor.pos:o.$to.pos,s=t.create(e);r(n.tr.insert(i,s))}}}},{key:"menuBtnView",value:function(e){return{component:s_,componentProps:{editorContext:e}}}},{key:"name",get:function(){return"iframe"}},{key:"schema",get:function(){return{attrs:{src:{default:null}},group:"block",selectable:!1,parseDOM:[{tag:"iframe",getAttrs:function(e){return{src:e.getAttribute("src")}}}],toDOM:function(e){return["iframe",{src:e.attrs.src,frameborder:0,allowfullscreen:"true"}]}}}},{key:"view",get:function(){return{props:["node","updateAttrs","view"],computed:{src:{get:function(){return this.node.attrs.src},set:function(e){this.updateAttrs({src:e})}}},template:'\n        <div class="iframe">\n          <iframe class="iframe__embed" :src="src"></iframe>\n        </div>\n      '}}}])})();wp({target:"String",proto:!0,forced:Ly("bold")},{bold:function(){return jy(this,"b","","")}});var a_=function(e){jm(n,pd);var t=Hm(n);function n(){return Jf(this,n),t.apply(this,arguments)}return Kf(n,[{key:"menuBtnView",value:function(e){var t=e.isActive,n=e.commands,r=e.t;return{component:nb,componentProps:{command:n.bold,isActive:t.bold(),icon:"bold",tooltip:r("editor.extensions.Bold.tooltip")}}}}]),n}(),l_=function(e){jm(n,vd);var t=Hm(n);function n(){return Jf(this,n),t.apply(this,arguments)}return Kf(n,[{key:"menuBtnView",value:function(e){var t=e.isActive,n=e.commands,r=e.t;return{component:nb,componentProps:{command:n.underline,isActive:t.underline(),icon:"underline",tooltip:r("editor.extensions.Underline.tooltip")}}}}]),n}(),c_=function(e){jm(n,fd);var t=Hm(n);function n(){return Jf(this,n),t.apply(this,arguments)}return Kf(n,[{key:"menuBtnView",value:function(e){var t=e.isActive,n=e.commands,r=e.t;return{component:nb,componentProps:{command:n.italic,isActive:t.italic(),icon:"italic",tooltip:r("editor.extensions.Italic.tooltip")}}}}]),n}();wp({target:"String",proto:!0,forced:Ly("strike")},{strike:function(){return jy(this,"strike","","")}});var u_,d_=function(e){jm(n,gd);var t=Hm(n);function n(){return Jf(this,n),t.apply(this,arguments)}return Kf(n,[{key:"menuBtnView",value:function(e){var t=e.isActive,n=e.commands,r=e.t;return{component:nb,componentProps:{command:n.strike,isActive:t.strike(),icon:"strikethrough",tooltip:r("editor.extensions.Strike.tooltip")}}}}]),n}(),h_=Mg.trim;wp({target:"String",proto:!0,forced:function(e){return Ud((function(){return!!xg[e]()||""!=""[e]()||xg[e].name!==e}))}("trim")},{trim:function(){return h_(this)}});var p_=function(e){jm(n,r["default"]);var t=Hm(n);function n(){var e;return Jf(this,n),(e=t.apply(this,arguments)).linkAttrs={},e.addLinkDialogVisible=!1,e}return Kf(n,[{key:"onDialogVisibleChange",value:function(){this.linkAttrs={href:"",openInNewTab:!0}}},{key:"addLink",value:function(){this.editorContext.commands.link(this.linkAttrs),this.closeAddLinkDialog()}},{key:"openAddLinkDialog",value:function(){this.addLinkDialogVisible=!0}},{key:"closeAddLinkDialog",value:function(){this.addLinkDialogVisible=!1}}]),n}();Wm([dg({type:Object,required:!0})],p_.prototype,"editorContext",void 0),Wm([lg()],p_.prototype,"et",void 0),Wm([hg("addLinkDialogVisible",{immediate:!0})],p_.prototype,"onDialogVisibleChange",null);const f_=Iy({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("command-button",{attrs:{"is-active":e.editorContext.isActive.link(),readonly:e.et.isCodeViewMode,command:e.openAddLinkDialog,"enable-tooltip":e.et.tooltip,tooltip:e.et.t("editor.extensions.Link.add.tooltip"),icon:"link"}}),e._v(" "),n("el-dialog",{attrs:{title:e.et.t("editor.extensions.Link.add.control.title"),visible:e.addLinkDialogVisible,"append-to-body":!0,width:"400px","custom-class":"el-tiptap-edit-link-dialog"},on:{"update:visible":function(t){e.addLinkDialogVisible=t}},scopedSlots:e._u([{key:"footer",fn:function(){return[n("el-button",{attrs:{size:"small",round:""},on:{click:e.closeAddLinkDialog}},[e._v("\n        "+e._s(e.et.t("editor.extensions.Link.add.control.cancel"))+"\n      ")]),e._v(" "),n("el-button",{attrs:{type:"primary",size:"small",round:""},on:{mousedown:function(e){e.preventDefault()},click:e.addLink}},[e._v("\n        "+e._s(e.et.t("editor.extensions.Link.add.control.confirm"))+"\n      ")])]},proxy:!0}])},[n("el-form",{attrs:{model:e.linkAttrs,"label-position":"right",size:"small"}},[n("el-form-item",{attrs:{label:e.et.t("editor.extensions.Link.add.control.href"),prop:"href"}},[n("el-input",{attrs:{autocomplete:"off"},model:{value:e.linkAttrs.href,callback:function(t){e.$set(e.linkAttrs,"href",t)},expression:"linkAttrs.href"}})],1),e._v(" "),n("el-form-item",{attrs:{prop:"openInNewTab"}},[n("el-checkbox",{model:{value:e.linkAttrs.openInNewTab,callback:function(t){e.$set(e.linkAttrs,"openInNewTab",t)},expression:"linkAttrs.openInNewTab"}},[e._v("\n          "+e._s(e.et.t("editor.extensions.Link.add.control.open_in_new_tab"))+"\n        ")])],1)],1)],1)],1)},staticRenderFns:[]},void 0,p_=Wm([ag({components:(u_={},Fm(u_,Ed().name,Ed()),Fm(u_,Yk.name,Yk),Fm(u_,Zk.name,Zk),Fm(u_,db.name,db),Fm(u_,Od().name,Od()),Fm(u_,Cd().name,Cd()),Fm(u_,"CommandButton",nb),u_)})],p_),void 0,!1,void 0,!1,void 0,void 0,void 0);function m_(e){return{href:e.getAttribute("href"),openInNewTab:"_blank"===e.getAttribute("target")}}function g_(e){var t=e.attrs,n=t.href,r=t.openInNewTab,o={};o.href=n;var i="nofollow";return r&&(o.target="_blank",i+=" noopener noreferrer"),o.ref=i.trim(),["a",o,0]}(function(e){jm(n,md);var t=Hm(n);function n(){return Jf(this,n),t.apply(this,arguments)}Kf(n,[{key:"menuBtnView",value:function(e){return{component:f_,componentProps:{editorContext:e}}}},{key:"schema",get:function(){return{attrs:{href:{default:null},openInNewTab:{default:!0}},inclusive:!1,parseDOM:[{tag:"a[href]",getAttrs:m_}],toDOM:g_}}},{key:"plugins",get:function(){return[new tn({props:{handleClick:function(e,t){var n=e.state,r=n.schema,o=n.doc,i=n.tr,s=eb(o.resolve(t),r.marks.link);if(!s)return!1;var a=o.resolve(s.from),l=o.resolve(s.to),c=i.setSelection(new $t(a,l));return e.dispatch(c),!0}}})]}}])})();function v_(e,t,n){if(!e.selection||!e.doc||!t)return e;var r=e.selection,o=r.empty,i=r.$cursor,s=r.ranges;if(o&&!i||!function(e,t,n){for(var r=function(r){var o=t[r],i=o.$from,s=o.$to,a=0===i.depth&&e.type.allowsMarkType(n);if(e.nodesBetween(i.pos,s.pos,(function(e){return!a&&(a=e.inlineContent&&e.type.allowsMarkType(n),!0)})),a)return{v:!0}},o=0;o<t.length;o++){var i=r(o);if("object"===Vm(i))return i.v}return!1}(e.doc,s,t))return e;if(i)return e=e.removeStoredMark(t),n?e.addStoredMark(t.create(n)):e;for(var a=!1,l=0;!a&&l<s.length;l++){var c=s[l],u=c.$from,d=c.$to;a=e.doc.rangeHasMark(u.pos,d.pos,t)}for(var h=0;h<s.length;h++){var p=s[h],f=p.$from,m=p.$to;a&&(e=e.removeMark(f.pos,m.pos,t)),n&&(e=e.addMark(f.pos,m.pos,t.create(n)))}return e}var y_,b_=["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4caf50","#8bc34a","#cddc39","#ffeb3b","#ffc107","#ff9800","#ff5722","#000000"];function w_(e){return/#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})\b/gi.test(e)}var k_=function(e){jm(n,r["default"]);var t=Hm(n);function n(){var e;return Jf(this,n),(e=t.apply(this,arguments)).color="",e.popoverVisible=!1,e}return Kf(n,[{key:"onSelectedColorChange",value:function(e){this.color=e}},{key:"confirmColor",value:function(e){return this.popoverVisible=!1,e}}]),n}();Wm([dg({type:Array,default:function(){return[]}})],k_.prototype,"colorSet",void 0),Wm([dg({type:String,default:""})],k_.prototype,"selectedColor",void 0),Wm([dg({type:String,required:!0})],k_.prototype,"tooltip",void 0),Wm([dg({type:String,required:!0})],k_.prototype,"icon",void 0),Wm([dg({type:String,default:"OK"})],k_.prototype,"confirmText",void 0),Wm([lg()],k_.prototype,"et",void 0),Wm([hg("selectedColor",{immediate:!0})],k_.prototype,"onSelectedColorChange",null),Wm([fg("confirm")],k_.prototype,"confirmColor",null);const x_=Iy({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-popover",{attrs:{disabled:e.et.isCodeViewMode,placement:"bottom",trigger:"click","popper-class":"el-tiptap-popper"},model:{value:e.popoverVisible,callback:function(t){e.popoverVisible=t},expression:"popoverVisible"}},[n("div",{staticClass:"color-set"},[e._l(e.colorSet,(function(t){return n("div",{key:t,staticClass:"color__wrapper"},[n("div",{staticClass:"color",class:{"color--selected":e.selectedColor===t},style:{"background-color":t},on:{mousedown:function(e){e.preventDefault()},click:function(n){return n.stopPropagation(),e.confirmColor(t)}}})])})),e._v(" "),n("div",{staticClass:"color__wrapper"},[n("div",{staticClass:"color color--remove",on:{mousedown:function(e){e.preventDefault()},click:function(t){return t.stopPropagation(),e.confirmColor("")}}})])],2),e._v(" "),n("div",{staticClass:"color-hex"},[n("el-input",{staticClass:"color-hex__input",attrs:{placeholder:"HEX",autofocus:"true",maxlength:"7",size:"small"},model:{value:e.color,callback:function(t){e.color=t},expression:"color"}}),e._v(" "),n("el-button",{staticClass:"color-hex__button",attrs:{type:"text",size:"small"},on:{click:function(t){return e.confirmColor(e.color)}}},[e._v("\n      "+e._s(e.confirmText)+"\n    ")])],1),e._v(" "),n("command-button",{attrs:{slot:"reference","enable-tooltip":e.et.tooltip,tooltip:e.tooltip,icon:e.icon,readonly:e.et.isCodeViewMode},slot:"reference"})],1)},staticRenderFns:[]},void 0,k_=Wm([ag({components:(y_={},Fm(y_,Cd().name,Cd()),Fm(y_,Pd().name,Pd()),Fm(y_,db.name,db),Fm(y_,"CommandButton",nb),y_)})],k_),void 0,!1,void 0,!1,void 0,void 0,void 0);var S_=function(e){jm(n,vl);var t=Hm(n);function n(){return Jf(this,n),t.apply(this,arguments)}return Kf(n,[{key:"commands",value:function(){return function(e){return function(t,n){if(void 0!==e){var r=t.schema,o=t.tr,i=r.marks.text_color,s=e&&w_(e)?{color:e}:null;if((o=v_(t.tr.setSelection(t.selection),i,s)).docChanged||o.storedMarksSet)return n&&n(o),!0}return!1}}}},{key:"menuBtnView",value:function(e){var t=e.commands,n=e.getMarkAttrs,r=e.t;return{component:x_,componentProps:{colorSet:this.options.colors,selectedColor:n("text_color").color,tooltip:r("editor.extensions.TextColor.tooltip"),icon:"tint"},componentEvents:{confirm:function(e){return t.text_color(e)}}}}},{key:"name",get:function(){return"text_color"}},{key:"defaultOptions",get:function(){return{colors:b_}}},{key:"schema",get:function(){return{attrs:{color:""},inline:!0,group:"inline",parseDOM:[{style:"color",getAttrs:function(e){return{color:e}}}],toDOM:function(e){var t=e.attrs.color,n="";return t&&(n+="color: ".concat(t,";")),["span",{style:n},0]}}}}]),n}(),C_=(function(e){jm(n,vl);var t=Hm(n);function n(){return Jf(this,n),t.apply(this,arguments)}Kf(n,[{key:"commands",value:function(){return function(e){return function(t,n){if(void 0!==e){var r=t.schema,o=t.tr,i=r.marks.text_highlight,s=e&&w_(e)?{highlightColor:e}:null;if((o=v_(t.tr.setSelection(t.selection),i,s)).docChanged||o.storedMarksSet)return n&&n(o),!0}return!1}}}},{key:"menuBtnView",value:function(e){var t=e.commands,n=e.getMarkAttrs,r=e.t;return{component:x_,componentProps:{colorSet:this.options.colors,selectedColor:n("text_highlight").highlightColor,tooltip:r("editor.extensions.TextHighlight.tooltip"),icon:"highlighter"},componentEvents:{confirm:function(e){return t.text_highlight(e)}}}}},{key:"name",get:function(){return"text_highlight"}},{key:"defaultOptions",get:function(){return{colors:b_}}},{key:"schema",get:function(){return{attrs:{highlightColor:""},inline:!0,group:"inline",parseDOM:[{tag:"span[style*=background-color]",getAttrs:function(e){return{highlightColor:e.style.backgroundColor}}}],toDOM:function(e){var t=e.attrs.highlightColor,n="";return t&&(n+="background-color: ".concat(t,";")),["span",{style:n},0]}}}}])}(),Math.max),__=Math.min,O_=Math.floor,M_=/\$([$&'`]|\d\d?|<[^>]*>)/g,E_=/\$([$&'`]|\d\d?)/g;zf("replace",2,(function(e,t,n,r){var o=r.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,i=r.REPLACE_KEEPS_$0,s=o?"$":"$0";return[function(n,r){var o=rh(this),i=null==n?void 0:n[e];return void 0!==i?i.call(n,o,r):t.call(String(o),n,r)},function(e,r){if(!o&&i||"string"==typeof r&&-1===r.indexOf(s)){var l=n(t,e,this,r);if(l.done)return l.value}var c=mh(e),u=String(this),d="function"==typeof r;d||(r=String(r));var h=c.global;if(h){var p=c.unicode;c.lastIndex=0}for(var f=[];;){var m=Vf(c,u);if(null===m)break;if(f.push(m),!h)break;""===String(m[0])&&(c.lastIndex=Lf(u,Yh(c.lastIndex),p))}for(var g,v="",y=0,b=0;b<f.length;b++){m=f[b];for(var w=String(m[0]),k=C_(__(Xh(m.index),u.length),0),x=[],S=1;S<m.length;S++)x.push(void 0===(g=m[S])?g:String(g));var C=m.groups;if(d){var _=[w].concat(x,k,u);void 0!==C&&_.push(C);var O=String(r.apply(void 0,_))}else O=a(w,u,k,x,C,r);k>=y&&(v+=u.slice(y,k)+O,y=k+w.length)}return v+u.slice(y)}];function a(e,n,r,o,i,s){var a=r+e.length,l=o.length,c=E_;return void 0!==i&&(i=xp(i),c=M_),t.call(s,c,(function(t,s){var c;switch(s.charAt(0)){case"$":return"$";case"&":return e;case"`":return n.slice(0,r);case"'":return n.slice(a);case"<":c=i[s.slice(1,-1)];break;default:var u=+s;if(0===u)return t;if(u>l){var d=O_(u/10);return 0===d?t:d<=l?void 0===o[d-1]?s.charAt(1):o[d-1]+s.charAt(1):t}c=o[u-1]}return void 0===c?"":c}))}}));var T_,A_=["Arial","Arial Black","Georgia","Impact","Tahoma","Times New Roman","Verdana","Courier New","Lucida Console","Monaco","monospace"].reduce((function(e,t){return e[t]=t,e}),{}),N_=function(e){jm(n,r["default"]);var t=Hm(n);function n(){return Jf(this,n),t.apply(this,arguments)}return Kf(n,[{key:"toggleFontType",value:function(e){e===this.activeFontType?this.editorContext.commands.font_type(""):this.editorContext.commands.font_type(e)}},{key:"editor",get:function(){return this.editorContext.editor}},{key:"fontTypes",get:function(){var e,t=this.editor.extensions.options.font_type.fontTypes;return e=t,"[object Object]"!==Object.prototype.toString.call(e)?(bm.error("'fontTypes' should be an object"),A_):t}},{key:"activeFontType",get:function(){return function(e){var t=e.schema,n=e.selection,r=e.tr,o=t.marks.font_type;if(!o)return"";if(n.empty){var i=(r.storedMarks||e.storedMarks||n instanceof $t&&n.$cursor&&n.$cursor.marks&&n.$cursor.marks()||[]).find((function(e){return e.type===o}));return i&&i.attrs.name||""}var s=Qy(e,o).name;return s||""}(this.editor.state)}}]),n}();Wm([dg({type:Object,required:!0})],N_.prototype,"editorContext",void 0),Wm([lg()],N_.prototype,"et",void 0);const R_=Iy({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dropdown",{attrs:{placement:"bottom",trigger:"click"},on:{command:e.toggleFontType}},[n("command-button",{attrs:{"enable-tooltip":e.et.tooltip,tooltip:e.et.t("editor.extensions.FontType.tooltip"),readonly:e.et.isCodeViewMode,icon:"font"}}),e._v(" "),n("el-dropdown-menu",{staticClass:"el-tiptap-dropdown-menu",attrs:{slot:"dropdown"},slot:"dropdown"},e._l(e.fontTypes,(function(t){return n("el-dropdown-item",{key:t,staticClass:"el-tiptap-dropdown-menu__item",class:{"el-tiptap-dropdown-menu__item--active":t===e.activeFontType},attrs:{command:t}},[n("span",{style:{"font-family":t},attrs:{"data-font":t}},[e._v(e._s(t))])])})),1)],1)},staticRenderFns:[]},void 0,N_=Wm([ag({components:(T_={},Fm(T_,Id().name,Id()),Fm(T_,Rd().name,Rd()),Fm(T_,Ad().name,Ad()),Fm(T_,"CommandButton",nb),T_)})],N_),void 0,!1,void 0,!1,void 0,void 0,void 0);(function(e){jm(n,vl);var t=Hm(n);function n(){return Jf(this,n),t.apply(this,arguments)}Kf(n,[{key:"commands",value:function(e){var t=e.type;return function(e){return function(n,r){var o=n.tr;return!(!(o=function(e,t,n){var r=e.selection;return r instanceof $t||r instanceof Lt?e=v_(e,t,n?{name:n}:null):e}(n.tr.setSelection(n.selection),t,e)).docChanged&&!o.storedMarksSet)&&(r&&r(o),!0)}}}},{key:"menuBtnView",value:function(e){return{component:R_,componentProps:{editorContext:e}}}},{key:"name",get:function(){return"font_type"}},{key:"defaultOptions",get:function(){return{fontTypes:A_}}},{key:"schema",get:function(){return{attrs:{name:""},inline:!0,group:"inline",parseDOM:[{style:"font-family",getAttrs:function(e){return{name:e?e.replace(/["']/g,""):""}}}],toDOM:function(e){var t=e.attrs.name,n={};return t&&(n.style="font-family: ".concat(t)),["span",n,0]}}}}])})();var D_,I_=["8","10","12","14","16","18","20","24","30","36","48","60","72"],z_=/([\d.]+)px/i,P_=function(e){jm(n,r["default"]);var t=Hm(n);function n(){var e;return Jf(this,n),(e=t.apply(this,arguments)).defaultSize="default",e}return Kf(n,[{key:"toggleFontSize",value:function(e){e===this.activeFontSize?this.editorContext.commands.font_size("default"):this.editorContext.commands.font_size(e)}},{key:"editor",get:function(){return this.editorContext.editor}},{key:"fontSizes",get:function(){return this.editor.extensions.options.font_size.fontSizes}},{key:"activeFontSize",get:function(){return function(e){var t=e.schema,n=e.selection,r=e.tr,o=t.marks.font_size;if(!o)return"default";if(n.empty){var i=(r.storedMarks||e.storedMarks||n instanceof $t&&n.$cursor&&n.$cursor.marks&&n.$cursor.marks()||[]).find((function(e){return e.type===o}));return i?String(i.attrs.px||"default"):"default"}var s=Qy(e,o).px;return s?String(s):"default"}(this.editor.state)}}]),n}();Wm([dg({type:Object,required:!0})],P_.prototype,"editorContext",void 0),Wm([lg()],P_.prototype,"et",void 0);const $_=Iy({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dropdown",{attrs:{placement:"bottom",trigger:"click"},on:{command:e.toggleFontSize}},[n("command-button",{attrs:{"enable-tooltip":e.et.tooltip,tooltip:e.et.t("editor.extensions.FontSize.tooltip"),readonly:e.et.isCodeViewMode,icon:"text-width"}}),e._v(" "),n("el-dropdown-menu",{staticClass:"el-tiptap-dropdown-menu",attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{staticClass:"el-tiptap-dropdown-menu__item",class:{"el-tiptap-dropdown-menu__item--active":e.activeFontSize===e.defaultSize},attrs:{command:e.defaultSize}},[n("span",{attrs:{"data-font-size":"default"}},[e._v(e._s(e.et.t("editor.extensions.FontSize.default")))])]),e._v(" "),e._l(e.fontSizes,(function(t){return n("el-dropdown-item",{key:t,staticClass:"el-tiptap-dropdown-menu__item",class:{"el-tiptap-dropdown-menu__item--active":t===e.activeFontSize},attrs:{command:t}},[n("span",{attrs:{"data-font-size":t}},[e._v(e._s(t))])])}))],2)],1)},staticRenderFns:[]},void 0,P_=Wm([ag({components:(D_={},Fm(D_,Id().name,Id()),Fm(D_,Rd().name,Rd()),Fm(D_,Ad().name,Ad()),Fm(D_,"CommandButton",nb),D_)})],P_),void 0,!1,void 0,!1,void 0,void 0,void 0);(function(e){jm(n,vl);var t=Hm(n);function n(){return Jf(this,n),t.apply(this,arguments)}Kf(n,[{key:"commands",value:function(e){var t=e.type;return function(e){return function(n,r){var o=n.tr;return!(!(o=function(e,t,n){var r=e.selection;return r instanceof $t||r instanceof Lt?e=v_(e,t,n&&"default"!==n?{px:n}:null):e}(n.tr.setSelection(n.selection),t,e)).docChanged&&!o.storedMarksSet)&&(r&&r(o),!0)}}}},{key:"menuBtnView",value:function(e){return{component:$_,componentProps:{editorContext:e}}}},{key:"name",get:function(){return"font_size"}},{key:"defaultOptions",get:function(){return{fontSizes:I_}}},{key:"schema",get:function(){return{attrs:{px:""},inline:!0,group:"inline",parseDOM:[{style:"font-size",getAttrs:function(e){var t={};if(!e)return t;var n=function(e){var t=e.match(z_);if(!t)return"";var n=t[1];return n||""}(e);return n?{px:n}:t}}],toDOM:function(e){var t=e.attrs.px,n={};return t&&(n.style="font-size: ".concat(t,"px")),["span",n,0]}}}}])})();var F_=function(e){jm(n,td);var t=Hm(n);function n(){return Jf(this,n),t.apply(this,arguments)}return Kf(n,[{key:"menuBtnView",value:function(e){var t=e.commands,n=e.t;return{component:nb,componentProps:{command:t.horizontal_rule,icon:"minus",tooltip:n("editor.extensions.HorizontalRule.tooltip")}}}}]),n}(),B_=(function(e){jm(n,yd);var t=Hm(n);function n(){return Jf(this,n),t.apply(this,arguments)}Kf(n,[{key:"menuBtnView",value:function(e){var t=e.commands,n=e.t;return[{component:nb,componentProps:{command:t.undo,icon:"undo",tooltip:n("editor.extensions.History.tooltip.undo")}},{component:nb,componentProps:{command:t.redo,icon:"redo",tooltip:n("editor.extensions.History.tooltip.redo")}}]}}])}(),["paragraph","heading","list_item","todo_item","title"]);function j_(e,t){var n=e,r=n.selection,o=n.doc;if(!r||!o)return e;var i=r.from,s=r.to,a=[];return t=t||null,o.nodesBetween(i,s,(function(e,n){var r=e.type;return!B_.includes(r.name)||(e.attrs.textAlign||null)===t||(a.push({node:e,pos:n,nodeType:r}),"list_item"!==r.name&&"todo_item"!==r.name)})),a.length?(a.forEach((function(n){var r=n.node,o=n.pos,i=n.nodeType,s=r.attrs;s=Object.assign(Object.assign({},s),{textAlign:t}),e=e.setNodeMarkup(o,i,s,r.marks)})),e):e}var L_=function(e){jm(n,fl);var t=Hm(n);function n(){return Jf(this,n),t.apply(this,arguments)}return Kf(n,[{key:"commands",value:function(){return this.options.alignments.reduce((function(e,t){return vm.test(t)?Object.assign(Object.assign({},e),Fm({},"align_".concat(t),(function(){return function(e,n){var r=e.selection,o=j_(e.tr.setSelection(r),"left"===t?null:t);return!!o.docChanged&&(n&&n(o),!0)}}))):e}),{})}},{key:"menuBtnView",value:function(e){var t=e.commands,n=e.editor,r=e.t;return this.options.alignments.reduce((function(e,o){if(!vm.test(o))return e;var i="left"!==o&&function(e,t){var n=e.selection,r=e.doc,o=n.from,i=n.to,s=!0,a=!1;return r.nodesBetween(o,i,(function(e){return s&&e.attrs.textAlign===t&&(s=!1,a=!0),s})),a}(n.state,o);return e.concat({component:nb,componentProps:{isActive:i,command:t["align_".concat(o)],icon:"align-".concat(o),tooltip:r("editor.extensions.TextAlign.buttons.align_".concat(o,".tooltip"))}})}),[])}},{key:"name",get:function(){return"text_align"}},{key:"defaultOptions",get:function(){return{alignments:["left","center","right","justify"]}}}]),n}();function V_(e,t){var n=e,r=n.doc,o=n.selection;if(!r||!o)return e;if(!(o instanceof $t||o instanceof Lt))return e;var i=o.from,s=o.to;return r.nodesBetween(i,s,(function(n,r){var o=n.type;return"paragraph"===o.name||"heading"===o.name||"blockquote"===o.name?(e=function(e,t,n){if(!e.doc)return e;var r=e.doc.nodeAt(t);if(!r)return e;var o=Oy((r.attrs.indent||0)+n,0,7);if(o===r.attrs.indent)return e;var i=Object.assign(Object.assign({},r.attrs),{indent:o});return e.setNodeMarkup(t,r.type,i,r.marks)}(e,r,t),!1):!function(e){return function(e){return"bullet_list"===e.type.name}(e)||function(e){return"order_list"===e.type.name}(e)||function(e){return"todo_list"===e.type.name}(e)}(n)})),e}function q_(e){return function(t,n){var r=t.selection,o=t.tr;return!!(o=V_(o=o.setSelection(r),e)).docChanged&&(n&&n(o),!0)}}var H_,W_=function(e){jm(n,fl);var t=Hm(n);function n(){return Jf(this,n),t.apply(this,arguments)}return Kf(n,[{key:"commands",value:function(){return{indent:function(){return q_(1)},outdent:function(){return q_(-1)}}}},{key:"keys",value:function(){return{Tab:q_(1),"Shift-Tab":q_(-1)}}},{key:"menuBtnView",value:function(e){var t=e.commands,n=e.t;return[{component:nb,componentProps:{command:t.indent,icon:"indent",tooltip:n("editor.extensions.Indent.buttons.indent.tooltip")}},{component:nb,componentProps:{command:t.outdent,icon:"outdent",tooltip:n("editor.extensions.Indent.buttons.outdent.tooltip")}}]}},{key:"name",get:function(){return"indent"}},{key:"defaultOptions",get:function(){return{minIndent:0,maxIndent:7}}}]),n}(),J_=function(e){jm(n,r["default"]);var t=Hm(n);function n(){return Jf(this,n),t.apply(this,arguments)}return Kf(n,[{key:"isLineHeightActive",value:function(e){return function(e,t){var n=e.selection,r=e.doc,o=n.from,i=n.to,s=!0,a=!1;return r.nodesBetween(o,i,(function(e){var n=e.type,r=e.attrs.lineHeight||"100%";return vx.includes(n.name)?s&&t===r?(s=!1,a=!0,!1):"list_item"!==n.name&&"todo_item"!==n.name:s})),a}(this.editor.state,e)}},{key:"editor",get:function(){return this.editorContext.editor}},{key:"lineHeights",get:function(){return this.editor.extensions.options.line_height.lineHeights}}]),n}();Wm([dg({type:Object,required:!0})],J_.prototype,"editorContext",void 0),Wm([lg()],J_.prototype,"et",void 0);const U_=Iy({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dropdown",{attrs:{placement:"bottom",trigger:"click"},on:{command:function(t){return e.editorContext.commands.line_height({lineHeight:t})}}},[n("command-button",{attrs:{"enable-tooltip":e.et.tooltip,tooltip:e.et.t("editor.extensions.LineHeight.tooltip"),readonly:e.et.isCodeViewMode,icon:"text-height"}}),e._v(" "),n("el-dropdown-menu",{staticClass:"el-tiptap-dropdown-menu",attrs:{slot:"dropdown"},slot:"dropdown"},e._l(e.lineHeights,(function(t){return n("el-dropdown-item",{key:t,staticClass:"el-tiptap-dropdown-menu__item",class:{"el-tiptap-dropdown-menu__item--active":e.isLineHeightActive(t)},attrs:{command:t}},[n("span",[e._v(e._s(t))])])})),1)],1)},staticRenderFns:[]},void 0,J_=Wm([ag({components:(H_={},Fm(H_,Id().name,Id()),Fm(H_,Rd().name,Rd()),Fm(H_,Ad().name,Ad()),Fm(H_,"CommandButton",nb),H_)})],J_),void 0,!1,void 0,!1,void 0,void 0,void 0);(function(e){jm(n,fl);var t=Hm(n);function n(){return Jf(this,n),t.apply(this,arguments)}Kf(n,[{key:"commands",value:function(){return function(e){return function(e){return function(t,n){var r=t.selection,o=t.tr;return!!(o=wx(o=o.setSelection(r),e)).docChanged&&(n&&n(o),!0)}}(e.lineHeight)}}},{key:"menuBtnView",value:function(e){return{component:U_,componentProps:{editorContext:e}}}},{key:"name",get:function(){return"line_height"}},{key:"defaultOptions",get:function(){return{lineHeights:["100%","115%","150%","200%","250%","300%"]}}}])})();var K_=_m.filter,G_=Fp("filter"),X_=of("filter");wp({target:"Array",proto:!0,forced:!G_||!X_},{filter:function(e){return K_(this,e,arguments.length>1?arguments[1]:void 0)}});var Z_,Y_,Q_,eO=!Ud((function(){return Object.isExtensible(Object.preventExtensions({}))})),tO=qd((function(e){var t=vh.f,n=Nh("meta"),r=0,o=Object.isExtensible||function(){return!0},i=function(e){t(e,n,{value:{objectID:"O"+ ++r,weakData:{}}})},s=e.exports={REQUIRED:!1,fastKey:function(e,t){if(!ih(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!lh(e,n)){if(!o(e))return"F";if(!t)return"E";i(e)}return e[n].objectID},getWeakData:function(e,t){if(!lh(e,n)){if(!o(e))return!0;if(!t)return!1;i(e)}return e[n].weakData},onFreeze:function(e){return eO&&s.REQUIRED&&o(e)&&!lh(e,n)&&i(e),e}};Ih[n]=!0})),nO=(tO.REQUIRED,tO.fastKey,tO.getWeakData,tO.onFreeze,!Ud((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))),rO=Dh("IE_PROTO"),oO=Object.prototype,iO=nO?Object.getPrototypeOf:function(e){return e=xp(e),lh(e,rO)?e[rO]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?oO:null},sO=Tp("iterator"),aO=!1;[].keys&&("next"in(Q_=[].keys())?(Y_=iO(iO(Q_)))!==Object.prototype&&(Z_=Y_):aO=!0),null==Z_&&(Z_={}),lh(Z_,sO)||yh(Z_,sO,(function(){return this}));var lO={IteratorPrototype:Z_,BUGGY_SAFARI_ITERATORS:aO},cO=lO.IteratorPrototype,uO=function(){return this},dO=lO.IteratorPrototype,hO=lO.BUGGY_SAFARI_ITERATORS,pO=Tp("iterator"),fO=function(){return this},mO=function(e,t,n,r,o,i,s){!function(e,t,n){var r=t+" Iterator";e.prototype=Zp(cO,{next:Yd(1,n)}),Xg(e,r,!1),Yg[r]=uO}(n,t,r);var a,l,c,u=function(e){if(e===o&&m)return m;if(!hO&&e in p)return p[e];switch(e){case"keys":case"values":case"entries":return function(){return new n(this,e)}}return function(){return new n(this)}},d=t+" Iterator",h=!1,p=e.prototype,f=p[pO]||p["@@iterator"]||o&&p[o],m=!hO&&f||u(o),g="Array"==t&&p.entries||f;if(g&&(a=iO(g.call(new e)),dO!==Object.prototype&&a.next&&(iO(a)!==dO&&(Gf?Gf(a,dO):"function"!=typeof a[pO]&&yh(a,pO,fO)),Xg(a,d,!0))),"values"==o&&f&&"values"!==f.name&&(h=!0,m=function(){return f.call(this)}),p[pO]!==m&&yh(p,pO,m),Yg[t]=m,o)if(l={values:u("values"),keys:i?m:u("keys"),entries:u("entries")},s)for(c in l)(hO||h||!(c in p))&&Hh(p,c,l[c]);else wp({target:t,proto:!0,forced:hO||h},l);return l},gO=vh.f,vO=tO.fastKey,yO=qh.set,bO=qh.getterFor,wO=(function(e,t,n){var r=-1!==e.indexOf("Map"),o=-1!==e.indexOf("Weak"),i=r?"set":"add",s=Jd[e],a=s&&s.prototype,l=s,c={},u=function(e){var t=a[e];Hh(a,e,"add"==e?function(e){return t.call(this,0===e?0:e),this}:"delete"==e?function(e){return!(o&&!ih(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return o&&!ih(e)?void 0:t.call(this,0===e?0:e)}:"has"==e?function(e){return!(o&&!ih(e))&&t.call(this,0===e?0:e)}:function(e,n){return t.call(this,0===e?0:e,n),this})};if(yp(e,"function"!=typeof s||!(o||a.forEach&&!Ud((function(){(new s).entries().next()})))))l=n.getConstructor(t,e,r,i),tO.REQUIRED=!0;else if(yp(e,!0)){var d=new l,h=d[i](o?{}:-0,1)!=d,p=Ud((function(){d.has(1)})),f=pv((function(e){new s(e)})),m=!o&&Ud((function(){for(var e=new s,t=5;t--;)e[i](t,t);return!e.has(-0)}));f||((l=t((function(t,n){Zg(t,l,e);var o=Xf(new s,t,l);return null!=n&&iv(n,o[i],o,r),o}))).prototype=a,a.constructor=l),(p||m)&&(u("delete"),u("has"),r&&u("get")),(m||h)&&u(i),o&&a.clear&&delete a.clear}c[e]=l,wp({global:!0,forced:l!=s},c),Xg(l,e),o||n.setStrong(l,e,r)}("Set",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),{getConstructor:function(e,t,n,r){var o=e((function(e,i){Zg(e,o,t),yO(e,{type:t,index:Zp(null),first:void 0,last:void 0,size:0}),Kd||(e.size=0),null!=i&&iv(i,e[r],e,n)})),i=bO(t),s=function(e,t,n){var r,o,s=i(e),l=a(e,t);return l?l.value=n:(s.last=l={index:o=vO(t,!0),key:t,value:n,previous:r=s.last,next:void 0,removed:!1},s.first||(s.first=l),r&&(r.next=l),Kd?s.size++:e.size++,"F"!==o&&(s.index[o]=l)),e},a=function(e,t){var n,r=i(e),o=vO(t);if("F"!==o)return r.index[o];for(n=r.first;n;n=n.next)if(n.key==t)return n};return Ug(o.prototype,{clear:function(){for(var e=i(this),t=e.index,n=e.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete t[n.index],n=n.next;e.first=e.last=void 0,Kd?e.size=0:this.size=0},delete:function(e){var t=i(this),n=a(this,e);if(n){var r=n.next,o=n.previous;delete t.index[n.index],n.removed=!0,o&&(o.next=r),r&&(r.previous=o),t.first==n&&(t.first=r),t.last==n&&(t.last=o),Kd?t.size--:this.size--}return!!n},forEach:function(e){for(var t,n=i(this),r=xm(e,arguments.length>1?arguments[1]:void 0,3);t=t?t.next:n.first;)for(r(t.value,t.key,this);t&&t.removed;)t=t.previous},has:function(e){return!!a(this,e)}}),Ug(o.prototype,n?{get:function(e){var t=a(this,e);return t&&t.value},set:function(e,t){return s(this,0===e?0:e,t)}}:{add:function(e){return s(this,e=0===e?0:e,e)}}),Kd&&gO(o.prototype,"size",{get:function(){return i(this).size}}),o},setStrong:function(e,t,n){var r=t+" Iterator",o=bO(t),i=bO(r);mO(e,t,(function(e,t){yO(this,{type:r,target:e,state:o(e),kind:t,last:void 0})}),(function(){for(var e=i(this),t=e.kind,n=e.last;n&&n.removed;)n=n.previous;return e.target&&(e.last=n=n?n.next:e.state.first)?"keys"==t?{value:n.key,done:!1}:"values"==t?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(e.target=void 0,{value:void 0,done:!0})}),n?"entries":"values",!n,!0),Yf(t)}}),Bf.charAt),kO=qh.set,xO=qh.getterFor("String Iterator");mO(String,"String",(function(e){kO(this,{type:"String Iterator",string:String(e),index:0})}),(function(){var e,t=xO(this),n=t.string,r=t.index;return r>=n.length?{value:void 0,done:!0}:(e=wO(n,r),t.index+=e.length,{value:e,done:!1})}));var SO={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},CO=qh.set,_O=qh.getterFor("Array Iterator"),OO=mO(Array,"Array",(function(e,t){CO(this,{type:"Array Iterator",target:oh(e),index:0,kind:t})}),(function(){var e=_O(this),t=e.target,n=e.kind,r=e.index++;return!t||r>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:t[r],done:!1}:{value:[r,t[r]],done:!1}}),"values");Yg.Arguments=Yg.Array,ef("keys"),ef("values"),ef("entries");var MO=Tp("iterator"),EO=Tp("toStringTag"),TO=OO.values;for(var AO in SO){var NO=Jd[AO],RO=NO&&NO.prototype;if(RO){if(RO[MO]!==TO)try{yh(RO,MO,TO)}catch(UO){RO[MO]=TO}if(RO[EO]||yh(RO,EO,AO),SO[AO])for(var DO in OO)if(RO[DO]!==OO[DO])try{yh(RO,DO,OO[DO])}catch(UO){RO[DO]=OO[DO]}}}var IO=["bold","italic","underline","strike","link","text_color","text_highlight"],zO=(function(e){jm(n,fl);var t=Hm(n);function n(){return Jf(this,n),t.apply(this,arguments)}Kf(n,[{key:"commands",value:function(){return function(){return function(e,t){var n=function(e,t){var n=e,r=n.doc,o=n.selection;if(!o||!r)return e;var i=o.from,s=o.to;if(o.empty)return e;var a=new Set(IO.map((function(e){return t.marks[e]})).filter(Boolean));if(!a.size)return e;var l=[];return r.nodesBetween(i,s,(function(e,t){return!e.marks||!e.marks.length||(e.marks.some((function(n){a.has(n.type)&&l.push({node:e,pos:t,mark:n})})),!0)})),l.forEach((function(t){var n=t.node,r=t.mark,o=t.pos;e=e.removeMark(o,o+n.nodeSize,r.type)})),e=wx(e=j_(e,null),null)}(e.tr.setSelection(e.selection),e.schema);return!(!t||!n.docChanged)&&(t(n),!0)}}}},{key:"menuBtnView",value:function(e){var t=e.commands,n=e.t;return{component:nb,componentProps:{command:t.format_clear,icon:"remove-format",tooltip:n("editor.extensions.FormatClear.tooltip")}}}},{key:"name",get:function(){return"format_clear"}}])}(),function(e){jm(n,r["default"]);var t=Hm(n);function n(){return Jf(this,n),t.apply(this,arguments)}return Kf(n,[{key:"isFullscreen",get:function(){return this.et.isFullscreen},set:function(e){this.et.isFullscreen=e}},{key:"buttonTooltip",get:function(){return this.isFullscreen?this.et.t("editor.extensions.Fullscreen.tooltip.exit_fullscreen"):this.et.t("editor.extensions.Fullscreen.tooltip.fullscreen")}}]),n}());Wm([lg()],zO.prototype,"et",void 0);const PO=Iy({render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("command-button",{attrs:{command:function(){return e.isFullscreen=!e.isFullscreen},"enable-tooltip":e.et.tooltip,tooltip:e.buttonTooltip,icon:e.isFullscreen?"compress":"expand","is-active":e.isFullscreen}})},staticRenderFns:[]},void 0,zO=Wm([ag({components:{CommandButton:nb}})],zO),void 0,!1,void 0,!1,void 0,void 0,void 0);(function(e){jm(n,fl);var t=Hm(n);function n(){return Jf(this,n),t.apply(this,arguments)}Kf(n,[{key:"menuBtnView",value:function(){return{component:PO}}},{key:"name",get:function(){return"fullscreen"}}])})();var $O=!pv((function(e){Array.from(e)}));function FO(e){var t=e.dom.closest(".el-tiptap-editor__content");return!!t&&(function(e){var t=Array.from(document.querySelectorAll("style, link")).reduce((function(e,t){return e+t.outerHTML}),"")+e.outerHTML,n=document.createElement("iframe");n.id="el-tiptap-iframe",n.setAttribute("style","position: absolute; width: 0; height: 0; top: -10px; left: -10px;"),document.body.appendChild(n);var r=n.contentWindow,o=n.contentDocument||n.contentWindow&&n.contentWindow.document;o&&(o.open(),o.write(t),o.close()),r&&(n.onload=function(){try{setTimeout((function(){r.focus();try{r.document.execCommand("print",!1)||r.print()}catch(e){r.print()}r.close()}),10)}catch(e){bm.error(e)}setTimeout((function(){document.body.removeChild(n)}),100)})}(t),!0)}wp({target:"Array",stat:!0,forced:$O},{from:function(e){var t,n,r,o,i,s,a=xp(e),l="function"==typeof this?this:Array,c=arguments.length,u=c>1?arguments[1]:void 0,d=void 0!==u,h=rv(a),p=0;if(d&&(u=xm(u,c>2?arguments[2]:void 0,2)),null==h||l==Array&&tv(h))for(n=new l(t=Yh(a.length));t>p;p++)s=d?u(a[p],p):a[p],Sp(n,p,s);else for(i=(o=h.call(a)).next,n=new l;!(r=i.call(o)).done;p++)s=d?ov(o,u,[r.value,p],!0):r.value,Sp(n,p,s);return n.length=p,n}});(function(e){jm(n,fl);var t=Hm(n);function n(){return Jf(this,n),t.apply(this,arguments)}Kf(n,[{key:"commands",value:function(){return function(){return function(e,t,n){return FO(n)}}}},{key:"keys",value:function(){return{"Mod-p":function(e,t,n){return FO(n)}}}},{key:"menuBtnView",value:function(e){var t=e.commands,n=e.t;return{component:nb,componentProps:{command:t.print,icon:"print",tooltip:n("editor.extensions.Print.tooltip")}}}},{key:"name",get:function(){return"print"}}])})();var BO,jO=function(e){jm(n,r["default"]);var t=Hm(n);function n(){var e;return Jf(this,n),(e=t.apply(this,arguments)).html="",e.previewDialogVisible=!1,e}return Kf(n,[{key:"onVisibleChange",value:function(e){e&&this.getHtml()}},{key:"togglePreviewDialogVisible",value:function(){this.previewDialogVisible=!this.previewDialogVisible}},{key:"getHtml",value:function(){this.html=this.editorContext.editor.getHTML()}}]),n}();Wm([dg({type:Object,required:!0})],jO.prototype,"editorContext",void 0),Wm([dg({type:String,default:"80vw"})],jO.prototype,"contentWidth",void 0),Wm([lg()],jO.prototype,"et",void 0),Wm([hg("previewDialogVisible")],jO.prototype,"onVisibleChange",null);const LO=Iy({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("command-button",{attrs:{command:e.togglePreviewDialogVisible,"enable-tooltip":e.et.tooltip,tooltip:e.et.t("editor.extensions.Preview.tooltip"),readonly:e.et.isCodeViewMode,icon:"eye"}}),e._v(" "),n("el-dialog",{attrs:{title:e.et.t("editor.extensions.Preview.dialog.title"),visible:e.previewDialogVisible,width:e.contentWidth,"append-to-body":!0},on:{"update:visible":function(t){e.previewDialogVisible=t}}},[n("div",{staticClass:"el-tiptap-editor__content"},[n("div",{domProps:{innerHTML:e._s(e.html)}})])])],1)},staticRenderFns:[]},void 0,jO=Wm([ag({components:(BO={},Fm(BO,Ed().name,Ed()),Fm(BO,"CommandButton",nb),BO)})],jO),void 0,!1,void 0,!1,void 0,void 0,void 0);(function(e){jm(n,fl);var t=Hm(n);function n(){return Jf(this,n),t.apply(this,arguments)}Kf(n,[{key:"menuBtnView",value:function(e){return{component:LO,componentProps:{editorContext:e,contentWidth:this.options.contentWidth}}}},{key:"name",get:function(){return"preview"}},{key:"defaultOptions",get:function(){return{contentWidth:"80vw"}}}])})(),function(e){jm(n,fl);var t=Hm(n);function n(){return Jf(this,n),t.apply(this,arguments)}Kf(n,[{key:"commands",value:function(){return function(){return AC}}},{key:"menuBtnView",value:function(e){var t=e.commands,n=e.t;return{component:nb,componentProps:{command:t.select_all,icon:"regular/object-group",tooltip:n("editor.extensions.SelectAll.tooltip")}}}},{key:"name",get:function(){return"select_all"}}])}();var VO=function(e){jm(n,r["default"]);var t=Hm(n);function n(){return Jf(this,n),t.apply(this,arguments)}return Kf(n,[{key:"isCodeViewMode",get:function(){return this.et.isCodeViewMode},set:function(e){this.et.isCodeViewMode=e}}]),n}();Wm([lg()],VO.prototype,"et",void 0);const qO=Iy({render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("command-button",{attrs:{command:function(){return e.isCodeViewMode=!e.isCodeViewMode},"enable-tooltip":e.et.tooltip,tooltip:e.et.t("editor.extensions.CodeView.tooltip"),icon:"regular/file-code","is-active":e.isCodeViewMode}})},staticRenderFns:[]},void 0,VO=Wm([ag({components:{CommandButton:nb}})],VO),void 0,!1,void 0,!1,void 0,void 0,void 0);var HO=/^(a|abbr|acronym|area|base|bdo|big|br|button|caption|cite|code|col|colgroup|dd|del|dfn|em|frame|hr|iframe|img|input|ins|kbd|label|legend|link|map|object|optgroup|option|param|q|samp|script|select|small|span|strong|sub|sup|textarea|tt|var)$/;function WO(e){e.extendMode("xml",{newlineAfterToken:function(e,t,n,r){var o=!1;return"html"===this.configuration&&(o=!!r.context&&HO.test(r.context.tagName)),!o&&("tag"===e&&/>$/.test(t)&&r.context||/^</.test(n))}}),e.defineExtension("autoFormatRange",(function(t,n){var r=this,o=r.getMode(),i=r.getRange(t,n).split("\n"),s=e.copyState(o,r.getTokenAt(t).state),a=r.getOption("tabSize"),l="",c=0,u=0===t.ch;function d(){l+="\n",u=!0,++c}for(var h=0;h<i.length;++h){for(var p=new e.StringStream(i[h],a);!p.eol();){var f=e.innerMode(o,s),m=o.token(p,s),g=p.current();p.start=p.pos,u&&!/\S/.test(g)||(l+=g,u=!1),!u&&f.mode.newlineAfterToken&&f.mode.newlineAfterToken(m,g,p.string.slice(p.pos)||i[h+1]||"",f.state)&&d()}!p.pos&&o.blankLine&&o.blankLine(s),!u&&h<i.length-1&&d()}r.operation((function(){r.replaceRange(l,t,n);for(var e=t.line+1,o=t.line+c;e<=o;++e)r.indentLine(e,"smart");r.setSelection(t,r.getCursor(!1))}))}))}var JO={lineNumbers:!0,lineWrapping:!0,tabSize:2,tabMode:"indent",mode:"text/html"};(function(e){jm(n,fl);var t=Hm(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Jf(this,n),e=t.call(this,r);var o=r.codemirror;return null==o?bm.warn("`CodeView` extension requires the CodeMirror library."):WO(o),e.options={codemirror:o,codemirrorOptions:Object.assign(Object.assign({},e.defaultOptions.codemirrorOptions),r.codemirrorOptions)},e}Kf(n,[{key:"menuBtnView",value:function(){return{component:qO}}},{key:"name",get:function(){return"code_view"}},{key:"defaultOptions",get:function(){return{codemirror:null,codemirrorOptions:Object.assign({},JO)}}}])})()},2244:function(e,t,n){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/",n(n.s=82)}({0:function(e,t,n){"use strict";function r(e,t,n,r,o,i,s,a){var l,c="function"===typeof e?e.options:e;if(t&&(c.render=t,c.staticRenderFns=n,c._compiled=!0),r&&(c.functional=!0),i&&(c._scopeId="data-v-"+i),s?(l=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),o&&o.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(s)},c._ssrRegister=l):o&&(l=a?function(){o.call(this,this.$root.$options.shadowRoot)}:o),l)if(c.functional){c._injectStyles=l;var u=c.render;c.render=function(e,t){return l.call(t),u(e,t)}}else{var d=c.beforeCreate;c.beforeCreate=d?[].concat(d,l):[l]}return{exports:e,options:c}}n.d(t,"a",(function(){return r}))},11:function(e,t){e.exports=n(4511)},13:function(e,t){e.exports=n(3630)},4:function(e,t){e.exports=n(8816)},82:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"dialog-fade"},on:{"after-enter":e.afterEnter,"after-leave":e.afterLeave}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"el-dialog__wrapper",on:{click:function(t){return t.target!==t.currentTarget?null:e.handleWrapperClick(t)}}},[n("div",{key:e.key,ref:"dialog",class:["el-dialog",{"is-fullscreen":e.fullscreen,"el-dialog--center":e.center},e.customClass],style:e.style,attrs:{role:"dialog","aria-modal":"true","aria-label":e.title||"dialog"}},[n("div",{staticClass:"el-dialog__header"},[e._t("title",[n("span",{staticClass:"el-dialog__title"},[e._v(e._s(e.title))])]),e.showClose?n("button",{staticClass:"el-dialog__headerbtn",attrs:{type:"button","aria-label":"Close"},on:{click:e.handleClose}},[n("i",{staticClass:"el-dialog__close el-icon el-icon-close"})]):e._e()],2),e.rendered?n("div",{staticClass:"el-dialog__body"},[e._t("default")],2):e._e(),e.$slots.footer?n("div",{staticClass:"el-dialog__footer"},[e._t("footer")],2):e._e()])])])},o=[];r._withStripped=!0;var i=n(13),s=n.n(i),a=n(11),l=n.n(a),c=n(4),u=n.n(c),d={name:"ElDialog",mixins:[s.a,u.a,l.a],props:{title:{type:String,default:""},modal:{type:Boolean,default:!0},modalAppendToBody:{type:Boolean,default:!0},appendToBody:{type:Boolean,default:!1},lockScroll:{type:Boolean,default:!0},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},showClose:{type:Boolean,default:!0},width:String,fullscreen:Boolean,customClass:{type:String,default:""},top:{type:String,default:"15vh"},beforeClose:Function,center:{type:Boolean,default:!1},destroyOnClose:Boolean},data:function(){return{closed:!1,key:0}},watch:{visible:function(e){var t=this;e?(this.closed=!1,this.$emit("open"),this.$el.addEventListener("scroll",this.updatePopper),this.$nextTick((function(){t.$refs.dialog.scrollTop=0})),this.appendToBody&&document.body.appendChild(this.$el)):(this.$el.removeEventListener("scroll",this.updatePopper),this.closed||this.$emit("close"),this.destroyOnClose&&this.$nextTick((function(){t.key++})))}},computed:{style:function(){var e={};return this.fullscreen||(e.marginTop=this.top,this.width&&(e.width=this.width)),e}},methods:{getMigratingConfig:function(){return{props:{size:"size is removed."}}},handleWrapperClick:function(){this.closeOnClickModal&&this.handleClose()},handleClose:function(){"function"===typeof this.beforeClose?this.beforeClose(this.hide):this.hide()},hide:function(e){!1!==e&&(this.$emit("update:visible",!1),this.$emit("close"),this.closed=!0)},updatePopper:function(){this.broadcast("ElSelectDropdown","updatePopper"),this.broadcast("ElDropdownMenu","updatePopper")},afterEnter:function(){this.$emit("opened")},afterLeave:function(){this.$emit("closed")}},mounted:function(){this.visible&&(this.rendered=!0,this.open(),this.appendToBody&&document.body.appendChild(this.$el))},destroyed:function(){this.appendToBody&&this.$el&&this.$el.parentNode&&this.$el.parentNode.removeChild(this.$el)}},h=d,p=n(0),f=Object(p["a"])(h,r,o,!1,null,null,null);f.options.__file="packages/dialog/src/component.vue";var m=f.exports;m.install=function(e){e.component(m.name,m)};t["default"]=m}})},4438:function(e,t,n){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/",n(n.s=84)}({0:function(e,t,n){"use strict";function r(e,t,n,r,o,i,s,a){var l,c="function"===typeof e?e.options:e;if(t&&(c.render=t,c.staticRenderFns=n,c._compiled=!0),r&&(c.functional=!0),i&&(c._scopeId="data-v-"+i),s?(l=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),o&&o.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(s)},c._ssrRegister=l):o&&(l=a?function(){o.call(this,this.$root.$options.shadowRoot)}:o),l)if(c.functional){c._injectStyles=l;var u=c.render;c.render=function(e,t){return l.call(t),u(e,t)}}else{var d=c.beforeCreate;c.beforeCreate=d?[].concat(d,l):[l]}return{exports:e,options:c}}n.d(t,"a",(function(){return r}))},4:function(e,t){e.exports=n(8816)},84:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("li",{staticClass:"el-dropdown-menu__item",class:{"is-disabled":e.disabled,"el-dropdown-menu__item--divided":e.divided},attrs:{"aria-disabled":e.disabled,tabindex:e.disabled?null:-1},on:{click:e.handleClick}},[e.icon?n("i",{class:e.icon}):e._e(),e._t("default")],2)},o=[];r._withStripped=!0;var i=n(4),s=n.n(i),a={name:"ElDropdownItem",mixins:[s.a],props:{command:{},disabled:Boolean,divided:Boolean,icon:String},methods:{handleClick:function(e){this.dispatch("ElDropdown","menu-item-click",[this.command,this])}}},l=a,c=n(0),u=Object(c["a"])(l,r,o,!1,null,null,null);u.options.__file="packages/dropdown/src/dropdown-item.vue";var d=u.exports;d.install=function(e){e.component(d.name,d)};t["default"]=d}})},6213:function(e,t,n){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/",n(n.s=83)}({0:function(e,t,n){"use strict";function r(e,t,n,r,o,i,s,a){var l,c="function"===typeof e?e.options:e;if(t&&(c.render=t,c.staticRenderFns=n,c._compiled=!0),r&&(c.functional=!0),i&&(c._scopeId="data-v-"+i),s?(l=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),o&&o.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(s)},c._ssrRegister=l):o&&(l=a?function(){o.call(this,this.$root.$options.shadowRoot)}:o),l)if(c.functional){c._injectStyles=l;var u=c.render;c.render=function(e,t){return l.call(t),u(e,t)}}else{var d=c.beforeCreate;c.beforeCreate=d?[].concat(d,l):[l]}return{exports:e,options:c}}n.d(t,"a",(function(){return r}))},5:function(e,t){e.exports=n(4857)},83:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"el-zoom-in-top"},on:{"after-leave":e.doDestroy}},[n("ul",{directives:[{name:"show",rawName:"v-show",value:e.showPopper,expression:"showPopper"}],staticClass:"el-dropdown-menu el-popper",class:[e.size&&"el-dropdown-menu--"+e.size]},[e._t("default")],2)])},o=[];r._withStripped=!0;var i=n(5),s=n.n(i),a={name:"ElDropdownMenu",componentName:"ElDropdownMenu",mixins:[s.a],props:{visibleArrow:{type:Boolean,default:!0},arrowOffset:{type:Number,default:0}},data:function(){return{size:this.dropdown.dropdownSize}},inject:["dropdown"],created:function(){var e=this;this.$on("updatePopper",(function(){e.showPopper&&e.updatePopper()})),this.$on("visible",(function(t){e.showPopper=t}))},mounted:function(){this.dropdown.popperElm=this.popperElm=this.$el,this.referenceElm=this.dropdown.$el,this.dropdown.initDomOperation()},watch:{"dropdown.placement":{immediate:!0,handler:function(e){this.currentPlacement=e}}}},l=a,c=n(0),u=Object(c["a"])(l,r,o,!1,null,null,null);u.options.__file="packages/dropdown/src/dropdown-menu.vue";var d=u.exports;d.install=function(e){e.component(d.name,d)};t["default"]=d}})},4327:function(e,t,n){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/",n(n.s=130)}({0:function(e,t,n){"use strict";function r(e,t,n,r,o,i,s,a){var l,c="function"===typeof e?e.options:e;if(t&&(c.render=t,c.staticRenderFns=n,c._compiled=!0),r&&(c.functional=!0),i&&(c._scopeId="data-v-"+i),s?(l=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),o&&o.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(s)},c._ssrRegister=l):o&&(l=a?function(){o.call(this,this.$root.$options.shadowRoot)}:o),l)if(c.functional){c._injectStyles=l;var u=c.render;c.render=function(e,t){return l.call(t),u(e,t)}}else{var d=c.beforeCreate;c.beforeCreate=d?[].concat(d,l):[l]}return{exports:e,options:c}}n.d(t,"a",(function(){return r}))},11:function(e,t){e.exports=n(4511)},12:function(e,t){e.exports=n(9305)},130:function(e,t,n){"use strict";n.r(t);var r,o,i=n(12),s=n.n(i),a=n(4),l=n.n(a),c=n(11),u=n.n(c),d=n(14),h=n.n(d),p=n(36),f=n.n(p),m=n(3),g={name:"ElDropdown",componentName:"ElDropdown",mixins:[l.a,u.a],directives:{Clickoutside:s.a},components:{ElButton:h.a,ElButtonGroup:f.a},provide:function(){return{dropdown:this}},props:{trigger:{type:String,default:"hover"},type:String,size:{type:String,default:""},splitButton:Boolean,hideOnClick:{type:Boolean,default:!0},placement:{type:String,default:"bottom-end"},visibleArrow:{default:!0},showTimeout:{type:Number,default:250},hideTimeout:{type:Number,default:150},tabindex:{type:Number,default:0},disabled:{type:Boolean,default:!1}},data:function(){return{timeout:null,visible:!1,triggerElm:null,menuItems:null,menuItemsArray:null,dropdownElm:null,focusing:!1,listId:"dropdown-menu-"+Object(m["generateId"])()}},computed:{dropdownSize:function(){return this.size||(this.$ELEMENT||{}).size}},mounted:function(){this.$on("menu-item-click",this.handleMenuItemClick)},watch:{visible:function(e){this.broadcast("ElDropdownMenu","visible",e),this.$emit("visible-change",e)},focusing:function(e){var t=this.$el.querySelector(".el-dropdown-selfdefine");t&&(e?t.className+=" focusing":t.className=t.className.replace("focusing",""))}},methods:{getMigratingConfig:function(){return{props:{"menu-align":"menu-align is renamed to placement."}}},show:function(){var e=this;this.disabled||(clearTimeout(this.timeout),this.timeout=setTimeout((function(){e.visible=!0}),"click"===this.trigger?0:this.showTimeout))},hide:function(){var e=this;this.disabled||(this.removeTabindex(),this.tabindex>=0&&this.resetTabindex(this.triggerElm),clearTimeout(this.timeout),this.timeout=setTimeout((function(){e.visible=!1}),"click"===this.trigger?0:this.hideTimeout))},handleClick:function(){this.disabled||(this.visible?this.hide():this.show())},handleTriggerKeyDown:function(e){var t=e.keyCode;[38,40].indexOf(t)>-1?(this.removeTabindex(),this.resetTabindex(this.menuItems[0]),this.menuItems[0].focus(),e.preventDefault(),e.stopPropagation()):13===t?this.handleClick():[9,27].indexOf(t)>-1&&this.hide()},handleItemKeyDown:function(e){var t=e.keyCode,n=e.target,r=this.menuItemsArray.indexOf(n),o=this.menuItemsArray.length-1,i=void 0;[38,40].indexOf(t)>-1?(i=38===t?0!==r?r-1:0:r<o?r+1:o,this.removeTabindex(),this.resetTabindex(this.menuItems[i]),this.menuItems[i].focus(),e.preventDefault(),e.stopPropagation()):13===t?(this.triggerElmFocus(),n.click(),this.hideOnClick&&(this.visible=!1)):[9,27].indexOf(t)>-1&&(this.hide(),this.triggerElmFocus())},resetTabindex:function(e){this.removeTabindex(),e.setAttribute("tabindex","0")},removeTabindex:function(){this.triggerElm.setAttribute("tabindex","-1"),this.menuItemsArray.forEach((function(e){e.setAttribute("tabindex","-1")}))},initAria:function(){this.dropdownElm.setAttribute("id",this.listId),this.triggerElm.setAttribute("aria-haspopup","list"),this.triggerElm.setAttribute("aria-controls",this.listId),this.splitButton||(this.triggerElm.setAttribute("role","button"),this.triggerElm.setAttribute("tabindex",this.tabindex),this.triggerElm.setAttribute("class",(this.triggerElm.getAttribute("class")||"")+" el-dropdown-selfdefine"))},initEvent:function(){var e=this,t=this.trigger,n=this.show,r=this.hide,o=this.handleClick,i=this.splitButton,s=this.handleTriggerKeyDown,a=this.handleItemKeyDown;this.triggerElm=i?this.$refs.trigger.$el:this.$slots.default[0].elm;var l=this.dropdownElm;this.triggerElm.addEventListener("keydown",s),l.addEventListener("keydown",a,!0),i||(this.triggerElm.addEventListener("focus",(function(){e.focusing=!0})),this.triggerElm.addEventListener("blur",(function(){e.focusing=!1})),this.triggerElm.addEventListener("click",(function(){e.focusing=!1}))),"hover"===t?(this.triggerElm.addEventListener("mouseenter",n),this.triggerElm.addEventListener("mouseleave",r),l.addEventListener("mouseenter",n),l.addEventListener("mouseleave",r)):"click"===t&&this.triggerElm.addEventListener("click",o)},handleMenuItemClick:function(e,t){this.hideOnClick&&(this.visible=!1),this.$emit("command",e,t)},triggerElmFocus:function(){this.triggerElm.focus&&this.triggerElm.focus()},initDomOperation:function(){this.dropdownElm=this.popperElm,this.menuItems=this.dropdownElm.querySelectorAll("[tabindex='-1']"),this.menuItemsArray=[].slice.call(this.menuItems),this.initEvent(),this.initAria()}},render:function(e){var t=this,n=this.hide,r=this.splitButton,o=this.type,i=this.dropdownSize,s=this.disabled,a=function(e){t.$emit("click",e),n()},l=null;if(r)l=e("el-button-group",[e("el-button",{attrs:{type:o,size:i,disabled:s},nativeOn:{click:a}},[this.$slots.default]),e("el-button",{ref:"trigger",attrs:{type:o,size:i,disabled:s},class:"el-dropdown__caret-button"},[e("i",{class:"el-dropdown__icon el-icon-arrow-down"})])]);else{l=this.$slots.default;var c=l[0].data||{},u=c.attrs,d=void 0===u?{}:u;s&&!d.disabled&&(d.disabled=!0,c.attrs=d)}var h=s?null:this.$slots.dropdown;return e("div",{class:"el-dropdown",directives:[{name:"clickoutside",value:n}],attrs:{"aria-disabled":s}},[l,h])}},v=g,y=n(0),b=Object(y["a"])(v,r,o,!1,null,null,null);b.options.__file="packages/dropdown/src/dropdown.vue";var w=b.exports;w.install=function(e){e.component(w.name,w)};t["default"]=w},14:function(e,t){e.exports=n(1540)},3:function(e,t){e.exports=n(5402)},36:function(e,t){e.exports=n(9358)},4:function(e,t){e.exports=n(8816)}})},7881:function(e,t,n){n(7658),e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/",n(n.s=79)}({0:function(e,t,n){"use strict";function r(e,t,n,r,o,i,s,a){var l,c="function"===typeof e?e.options:e;if(t&&(c.render=t,c.staticRenderFns=n,c._compiled=!0),r&&(c.functional=!0),i&&(c._scopeId="data-v-"+i),s?(l=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),o&&o.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(s)},c._ssrRegister=l):o&&(l=a?function(){o.call(this,this.$root.$options.shadowRoot)}:o),l)if(c.functional){c._injectStyles=l;var u=c.render;c.render=function(e,t){return l.call(t),u(e,t)}}else{var d=c.beforeCreate;c.beforeCreate=d?[].concat(d,l):[l]}return{exports:e,options:c}}n.d(t,"a",(function(){return r}))},10:function(e,t){e.exports=n(5981)},13:function(e,t){e.exports=n(3630)},14:function(e,t){e.exports=n(1540)},2:function(e,t){e.exports=n(3766)},20:function(e,t){e.exports=n(4582)},23:function(e,t){e.exports=n(1937)},48:function(e,t){e.exports=n(5408)},6:function(e,t){e.exports=n(3647)},7:function(e,t){e.exports=n(6369)},79:function(e,t,n){"use strict";n.r(t);var r=n(7),o=n.n(r),i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"msgbox-fade"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"el-message-box__wrapper",attrs:{tabindex:"-1",role:"dialog","aria-modal":"true","aria-label":e.title||"dialog"},on:{click:function(t){return t.target!==t.currentTarget?null:e.handleWrapperClick(t)}}},[n("div",{staticClass:"el-message-box",class:[e.customClass,e.center&&"el-message-box--center"]},[null!==e.title?n("div",{staticClass:"el-message-box__header"},[n("div",{staticClass:"el-message-box__title"},[e.icon&&e.center?n("div",{class:["el-message-box__status",e.icon]}):e._e(),n("span",[e._v(e._s(e.title))])]),e.showClose?n("button",{staticClass:"el-message-box__headerbtn",attrs:{type:"button","aria-label":"Close"},on:{click:function(t){e.handleAction(e.distinguishCancelAndClose?"close":"cancel")},keydown:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.handleAction(e.distinguishCancelAndClose?"close":"cancel")}}},[n("i",{staticClass:"el-message-box__close el-icon-close"})]):e._e()]):e._e(),n("div",{staticClass:"el-message-box__content"},[n("div",{staticClass:"el-message-box__container"},[e.icon&&!e.center&&""!==e.message?n("div",{class:["el-message-box__status",e.icon]}):e._e(),""!==e.message?n("div",{staticClass:"el-message-box__message"},[e._t("default",[e.dangerouslyUseHTMLString?n("p",{domProps:{innerHTML:e._s(e.message)}}):n("p",[e._v(e._s(e.message))])])],2):e._e()]),n("div",{directives:[{name:"show",rawName:"v-show",value:e.showInput,expression:"showInput"}],staticClass:"el-message-box__input"},[n("el-input",{ref:"input",attrs:{type:e.inputType,placeholder:e.inputPlaceholder},nativeOn:{keydown:function(t){return!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleInputEnter(t)}},model:{value:e.inputValue,callback:function(t){e.inputValue=t},expression:"inputValue"}}),n("div",{staticClass:"el-message-box__errormsg",style:{visibility:e.editorErrorMessage?"visible":"hidden"}},[e._v(e._s(e.editorErrorMessage))])],1)]),n("div",{staticClass:"el-message-box__btns"},[e.showCancelButton?n("el-button",{class:[e.cancelButtonClasses],attrs:{loading:e.cancelButtonLoading,round:e.roundButton,size:"small"},on:{keydown:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.handleAction("cancel")}},nativeOn:{click:function(t){e.handleAction("cancel")}}},[e._v("\n          "+e._s(e.cancelButtonText||e.t("el.messagebox.cancel"))+"\n        ")]):e._e(),n("el-button",{directives:[{name:"show",rawName:"v-show",value:e.showConfirmButton,expression:"showConfirmButton"}],ref:"confirm",class:[e.confirmButtonClasses],attrs:{loading:e.confirmButtonLoading,round:e.roundButton,size:"small"},on:{keydown:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.handleAction("confirm")}},nativeOn:{click:function(t){e.handleAction("confirm")}}},[e._v("\n          "+e._s(e.confirmButtonText||e.t("el.messagebox.confirm"))+"\n        ")])],1)])])])},s=[];i._withStripped=!0;var a=n(13),l=n.n(a),c=n(6),u=n.n(c),d=n(10),h=n.n(d),p=n(14),f=n.n(p),m=n(2),g=n(20),v=n(48),y=n.n(v),b=void 0,w={success:"success",info:"info",warning:"warning",error:"error"},k={mixins:[l.a,u.a],props:{modal:{default:!0},lockScroll:{default:!0},showClose:{type:Boolean,default:!0},closeOnClickModal:{default:!0},closeOnPressEscape:{default:!0},closeOnHashChange:{default:!0},center:{default:!1,type:Boolean},roundButton:{default:!1,type:Boolean}},components:{ElInput:h.a,ElButton:f.a},computed:{icon:function(){var e=this.type,t=this.iconClass;return t||(e&&w[e]?"el-icon-"+w[e]:"")},confirmButtonClasses:function(){return"el-button--primary "+this.confirmButtonClass},cancelButtonClasses:function(){return""+this.cancelButtonClass}},methods:{getSafeClose:function(){var e=this,t=this.uid;return function(){e.$nextTick((function(){t===e.uid&&e.doClose()}))}},doClose:function(){var e=this;this.visible&&(this.visible=!1,this._closing=!0,this.onClose&&this.onClose(),b.closeDialog(),this.lockScroll&&setTimeout(this.restoreBodyStyle,200),this.opened=!1,this.doAfterClose(),setTimeout((function(){e.action&&e.callback(e.action,e)})))},handleWrapperClick:function(){this.closeOnClickModal&&this.handleAction(this.distinguishCancelAndClose?"close":"cancel")},handleInputEnter:function(){if("textarea"!==this.inputType)return this.handleAction("confirm")},handleAction:function(e){("prompt"!==this.$type||"confirm"!==e||this.validate())&&(this.action=e,"function"===typeof this.beforeClose?(this.close=this.getSafeClose(),this.beforeClose(e,this,this.close)):this.doClose())},validate:function(){if("prompt"===this.$type){var e=this.inputPattern;if(e&&!e.test(this.inputValue||""))return this.editorErrorMessage=this.inputErrorMessage||Object(g["t"])("el.messagebox.error"),Object(m["addClass"])(this.getInputElement(),"invalid"),!1;var t=this.inputValidator;if("function"===typeof t){var n=t(this.inputValue);if(!1===n)return this.editorErrorMessage=this.inputErrorMessage||Object(g["t"])("el.messagebox.error"),Object(m["addClass"])(this.getInputElement(),"invalid"),!1;if("string"===typeof n)return this.editorErrorMessage=n,Object(m["addClass"])(this.getInputElement(),"invalid"),!1}}return this.editorErrorMessage="",Object(m["removeClass"])(this.getInputElement(),"invalid"),!0},getFirstFocus:function(){var e=this.$el.querySelector(".el-message-box__btns .el-button"),t=this.$el.querySelector(".el-message-box__btns .el-message-box__title");return e||t},getInputElement:function(){var e=this.$refs.input.$refs;return e.input||e.textarea},handleClose:function(){this.handleAction("close")}},watch:{inputValue:{immediate:!0,handler:function(e){var t=this;this.$nextTick((function(n){"prompt"===t.$type&&null!==e&&t.validate()}))}},visible:function(e){var t=this;e&&(this.uid++,"alert"!==this.$type&&"confirm"!==this.$type||this.$nextTick((function(){t.$refs.confirm.$el.focus()})),this.focusAfterClosed=document.activeElement,b=new y.a(this.$el,this.focusAfterClosed,this.getFirstFocus())),"prompt"===this.$type&&(e?setTimeout((function(){t.$refs.input&&t.$refs.input.$el&&t.getInputElement().focus()}),500):(this.editorErrorMessage="",Object(m["removeClass"])(this.getInputElement(),"invalid")))}},mounted:function(){var e=this;this.$nextTick((function(){e.closeOnHashChange&&window.addEventListener("hashchange",e.close)}))},beforeDestroy:function(){this.closeOnHashChange&&window.removeEventListener("hashchange",this.close),setTimeout((function(){b.closeDialog()}))},data:function(){return{uid:1,title:void 0,message:"",type:"",iconClass:"",customClass:"",showInput:!1,inputValue:null,inputPlaceholder:"",inputType:"text",inputPattern:null,inputValidator:null,inputErrorMessage:"",showConfirmButton:!0,showCancelButton:!1,action:"",confirmButtonText:"",cancelButtonText:"",confirmButtonLoading:!1,cancelButtonLoading:!1,confirmButtonClass:"",confirmButtonDisabled:!1,cancelButtonClass:"",editorErrorMessage:null,callback:null,dangerouslyUseHTMLString:!1,focusAfterClosed:null,isOnComposition:!1,distinguishCancelAndClose:!1}}},x=k,S=n(0),C=Object(S["a"])(x,i,s,!1,null,null,null);C.options.__file="packages/message-box/src/main.vue";var _=C.exports,O=n(9),M=n.n(O),E=n(23),T="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},A={title:null,message:"",type:"",iconClass:"",showInput:!1,showClose:!0,modalFade:!0,lockScroll:!0,closeOnClickModal:!0,closeOnPressEscape:!0,closeOnHashChange:!0,inputValue:null,inputPlaceholder:"",inputType:"text",inputPattern:null,inputValidator:null,inputErrorMessage:"",showConfirmButton:!0,showCancelButton:!1,confirmButtonPosition:"right",confirmButtonHighlight:!1,cancelButtonHighlight:!1,confirmButtonText:"",cancelButtonText:"",confirmButtonClass:"",cancelButtonClass:"",customClass:"",beforeClose:null,dangerouslyUseHTMLString:!1,center:!1,roundButton:!1,distinguishCancelAndClose:!1},N=o.a.extend(_),R=void 0,D=void 0,I=[],z=function(e){if(R){var t=R.callback;"function"===typeof t&&(D.showInput?t(D.inputValue,e):t(e)),R.resolve&&("confirm"===e?D.showInput?R.resolve({value:D.inputValue,action:e}):R.resolve(e):!R.reject||"cancel"!==e&&"close"!==e||R.reject(e))}},P=function(){D=new N({el:document.createElement("div")}),D.callback=z},$=function e(){if(D||P(),D.action="",(!D.visible||D.closeTimer)&&I.length>0){R=I.shift();var t=R.options;for(var n in t)t.hasOwnProperty(n)&&(D[n]=t[n]);void 0===t.callback&&(D.callback=z);var r=D.callback;D.callback=function(t,n){r(t,n),e()},Object(E["isVNode"])(D.message)?(D.$slots.default=[D.message],D.message=null):delete D.$slots.default,["modal","showClose","closeOnClickModal","closeOnPressEscape","closeOnHashChange"].forEach((function(e){void 0===D[e]&&(D[e]=!0)})),document.body.appendChild(D.$el),o.a.nextTick((function(){D.visible=!0}))}},F=function e(t,n){if(!o.a.prototype.$isServer){if("string"===typeof t||Object(E["isVNode"])(t)?(t={message:t},"string"===typeof arguments[1]&&(t.title=arguments[1])):t.callback&&!n&&(n=t.callback),"undefined"!==typeof Promise)return new Promise((function(r,o){I.push({options:M()({},A,e.defaults,t),callback:n,resolve:r,reject:o}),$()}));I.push({options:M()({},A,e.defaults,t),callback:n}),$()}};F.setDefaults=function(e){F.defaults=e},F.alert=function(e,t,n){return"object"===("undefined"===typeof t?"undefined":T(t))?(n=t,t=""):void 0===t&&(t=""),F(M()({title:t,message:e,$type:"alert",closeOnPressEscape:!1,closeOnClickModal:!1},n))},F.confirm=function(e,t,n){return"object"===("undefined"===typeof t?"undefined":T(t))?(n=t,t=""):void 0===t&&(t=""),F(M()({title:t,message:e,$type:"confirm",showCancelButton:!0},n))},F.prompt=function(e,t,n){return"object"===("undefined"===typeof t?"undefined":T(t))?(n=t,t=""):void 0===t&&(t=""),F(M()({title:t,message:e,showCancelButton:!0,showInput:!0,$type:"prompt"},n))},F.close=function(){D.doClose(),D.visible=!1,I=[],R=null};var B=F;t["default"]=B},9:function(e,t){e.exports=n(7734)}})},8787:function(e,t,n){n(7658),e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/",n(n.s=59)}({0:function(e,t,n){"use strict";function r(e,t,n,r,o,i,s,a){var l,c="function"===typeof e?e.options:e;if(t&&(c.render=t,c.staticRenderFns=n,c._compiled=!0),r&&(c.functional=!0),i&&(c._scopeId="data-v-"+i),s?(l=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),o&&o.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(s)},c._ssrRegister=l):o&&(l=a?function(){o.call(this,this.$root.$options.shadowRoot)}:o),l)if(c.functional){c._injectStyles=l;var u=c.render;c.render=function(e,t){return l.call(t),u(e,t)}}else{var d=c.beforeCreate;c.beforeCreate=d?[].concat(d,l):[l]}return{exports:e,options:c}}n.d(t,"a",(function(){return r}))},11:function(e,t){e.exports=n(4511)},26:function(e,t){e.exports=n(8737)},43:function(e,t){e.exports=n(7509)},59:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition-group",{class:["el-upload-list","el-upload-list--"+e.listType,{"is-disabled":e.disabled}],attrs:{tag:"ul",name:"el-list"}},e._l(e.files,(function(t){return n("li",{key:t.uid,class:["el-upload-list__item","is-"+t.status,e.focusing?"focusing":""],attrs:{tabindex:"0"},on:{keydown:function(n){if(!("button"in n)&&e._k(n.keyCode,"delete",[8,46],n.key,["Backspace","Delete","Del"]))return null;!e.disabled&&e.$emit("remove",t)},focus:function(t){e.focusing=!0},blur:function(t){e.focusing=!1},click:function(t){e.focusing=!1}}},[e._t("default",["uploading"!==t.status&&["picture-card","picture"].indexOf(e.listType)>-1?n("img",{staticClass:"el-upload-list__item-thumbnail",attrs:{src:t.url,alt:""}}):e._e(),n("a",{staticClass:"el-upload-list__item-name",on:{click:function(n){e.handleClick(t)}}},[n("i",{staticClass:"el-icon-document"}),e._v(e._s(t.name)+"\n      ")]),n("label",{staticClass:"el-upload-list__item-status-label"},[n("i",{class:{"el-icon-upload-success":!0,"el-icon-circle-check":"text"===e.listType,"el-icon-check":["picture-card","picture"].indexOf(e.listType)>-1}})]),e.disabled?e._e():n("i",{staticClass:"el-icon-close",on:{click:function(n){e.$emit("remove",t)}}}),e.disabled?e._e():n("i",{staticClass:"el-icon-close-tip"},[e._v(e._s(e.t("el.upload.deleteTip")))]),"uploading"===t.status?n("el-progress",{attrs:{type:"picture-card"===e.listType?"circle":"line","stroke-width":"picture-card"===e.listType?6:2,percentage:e.parsePercentage(t.percentage)}}):e._e(),"picture-card"===e.listType?n("span",{staticClass:"el-upload-list__item-actions"},[e.handlePreview&&"picture-card"===e.listType?n("span",{staticClass:"el-upload-list__item-preview",on:{click:function(n){e.handlePreview(t)}}},[n("i",{staticClass:"el-icon-zoom-in"})]):e._e(),e.disabled?e._e():n("span",{staticClass:"el-upload-list__item-delete",on:{click:function(n){e.$emit("remove",t)}}},[n("i",{staticClass:"el-icon-delete"})])]):e._e()],{file:t})],2)})),0)},o=[];r._withStripped=!0;var i=n(6),s=n.n(i),a=n(43),l=n.n(a),c={name:"ElUploadList",mixins:[s.a],data:function(){return{focusing:!1}},components:{ElProgress:l.a},props:{files:{type:Array,default:function(){return[]}},disabled:{type:Boolean,default:!1},handlePreview:Function,listType:String},methods:{parsePercentage:function(e){return parseInt(e,10)},handleClick:function(e){this.handlePreview&&this.handlePreview(e)}}},u=c,d=n(0),h=Object(d["a"])(u,r,o,!1,null,null,null);h.options.__file="packages/upload/src/upload-list.vue";var p=h.exports,f=n(26),m=n.n(f);function g(e,t,n){var r=void 0;r=n.response?""+(n.response.error||n.response):n.responseText?""+n.responseText:"fail to post "+e+" "+n.status;var o=new Error(r);return o.status=n.status,o.method="post",o.url=e,o}function v(e){var t=e.responseText||e.response;if(!t)return t;try{return JSON.parse(t)}catch(n){return t}}function y(e){if("undefined"!==typeof XMLHttpRequest){var t=new XMLHttpRequest,n=e.action;t.upload&&(t.upload.onprogress=function(t){t.total>0&&(t.percent=t.loaded/t.total*100),e.onProgress(t)});var r=new FormData;e.data&&Object.keys(e.data).forEach((function(t){r.append(t,e.data[t])})),r.append(e.filename,e.file,e.file.name),t.onerror=function(t){e.onError(t)},t.onload=function(){if(t.status<200||t.status>=300)return e.onError(g(n,e,t));e.onSuccess(v(t))},t.open("post",n,!0),e.withCredentials&&"withCredentials"in t&&(t.withCredentials=!0);var o=e.headers||{};for(var i in o)o.hasOwnProperty(i)&&null!==o[i]&&t.setRequestHeader(i,o[i]);return t.send(r),t}}var b=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"el-upload-dragger",class:{"is-dragover":e.dragover},on:{drop:function(t){return t.preventDefault(),e.onDrop(t)},dragover:function(t){return t.preventDefault(),e.onDragover(t)},dragleave:function(t){t.preventDefault(),e.dragover=!1}}},[e._t("default")],2)},w=[];b._withStripped=!0;var k={name:"ElUploadDrag",props:{disabled:Boolean},inject:{uploader:{default:""}},data:function(){return{dragover:!1}},methods:{onDragover:function(){this.disabled||(this.dragover=!0)},onDrop:function(e){if(!this.disabled&&this.uploader){var t=this.uploader.accept;this.dragover=!1,t?this.$emit("file",[].slice.call(e.dataTransfer.files).filter((function(e){var n=e.type,r=e.name,o=r.indexOf(".")>-1?"."+r.split(".").pop():"",i=n.replace(/\/.*$/,"");return t.split(",").map((function(e){return e.trim()})).filter((function(e){return e})).some((function(e){return/\..+$/.test(e)?o===e:/\/\*$/.test(e)?i===e.replace(/\/\*$/,""):!!/^[^\/]+\/[^\/]+$/.test(e)&&n===e}))}))):this.$emit("file",e.dataTransfer.files)}}}},x=k,S=Object(d["a"])(x,b,w,!1,null,null,null);S.options.__file="packages/upload/src/upload-dragger.vue";var C,_,O=S.exports,M={inject:["uploader"],components:{UploadDragger:O},props:{type:String,action:{type:String,required:!0},name:{type:String,default:"file"},data:Object,headers:Object,withCredentials:Boolean,multiple:Boolean,accept:String,onStart:Function,onProgress:Function,onSuccess:Function,onError:Function,beforeUpload:Function,drag:Boolean,onPreview:{type:Function,default:function(){}},onRemove:{type:Function,default:function(){}},fileList:Array,autoUpload:Boolean,listType:String,httpRequest:{type:Function,default:y},disabled:Boolean,limit:Number,onExceed:Function},data:function(){return{mouseover:!1,reqs:{}}},methods:{isImage:function(e){return-1!==e.indexOf("image")},handleChange:function(e){var t=e.target.files;t&&this.uploadFiles(t)},uploadFiles:function(e){var t=this;if(this.limit&&this.fileList.length+e.length>this.limit)this.onExceed&&this.onExceed(e,this.fileList);else{var n=Array.prototype.slice.call(e);this.multiple||(n=n.slice(0,1)),0!==n.length&&n.forEach((function(e){t.onStart(e),t.autoUpload&&t.upload(e)}))}},upload:function(e){var t=this;if(this.$refs.input.value=null,!this.beforeUpload)return this.post(e);var n=this.beforeUpload(e);n&&n.then?n.then((function(n){var r=Object.prototype.toString.call(n);if("[object File]"===r||"[object Blob]"===r){for(var o in"[object Blob]"===r&&(n=new File([n],e.name,{type:e.type})),e)e.hasOwnProperty(o)&&(n[o]=e[o]);t.post(n)}else t.post(e)}),(function(){t.onRemove(null,e)})):!1!==n?this.post(e):this.onRemove(null,e)},abort:function(e){var t=this.reqs;if(e){var n=e;e.uid&&(n=e.uid),t[n]&&t[n].abort()}else Object.keys(t).forEach((function(e){t[e]&&t[e].abort(),delete t[e]}))},post:function(e){var t=this,n=e.uid,r={headers:this.headers,withCredentials:this.withCredentials,file:e,data:this.data,filename:this.name,action:this.action,onProgress:function(n){t.onProgress(n,e)},onSuccess:function(r){t.onSuccess(r,e),delete t.reqs[n]},onError:function(r){t.onError(r,e),delete t.reqs[n]}},o=this.httpRequest(r);this.reqs[n]=o,o&&o.then&&o.then(r.onSuccess,r.onError)},handleClick:function(){this.disabled||(this.$refs.input.value=null,this.$refs.input.click())},handleKeydown:function(e){e.target===e.currentTarget&&(13!==e.keyCode&&32!==e.keyCode||this.handleClick())}},render:function(e){var t=this.handleClick,n=this.drag,r=this.name,o=this.handleChange,i=this.multiple,s=this.accept,a=this.listType,l=this.uploadFiles,c=this.disabled,u=this.handleKeydown,d={class:{"el-upload":!0},on:{click:t,keydown:u}};return d.class["el-upload--"+a]=!0,e("div",m()([d,{attrs:{tabindex:"0"}}]),[n?e("upload-dragger",{attrs:{disabled:c},on:{file:l}},[this.$slots.default]):this.$slots.default,e("input",{class:"el-upload__input",attrs:{type:"file",name:r,multiple:i,accept:s},ref:"input",on:{change:o}})])}},E=M,T=Object(d["a"])(E,C,_,!1,null,null,null);T.options.__file="packages/upload/src/upload.vue";var A=T.exports,N=n(11),R=n.n(N);function D(){}var I,z,P={name:"ElUpload",mixins:[R.a],components:{ElProgress:l.a,UploadList:p,Upload:A},provide:function(){return{uploader:this}},inject:{elForm:{default:""}},props:{action:{type:String,required:!0},headers:{type:Object,default:function(){return{}}},data:Object,multiple:Boolean,name:{type:String,default:"file"},drag:Boolean,dragger:Boolean,withCredentials:Boolean,showFileList:{type:Boolean,default:!0},accept:String,type:{type:String,default:"select"},beforeUpload:Function,beforeRemove:Function,onRemove:{type:Function,default:D},onChange:{type:Function,default:D},onPreview:{type:Function},onSuccess:{type:Function,default:D},onProgress:{type:Function,default:D},onError:{type:Function,default:D},fileList:{type:Array,default:function(){return[]}},autoUpload:{type:Boolean,default:!0},listType:{type:String,default:"text"},httpRequest:Function,disabled:Boolean,limit:Number,onExceed:{type:Function,default:D}},data:function(){return{uploadFiles:[],dragOver:!1,draging:!1,tempIndex:1}},computed:{uploadDisabled:function(){return this.disabled||(this.elForm||{}).disabled}},watch:{listType:function(e){"picture-card"!==e&&"picture"!==e||(this.uploadFiles=this.uploadFiles.map((function(e){if(!e.url&&e.raw)try{e.url=URL.createObjectURL(e.raw)}catch(t){console.error("[Element Error][Upload]",t)}return e})))},fileList:{immediate:!0,handler:function(e){var t=this;this.uploadFiles=e.map((function(e){return e.uid=e.uid||Date.now()+t.tempIndex++,e.status=e.status||"success",e}))}}},methods:{handleStart:function(e){e.uid=Date.now()+this.tempIndex++;var t={status:"ready",name:e.name,size:e.size,percentage:0,uid:e.uid,raw:e};if("picture-card"===this.listType||"picture"===this.listType)try{t.url=URL.createObjectURL(e)}catch(n){return void console.error("[Element Error][Upload]",n)}this.uploadFiles.push(t),this.onChange(t,this.uploadFiles)},handleProgress:function(e,t){var n=this.getFile(t);this.onProgress(e,n,this.uploadFiles),n.status="uploading",n.percentage=e.percent||0},handleSuccess:function(e,t){var n=this.getFile(t);n&&(n.status="success",n.response=e,this.onSuccess(e,n,this.uploadFiles),this.onChange(n,this.uploadFiles))},handleError:function(e,t){var n=this.getFile(t),r=this.uploadFiles;n.status="fail",r.splice(r.indexOf(n),1),this.onError(e,n,this.uploadFiles),this.onChange(n,this.uploadFiles)},handleRemove:function(e,t){var n=this;t&&(e=this.getFile(t));var r=function(){n.abort(e);var t=n.uploadFiles;t.splice(t.indexOf(e),1),n.onRemove(e,t)};if(this.beforeRemove){if("function"===typeof this.beforeRemove){var o=this.beforeRemove(e,this.uploadFiles);o&&o.then?o.then((function(){r()}),D):!1!==o&&r()}}else r()},getFile:function(e){var t=this.uploadFiles,n=void 0;return t.every((function(t){return n=e.uid===t.uid?t:null,!n})),n},abort:function(e){this.$refs["upload-inner"].abort(e)},clearFiles:function(){this.uploadFiles=[]},submit:function(){var e=this;this.uploadFiles.filter((function(e){return"ready"===e.status})).forEach((function(t){e.$refs["upload-inner"].upload(t.raw)}))},getMigratingConfig:function(){return{props:{"default-file-list":"default-file-list is renamed to file-list.","show-upload-list":"show-upload-list is renamed to show-file-list.","thumbnail-mode":"thumbnail-mode has been deprecated, you can implement the same effect according to this case: http://element.eleme.io/#/zh-CN/component/upload#yong-hu-tou-xiang-shang-chuan"}}}},beforeDestroy:function(){this.uploadFiles.forEach((function(e){e.url&&0===e.url.indexOf("blob:")&&URL.revokeObjectURL(e.url)}))},render:function(e){var t=this,n=void 0;this.showFileList&&(n=e(p,{attrs:{disabled:this.uploadDisabled,listType:this.listType,files:this.uploadFiles,handlePreview:this.onPreview},on:{remove:this.handleRemove}},[function(e){if(t.$scopedSlots.file)return t.$scopedSlots.file({file:e.file})}]));var r={props:{type:this.type,drag:this.drag,action:this.action,multiple:this.multiple,"before-upload":this.beforeUpload,"with-credentials":this.withCredentials,headers:this.headers,name:this.name,data:this.data,accept:this.accept,fileList:this.uploadFiles,autoUpload:this.autoUpload,listType:this.listType,disabled:this.uploadDisabled,limit:this.limit,"on-exceed":this.onExceed,"on-start":this.handleStart,"on-progress":this.handleProgress,"on-success":this.handleSuccess,"on-error":this.handleError,"on-preview":this.onPreview,"on-remove":this.handleRemove,"http-request":this.httpRequest},ref:"upload-inner"},o=this.$slots.trigger||this.$slots.default,i=e("upload",r,[o]);return e("div",["picture-card"===this.listType?n:"",this.$slots.trigger?[i,this.$slots.default]:i,this.$slots.tip,"picture-card"!==this.listType?n:""])}},$=P,F=Object(d["a"])($,I,z,!1,null,null,null);F.options.__file="packages/upload/src/index.vue";var B=F.exports;B.install=function(e){e.component(B.name,B)};t["default"]=B},6:function(e,t){e.exports=n(3647)}})},5025:function(e,t,n){"use strict";var r=n(2101),o=i(Error);function i(e){return t.displayName=e.displayName||e.name,t;function t(t){return t&&(t=r.apply(null,arguments)),new e(t)}}e.exports=o,o.eval=i(EvalError),o.range=i(RangeError),o.reference=i(ReferenceError),o.syntax=i(SyntaxError),o.type=i(TypeError),o.uri=i(URIError),o.create=i},2101:function(e){(function(){var t;function n(){console.log(o.apply(null,arguments))}function r(e,t){return o.apply(null,[e].concat(t))}function o(e){for(var t,n,r,o,i=1,s=[].slice.call(arguments),a=0,l=e.length,c="",u=!1,d=!1,h=function(){return s[i++]},p=function(){var n="";while(/\d/.test(e[a]))n+=e[a++],t=e[a];return n.length>0?parseInt(n):null};a<l;++a)if(t=e[a],u)switch(u=!1,"."==t?(d=!1,t=e[++a]):"0"==t&&"."==e[a+1]?(d=!0,a+=2,t=e[a]):d=!0,o=p(),t){case"b":c+=parseInt(h(),10).toString(2);break;case"c":n=h(),c+="string"===typeof n||n instanceof String?n:String.fromCharCode(parseInt(n,10));break;case"d":c+=parseInt(h(),10);break;case"f":r=String(parseFloat(h()).toFixed(o||6)),c+=d?r:r.replace(/^0/,"");break;case"j":c+=JSON.stringify(h());break;case"o":c+="0"+parseInt(h(),10).toString(8);break;case"s":c+=h();break;case"x":c+="0x"+parseInt(h(),10).toString(16);break;case"X":c+="0x"+parseInt(h(),10).toString(16).toUpperCase();break;default:c+=t;break}else"%"===t?u=!0:c+=t;return c}t=e.exports=o,t.format=o,t.vsprintf=r,"undefined"!==typeof console&&"function"===typeof console.log&&(t.printf=n)})()},762:function(e,t,n){function r(e){return e instanceof Map?e.clear=e.delete=e.set=function(){throw new Error("map is read-only")}:e instanceof Set&&(e.add=e.clear=e.delete=function(){throw new Error("set is read-only")}),Object.freeze(e),Object.getOwnPropertyNames(e).forEach((function(t){var n=e[t];"object"!=typeof n||Object.isFrozen(n)||r(n)})),e}n(7658),n(541);var o=r,i=r;o.default=i;class s{constructor(e){void 0===e.data&&(e.data={}),this.data=e.data,this.isMatchIgnored=!1}ignoreMatch(){this.isMatchIgnored=!0}}function a(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")}function l(e,...t){const n=Object.create(null);for(const r in e)n[r]=e[r];return t.forEach((function(e){for(const t in e)n[t]=e[t]})),n}const c="</span>",u=e=>!!e.kind;class d{constructor(e,t){this.buffer="",this.classPrefix=t.classPrefix,e.walk(this)}addText(e){this.buffer+=a(e)}openNode(e){if(!u(e))return;let t=e.kind;e.sublanguage||(t=`${this.classPrefix}${t}`),this.span(t)}closeNode(e){u(e)&&(this.buffer+=c)}value(){return this.buffer}span(e){this.buffer+=`<span class="${e}">`}}class h{constructor(){this.rootNode={children:[]},this.stack=[this.rootNode]}get top(){return this.stack[this.stack.length-1]}get root(){return this.rootNode}add(e){this.top.children.push(e)}openNode(e){const t={kind:e,children:[]};this.add(t),this.stack.push(t)}closeNode(){if(this.stack.length>1)return this.stack.pop()}closeAllNodes(){while(this.closeNode());}toJSON(){return JSON.stringify(this.rootNode,null,4)}walk(e){return this.constructor._walk(e,this.rootNode)}static _walk(e,t){return"string"===typeof t?e.addText(t):t.children&&(e.openNode(t),t.children.forEach((t=>this._walk(e,t))),e.closeNode(t)),e}static _collapse(e){"string"!==typeof e&&e.children&&(e.children.every((e=>"string"===typeof e))?e.children=[e.children.join("")]:e.children.forEach((e=>{h._collapse(e)})))}}class p extends h{constructor(e){super(),this.options=e}addKeyword(e,t){""!==e&&(this.openNode(t),this.addText(e),this.closeNode())}addText(e){""!==e&&this.add(e)}addSublanguage(e,t){const n=e.root;n.kind=t,n.sublanguage=!0,this.add(n)}toHTML(){const e=new d(this,this.options);return e.value()}finalize(){return!0}}function f(e){return new RegExp(e.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"m")}function m(e){return e?"string"===typeof e?e:e.source:null}function g(...e){const t=e.map((e=>m(e))).join("");return t}function v(...e){const t="("+e.map((e=>m(e))).join("|")+")";return t}function y(e){return new RegExp(e.toString()+"|").exec("").length-1}function b(e,t){const n=e&&e.exec(t);return n&&0===n.index}const w=/\[(?:[^\\\]]|\\.)*\]|\(\??|\\([1-9][0-9]*)|\\./;function k(e,t="|"){let n=0;return e.map((e=>{n+=1;const t=n;let r=m(e),o="";while(r.length>0){const e=w.exec(r);if(!e){o+=r;break}o+=r.substring(0,e.index),r=r.substring(e.index+e[0].length),"\\"===e[0][0]&&e[1]?o+="\\"+String(Number(e[1])+t):(o+=e[0],"("===e[0]&&n++)}return o})).map((e=>`(${e})`)).join(t)}const x=/\b\B/,S="[a-zA-Z]\\w*",C="[a-zA-Z_]\\w*",_="\\b\\d+(\\.\\d+)?",O="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",M="\\b(0b[01]+)",E="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",T=(e={})=>{const t=/^#![ ]*\//;return e.binary&&(e.begin=g(t,/.*\b/,e.binary,/\b.*/)),l({className:"meta",begin:t,end:/$/,relevance:0,"on:begin":(e,t)=>{0!==e.index&&t.ignoreMatch()}},e)},A={begin:"\\\\[\\s\\S]",relevance:0},N={className:"string",begin:"'",end:"'",illegal:"\\n",contains:[A]},R={className:"string",begin:'"',end:'"',illegal:"\\n",contains:[A]},D={begin:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/},I=function(e,t,n={}){const r=l({className:"comment",begin:e,end:t,contains:[]},n);return r.contains.push(D),r.contains.push({className:"doctag",begin:"(?:TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):",relevance:0}),r},z=I("//","$"),P=I("/\\*","\\*/"),$=I("#","$"),F={className:"number",begin:_,relevance:0},B={className:"number",begin:O,relevance:0},j={className:"number",begin:M,relevance:0},L={className:"number",begin:_+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},V={begin:/(?=\/[^/\n]*\/)/,contains:[{className:"regexp",begin:/\//,end:/\/[gimuy]*/,illegal:/\n/,contains:[A,{begin:/\[/,end:/\]/,relevance:0,contains:[A]}]}]},q={className:"title",begin:S,relevance:0},H={className:"title",begin:C,relevance:0},W={begin:"\\.\\s*"+C,relevance:0},J=function(e){return Object.assign(e,{"on:begin":(e,t)=>{t.data._beginMatch=e[1]},"on:end":(e,t)=>{t.data._beginMatch!==e[1]&&t.ignoreMatch()}})};var U=Object.freeze({__proto__:null,MATCH_NOTHING_RE:x,IDENT_RE:S,UNDERSCORE_IDENT_RE:C,NUMBER_RE:_,C_NUMBER_RE:O,BINARY_NUMBER_RE:M,RE_STARTERS_RE:E,SHEBANG:T,BACKSLASH_ESCAPE:A,APOS_STRING_MODE:N,QUOTE_STRING_MODE:R,PHRASAL_WORDS_MODE:D,COMMENT:I,C_LINE_COMMENT_MODE:z,C_BLOCK_COMMENT_MODE:P,HASH_COMMENT_MODE:$,NUMBER_MODE:F,C_NUMBER_MODE:B,BINARY_NUMBER_MODE:j,CSS_NUMBER_MODE:L,REGEXP_MODE:V,TITLE_MODE:q,UNDERSCORE_TITLE_MODE:H,METHOD_GUARD:W,END_SAME_AS_BEGIN:J});function K(e,t){const n=e.input[e.index-1];"."===n&&t.ignoreMatch()}function G(e,t){t&&e.beginKeywords&&(e.begin="\\b("+e.beginKeywords.split(" ").join("|")+")(?!\\.)(?=\\b|\\s)",e.__beforeBegin=K,e.keywords=e.keywords||e.beginKeywords,delete e.beginKeywords,void 0===e.relevance&&(e.relevance=0))}function X(e,t){Array.isArray(e.illegal)&&(e.illegal=v(...e.illegal))}function Z(e,t){if(e.match){if(e.begin||e.end)throw new Error("begin & end are not supported with match");e.begin=e.match,delete e.match}}function Y(e,t){void 0===e.relevance&&(e.relevance=1)}const Q=["of","and","for","in","not","or","if","then","parent","list","value"],ee="keyword";function te(e,t,n=ee){const r={};return"string"===typeof e?o(n,e.split(" ")):Array.isArray(e)?o(n,e):Object.keys(e).forEach((function(n){Object.assign(r,te(e[n],t,n))})),r;function o(e,n){t&&(n=n.map((e=>e.toLowerCase()))),n.forEach((function(t){const n=t.split("|");r[n[0]]=[e,ne(n[0],n[1])]}))}}function ne(e,t){return t?Number(t):re(e)?0:1}function re(e){return Q.includes(e.toLowerCase())}function oe(e,{plugins:t}){function n(t,n){return new RegExp(m(t),"m"+(e.case_insensitive?"i":"")+(n?"g":""))}class r{constructor(){this.matchIndexes={},this.regexes=[],this.matchAt=1,this.position=0}addRule(e,t){t.position=this.position++,this.matchIndexes[this.matchAt]=t,this.regexes.push([t,e]),this.matchAt+=y(e)+1}compile(){0===this.regexes.length&&(this.exec=()=>null);const e=this.regexes.map((e=>e[1]));this.matcherRe=n(k(e),!0),this.lastIndex=0}exec(e){this.matcherRe.lastIndex=this.lastIndex;const t=this.matcherRe.exec(e);if(!t)return null;const n=t.findIndex(((e,t)=>t>0&&void 0!==e)),r=this.matchIndexes[n];return t.splice(0,n),Object.assign(t,r)}}class o{constructor(){this.rules=[],this.multiRegexes=[],this.count=0,this.lastIndex=0,this.regexIndex=0}getMatcher(e){if(this.multiRegexes[e])return this.multiRegexes[e];const t=new r;return this.rules.slice(e).forEach((([e,n])=>t.addRule(e,n))),t.compile(),this.multiRegexes[e]=t,t}resumingScanAtSamePosition(){return 0!==this.regexIndex}considerAll(){this.regexIndex=0}addRule(e,t){this.rules.push([e,t]),"begin"===t.type&&this.count++}exec(e){const t=this.getMatcher(this.regexIndex);t.lastIndex=this.lastIndex;let n=t.exec(e);if(this.resumingScanAtSamePosition())if(n&&n.index===this.lastIndex);else{const t=this.getMatcher(0);t.lastIndex=this.lastIndex+1,n=t.exec(e)}return n&&(this.regexIndex+=n.position+1,this.regexIndex===this.count&&this.considerAll()),n}}function i(e){const t=new o;return e.contains.forEach((e=>t.addRule(e.begin,{rule:e,type:"begin"}))),e.terminatorEnd&&t.addRule(e.terminatorEnd,{type:"end"}),e.illegal&&t.addRule(e.illegal,{type:"illegal"}),t}function s(t,r){const o=t;if(t.isCompiled)return o;[Z].forEach((e=>e(t,r))),e.compilerExtensions.forEach((e=>e(t,r))),t.__beforeBegin=null,[G,X,Y].forEach((e=>e(t,r))),t.isCompiled=!0;let a=null;if("object"===typeof t.keywords&&(a=t.keywords.$pattern,delete t.keywords.$pattern),t.keywords&&(t.keywords=te(t.keywords,e.case_insensitive)),t.lexemes&&a)throw new Error("ERR: Prefer `keywords.$pattern` to `mode.lexemes`, BOTH are not allowed. (see mode reference) ");return a=a||t.lexemes||/\w+/,o.keywordPatternRe=n(a,!0),r&&(t.begin||(t.begin=/\B|\b/),o.beginRe=n(t.begin),t.endSameAsBegin&&(t.end=t.begin),t.end||t.endsWithParent||(t.end=/\B|\b/),t.end&&(o.endRe=n(t.end)),o.terminatorEnd=m(t.end)||"",t.endsWithParent&&r.terminatorEnd&&(o.terminatorEnd+=(t.end?"|":"")+r.terminatorEnd)),t.illegal&&(o.illegalRe=n(t.illegal)),t.contains||(t.contains=[]),t.contains=[].concat(...t.contains.map((function(e){return se("self"===e?t:e)}))),t.contains.forEach((function(e){s(e,o)})),t.starts&&s(t.starts,r),o.matcher=i(o),o}if(e.compilerExtensions||(e.compilerExtensions=[]),e.contains&&e.contains.includes("self"))throw new Error("ERR: contains `self` is not supported at the top-level of a language.  See documentation.");return e.classNameAliases=l(e.classNameAliases||{}),s(e)}function ie(e){return!!e&&(e.endsWithParent||ie(e.starts))}function se(e){return e.variants&&!e.cachedVariants&&(e.cachedVariants=e.variants.map((function(t){return l(e,{variants:null},t)}))),e.cachedVariants?e.cachedVariants:ie(e)?l(e,{starts:e.starts?l(e.starts):null}):Object.isFrozen(e)?l(e):e}var ae="10.7.3";function le(e){return Boolean(e||""===e)}function ce(e){const t={props:["language","code","autodetect"],data:function(){return{detectedLanguage:"",unknownLanguage:!1}},computed:{className(){return this.unknownLanguage?"":"hljs "+this.detectedLanguage},highlighted(){if(!this.autoDetect&&!e.getLanguage(this.language))return console.warn(`The language "${this.language}" you specified could not be found.`),this.unknownLanguage=!0,a(this.code);let t={};return this.autoDetect?(t=e.highlightAuto(this.code),this.detectedLanguage=t.language):(t=e.highlight(this.language,this.code,this.ignoreIllegals),this.detectedLanguage=this.language),t.value},autoDetect(){return!this.language||le(this.autodetect)},ignoreIllegals(){return!0}},render(e){return e("pre",{},[e("code",{class:this.className,domProps:{innerHTML:this.highlighted}})])}},n={install(e){e.component("highlightjs",t)}};return{Component:t,VuePlugin:n}}const ue={"after:highlightElement":({el:e,result:t,text:n})=>{const r=he(e);if(!r.length)return;const o=document.createElement("div");o.innerHTML=t.value,t.value=pe(r,he(o),n)}};function de(e){return e.nodeName.toLowerCase()}function he(e){const t=[];return function e(n,r){for(let o=n.firstChild;o;o=o.nextSibling)3===o.nodeType?r+=o.nodeValue.length:1===o.nodeType&&(t.push({event:"start",offset:r,node:o}),r=e(o,r),de(o).match(/br|hr|img|input/)||t.push({event:"stop",offset:r,node:o}));return r}(e,0),t}function pe(e,t,n){let r=0,o="";const i=[];function s(){return e.length&&t.length?e[0].offset!==t[0].offset?e[0].offset<t[0].offset?e:t:"start"===t[0].event?e:t:e.length?e:t}function l(e){function t(e){return" "+e.nodeName+'="'+a(e.value)+'"'}o+="<"+de(e)+[].map.call(e.attributes,t).join("")+">"}function c(e){o+="</"+de(e)+">"}function u(e){("start"===e.event?l:c)(e.node)}while(e.length||t.length){let t=s();if(o+=a(n.substring(r,t[0].offset)),r=t[0].offset,t===e){i.reverse().forEach(c);do{u(t.splice(0,1)[0]),t=s()}while(t===e&&t.length&&t[0].offset===r);i.reverse().forEach(l)}else"start"===t[0].event?i.push(t[0].node):i.pop(),u(t.splice(0,1)[0])}return o+a(n.substr(r))}const fe={},me=e=>{console.error(e)},ge=(e,...t)=>{console.log(`WARN: ${e}`,...t)},ve=(e,t)=>{fe[`${e}/${t}`]||(console.log(`Deprecated as of ${e}. ${t}`),fe[`${e}/${t}`]=!0)},ye=a,be=l,we=Symbol("nomatch"),ke=function(e){const t=Object.create(null),n=Object.create(null),r=[];let i=!0;const a=/(^(<[^>]+>|\t|)+|\n)/gm,l="Could not find the language '{}', did you forget to load/include a language module?",c={disableAutodetect:!0,name:"Plain text",contains:[]};let u={noHighlightRe:/^(no-?highlight)$/i,languageDetectRe:/\blang(?:uage)?-([\w-]+)\b/i,classPrefix:"hljs-",tabReplace:null,useBR:!1,languages:null,__emitter:p};function d(e){return u.noHighlightRe.test(e)}function h(e){let t=e.className+" ";t+=e.parentNode?e.parentNode.className:"";const n=u.languageDetectRe.exec(t);if(n){const t=P(n[1]);return t||(ge(l.replace("{}",n[1])),ge("Falling back to no-highlight mode for this block.",e)),t?n[1]:"no-highlight"}return t.split(/\s+/).find((e=>d(e)||P(e)))}function m(e,t,n,r){let o="",i="";"object"===typeof t?(o=e,n=t.ignoreIllegals,i=t.language,r=void 0):(ve("10.7.0","highlight(lang, code, ...args) has been deprecated."),ve("10.7.0","Please use highlight(code, options) instead.\nhttps://github.com/highlightjs/highlight.js/issues/2277"),i=e,o=t);const s={code:o,language:i};L("before:highlight",s);const a=s.result?s.result:g(s.language,s.code,n,r);return a.code=s.code,L("after:highlight",a),a}function g(e,n,o,a){function c(e,t){const n=O.case_insensitive?t[0].toLowerCase():t[0];return Object.prototype.hasOwnProperty.call(e.keywords,n)&&e.keywords[n]}function d(){if(!T.keywords)return void N.addText(R);let e=0;T.keywordPatternRe.lastIndex=0;let t=T.keywordPatternRe.exec(R),n="";while(t){n+=R.substring(e,t.index);const r=c(T,t);if(r){const[e,o]=r;if(N.addText(n),n="",D+=o,e.startsWith("_"))n+=t[0];else{const n=O.classNameAliases[e]||e;N.addKeyword(t[0],n)}}else n+=t[0];e=T.keywordPatternRe.lastIndex,t=T.keywordPatternRe.exec(R)}n+=R.substr(e),N.addText(n)}function h(){if(""===R)return;let e=null;if("string"===typeof T.subLanguage){if(!t[T.subLanguage])return void N.addText(R);e=g(T.subLanguage,R,!0,A[T.subLanguage]),A[T.subLanguage]=e.top}else e=y(R,T.subLanguage.length?T.subLanguage:null);T.relevance>0&&(D+=e.relevance),N.addSublanguage(e.emitter,e.language)}function p(){null!=T.subLanguage?h():d(),R=""}function m(e){return e.className&&N.openNode(O.classNameAliases[e.className]||e.className),T=Object.create(e,{parent:{value:T}}),T}function v(e,t,n){let r=b(e.endRe,n);if(r){if(e["on:end"]){const n=new s(e);e["on:end"](t,n),n.isMatchIgnored&&(r=!1)}if(r){while(e.endsParent&&e.parent)e=e.parent;return e}}if(e.endsWithParent)return v(e.parent,t,n)}function w(e){return 0===T.matcher.regexIndex?(R+=e[0],1):($=!0,0)}function k(e){const t=e[0],n=e.rule,r=new s(n),o=[n.__beforeBegin,n["on:begin"]];for(const i of o)if(i&&(i(e,r),r.isMatchIgnored))return w(t);return n&&n.endSameAsBegin&&(n.endRe=f(t)),n.skip?R+=t:(n.excludeBegin&&(R+=t),p(),n.returnBegin||n.excludeBegin||(R=t)),m(n),n.returnBegin?0:t.length}function x(e){const t=e[0],r=n.substr(e.index),o=v(T,e,r);if(!o)return we;const i=T;i.skip?R+=t:(i.returnEnd||i.excludeEnd||(R+=t),p(),i.excludeEnd&&(R=t));do{T.className&&N.closeNode(),T.skip||T.subLanguage||(D+=T.relevance),T=T.parent}while(T!==o.parent);return o.starts&&(o.endSameAsBegin&&(o.starts.endRe=o.endRe),m(o.starts)),i.returnEnd?0:t.length}function S(){const e=[];for(let t=T;t!==O;t=t.parent)t.className&&e.unshift(t.className);e.forEach((e=>N.openNode(e)))}let C={};function _(t,r){const s=r&&r[0];if(R+=t,null==s)return p(),0;if("begin"===C.type&&"end"===r.type&&C.index===r.index&&""===s){if(R+=n.slice(r.index,r.index+1),!i){const t=new Error("0 width match regex");throw t.languageName=e,t.badRule=C.rule,t}return 1}if(C=r,"begin"===r.type)return k(r);if("illegal"===r.type&&!o){const e=new Error('Illegal lexeme "'+s+'" for mode "'+(T.className||"<unnamed>")+'"');throw e.mode=T,e}if("end"===r.type){const e=x(r);if(e!==we)return e}if("illegal"===r.type&&""===s)return 1;if(z>1e5&&z>3*r.index){const e=new Error("potential infinite loop, way more iterations than matches");throw e}return R+=s,s.length}const O=P(e);if(!O)throw me(l.replace("{}",e)),new Error('Unknown language: "'+e+'"');const M=oe(O,{plugins:r});let E="",T=a||M;const A={},N=new u.__emitter(u);S();let R="",D=0,I=0,z=0,$=!1;try{for(T.matcher.considerAll();;){z++,$?$=!1:T.matcher.considerAll(),T.matcher.lastIndex=I;const e=T.matcher.exec(n);if(!e)break;const t=n.substring(I,e.index),r=_(t,e);I=e.index+r}return _(n.substr(I)),N.closeAllNodes(),N.finalize(),E=N.toHTML(),{relevance:Math.floor(D),value:E,language:e,illegal:!1,emitter:N,top:T}}catch(F){if(F.message&&F.message.includes("Illegal"))return{illegal:!0,illegalBy:{msg:F.message,context:n.slice(I-100,I+100),mode:F.mode},sofar:E,relevance:0,value:ye(n),emitter:N};if(i)return{illegal:!1,relevance:0,value:ye(n),emitter:N,language:e,top:T,errorRaised:F};throw F}}function v(e){const t={relevance:0,emitter:new u.__emitter(u),value:ye(e),illegal:!1,top:c};return t.emitter.addText(e),t}function y(e,n){n=n||u.languages||Object.keys(t);const r=v(e),o=n.filter(P).filter(F).map((t=>g(t,e,!1)));o.unshift(r);const i=o.sort(((e,t)=>{if(e.relevance!==t.relevance)return t.relevance-e.relevance;if(e.language&&t.language){if(P(e.language).supersetOf===t.language)return 1;if(P(t.language).supersetOf===e.language)return-1}return 0})),[s,a]=i,l=s;return l.second_best=a,l}function w(e){return u.tabReplace||u.useBR?e.replace(a,(e=>"\n"===e?u.useBR?"<br>":e:u.tabReplace?e.replace(/\t/g,u.tabReplace):e)):e}function k(e,t,r){const o=t?n[t]:r;e.classList.add("hljs"),o&&e.classList.add(o)}const x={"before:highlightElement":({el:e})=>{u.useBR&&(e.innerHTML=e.innerHTML.replace(/\n/g,"").replace(/<br[ /]*>/g,"\n"))},"after:highlightElement":({result:e})=>{u.useBR&&(e.value=e.value.replace(/\n/g,"<br>"))}},S=/^(<[^>]+>|\t)+/gm,C={"after:highlightElement":({result:e})=>{u.tabReplace&&(e.value=e.value.replace(S,(e=>e.replace(/\t/g,u.tabReplace))))}};function _(e){let t=null;const n=h(e);if(d(n))return;L("before:highlightElement",{el:e,language:n}),t=e;const r=t.textContent,o=n?m(r,{language:n,ignoreIllegals:!0}):y(r);L("after:highlightElement",{el:e,result:o,text:r}),e.innerHTML=o.value,k(e,n,o.language),e.result={language:o.language,re:o.relevance,relavance:o.relevance},o.second_best&&(e.second_best={language:o.second_best.language,re:o.second_best.relevance,relavance:o.second_best.relevance})}function O(e){e.useBR&&(ve("10.3.0","'useBR' will be removed entirely in v11.0"),ve("10.3.0","Please see https://github.com/highlightjs/highlight.js/issues/2559")),u=be(u,e)}const M=()=>{if(M.called)return;M.called=!0,ve("10.6.0","initHighlighting() is deprecated.  Use highlightAll() instead.");const e=document.querySelectorAll("pre code");e.forEach(_)};function E(){ve("10.6.0","initHighlightingOnLoad() is deprecated.  Use highlightAll() instead."),T=!0}let T=!1;function A(){if("loading"===document.readyState)return void(T=!0);const e=document.querySelectorAll("pre code");e.forEach(_)}function N(){T&&A()}function R(n,r){let o=null;try{o=r(e)}catch(s){if(me("Language definition for '{}' could not be registered.".replace("{}",n)),!i)throw s;me(s),o=c}o.name||(o.name=n),t[n]=o,o.rawDefinition=r.bind(null,e),o.aliases&&$(o.aliases,{languageName:n})}function D(e){delete t[e];for(const t of Object.keys(n))n[t]===e&&delete n[t]}function I(){return Object.keys(t)}function z(e){ve("10.4.0","requireLanguage will be removed entirely in v11."),ve("10.4.0","Please see https://github.com/highlightjs/highlight.js/pull/2844");const t=P(e);if(t)return t;const n=new Error("The '{}' language is required, but not loaded.".replace("{}",e));throw n}function P(e){return e=(e||"").toLowerCase(),t[e]||t[n[e]]}function $(e,{languageName:t}){"string"===typeof e&&(e=[e]),e.forEach((e=>{n[e.toLowerCase()]=t}))}function F(e){const t=P(e);return t&&!t.disableAutodetect}function B(e){e["before:highlightBlock"]&&!e["before:highlightElement"]&&(e["before:highlightElement"]=t=>{e["before:highlightBlock"](Object.assign({block:t.el},t))}),e["after:highlightBlock"]&&!e["after:highlightElement"]&&(e["after:highlightElement"]=t=>{e["after:highlightBlock"](Object.assign({block:t.el},t))})}function j(e){B(e),r.push(e)}function L(e,t){const n=e;r.forEach((function(e){e[n]&&e[n](t)}))}function V(e){return ve("10.2.0","fixMarkup will be removed entirely in v11.0"),ve("10.2.0","Please see https://github.com/highlightjs/highlight.js/issues/2534"),w(e)}function q(e){return ve("10.7.0","highlightBlock will be removed entirely in v12.0"),ve("10.7.0","Please use highlightElement now."),_(e)}"undefined"!==typeof window&&window.addEventListener&&window.addEventListener("DOMContentLoaded",N,!1),Object.assign(e,{highlight:m,highlightAuto:y,highlightAll:A,fixMarkup:V,highlightElement:_,highlightBlock:q,configure:O,initHighlighting:M,initHighlightingOnLoad:E,registerLanguage:R,unregisterLanguage:D,listLanguages:I,getLanguage:P,registerAliases:$,requireLanguage:z,autoDetection:F,inherit:be,addPlugin:j,vuePlugin:ce(e).VuePlugin}),e.debugMode=function(){i=!1},e.safeMode=function(){i=!0},e.versionString=ae;for(const s in U)"object"===typeof U[s]&&o(U[s]);return Object.assign(e,U),e.addPlugin(x),e.addPlugin(ue),e.addPlugin(C),e};var xe=ke({});e.exports=xe},5442:function(e,t,n){"use strict";n(7658);var r=n(762),o=n(5025);d.prototype.addText=f,d.prototype.addKeyword=h,d.prototype.addSublanguage=p,d.prototype.openNode=m,d.prototype.closeNode=g,d.prototype.closeAllNodes=y,d.prototype.finalize=y,d.prototype.toHTML=v;var i="hljs-";function s(e,t,n){var s,a=r.configure({}),l=n||{},c=l.prefix;if("string"!==typeof e)throw o("Expected `string` for name, got `%s`",e);if(!r.getLanguage(e))throw o("Unknown language: `%s` is not registered",e);if("string"!==typeof t)throw o("Expected `string` for value, got `%s`",t);if(null!==c&&void 0!==c||(c=i),r.configure({__emitter:d,classPrefix:c}),s=r.highlight(t,{language:e,ignoreIllegals:!0}),r.configure(a||{}),s.errorRaised)throw s.errorRaised;return{relevance:s.relevance,language:s.language,value:s.emitter.rootNode.children}}function a(e,t){var n,a,l,c,u=t||{},d=u.subset||r.listLanguages(),h=u.prefix,p=d.length,f=-1;if(null!==h&&void 0!==h||(h=i),"string"!==typeof e)throw o("Expected `string` for value, got `%s`",e);a={relevance:0,language:null,value:[]},n={relevance:0,language:null,value:[]};while(++f<p)c=d[f],r.getLanguage(c)&&(l=s(c,e,t),l.language=c,l.relevance>a.relevance&&(a=l),l.relevance>n.relevance&&(a=n,n=l));return a.language&&(n.secondBest=a),n}function l(e,t){r.registerLanguage(e,t)}function c(){return r.listLanguages()}function u(e,t){var n,o=e;for(n in t&&(o={},o[e]=t),o)r.registerAliases(o[n],{languageName:n})}function d(e){this.options=e,this.rootNode={children:[]},this.stack=[this.rootNode]}function h(e,t){this.openNode(t),this.addText(e),this.closeNode()}function p(e,t){var n=this.stack,r=n[n.length-1],o=e.rootNode.children,i=t?{type:"element",tagName:"span",properties:{className:[t]},children:o}:o;r.children=r.children.concat(i)}function f(e){var t,n,r=this.stack;""!==e&&(t=r[r.length-1],n=t.children[t.children.length-1],n&&"text"===n.type?n.value+=e:t.children.push({type:"text",value:e}))}function m(e){var t=this.stack,n=this.options.classPrefix+e,r=t[t.length-1],o={type:"element",tagName:"span",properties:{className:[n]},children:[]};r.children.push(o),t.push(o)}function g(){this.stack.pop()}function v(){return""}function y(){}},4680:function(e,t,n){"use strict";n(7658);var r=n(2391),o=n(9443),i=n(1640),s=function(e){return function(t){var n=L(e)(t.selection);return n?S(n.pos)(t):t}},a=function(e,t){return function(n){Array.isArray(e)||(e=[e]);for(var r=0,o=e.length;r<o;r++){var i=L(e[r])(n.selection);if(i){var s=k(i.pos,t)(n);if(s!==n)return s}}return n}},l=function(e){if(y(e.selection)){var t=e.selection.$from.pos,n=e.selection.$to.pos;return w(e.delete(t,n))}return e},c=function(e){return function(t){if(y(t.selection)){var n=t.selection,i=n.$from,s=n.$to;if(e instanceof o.Fragment&&i.parent.canReplace(i.index(),i.indexAfter(),e)||i.parent.canReplaceWith(i.index(),i.indexAfter(),e.type))return w(t.replaceWith(i.pos,s.pos,e).setSelection(new r.NodeSelection(t.doc.resolve(i.pos))))}return t}},u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return function(n){var o=r.Selection.findFrom(n.doc.resolve(e),t,!0);return o?n.setSelection(o):n}},d=function(e){return e.type&&e.type.spec.selectable},h=function(e){return d(e)&&e.type.isLeaf},p=function(e,t,n){return h(e)?n.setSelection(new r.NodeSelection(n.doc.resolve(t))):u(t)(n)},f=function(e,t,n){return function(r){var o="number"===typeof t,i=r.selection.$from,s=o?r.doc.resolve(t):y(r.selection)?r.doc.resolve(i.pos+1):i,l=s.parent;if(y(r.selection)&&n){var u=r;if(r=c(e)(r),u!==r)return r}if(O(l)){var h=r;if(r=a(l.type,e)(r),h!==r){var f=d(e)?s.before(s.depth):s.pos;return p(e,f,r)}}if(_(s,e)){r.insert(s.pos,e);var m=o?s.pos:d(e)?r.selection.$anchor.pos-1:r.selection.$anchor.pos;return w(p(e,m,r))}for(var g=s.depth;g>0;g--){var v=s.after(g),b=r.doc.resolve(v);if(_(b,e))return r.insert(v,e),w(p(e,v,r))}return r}},m=function(e,t,n,r){return function(o){var i=L(e)(o.selection);return i?w(o.setNodeMarkup(i.pos,t,Object.assign({},i.node.attrs,n),r)):o}},g=function(e){return function(t){if(!y(t.selection)){var n=L(e)(t.selection);if(n)return w(t.setSelection(r.NodeSelection.create(t.doc,n.pos)))}return t}},v=function(e){var t=J(e.selection);return"number"===typeof t?S(t)(e):e},y=function(e){return e instanceof r.NodeSelection},b=function(e,t){return Array.isArray(e)&&e.indexOf(t.type)>-1||t.type===e},w=function(e){return Object.assign(Object.create(e),e).setTime(Date.now())},k=function(e,t){return function(n){var r=n.doc.nodeAt(e),o=n.doc.resolve(e);if(x(o,t)){n=n.replaceWith(e,e+r.nodeSize,t);var i=n.selection.$from.pos-1;return n=u(Math.max(i,0),-1)(n),n=u(n.selection.$from.start())(n),w(n)}return n}},x=function(e,t){var n=e.node(e.depth);return n&&n.type.validContent(t instanceof o.Fragment?t:o.Fragment.from(t))},S=function(e){return function(t){var n=t.doc.nodeAt(e);return w(t.delete(e,e+n.nodeSize))}},C=function(e){if(e.cached.tableNodeTypes)return e.cached.tableNodeTypes;var t={};return Object.keys(e.nodes).forEach((function(n){var r=e.nodes[n];r.spec.tableRole&&(t[r.spec.tableRole]=r)})),e.cached.tableNodeTypes=t,t},_=function(e,t){var n=e.index();return t instanceof o.Fragment?e.parent.canReplace(n,n,t):t instanceof o.Node&&e.parent.canReplaceWith(n,n,t.type)},O=function(e){return!e||"paragraph"===e.type.name&&2===e.nodeSize},M=function(e){var t=function(e){return e.type.spec.tableRole&&/table/i.test(e.type.spec.tableRole)};return F(e,t)},E=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return t?e.createChecked(null,t):e.createAndFill()},T=function(e){return function(t){for(var n=i.TableMap.get(t.$anchorCell.node(-1)),r=t.$anchorCell.start(-1),o=n.cellsInRect(e),s=n.cellsInRect(n.rectBetween(t.$anchorCell.pos-r,t.$headCell.pos-r)),a=0,l=o.length;a<l;a++)if(-1===s.indexOf(o[a]))return!1;return!0}},A=function(e){return e[0].map((function(t,n){return e.map((function(e){return e[n]}))}))},N=function(e){for(var t=i.TableMap.get(e),n=[],r=0;r<t.height;r++){for(var o=[],s={},a=0;a<t.width;a++){var l=t.map[r*t.width+a],c=e.nodeAt(l),u=t.findCell(l);s[l]||u.top!==r?o.push(null):(s[l]=!0,o.push(c))}n.push(o)}return n},R=function(e,t){for(var n=[],r=i.TableMap.get(e),o=0;o<r.height;o++){for(var s=e.child(o),a=[],l=0;l<r.width;l++)if(t[o][l]){var c=r.map[o*r.width+l],u=t[o][l],d=e.nodeAt(c),h=d.type.createChecked(Object.assign({},u.attrs),u.content,u.marks);a.push(h)}n.push(s.type.createChecked(s.attrs,a,s.marks))}var p=e.type.createChecked(e.attrs,n,e.marks);return p},D=function(e,t,n,r){var o=A(N(e.node));return o=z(o,t,n,r),o=A(o),R(e.node,o)},I=function(e,t,n,r){var o=N(e.node);return o=z(o,t,n,r),R(e.node,o)},z=function(e,t,n,r){var o=t[0]>n[0]?-1:1,i=e.splice(t[0],t.length),s=i.length%2===0?1:0,a=void 0;return a=-1===r&&1===o?n[0]-1:1===r&&-1===o?n[n.length-1]-s+1:-1===o?n[0]:n[n.length-1]-s,e.splice.apply(e,[a,0].concat(i)),e},P=function(e,t,n,r){var o=e>t?-1:1,i="Target position is invalid, you can't move the "+r+" "+e+" to "+t+", the target can't be split. You could use tryToFit option.";if(1===o){if(-1!==n.slice(0,n.length-1).indexOf(t))throw new Error(i)}else if(-1!==n.slice(1).indexOf(t))throw new Error(i);return!0},$=function(e){return function(t){var n=t.$from;return F(n,e)}},F=function(e,t){for(var n=e.depth;n>0;n--){var r=e.node(n);if(t(r))return{pos:n>0?e.before(n):0,start:e.start(n),depth:n,node:r}}},B=function(e,t){return function(n){var r=$(e)(n);if(r)return U(r.pos,t)}},j=function(e){return function(t){return!!$(e)(t)}},L=function(e){return function(t){return $((function(t){return b(e,t)}))(t)}},V=function(e,t){return F(e,(function(e){return b(t,e)}))},q=function(e){return function(t){return j((function(t){return b(e,t)}))(t)}},H=function(e,t){return function(n){return B((function(t){return b(e,t)}),t)(n)}},W=function(e){return function(t){if(y(t)){var n=t.node,r=t.$from;if(b(e,n))return{node:n,pos:r.pos,depth:r.depth}}}},J=function(e){var t=e.$from.nodeBefore,n=r.Selection.findFrom(e.$from,-1);if(n&&t){var o=L(t.type)(n);return o?o.pos:n.$from.pos}},U=function(e,t){var n=t(e),r=n.node.childNodes[n.offset];return n.node.nodeType===Node.TEXT_NODE?n.node.parentNode:r&&r.nodeType!==Node.TEXT_NODE?r:n.node},K=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!e)throw new Error('Invalid "node" parameter');var n=[];return e.descendants((function(e,r){if(n.push({node:e,pos:r}),!t)return!1})),n},G=function(e,t,n){if(!e)throw new Error('Invalid "node" parameter');if(!t)throw new Error('Invalid "predicate" parameter');return K(e,n).filter((function(e){return t(e.node)}))},X=function(e,t){return G(e,(function(e){return e.isText}),t)},Z=function(e,t){return G(e,(function(e){return e.isInline}),t)},Y=function(e,t){return G(e,(function(e){return e.isBlock}),t)},Q=function(e,t,n){return G(e,(function(e){return!!t(e.attrs)}),n)},ee=function(e,t,n){return G(e,(function(e){return e.type===t}),n)},te=function(e,t,n){return G(e,(function(e){return t.isInSet(e.marks)}),n)},ne=function(e,t){return!!ee(e,t).length};function re(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var oe=function(e){return $((function(e){return e.type.spec.tableRole&&"table"===e.type.spec.tableRole}))(e)},ie=function(e){return e instanceof i.CellSelection},se=function(e){if(ie(e)){var t=e.$anchorCell.start(-1),n=i.TableMap.get(e.$anchorCell.node(-1));return n.rectBetween(e.$anchorCell.pos-t,e.$headCell.pos-t)}},ae=function(e){return function(t){if(ie(t)){var n=i.TableMap.get(t.$anchorCell.node(-1));return T({left:e,right:e+1,top:0,bottom:n.height})(t)}return!1}},le=function(e){return function(t){if(ie(t)){var n=i.TableMap.get(t.$anchorCell.node(-1));return T({left:0,right:n.width,top:e,bottom:e+1})(t)}return!1}},ce=function(e){if(ie(e)){var t=i.TableMap.get(e.$anchorCell.node(-1));return T({left:0,right:t.width,top:0,bottom:t.height})(e)}return!1},ue=function(e){return function(t){var n=oe(t);if(n){var r=i.TableMap.get(n.node),o=Array.isArray(e)?e:Array.from([e]);return o.reduce((function(e,t){if(t>=0&&t<=r.width-1){var o=r.cellsInRect({left:t,right:t+1,top:0,bottom:r.height});return e.concat(o.map((function(e){var t=n.node.nodeAt(e),r=e+n.start;return{pos:r,start:r+1,node:t}})))}}),[])}}},de=function(e){return function(t){var n=oe(t);if(n){var r=i.TableMap.get(n.node),o=Array.isArray(e)?e:Array.from([e]);return o.reduce((function(e,t){if(t>=0&&t<=r.height-1){var o=r.cellsInRect({left:0,right:r.width,top:t,bottom:t+1});return e.concat(o.map((function(e){var t=n.node.nodeAt(e),r=e+n.start;return{pos:r,start:r+1,node:t}})))}}),[])}}},he=function(e){var t=oe(e);if(t){var n=i.TableMap.get(t.node),r=n.cellsInRect({left:0,right:n.width,top:0,bottom:n.height});return r.map((function(e){var n=t.node.nodeAt(e),r=e+t.start;return{pos:r,start:r+1,node:n}}))}},pe=function(e){return function(t,n){return function(r){var o=oe(r.selection),s="row"===e;if(o){var a=i.TableMap.get(o.node);if(t>=0&&t<(s?a.height:a.width)){var l=s?0:t,c=s?t:0,u=s?a.width:t+1,d=s?t+1:a.height;if(n){var h=Ie(r.selection.$from);if(!h)return r;var p=a.findCell(h.pos-o.start);s?(c=Math.min(c,p.top),d=Math.max(d,p.bottom)):(l=Math.min(l,p.left),u=Math.max(u,p.right))}var f=a.cellsInRect({left:l,top:c,right:s?u:l+1,bottom:s?c+1:d}),m=d-c===1?f:a.cellsInRect({left:s?l:u-1,top:s?d-1:c,right:u,bottom:d}),g=o.start+f[0],v=o.start+m[m.length-1],y=r.doc.resolve(g),b=r.doc.resolve(v);return w(r.setSelection(new i.CellSelection(b,y)))}}return r}}},fe=pe("column"),me=pe("row"),ge=function(e){var t=oe(e.selection);if(t){var n=i.TableMap.get(t.node),r=n.map;if(r&&r.length){var o=t.start+r[0],s=t.start+r[r.length-1],a=e.doc.resolve(o),l=e.doc.resolve(s);return w(e.setSelection(new i.CellSelection(l,a)))}}return e},ve=function(e,t){return function(n){if(e){var r=C(t).cell.createAndFill(),o=r.content;if(!e.node.content.eq(o))return n.replaceWith(e.pos+1,e.pos+e.node.nodeSize,o),w(n)}return n}},ye=function(e){return function(t){var n=oe(t.selection);if(n){var r=i.TableMap.get(n.node);if(e>=0&&e<=r.width)return w(i.addColumn(t,{map:r,tableStart:n.start,table:n.node},e))}return t}},be=function(e,t,n){return function(r){var o={tryToFit:!1,direction:0},i=Object.assign(o,n),s=oe(r.selection);if(!s)return r;var a=Fe(e)(r),l=a.indexes,c=Fe(t)(r),u=c.indexes;if(l.indexOf(t)>-1)return r;!i.tryToFit&&u.length>1&&P(e,t,u,"row");var d=I(s,l,u,i.direction);return w(r).replaceWith(s.pos,s.pos+s.node.nodeSize,d)}},we=function(e,t,n){return function(r){var o={tryToFit:!1,direction:0},i=Object.assign(o,n),s=oe(r.selection);if(!s)return r;var a=$e(e)(r),l=a.indexes,c=$e(t)(r),u=c.indexes;if(l.indexOf(t)>-1)return r;!i.tryToFit&&u.length>1&&P(e,t,u,"column");var d=D(s,l,u,i.direction);return w(r).replaceWith(s.pos,s.pos+s.node.nodeSize,d)}},ke=function(e,t){return function(n){var r=oe(n.selection);if(r){var o=i.TableMap.get(r.node),s=e-1;if(t&&s>=0)return w(xe(s)(n));if(e>=0&&e<=o.height)return w(i.addRow(n,{map:o,tableStart:r.start,table:r.node},e))}return n}},xe=function(e){return function(t){var n=oe(t.selection);if(n){var r=i.TableMap.get(n.node);if(e>=0&&e<=r.height){for(var o=n.node,s=C(o.type.schema),a=n.start,l=0;l<e+1;l++)a+=o.child(l).nodeSize;var c=o.child(e),u=[],d=0;if(c.forEach((function(e){1===e.attrs.rowspan&&(d+=e.attrs.colspan,u.push(s[e.type.spec.tableRole].createAndFill(e.attrs,e.marks)))})),d<r.width){for(var h=[],p=function(n){var r=Pe(n,(function(t,r){var o=t.node.attrs.rowspan,i=n+o;return o>1&&i>e}))(t);h.push.apply(h,re(r))},m=e;m>=0;m--)p(m);h.length&&h.forEach((function(e){t=Re(e,{rowspan:e.node.attrs.rowspan+1})(t)}))}return f(s.row.create(c.attrs,u),a)(t)}}return t}},Se=function(e){return function(t){var n=oe(t.selection);if(n){var r=i.TableMap.get(n.node);if(0===e&&1===r.width)return _e(t);if(e>=0&&e<=r.width)return i.removeColumn(t,{map:r,tableStart:n.start,table:n.node},e),w(t)}return t}},Ce=function(e){return function(t){var n=oe(t.selection);if(n){var r=i.TableMap.get(n.node);if(0===e&&1===r.height)return _e(t);if(e>=0&&e<=r.height)return i.removeRow(t,{map:r,tableStart:n.start,table:n.node},e),w(t)}return t}},_e=function(e){for(var t=e.selection.$from,n=t.depth;n>0;n--){var r=t.node(n);if("table"===r.type.spec.tableRole)return w(e.delete(t.before(n),t.after(n)))}return e},Oe=function(e){var t=e.selection;if(ce(t))return _e(e);if(ie(t)){var n=oe(t);if(n){var r=i.TableMap.get(n.node),o=r.rectBetween(t.$anchorCell.pos-n.start,t.$headCell.pos-n.start);if(0==o.left&&o.right==r.width)return!1;for(var s=Object.assign({},o,{map:r,table:n.node,tableStart:n.start}),a=s.right-1;;a--){if(i.removeColumn(e,s,a),a===s.left)break;s.table=s.tableStart?e.doc.nodeAt(s.tableStart-1):e.doc,s.map=i.TableMap.get(s.table)}return w(e)}}return e},Me=function(e){var t=e.selection;if(ce(t))return _e(e);if(ie(t)){var n=oe(t);if(n){var r=i.TableMap.get(n.node),o=r.rectBetween(t.$anchorCell.pos-n.start,t.$headCell.pos-n.start);if(0==o.top&&o.bottom==r.height)return!1;for(var s=Object.assign({},o,{map:r,table:n.node,tableStart:n.start}),a=s.bottom-1;;a--){if(i.removeRow(e,s,a),a===s.top)break;s.table=s.tableStart?e.doc.nodeAt(s.tableStart-1):e.doc,s.map=i.TableMap.get(s.table)}return w(e)}}return e},Ee=function(e){return function(t){var n=ze(e);return n?Se(n.left)(u(e.pos)(t)):t}},Te=function(e){return function(t){var n=ze(e);return n?Ce(n.top)(u(e.pos)(t)):t}},Ae=function(e,t,n){return function(o){var i=ue(e)(o.selection);if(i){for(var s=i.length-1;s>=0;s--)o=t(i[s],o);if(n){var a=o.doc.resolve(o.mapping.map(i[i.length-1].pos));o.setSelection(r.Selection.near(a))}return w(o)}return o}},Ne=function(e,t,n){return function(o){var i=de(e)(o.selection);if(i){for(var s=i.length-1;s>=0;s--)o=t(i[s],o);if(n){var a=o.doc.resolve(o.mapping.map(i[i.length-1].pos));o.setSelection(r.Selection.near(a))}}return o}},Re=function(e,t){return function(n){return e?(n.setNodeMarkup(e.pos,null,Object.assign({},e.node.attrs,t)),w(n)):n}},De=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=C(e),s=i.cell,a=i.header_cell,l=i.row,c=i.table,u=[],d=[],h=0;h<n;h++)u.push(E(s,o)),r&&d.push(E(a,o));for(var p=[],f=0;f<t;f++)p.push(l.createChecked(null,r&&0===f?d:u));return c.createChecked(null,p)},Ie=function(e){var t=function(e){return e.type.spec.tableRole&&/cell/i.test(e.type.spec.tableRole)};return F(e,t)},ze=function(e){var t=Ie(e);if(t){var n=M(e),r=i.TableMap.get(n.node),o=t.pos-n.start;return r.rectBetween(o,o)}},Pe=function(e,t){return function(n){var r=[],o=de(e)(n.selection);if(o)for(var i=o.length-1;i>=0;i--)t(o[i],n)&&r.push(o[i]);return r}},$e=function(e){return function(t){for(var n=e,r=e,o=function(e){var o=ue(e)(t.selection);o&&o.forEach((function(t){var o=t.node.attrs.colspan+e-1;o>=n&&(n=e),o>r&&(r=o)}))},i=e;i>=0;i--)o(i);var s=function(e){var n=ue(e)(t.selection);n&&n.forEach((function(t){var n=t.node.attrs.colspan+e-1;t.node.attrs.colspan>1&&n>r&&(r=n)}))};for(i=e;i<=r;i++)s(i);var a=[];for(i=n;i<=r;i++){var l=ue(i)(t.selection);l&&l.length&&a.push(i)}n=a[0],r=a[a.length-1];for(var c=ue(n)(t.selection),u=de(0)(t.selection),d=t.doc.resolve(c[c.length-1].pos),h=void 0,p=r;p>=n;p--){var f=ue(p)(t.selection);if(f&&f.length){for(var m=u.length-1;m>=0;m--)if(u[m].pos===f[0].pos){h=f[0];break}if(h)break}}var g=t.doc.resolve(h.pos);return{$anchor:d,$head:g,indexes:a}}},Fe=function(e){return function(t){for(var n=e,r=e,o=function(e){var o=de(e)(t.selection);o.forEach((function(t){var o=t.node.attrs.rowspan+e-1;o>=n&&(n=e),o>r&&(r=o)}))},i=e;i>=0;i--)o(i);var s=function(e){var n=de(e)(t.selection);n.forEach((function(t){var n=t.node.attrs.rowspan+e-1;t.node.attrs.rowspan>1&&n>r&&(r=n)}))};for(i=e;i<=r;i++)s(i);var a=[];for(i=n;i<=r;i++){var l=de(i)(t.selection);l&&l.length&&a.push(i)}n=a[0],r=a[a.length-1];for(var c=de(n)(t.selection),u=ue(0)(t.selection),d=t.doc.resolve(c[c.length-1].pos),h=void 0,p=r;p>=n;p--){var f=de(p)(t.selection);if(f&&f.length){for(var m=u.length-1;m>=0;m--)if(u[m].pos===f[0].pos){h=f[0];break}if(h)break}}var g=t.doc.resolve(h.pos);return{$anchor:d,$head:g,indexes:a}}};t.Tr=L},9343:function(e,t,n){"use strict";n.d(t,{AW:function(){return a},Jq:function(){return o},RB:function(){return s},bG:function(){return l},iS:function(){return i}});var r=n(3274);function o(){return"http://127.0.0.1:8001/common/upload/avatar"}function i(){return"http://127.0.0.1:8001/common/upload/wiki-cover"}function s(e){return(0,r.ZP)({url:"/common/upload/wiki-content",method:r.n$.POST,needToken:!0,data:e,headers:{"Content-Type":"multipart/form-data"}})}function a(){return"http://127.0.0.1:8001/common/upload/adopt-cover"}function l(e){return(0,r.ZP)({url:"/common/upload/adopt-content",method:r.n$.POST,needToken:!0,data:e,headers:{"Content-Type":"multipart/form-data"}})}},6586:function(e){"use strict";function t(e){this.content=e}t.prototype={constructor:t,find:function(e){for(var t=0;t<this.content.length;t+=2)if(this.content[t]===e)return t;return-1},get:function(e){var t=this.find(e);return-1==t?void 0:this.content[t+1]},update:function(e,n,r){var o=r&&r!=e?this.remove(r):this,i=o.find(e),s=o.content.slice();return-1==i?s.push(r||e,n):(s[i+1]=n,r&&(s[i]=r)),new t(s)},remove:function(e){var n=this.find(e);if(-1==n)return this;var r=this.content.slice();return r.splice(n,2),new t(r)},addToStart:function(e,n){return new t([e,n].concat(this.remove(e).content))},addToEnd:function(e,n){var r=this.remove(e).content.slice();return r.push(e,n),new t(r)},addBefore:function(e,n,r){var o=this.remove(n),i=o.content.slice(),s=o.find(e);return i.splice(-1==s?i.length:s,0,n,r),new t(i)},forEach:function(e){for(var t=0;t<this.content.length;t+=2)e(this.content[t],this.content[t+1])},prepend:function(e){return e=t.from(e),e.size?new t(e.content.concat(this.subtract(e).content)):this},append:function(e){return e=t.from(e),e.size?new t(this.subtract(e).content.concat(e.content)):this},subtract:function(e){var n=this;e=t.from(e);for(var r=0;r<e.content.length;r+=2)n=n.remove(e.content[r]);return n},toObject:function(){var e={};return this.forEach((function(t,n){e[t]=n})),e},get size(){return this.content.length>>1}},t.from=function(e){if(e instanceof t)return e;var n=[];if(e)for(var r in e)n.push(r,e[r]);return new t(n)},e.exports=t},7354:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(6691),o=n(2391),i="undefined"!=typeof navigator&&/Mac|iP(hone|[oa]d)/.test(navigator.platform);function s(e){var t,n,r,o,s=e.split(/-(?!$)/),a=s[s.length-1];"Space"==a&&(a=" ");for(var l=0;l<s.length-1;l++){var c=s[l];if(/^(cmd|meta|m)$/i.test(c))o=!0;else if(/^a(lt)?$/i.test(c))t=!0;else if(/^(c|ctrl|control)$/i.test(c))n=!0;else if(/^s(hift)?$/i.test(c))r=!0;else{if(!/^mod$/i.test(c))throw new Error("Unrecognized modifier name: "+c);i?o=!0:n=!0}}return t&&(a="Alt-"+a),n&&(a="Ctrl-"+a),o&&(a="Meta-"+a),r&&(a="Shift-"+a),a}function a(e){var t=Object.create(null);for(var n in e)t[s(n)]=e[n];return t}function l(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),n&&t.shiftKey&&(e="Shift-"+e),e}function c(e){return new o.Plugin({props:{handleKeyDown:u(e)}})}function u(e){var t=a(e);return function(e,n){var o,i=r.keyName(n),s=t[l(i,n)];if(s&&s(e.state,e.dispatch,e))return!0;if(1==i.length&&" "!=i){if(n.shiftKey){var a=t[l(i,n,!1)];if(a&&a(e.state,e.dispatch,e))return!0}if((n.shiftKey||n.altKey||n.metaKey||i.charCodeAt(0)>127)&&(o=r.base[n.keyCode])&&o!=i){var c=t[l(o,n)];if(c&&c(e.state,e.dispatch,e))return!0}}return!1}}t.keydownHandler=u,t.keymap=c},9443:function(e,t,n){"use strict";function r(e,t){return l(e)||a(e,t)||i(e,t)||o()}function o(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function i(e,t){if(e){if("string"===typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],s=!0,a=!1;try{for(n=n.call(e);!(s=(r=n.next()).done);s=!0)if(i.push(r.value),t&&i.length===t)break}catch(l){a=!0,o=l}finally{try{s||null==n["return"]||n["return"]()}finally{if(a)throw o}}return i}}function l(e){if(Array.isArray(e))return e}function c(){return c="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=u(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},c.apply(this,arguments)}function u(e,t){while(!Object.prototype.hasOwnProperty.call(e,t))if(e=w(e),null===e)break;return e}function d(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&b(e,t)}function h(e){var t=v();return function(){var n,r=w(e);if(t){var o=w(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return p(this,n)}}function p(e,t){if(t&&("object"===C(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return f(e)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e){var t="function"===typeof Map?new Map:void 0;return m=function(e){if(null===e||!y(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return g(e,arguments,w(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),b(n,e)},m(e)}function g(e,t,n){return g=v()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=Function.bind.apply(e,r),i=new o;return n&&b(i,n.prototype),i},g.apply(null,arguments)}function v(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function y(e){return-1!==Function.toString.call(e).indexOf("[native code]")}function b(e,t){return b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},b(e,t)}function w(e){return w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},w(e)}function k(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function x(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function S(e,t,n){return t&&x(e.prototype,t),n&&x(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function C(e){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C(e)}Object.defineProperty(t,"__esModule",{value:!0});var _=n(6586);function O(e){return e&&"object"===C(e)&&"default"in e?e:{default:e}}var M=O(_);function E(e,t,n){for(var r=0;;r++){if(r==e.childCount||r==t.childCount)return e.childCount==t.childCount?null:n;var o=e.child(r),i=t.child(r);if(o!=i){if(!o.sameMarkup(i))return n;if(o.isText&&o.text!=i.text){for(var s=0;o.text[s]==i.text[s];s++)n++;return n}if(o.content.size||i.content.size){var a=E(o.content,i.content,n+1);if(null!=a)return a}n+=o.nodeSize}else n+=o.nodeSize}}function T(e,t,n,r){for(var o=e.childCount,i=t.childCount;;){if(0==o||0==i)return o==i?null:{a:n,b:r};var s=e.child(--o),a=t.child(--i),l=s.nodeSize;if(s!=a){if(!s.sameMarkup(a))return{a:n,b:r};if(s.isText&&s.text!=a.text){var c=0,u=Math.min(s.text.length,a.text.length);while(c<u&&s.text[s.text.length-c-1]==a.text[a.text.length-c-1])c++,n--,r--;return{a:n,b:r}}if(s.content.size||a.content.size){var d=T(s.content,a.content,n-1,r-1);if(d)return d}n-=l,r-=l}else n-=l,r-=l}}var A=function(){function e(t,n){if(k(this,e),this.content=t,this.size=n||0,null==n)for(var r=0;r<t.length;r++)this.size+=t[r].nodeSize}return S(e,[{key:"nodesBetween",value:function(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4?arguments[4]:void 0,i=0,s=0;s<t;i++){var a=this.content[i],l=s+a.nodeSize;if(l>e&&!1!==n(a,r+s,o||null,i)&&a.content.size){var c=s+1;a.nodesBetween(Math.max(0,e-c),Math.min(a.content.size,t-c),n,r+c)}s=l}}},{key:"descendants",value:function(e){this.nodesBetween(0,this.size,e)}},{key:"textBetween",value:function(e,t,n,r){var o="",i=!0;return this.nodesBetween(e,t,(function(s,a){s.isText?(o+=s.text.slice(Math.max(e,a)-a,t-a),i=!n):s.isLeaf?(r?o+="function"===typeof r?r(s):r:s.type.spec.leafText&&(o+=s.type.spec.leafText(s)),i=!n):!i&&s.isBlock&&(o+=n,i=!0)}),0),o}},{key:"append",value:function(t){if(!t.size)return this;if(!this.size)return t;var n=this.lastChild,r=t.firstChild,o=this.content.slice(),i=0;for(n.isText&&n.sameMarkup(r)&&(o[o.length-1]=n.withText(n.text+r.text),i=1);i<t.content.length;i++)o.push(t.content[i]);return new e(o,this.size+t.size)}},{key:"cut",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.size;if(0==t&&n==this.size)return this;var r=[],o=0;if(n>t)for(var i=0,s=0;s<n;i++){var a=this.content[i],l=s+a.nodeSize;l>t&&((s<t||l>n)&&(a=a.isText?a.cut(Math.max(0,t-s),Math.min(a.text.length,n-s)):a.cut(Math.max(0,t-s-1),Math.min(a.content.size,n-s-1))),r.push(a),o+=a.nodeSize),s=l}return new e(r,o)}},{key:"cutByIndex",value:function(t,n){return t==n?e.empty:0==t&&n==this.content.length?this:new e(this.content.slice(t,n))}},{key:"replaceChild",value:function(t,n){var r=this.content[t];if(r==n)return this;var o=this.content.slice(),i=this.size+n.nodeSize-r.nodeSize;return o[t]=n,new e(o,i)}},{key:"addToStart",value:function(t){return new e([t].concat(this.content),this.size+t.nodeSize)}},{key:"addToEnd",value:function(t){return new e(this.content.concat(t),this.size+t.nodeSize)}},{key:"eq",value:function(e){if(this.content.length!=e.content.length)return!1;for(var t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}},{key:"firstChild",get:function(){return this.content.length?this.content[0]:null}},{key:"lastChild",get:function(){return this.content.length?this.content[this.content.length-1]:null}},{key:"childCount",get:function(){return this.content.length}},{key:"child",value:function(e){var t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}},{key:"maybeChild",value:function(e){return this.content[e]||null}},{key:"forEach",value:function(e){for(var t=0,n=0;t<this.content.length;t++){var r=this.content[t];e(r,n,t),n+=r.nodeSize}}},{key:"findDiffStart",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return E(this,e,t)}},{key:"findDiffEnd",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.size,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.size;return T(this,e,t,n)}},{key:"findIndex",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;if(0==e)return R(0,e);if(e==this.size)return R(this.content.length,e);if(e>this.size||e<0)throw new RangeError("Position ".concat(e," outside of fragment (").concat(this,")"));for(var n=0,r=0;;n++){var o=this.child(n),i=r+o.nodeSize;if(i>=e)return i==e||t>0?R(n+1,i):R(n,r);r=i}}},{key:"toString",value:function(){return"<"+this.toStringInner()+">"}},{key:"toStringInner",value:function(){return this.content.join(", ")}},{key:"toJSON",value:function(){return this.content.length?this.content.map((function(e){return e.toJSON()})):null}}],[{key:"fromJSON",value:function(t,n){if(!n)return e.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new e(n.map(t.nodeFromJSON))}},{key:"fromArray",value:function(t){if(!t.length)return e.empty;for(var n,r=0,o=0;o<t.length;o++){var i=t[o];r+=i.nodeSize,o&&i.isText&&t[o-1].sameMarkup(i)?(n||(n=t.slice(0,o)),n[n.length-1]=i.withText(n[n.length-1].text+i.text)):n&&n.push(i)}return new e(n||t,r)}},{key:"from",value:function(t){if(!t)return e.empty;if(t instanceof e)return t;if(Array.isArray(t))return this.fromArray(t);if(t.attrs)return new e([t],t.nodeSize);throw new RangeError("Can not convert "+t+" to a Fragment"+(t.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}]),e}();A.empty=new A([],0);var N={index:0,offset:0};function R(e,t){return N.index=e,N.offset=t,N}function D(e,t){if(e===t)return!0;if(!e||"object"!=C(e)||!t||"object"!=C(t))return!1;var n=Array.isArray(e);if(Array.isArray(t)!=n)return!1;if(n){if(e.length!=t.length)return!1;for(var r=0;r<e.length;r++)if(!D(e[r],t[r]))return!1}else{for(var o in e)if(!(o in t)||!D(e[o],t[o]))return!1;for(var i in t)if(!(i in e))return!1}return!0}var I=function(){function e(t,n){k(this,e),this.type=t,this.attrs=n}return S(e,[{key:"addToSet",value:function(e){for(var t,n=!1,r=0;r<e.length;r++){var o=e[r];if(this.eq(o))return e;if(this.type.excludes(o.type))t||(t=e.slice(0,r));else{if(o.type.excludes(this.type))return e;!n&&o.type.rank>this.type.rank&&(t||(t=e.slice(0,r)),t.push(this),n=!0),t&&t.push(o)}}return t||(t=e.slice()),n||t.push(this),t}},{key:"removeFromSet",value:function(e){for(var t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}},{key:"isInSet",value:function(e){for(var t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}},{key:"eq",value:function(e){return this==e||this.type==e.type&&D(this.attrs,e.attrs)}},{key:"toJSON",value:function(){var e={type:this.type.name};for(var t in this.attrs){e.attrs=this.attrs;break}return e}}],[{key:"fromJSON",value:function(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");var n=e.marks[t.type];if(!n)throw new RangeError("There is no mark type ".concat(t.type," in this schema"));return n.create(t.attrs)}},{key:"sameSet",value:function(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(!e[n].eq(t[n]))return!1;return!0}},{key:"setFrom",value:function(t){if(!t||Array.isArray(t)&&0==t.length)return e.none;if(t instanceof e)return[t];var n=t.slice();return n.sort((function(e,t){return e.type.rank-t.type.rank})),n}}]),e}();I.none=[];var z=function(e){d(n,e);var t=h(n);function n(){return k(this,n),t.apply(this,arguments)}return S(n)}(m(Error)),P=function(){function e(t,n,r){k(this,e),this.content=t,this.openStart=n,this.openEnd=r}return S(e,[{key:"size",get:function(){return this.content.size-this.openStart-this.openEnd}},{key:"insertAt",value:function(t,n){var r=F(this.content,t+this.openStart,n);return r&&new e(r,this.openStart,this.openEnd)}},{key:"removeBetween",value:function(t,n){return new e($(this.content,t+this.openStart,n+this.openStart),this.openStart,this.openEnd)}},{key:"eq",value:function(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}},{key:"toString",value:function(){return this.content+"("+this.openStart+","+this.openEnd+")"}},{key:"toJSON",value:function(){if(!this.content.size)return null;var e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}}],[{key:"fromJSON",value:function(t,n){if(!n)return e.empty;var r=n.openStart||0,o=n.openEnd||0;if("number"!=typeof r||"number"!=typeof o)throw new RangeError("Invalid input for Slice.fromJSON");return new e(A.fromJSON(t,n.content),r,o)}},{key:"maxOpen",value:function(t){for(var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=0,o=0,i=t.firstChild;i&&!i.isLeaf&&(n||!i.type.spec.isolating);i=i.firstChild)r++;for(var s=t.lastChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.lastChild)o++;return new e(t,r,o)}}]),e}();function $(e,t,n){var r=e.findIndex(t),o=r.index,i=r.offset,s=e.maybeChild(o),a=e.findIndex(n),l=a.index,c=a.offset;if(i==t||s.isText){if(c!=n&&!e.child(l).isText)throw new RangeError("Removing non-flat range");return e.cut(0,t).append(e.cut(n))}if(o!=l)throw new RangeError("Removing non-flat range");return e.replaceChild(o,s.copy($(s.content,t-i-1,n-i-1)))}function F(e,t,n,r){var o=e.findIndex(t),i=o.index,s=o.offset,a=e.maybeChild(i);if(s==t||a.isText)return r&&!r.canReplace(i,i,n)?null:e.cut(0,t).append(n).append(e.cut(t));var l=F(a.content,t-s-1,n);return l&&e.replaceChild(i,a.copy(l))}function B(e,t,n){if(n.openStart>e.depth)throw new z("Inserted content deeper than insertion position");if(e.depth-n.openStart!=t.depth-n.openEnd)throw new z("Inconsistent open depths");return j(e,t,n,0)}function j(e,t,n,r){var o=e.index(r),i=e.node(r);if(o==t.index(r)&&r<e.depth-n.openStart){var s=j(e,t,n,r+1);return i.copy(i.content.replaceChild(o,s))}if(n.content.size){if(n.openStart||n.openEnd||e.depth!=r||t.depth!=r){var a=K(n,e),l=a.start,c=a.end;return W(i,J(e,l,c,t,r))}var u=e.parent,d=u.content;return W(u,d.cut(0,e.parentOffset).append(n.content).append(d.cut(t.parentOffset)))}return W(i,U(e,t,r))}function L(e,t){if(!t.type.compatibleContent(e.type))throw new z("Cannot join "+t.type.name+" onto "+e.type.name)}function V(e,t,n){var r=e.node(n);return L(r,t.node(n)),r}function q(e,t){var n=t.length-1;n>=0&&e.isText&&e.sameMarkup(t[n])?t[n]=e.withText(t[n].text+e.text):t.push(e)}function H(e,t,n,r){var o=(t||e).node(n),i=0,s=t?t.index(n):o.childCount;e&&(i=e.index(n),e.depth>n?i++:e.textOffset&&(q(e.nodeAfter,r),i++));for(var a=i;a<s;a++)q(o.child(a),r);t&&t.depth==n&&t.textOffset&&q(t.nodeBefore,r)}function W(e,t){return e.type.checkContent(t),e.copy(t)}function J(e,t,n,r,o){var i=e.depth>o&&V(e,t,o+1),s=r.depth>o&&V(n,r,o+1),a=[];return H(null,e,o,a),i&&s&&t.index(o)==n.index(o)?(L(i,s),q(W(i,J(e,t,n,r,o+1)),a)):(i&&q(W(i,U(e,t,o+1)),a),H(t,n,o,a),s&&q(W(s,U(n,r,o+1)),a)),H(r,null,o,a),new A(a)}function U(e,t,n){var r=[];if(H(null,e,n,r),e.depth>n){var o=V(e,t,n+1);q(W(o,U(e,t,n+1)),r)}return H(t,null,n,r),new A(r)}function K(e,t){for(var n=t.depth-e.openStart,r=t.node(n),o=r.copy(e.content),i=n-1;i>=0;i--)o=t.node(i).copy(A.from(o));return{start:o.resolveNoCache(e.openStart+n),end:o.resolveNoCache(o.content.size-e.openEnd-n)}}P.empty=new P(A.empty,0,0);var G=function(){function e(t,n,r){k(this,e),this.pos=t,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}return S(e,[{key:"resolveDepth",value:function(e){return null==e?this.depth:e<0?this.depth+e:e}},{key:"parent",get:function(){return this.node(this.depth)}},{key:"doc",get:function(){return this.node(0)}},{key:"node",value:function(e){return this.path[3*this.resolveDepth(e)]}},{key:"index",value:function(e){return this.path[3*this.resolveDepth(e)+1]}},{key:"indexAfter",value:function(e){return e=this.resolveDepth(e),this.index(e)+(e!=this.depth||this.textOffset?1:0)}},{key:"start",value:function(e){return e=this.resolveDepth(e),0==e?0:this.path[3*e-1]+1}},{key:"end",value:function(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}},{key:"before",value:function(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[3*e-1]}},{key:"after",value:function(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[3*e-1]+this.path[3*e].nodeSize}},{key:"textOffset",get:function(){return this.pos-this.path[this.path.length-1]}},{key:"nodeAfter",get:function(){var e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;var n=this.pos-this.path[this.path.length-1],r=e.child(t);return n?e.child(t).cut(n):r}},{key:"nodeBefore",get:function(){var e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):0==e?null:this.parent.child(e-1)}},{key:"posAtIndex",value:function(e,t){t=this.resolveDepth(t);for(var n=this.path[3*t],r=0==t?0:this.path[3*t-1]+1,o=0;o<e;o++)r+=n.child(o).nodeSize;return r}},{key:"marks",value:function(){var e=this.parent,t=this.index();if(0==e.content.size)return I.none;if(this.textOffset)return e.child(t).marks;var n=e.maybeChild(t-1),r=e.maybeChild(t);if(!n){var o=n;n=r,r=o}for(var i=n.marks,s=0;s<i.length;s++)!1!==i[s].type.spec.inclusive||r&&i[s].isInSet(r.marks)||(i=i[s--].removeFromSet(i));return i}},{key:"marksAcross",value:function(e){var t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;for(var n=t.marks,r=e.parent.maybeChild(e.index()),o=0;o<n.length;o++)!1!==n[o].type.spec.inclusive||r&&n[o].isInSet(r.marks)||(n=n[o--].removeFromSet(n));return n}},{key:"sharedDepth",value:function(e){for(var t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0}},{key:"blockRange",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this,t=arguments.length>1?arguments[1]:void 0;if(e.pos<this.pos)return e.blockRange(this);for(var n=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);n>=0;n--)if(e.pos<=this.end(n)&&(!t||t(this.node(n))))return new Q(this,e,n);return null}},{key:"sameParent",value:function(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}},{key:"max",value:function(e){return e.pos>this.pos?e:this}},{key:"min",value:function(e){return e.pos<this.pos?e:this}},{key:"toString",value:function(){for(var e="",t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset}}],[{key:"resolve",value:function(t,n){if(!(n>=0&&n<=t.content.size))throw new RangeError("Position "+n+" out of range");for(var r=[],o=0,i=n,s=t;;){var a=s.content.findIndex(i),l=a.index,c=a.offset,u=i-c;if(r.push(s,l,o+c),!u)break;if(s=s.child(l),s.isText)break;i=u-1,o+=c+1}return new e(n,r,i)}},{key:"resolveCached",value:function(t,n){for(var r=0;r<X.length;r++){var o=X[r];if(o.pos==n&&o.doc==t)return o}var i=X[Z]=e.resolve(t,n);return Z=(Z+1)%Y,i}}]),e}(),X=[],Z=0,Y=12,Q=function(){function e(t,n,r){k(this,e),this.$from=t,this.$to=n,this.depth=r}return S(e,[{key:"start",get:function(){return this.$from.before(this.depth+1)}},{key:"end",get:function(){return this.$to.after(this.depth+1)}},{key:"parent",get:function(){return this.$from.node(this.depth)}},{key:"startIndex",get:function(){return this.$from.index(this.depth)}},{key:"endIndex",get:function(){return this.$to.indexAfter(this.depth)}}]),e}(),ee=Object.create(null),te=function(){function e(t,n,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:I.none;k(this,e),this.type=t,this.attrs=n,this.marks=o,this.content=r||A.empty}return S(e,[{key:"nodeSize",get:function(){return this.isLeaf?1:2+this.content.size}},{key:"childCount",get:function(){return this.content.childCount}},{key:"child",value:function(e){return this.content.child(e)}},{key:"maybeChild",value:function(e){return this.content.maybeChild(e)}},{key:"forEach",value:function(e){this.content.forEach(e)}},{key:"nodesBetween",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.content.nodesBetween(e,t,n,r,this)}},{key:"descendants",value:function(e){this.nodesBetween(0,this.content.size,e)}},{key:"textContent",get:function(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}},{key:"textBetween",value:function(e,t,n,r){return this.content.textBetween(e,t,n,r)}},{key:"firstChild",get:function(){return this.content.firstChild}},{key:"lastChild",get:function(){return this.content.lastChild}},{key:"eq",value:function(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}},{key:"sameMarkup",value:function(e){return this.hasMarkup(e.type,e.attrs,e.marks)}},{key:"hasMarkup",value:function(e,t,n){return this.type==e&&D(this.attrs,t||e.defaultAttrs||ee)&&I.sameSet(this.marks,n||I.none)}},{key:"copy",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return t==this.content?this:new e(this.type,this.attrs,t,this.marks)}},{key:"mark",value:function(t){return t==this.marks?this:new e(this.type,this.attrs,this.content,t)}},{key:"cut",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.content.size;return 0==e&&t==this.content.size?this:this.copy(this.content.cut(e,t))}},{key:"slice",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.content.size,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e==t)return P.empty;var r=this.resolve(e),o=this.resolve(t),i=n?0:r.sharedDepth(t),s=r.start(i),a=r.node(i),l=a.content.cut(r.pos-s,o.pos-s);return new P(l,r.depth-i,o.depth-i)}},{key:"replace",value:function(e,t,n){return B(this.resolve(e),this.resolve(t),n)}},{key:"nodeAt",value:function(e){for(var t=this;;){var n=t.content.findIndex(e),r=n.index,o=n.offset;if(t=t.maybeChild(r),!t)return null;if(o==e||t.isText)return t;e-=o+1}}},{key:"childAfter",value:function(e){var t=this.content.findIndex(e),n=t.index,r=t.offset;return{node:this.content.maybeChild(n),index:n,offset:r}}},{key:"childBefore",value:function(e){if(0==e)return{node:null,index:0,offset:0};var t=this.content.findIndex(e),n=t.index,r=t.offset;if(r<e)return{node:this.content.child(n),index:n,offset:r};var o=this.content.child(n-1);return{node:o,index:n-1,offset:r-o.nodeSize}}},{key:"resolve",value:function(e){return G.resolveCached(this,e)}},{key:"resolveNoCache",value:function(e){return G.resolve(this,e)}},{key:"rangeHasMark",value:function(e,t,n){var r=!1;return t>e&&this.nodesBetween(e,t,(function(e){return n.isInSet(e.marks)&&(r=!0),!r})),r}},{key:"isBlock",get:function(){return this.type.isBlock}},{key:"isTextblock",get:function(){return this.type.isTextblock}},{key:"inlineContent",get:function(){return this.type.inlineContent}},{key:"isInline",get:function(){return this.type.isInline}},{key:"isText",get:function(){return this.type.isText}},{key:"isLeaf",get:function(){return this.type.isLeaf}},{key:"isAtom",get:function(){return this.type.isAtom}},{key:"toString",value:function(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);var e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),re(this.marks,e)}},{key:"contentMatchAt",value:function(e){var t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t}},{key:"canReplace",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:A.empty,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:n.childCount,i=this.contentMatchAt(e).matchFragment(n,r,o),s=i&&i.matchFragment(this.content,t);if(!s||!s.validEnd)return!1;for(var a=r;a<o;a++)if(!this.type.allowsMarks(n.child(a).marks))return!1;return!0}},{key:"canReplaceWith",value:function(e,t,n,r){if(r&&!this.type.allowsMarks(r))return!1;var o=this.contentMatchAt(e).matchType(n),i=o&&o.matchFragment(this.content,t);return!!i&&i.validEnd}},{key:"canAppend",value:function(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}},{key:"check",value:function(){this.type.checkContent(this.content);for(var e=I.none,t=0;t<this.marks.length;t++)e=this.marks[t].addToSet(e);if(!I.sameSet(e,this.marks))throw new RangeError("Invalid collection of marks for node ".concat(this.type.name,": ").concat(this.marks.map((function(e){return e.type.name}))));this.content.forEach((function(e){return e.check()}))}},{key:"toJSON",value:function(){var e={type:this.type.name};for(var t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map((function(e){return e.toJSON()}))),e}}],[{key:"fromJSON",value:function(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");var n=null;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");n=t.marks.map(e.markFromJSON)}if("text"==t.type){if("string"!=typeof t.text)throw new RangeError("Invalid text node in JSON");return e.text(t.text,n)}var r=A.fromJSON(e,t.content);return e.nodeType(t.type).create(t.attrs,r,n)}}]),e}();te.prototype.text=void 0;var ne=function(e){d(n,e);var t=h(n);function n(e,r,o,i){var s;if(k(this,n),s=t.call(this,e,r,null,i),!o)throw new RangeError("Empty text nodes are not allowed");return s.text=o,s}return S(n,[{key:"toString",value:function(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):re(this.marks,JSON.stringify(this.text))}},{key:"textContent",get:function(){return this.text}},{key:"textBetween",value:function(e,t){return this.text.slice(e,t)}},{key:"nodeSize",get:function(){return this.text.length}},{key:"mark",value:function(e){return e==this.marks?this:new n(this.type,this.attrs,this.text,e)}},{key:"withText",value:function(e){return e==this.text?this:new n(this.type,this.attrs,e,this.marks)}},{key:"cut",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.text.length;return 0==e&&t==this.text.length?this:this.withText(this.text.slice(e,t))}},{key:"eq",value:function(e){return this.sameMarkup(e)&&this.text==e.text}},{key:"toJSON",value:function(){var e=c(w(n.prototype),"toJSON",this).call(this);return e.text=this.text,e}}]),n}(te);function re(e,t){for(var n=e.length-1;n>=0;n--)t=e[n].type.name+"("+t+")";return t}var oe=function(){function e(t){k(this,e),this.validEnd=t,this.next=[],this.wrapCache=[]}return S(e,[{key:"matchType",value:function(e){for(var t=0;t<this.next.length;t++)if(this.next[t].type==e)return this.next[t].next;return null}},{key:"matchFragment",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.childCount,r=this,o=t;r&&o<n;o++)r=r.matchType(e.child(o).type);return r}},{key:"inlineContent",get:function(){return 0!=this.next.length&&this.next[0].type.isInline}},{key:"defaultType",get:function(){for(var e=0;e<this.next.length;e++){var t=this.next[e].type;if(!t.isText&&!t.hasRequiredAttrs())return t}return null}},{key:"compatible",value:function(e){for(var t=0;t<this.next.length;t++)for(var n=0;n<e.next.length;n++)if(this.next[t].type==e.next[n].type)return!0;return!1}},{key:"fillBefore",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=[this];function o(i,s){var a=i.matchFragment(e,n);if(a&&(!t||a.validEnd))return A.from(s.map((function(e){return e.createAndFill()})));for(var l=0;l<i.next.length;l++){var c=i.next[l],u=c.type,d=c.next;if(!u.isText&&!u.hasRequiredAttrs()&&-1==r.indexOf(d)){r.push(d);var h=o(d,s.concat(u));if(h)return h}}return null}return o(this,[])}},{key:"findWrapping",value:function(e){for(var t=0;t<this.wrapCache.length;t+=2)if(this.wrapCache[t]==e)return this.wrapCache[t+1];var n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}},{key:"computeWrapping",value:function(e){var t=Object.create(null),n=[{match:this,type:null,via:null}];while(n.length){var r=n.shift(),o=r.match;if(o.matchType(e)){for(var i=[],s=r;s.type;s=s.via)i.push(s.type);return i.reverse()}for(var a=0;a<o.next.length;a++){var l=o.next[a],c=l.type,u=l.next;c.isLeaf||c.hasRequiredAttrs()||c.name in t||r.type&&!u.validEnd||(n.push({match:c.contentMatch,type:c,via:r}),t[c.name]=!0)}}return null}},{key:"edgeCount",get:function(){return this.next.length}},{key:"edge",value:function(e){if(e>=this.next.length)throw new RangeError("There's no ".concat(e,"th edge in this content match"));return this.next[e]}},{key:"toString",value:function(){var e=[];function t(n){e.push(n);for(var r=0;r<n.next.length;r++)-1==e.indexOf(n.next[r].next)&&t(n.next[r].next)}return t(this),e.map((function(t,n){for(var r=n+(t.validEnd?"*":" ")+" ",o=0;o<t.next.length;o++)r+=(o?", ":"")+t.next[o].type.name+"->"+e.indexOf(t.next[o].next);return r})).join("\n")}}],[{key:"parse",value:function(t,n){var r=new ie(t,n);if(null==r.next)return e.empty;var o=se(r);r.next&&r.err("Unexpected trailing text");var i=ge(pe(o));return ve(i,r),i}}]),e}();oe.empty=new oe(!0);var ie=function(){function e(t,n){k(this,e),this.string=t,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=t.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.shift()}return S(e,[{key:"next",get:function(){return this.tokens[this.pos]}},{key:"eat",value:function(e){return this.next==e&&(this.pos++||!0)}},{key:"err",value:function(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}]),e}();function se(e){var t=[];do{t.push(ae(e))}while(e.eat("|"));return 1==t.length?t[0]:{type:"choice",exprs:t}}function ae(e){var t=[];do{t.push(le(e))}while(e.next&&")"!=e.next&&"|"!=e.next);return 1==t.length?t[0]:{type:"seq",exprs:t}}function le(e){for(var t=he(e);;)if(e.eat("+"))t={type:"plus",expr:t};else if(e.eat("*"))t={type:"star",expr:t};else if(e.eat("?"))t={type:"opt",expr:t};else{if(!e.eat("{"))break;t=ue(e,t)}return t}function ce(e){/\D/.test(e.next)&&e.err("Expected number, got '"+e.next+"'");var t=Number(e.next);return e.pos++,t}function ue(e,t){var n=ce(e),r=n;return e.eat(",")&&(r="}"!=e.next?ce(e):-1),e.eat("}")||e.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:t}}function de(e,t){var n=e.nodeTypes,r=n[t];if(r)return[r];var o=[];for(var i in n){var s=n[i];s.groups.indexOf(t)>-1&&o.push(s)}return 0==o.length&&e.err("No node type or group '"+t+"' found"),o}function he(e){if(e.eat("(")){var t=se(e);return e.eat(")")||e.err("Missing closing paren"),t}if(!/\W/.test(e.next)){var n=de(e,e.next).map((function(t){return null==e.inline?e.inline=t.isInline:e.inline!=t.isInline&&e.err("Mixing inline and block content"),{type:"name",value:t}}));return e.pos++,1==n.length?n[0]:{type:"choice",exprs:n}}e.err("Unexpected token '"+e.next+"'")}function pe(e){var t=[[]];return o(i(e,0),n()),t;function n(){return t.push([])-1}function r(e,n,r){var o={term:r,to:n};return t[e].push(o),o}function o(e,t){e.forEach((function(e){return e.to=t}))}function i(e,t){if("choice"==e.type)return e.exprs.reduce((function(e,n){return e.concat(i(n,t))}),[]);if("seq"!=e.type){if("star"==e.type){var s=n();return r(t,s),o(i(e.expr,s),s),[r(s)]}if("plus"==e.type){var a=n();return o(i(e.expr,t),a),o(i(e.expr,a),a),[r(a)]}if("opt"==e.type)return[r(t)].concat(i(e.expr,t));if("range"==e.type){for(var l=t,c=0;c<e.min;c++){var u=n();o(i(e.expr,l),u),l=u}if(-1==e.max)o(i(e.expr,l),l);else for(var d=e.min;d<e.max;d++){var h=n();r(l,h),o(i(e.expr,l),h),l=h}return[r(l)]}if("name"==e.type)return[r(t,void 0,e.value)];throw new Error("Unknown expr type")}for(var p=0;;p++){var f=i(e.exprs[p],t);if(p==e.exprs.length-1)return f;o(f,t=n())}}}function fe(e,t){return t-e}function me(e,t){var n=[];return r(t),n.sort(fe);function r(t){var o=e[t];if(1==o.length&&!o[0].term)return r(o[0].to);n.push(t);for(var i=0;i<o.length;i++){var s=o[i],a=s.term,l=s.to;a||-1!=n.indexOf(l)||r(l)}}}function ge(e){var t=Object.create(null);return n(me(e,0));function n(r){var o=[];r.forEach((function(t){e[t].forEach((function(t){var n=t.term,r=t.to;if(n){for(var i,s=0;s<o.length;s++)o[s][0]==n&&(i=o[s][1]);me(e,r).forEach((function(e){i||o.push([n,i=[]]),-1==i.indexOf(e)&&i.push(e)}))}}))}));for(var i=t[r.join(",")]=new oe(r.indexOf(e.length-1)>-1),s=0;s<o.length;s++){var a=o[s][1].sort(fe);i.next.push({type:o[s][0],next:t[a.join(",")]||n(a)})}return i}}function ve(e,t){for(var n=0,r=[e];n<r.length;n++){for(var o=r[n],i=!o.validEnd,s=[],a=0;a<o.next.length;a++){var l=o.next[a],c=l.type,u=l.next;s.push(c.name),!i||c.isText||c.hasRequiredAttrs()||(i=!1),-1==r.indexOf(u)&&r.push(u)}i&&t.err("Only non-generatable nodes ("+s.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function ye(e){var t=Object.create(null);for(var n in e){var r=e[n];if(!r.hasDefault)return null;t[n]=r["default"]}return t}function be(e,t){var n=Object.create(null);for(var r in e){var o=t&&t[r];if(void 0===o){var i=e[r];if(!i.hasDefault)throw new RangeError("No value supplied for attribute "+r);o=i["default"]}n[r]=o}return n}function we(e){var t=Object.create(null);if(e)for(var n in e)t[n]=new xe(e[n]);return t}var ke=function(){function e(t,n,r){k(this,e),this.name=t,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=we(r.attrs),this.defaultAttrs=ye(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||"text"==t),this.isText="text"==t}return S(e,[{key:"isInline",get:function(){return!this.isBlock}},{key:"isTextblock",get:function(){return this.isBlock&&this.inlineContent}},{key:"isLeaf",get:function(){return this.contentMatch==oe.empty}},{key:"isAtom",get:function(){return this.isLeaf||!!this.spec.atom}},{key:"whitespace",get:function(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}},{key:"hasRequiredAttrs",value:function(){for(var e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}},{key:"compatibleContent",value:function(e){return this==e||this.contentMatch.compatible(e.contentMatch)}},{key:"computeAttrs",value:function(e){return!e&&this.defaultAttrs?this.defaultAttrs:be(this.attrs,e)}},{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new te(this,this.computeAttrs(e),A.from(t),I.setFrom(n))}},{key:"createChecked",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return t=A.from(t),this.checkContent(t),new te(this,this.computeAttrs(e),t,I.setFrom(n))}},{key:"createAndFill",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;if(e=this.computeAttrs(e),t=A.from(t),t.size){var r=this.contentMatch.fillBefore(t);if(!r)return null;t=r.append(t)}var o=this.contentMatch.matchFragment(t),i=o&&o.fillBefore(A.empty,!0);return i?new te(this,e,t.append(i),I.setFrom(n)):null}},{key:"validContent",value:function(e){var t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(var n=0;n<e.childCount;n++)if(!this.allowsMarks(e.child(n).marks))return!1;return!0}},{key:"checkContent",value:function(e){if(!this.validContent(e))throw new RangeError("Invalid content for node ".concat(this.name,": ").concat(e.toString().slice(0,50)))}},{key:"allowsMarkType",value:function(e){return null==this.markSet||this.markSet.indexOf(e)>-1}},{key:"allowsMarks",value:function(e){if(null==this.markSet)return!0;for(var t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0}},{key:"allowedMarks",value:function(e){if(null==this.markSet)return e;for(var t,n=0;n<e.length;n++)this.allowsMarkType(e[n].type)?t&&t.push(e[n]):t||(t=e.slice(0,n));return t?t.length?t:I.none:e}}],[{key:"compile",value:function(t,n){var r=Object.create(null);t.forEach((function(t,o){return r[t]=new e(t,n,o)}));var o=n.spec.topNode||"doc";if(!r[o])throw new RangeError("Schema is missing its top node type ('"+o+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(var i in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}}]),e}(),xe=function(){function e(t){k(this,e),this.hasDefault=Object.prototype.hasOwnProperty.call(t,"default"),this["default"]=t["default"]}return S(e,[{key:"isRequired",get:function(){return!this.hasDefault}}]),e}(),Se=function(){function e(t,n,r,o){k(this,e),this.name=t,this.rank=n,this.schema=r,this.spec=o,this.attrs=we(o.attrs),this.excluded=null;var i=ye(this.attrs);this.instance=i?new I(this,i):null}return S(e,[{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return!e&&this.instance?this.instance:new I(this,be(this.attrs,e))}},{key:"removeFromSet",value:function(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e}},{key:"isInSet",value:function(e){for(var t=0;t<e.length;t++)if(e[t].type==this)return e[t]}},{key:"excludes",value:function(e){return this.excluded.indexOf(e)>-1}}],[{key:"compile",value:function(t,n){var r=Object.create(null),o=0;return t.forEach((function(t,i){return r[t]=new e(t,o++,n,i)})),r}}]),e}(),Ce=function(){function e(t){k(this,e),this.cached=Object.create(null);var n=this.spec={};for(var r in t)n[r]=t[r];n.nodes=M["default"].from(t.nodes),n.marks=M["default"].from(t.marks||{}),this.nodes=ke.compile(this.spec.nodes,this),this.marks=Se.compile(this.spec.marks,this);var o=Object.create(null);for(var i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");var s=this.nodes[i],a=s.spec.content||"",l=s.spec.marks;s.contentMatch=o[a]||(o[a]=oe.parse(a,this.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.markSet="_"==l?null:l?_e(this,l.split(" ")):""!=l&&s.inlineContent?null:[]}for(var c in this.marks){var u=this.marks[c],d=u.spec.excludes;u.excluded=null==d?[u]:""==d?[]:_e(this,d.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}return S(e,[{key:"node",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;if("string"==typeof e)e=this.nodeType(e);else{if(!(e instanceof ke))throw new RangeError("Invalid node type: "+e);if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}return e.createChecked(t,n,r)}},{key:"text",value:function(e,t){var n=this.nodes.text;return new ne(n,n.defaultAttrs,e,I.setFrom(t))}},{key:"mark",value:function(e,t){return"string"==typeof e&&(e=this.marks[e]),e.create(t)}},{key:"nodeFromJSON",value:function(e){return te.fromJSON(this,e)}},{key:"markFromJSON",value:function(e){return I.fromJSON(this,e)}},{key:"nodeType",value:function(e){var t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t}}]),e}();function _e(e,t){for(var n=[],r=0;r<t.length;r++){var o=t[r],i=e.marks[o],s=i;if(i)n.push(i);else for(var a in e.marks){var l=e.marks[a];("_"==o||l.spec.group&&l.spec.group.split(" ").indexOf(o)>-1)&&n.push(s=l)}if(!s)throw new SyntaxError("Unknown mark type: '"+t[r]+"'")}return n}var Oe=function(){function e(t,n){var r=this;k(this,e),this.schema=t,this.rules=n,this.tags=[],this.styles=[],n.forEach((function(e){e.tag?r.tags.push(e):e.style&&r.styles.push(e)})),this.normalizeLists=!this.tags.some((function(e){if(!/^(ul|ol)\b/.test(e.tag)||!e.node)return!1;var n=t.nodes[e.node];return n.contentMatch.matchType(n)}))}return S(e,[{key:"parse",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new ze(this,t,!1);return n.addAll(e,t.from,t.to),n.finish()}},{key:"parseSlice",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new ze(this,t,!0);return n.addAll(e,t.from,t.to),P.maxOpen(n.finish())}},{key:"matchTag",value:function(e,t,n){for(var r=n?this.tags.indexOf(n)+1:0;r<this.tags.length;r++){var o=this.tags[r];if($e(e,o.tag)&&(void 0===o.namespace||e.namespaceURI==o.namespace)&&(!o.context||t.matchesContext(o.context))){if(o.getAttrs){var i=o.getAttrs(e);if(!1===i)continue;o.attrs=i||void 0}return o}}}},{key:"matchStyle",value:function(e,t,n,r){for(var o=r?this.styles.indexOf(r)+1:0;o<this.styles.length;o++){var i=this.styles[o],s=i.style;if(!(0!=s.indexOf(e)||i.context&&!n.matchesContext(i.context)||s.length>e.length&&(61!=s.charCodeAt(e.length)||s.slice(e.length+1)!=t))){if(i.getAttrs){var a=i.getAttrs(t);if(!1===a)continue;i.attrs=a||void 0}return i}}}}],[{key:"schemaRules",value:function(e){var t=[];function n(e){for(var n=null==e.priority?50:e.priority,r=0;r<t.length;r++){var o=t[r],i=null==o.priority?50:o.priority;if(i<n)break}t.splice(r,0,e)}var r=function(t){var r=e.marks[t].spec.parseDOM;r&&r.forEach((function(e){n(e=Be(e)),e.mark||e.ignore||e.clearMark||(e.mark=t)}))};for(var o in e.marks)r(o);var i=function(t){var r=e.nodes[t].spec.parseDOM;r&&r.forEach((function(e){n(e=Be(e)),e.node||e.ignore||e.mark||(e.node=t)}))};for(var s in e.nodes)i(s);return t}},{key:"fromSchema",value:function(t){return t.cached.domParser||(t.cached.domParser=new e(t,e.schemaRules(t)))}}]),e}(),Me={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},Ee={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},Te={ol:!0,ul:!0},Ae=1,Ne=2,Re=4;function De(e,t,n){return null!=t?(t?Ae:0)|("full"===t?Ne:0):e&&"pre"==e.whitespace?Ae|Ne:n&~Re}var Ie=function(){function e(t,n,r,o,i,s,a){k(this,e),this.type=t,this.attrs=n,this.marks=r,this.pendingMarks=o,this.solid=i,this.options=a,this.content=[],this.activeMarks=I.none,this.stashMarks=[],this.match=s||(a&Re?null:t.contentMatch)}return S(e,[{key:"findWrapping",value:function(e){if(!this.match){if(!this.type)return[];var t=this.type.contentMatch.fillBefore(A.from(e));if(!t){var n,r=this.type.contentMatch;return(n=r.findWrapping(e.type))?(this.match=r,n):null}this.match=this.type.contentMatch.matchFragment(t)}return this.match.findWrapping(e.type)}},{key:"finish",value:function(e){if(!(this.options&Ae)){var t,n=this.content[this.content.length-1];if(n&&n.isText&&(t=/[ \t\r\n\u000c]+$/.exec(n.text))){var r=n;n.text.length==t[0].length?this.content.pop():this.content[this.content.length-1]=r.withText(r.text.slice(0,r.text.length-t[0].length))}}var o=A.from(this.content);return!e&&this.match&&(o=o.append(this.match.fillBefore(A.empty,!0))),this.type?this.type.create(this.attrs,o,this.marks):o}},{key:"popFromStashMark",value:function(e){for(var t=this.stashMarks.length-1;t>=0;t--)if(e.eq(this.stashMarks[t]))return this.stashMarks.splice(t,1)[0]}},{key:"applyPending",value:function(e){for(var t=0,n=this.pendingMarks;t<n.length;t++){var r=n[t];(this.type?this.type.allowsMarkType(r.type):je(r.type,e))&&!r.isInSet(this.activeMarks)&&(this.activeMarks=r.addToSet(this.activeMarks),this.pendingMarks=r.removeFromSet(this.pendingMarks))}}},{key:"inlineContext",value:function(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!Me.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}]),e}(),ze=function(){function e(t,n,r){k(this,e),this.parser=t,this.options=n,this.isOpen=r,this.open=0;var o,i=n.topNode,s=De(null,n.preserveWhitespace,0)|(r?Re:0);o=i?new Ie(i.type,i.attrs,I.none,I.none,!0,n.topMatch||i.type.contentMatch,s):new Ie(r?null:t.schema.topNodeType,null,I.none,I.none,!0,null,s),this.nodes=[o],this.find=n.findPositions,this.needsBlock=!1}return S(e,[{key:"top",get:function(){return this.nodes[this.open]}},{key:"addDOM",value:function(e){3==e.nodeType?this.addTextNode(e):1==e.nodeType&&this.addElement(e)}},{key:"withStyleRules",value:function(e,t){var n=e.getAttribute("style");if(!n)return t();var o=this.readStyles(Fe(n));if(o){for(var i=r(o,2),s=i[0],a=i[1],l=this.top,c=0;c<a.length;c++)this.removePendingMark(a[c],l);for(var u=0;u<s.length;u++)this.addPendingMark(s[u]);t();for(var d=0;d<s.length;d++)this.removePendingMark(s[d],l);for(var h=0;h<a.length;h++)this.addPendingMark(a[h])}}},{key:"addTextNode",value:function(e){var t=e.nodeValue,n=this.top;if(n.options&Ne||n.inlineContext(e)||/[^ \t\r\n\u000c]/.test(t)){if(n.options&Ae)t=n.options&Ne?t.replace(/\r\n?/g,"\n"):t.replace(/\r?\n|\r/g," ");else if(t=t.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(t)&&this.open==this.nodes.length-1){var r=n.content[n.content.length-1],o=e.previousSibling;(!r||o&&"BR"==o.nodeName||r.isText&&/[ \t\r\n\u000c]$/.test(r.text))&&(t=t.slice(1))}t&&this.insertNode(this.parser.schema.text(t)),this.findInText(e)}else this.findInside(e)}},{key:"addElement",value:function(e,t){var n,r=this,o=e.nodeName.toLowerCase();Te.hasOwnProperty(o)&&this.parser.normalizeLists&&Pe(e);var i=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(n=this.parser.matchTag(e,this,t));if(i?i.ignore:Ee.hasOwnProperty(o))this.findInside(e),this.ignoreFallback(e);else if(!i||i.skip||i.closeParent){i&&i.closeParent?this.open=Math.max(0,this.open-1):i&&i.skip.nodeType&&(e=i.skip);var s,a=this.top,l=this.needsBlock;if(Me.hasOwnProperty(o))a.content.length&&a.content[0].isInline&&this.open&&(this.open--,a=this.top),s=!0,a.type||(this.needsBlock=!0);else if(!e.firstChild)return void this.leafFallback(e);i&&i.skip?this.addAll(e):this.withStyleRules(e,(function(){return r.addAll(e)})),s&&this.sync(a),this.needsBlock=l}else this.withStyleRules(e,(function(){r.addElementByRule(e,i,!1===i.consuming?n:void 0)}))}},{key:"leafFallback",value:function(e){"BR"==e.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode("\n"))}},{key:"ignoreFallback",value:function(e){"BR"!=e.nodeName||this.top.type&&this.top.type.inlineContent||this.findPlace(this.parser.schema.text("-"))}},{key:"readStyles",value:function(e){for(var t=this,n=I.none,r=I.none,o=0;o<e.length;o+=2)for(var i=function(i){var a=t.parser.matchStyle(e[o],e[o+1],t,i);return a?a.ignore?(s=i,{v:null}):(a.clearMark?t.top.pendingMarks.concat(t.top.activeMarks).forEach((function(e){a.clearMark(e)&&(r=e.addToSet(r))})):n=t.parser.schema.marks[a.mark].create(a.attrs).addToSet(n),!1!==a.consuming?(s=i,"break"):(i=a,void(s=i))):(s=i,"break")},s=void 0;;){var a=i(s);if("break"===a)break;if("object"===C(a))return a.v}return[n,r]}},{key:"addElementByRule",value:function(e,t,n){var r,o,i,s=this;if(t.node)o=this.parser.schema.nodes[t.node],o.isLeaf?this.insertNode(o.create(t.attrs))||this.leafFallback(e):r=this.enter(o,t.attrs||null,t.preserveWhitespace);else{var a=this.parser.schema.marks[t.mark];i=a.create(t.attrs),this.addPendingMark(i)}var l=this.top;if(o&&o.isLeaf)this.findInside(e);else if(n)this.addElement(e,n);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach((function(e){return s.insertNode(e)}));else{var c=e;"string"==typeof t.contentElement?c=e.querySelector(t.contentElement):"function"==typeof t.contentElement?c=t.contentElement(e):t.contentElement&&(c=t.contentElement),this.findAround(e,c,!0),this.addAll(c)}r&&this.sync(l)&&this.open--,i&&this.removePendingMark(i,l)}},{key:"addAll",value:function(e,t,n){for(var r=t||0,o=t?e.childNodes[t]:e.firstChild,i=null==n?null:e.childNodes[n];o!=i;o=o.nextSibling,++r)this.findAtPoint(e,r),this.addDOM(o);this.findAtPoint(e,r)}},{key:"findPlace",value:function(e){for(var t,n,r=this.open;r>=0;r--){var o=this.nodes[r],i=o.findWrapping(e);if(i&&(!t||t.length>i.length)&&(t=i,n=o,!i.length))break;if(o.solid)break}if(!t)return!1;this.sync(n);for(var s=0;s<t.length;s++)this.enterInner(t[s],null,!1);return!0}},{key:"insertNode",value:function(e){if(e.isInline&&this.needsBlock&&!this.top.type){var t=this.textblockFromContext();t&&this.enterInner(t)}if(this.findPlace(e)){this.closeExtra();var n=this.top;n.applyPending(e.type),n.match&&(n.match=n.match.matchType(e.type));for(var r=n.activeMarks,o=0;o<e.marks.length;o++)n.type&&!n.type.allowsMarkType(e.marks[o].type)||(r=e.marks[o].addToSet(r));return n.content.push(e.mark(r)),!0}return!1}},{key:"enter",value:function(e,t,n){var r=this.findPlace(e.create(t));return r&&this.enterInner(e,t,!0,n),r}},{key:"enterInner",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0;this.closeExtra();var o=this.top;o.applyPending(e),o.match=o.match&&o.match.matchType(e);var i=De(e,r,o.options);o.options&Re&&0==o.content.length&&(i|=Re),this.nodes.push(new Ie(e,t,o.activeMarks,o.pendingMarks,n,null,i)),this.open++}},{key:"closeExtra",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}},{key:"finish",value:function(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}},{key:"sync",value:function(e){for(var t=this.open;t>=0;t--)if(this.nodes[t]==e)return this.open=t,!0;return!1}},{key:"currentPos",get:function(){this.closeExtra();for(var e=0,t=this.open;t>=0;t--){for(var n=this.nodes[t].content,r=n.length-1;r>=0;r--)e+=n[r].nodeSize;t&&e++}return e}},{key:"findAtPoint",value:function(e,t){if(this.find)for(var n=0;n<this.find.length;n++)this.find[n].node==e&&this.find[n].offset==t&&(this.find[n].pos=this.currentPos)}},{key:"findInside",value:function(e){if(this.find)for(var t=0;t<this.find.length;t++)null==this.find[t].pos&&1==e.nodeType&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}},{key:"findAround",value:function(e,t,n){if(e!=t&&this.find)for(var r=0;r<this.find.length;r++)if(null==this.find[r].pos&&1==e.nodeType&&e.contains(this.find[r].node)){var o=t.compareDocumentPosition(this.find[r].node);o&(n?2:4)&&(this.find[r].pos=this.currentPos)}}},{key:"findInText",value:function(e){if(this.find)for(var t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}},{key:"matchesContext",value:function(e){var t=this;if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);var n=e.split("/"),r=this.options.context,o=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),i=-(r?r.depth+1:0)+(o?0:1),s=function e(s,a){for(;s>=0;s--){var l=n[s];if(""==l){if(s==n.length-1||0==s)continue;for(;a>=i;a--)if(e(s-1,a))return!0;return!1}var c=a>0||0==a&&o?t.nodes[a].type:r&&a>=i?r.node(a-i).type:null;if(!c||c.name!=l&&-1==c.groups.indexOf(l))return!1;a--}return!0};return s(n.length-1,this.open)}},{key:"textblockFromContext",value:function(){var e=this.options.context;if(e)for(var t=e.depth;t>=0;t--){var n=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(var r in this.parser.schema.nodes){var o=this.parser.schema.nodes[r];if(o.isTextblock&&o.defaultAttrs)return o}}},{key:"addPendingMark",value:function(e){var t=Le(e,this.top.pendingMarks);t&&this.top.stashMarks.push(t),this.top.pendingMarks=e.addToSet(this.top.pendingMarks)}},{key:"removePendingMark",value:function(e,t){for(var n=this.open;n>=0;n--){var r=this.nodes[n],o=r.pendingMarks.lastIndexOf(e);if(o>-1)r.pendingMarks=e.removeFromSet(r.pendingMarks);else{r.activeMarks=e.removeFromSet(r.activeMarks);var i=r.popFromStashMark(e);i&&r.type&&r.type.allowsMarkType(i.type)&&(r.activeMarks=i.addToSet(r.activeMarks))}if(r==t)break}}}]),e}();function Pe(e){for(var t=e.firstChild,n=null;t;t=t.nextSibling){var r=1==t.nodeType?t.nodeName.toLowerCase():null;r&&Te.hasOwnProperty(r)&&n?(n.appendChild(t),t=n):"li"==r?n=t:r&&(n=null)}}function $e(e,t){return(e.matches||e.msMatchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector).call(e,t)}function Fe(e){var t,n=/\s*([\w-]+)\s*:\s*([^;]+)/g,r=[];while(t=n.exec(e))r.push(t[1],t[2].trim());return r}function Be(e){var t={};for(var n in e)t[n]=e[n];return t}function je(e,t){var n=t.schema.nodes,r=function(r){var o=n[r];if(!o.allowsMarkType(e))return"continue";var i=[],s=function e(n){i.push(n);for(var r=0;r<n.edgeCount;r++){var o=n.edge(r),s=o.type,a=o.next;if(s==t)return!0;if(i.indexOf(a)<0&&e(a))return!0}};return s(o.contentMatch)?{v:!0}:void 0};for(var o in n){var i=r(o);if("continue"!==i&&"object"===C(i))return i.v}}function Le(e,t){for(var n=0;n<t.length;n++)if(e.eq(t[n]))return t[n]}var Ve=function(){function e(t,n){k(this,e),this.nodes=t,this.marks=n}return S(e,[{key:"serializeFragment",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;r||(r=He(n).createDocumentFragment());var o=r,i=[];return e.forEach((function(e){if(i.length||e.marks.length){var r=0,s=0;while(r<i.length&&s<e.marks.length){var a=e.marks[s];if(t.marks[a.type.name]){if(!a.eq(i[r][0])||!1===a.type.spec.spanning)break;r++,s++}else s++}while(r<i.length)o=i.pop()[1];while(s<e.marks.length){var l=e.marks[s++],c=t.serializeMark(l,e.isInline,n);c&&(i.push([l,o]),o.appendChild(c.dom),o=c.contentDOM||c.dom)}}o.appendChild(t.serializeNodeInner(e,n))})),r}},{key:"serializeNodeInner",value:function(t,n){var r=e.renderSpec(He(n),this.nodes[t.type.name](t)),o=r.dom,i=r.contentDOM;if(i){if(t.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(t.content,n,i)}return o}},{key:"serializeNode",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.serializeNodeInner(e,t),r=e.marks.length-1;r>=0;r--){var o=this.serializeMark(e.marks[r],e.isInline,t);o&&((o.contentDOM||o.dom).appendChild(n),n=o.dom)}return n}},{key:"serializeMark",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=this.marks[t.type.name];return o&&e.renderSpec(He(r),o(t,n))}}],[{key:"renderSpec",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if("string"==typeof n)return{dom:t.createTextNode(n)};if(null!=n.nodeType)return{dom:n};if(n.dom&&null!=n.dom.nodeType)return n;var o,i=n[0],s=i.indexOf(" ");s>0&&(r=i.slice(0,s),i=i.slice(s+1));var a=r?t.createElementNS(r,i):t.createElement(i),l=n[1],c=1;if(l&&"object"==C(l)&&null==l.nodeType&&!Array.isArray(l))for(var u in c=2,l)if(null!=l[u]){var d=u.indexOf(" ");d>0?a.setAttributeNS(u.slice(0,d),u.slice(d+1),l[u]):a.setAttribute(u,l[u])}for(var h=c;h<n.length;h++){var p=n[h];if(0===p){if(h<n.length-1||h>c)throw new RangeError("Content hole must be the only child of its parent node");return{dom:a,contentDOM:a}}var f=e.renderSpec(t,p,r),m=f.dom,g=f.contentDOM;if(a.appendChild(m),g){if(o)throw new RangeError("Multiple content holes");o=g}}return{dom:a,contentDOM:o}}},{key:"fromSchema",value:function(t){return t.cached.domSerializer||(t.cached.domSerializer=new e(this.nodesFromSchema(t),this.marksFromSchema(t)))}},{key:"nodesFromSchema",value:function(e){var t=qe(e.nodes);return t.text||(t.text=function(e){return e.text}),t}},{key:"marksFromSchema",value:function(e){return qe(e.marks)}}]),e}();function qe(e){var t={};for(var n in e){var r=e[n].spec.toDOM;r&&(t[n]=r)}return t}function He(e){return e.document||window.document}t.ContentMatch=oe,t.DOMParser=Oe,t.DOMSerializer=Ve,t.Fragment=A,t.Mark=I,t.MarkType=Se,t.Node=te,t.NodeRange=Q,t.NodeType=ke,t.ReplaceError=z,t.ResolvedPos=G,t.Schema=Ce,t.Slice=P},2391:function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(){return o="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=i(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},o.apply(this,arguments)}function i(e,t){while(!Object.prototype.hasOwnProperty.call(e,t))if(e=h(e),null===e)break;return e}function s(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a(e,t)}function a(e,t){return a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},a(e,t)}function l(e){var t=d();return function(){var n,r=h(e);if(t){var o=h(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return c(this,n)}}function c(e,t){if(t&&("object"===r(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return u(e)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t,n){return t&&f(e.prototype,t),n&&f(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}Object.defineProperty(t,"__esModule",{value:!0});var g=n(9443),v=n(2843),y=Object.create(null),b=function(){function e(t,n,r){p(this,e),this.$anchor=t,this.$head=n,this.ranges=r||[new w(t.min(n),t.max(n))]}return m(e,[{key:"anchor",get:function(){return this.$anchor.pos}},{key:"head",get:function(){return this.$head.pos}},{key:"from",get:function(){return this.$from.pos}},{key:"to",get:function(){return this.$to.pos}},{key:"$from",get:function(){return this.ranges[0].$from}},{key:"$to",get:function(){return this.ranges[0].$to}},{key:"empty",get:function(){for(var e=this.ranges,t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0}},{key:"content",value:function(){return this.$from.doc.slice(this.from,this.to,!0)}},{key:"replace",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:g.Slice.empty,n=t.content.lastChild,r=null,o=0;o<t.openEnd;o++)r=n,n=n.lastChild;for(var i=e.steps.length,s=this.ranges,a=0;a<s.length;a++){var l=s[a],c=l.$from,u=l.$to,d=e.mapping.slice(i);e.replaceRange(d.map(c.pos),d.map(u.pos),a?g.Slice.empty:t),0==a&&A(e,i,(n?n.isInline:r&&r.isTextblock)?-1:1)}}},{key:"replaceWith",value:function(e,t){for(var n=e.steps.length,r=this.ranges,o=0;o<r.length;o++){var i=r[o],s=i.$from,a=i.$to,l=e.mapping.slice(n),c=l.map(s.pos),u=l.map(a.pos);o?e.deleteRange(c,u):(e.replaceRangeWith(c,u,t),A(e,n,t.isInline?-1:1))}}},{key:"getBookmark",value:function(){return S.between(this.$anchor,this.$head).getBookmark()}}],[{key:"findFrom",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=e.parent.inlineContent?new S(e):T(e.node(0),e.parent,e.pos,e.index(),t,n);if(r)return r;for(var o=e.depth-1;o>=0;o--){var i=t<0?T(e.node(0),e.node(o),e.before(o+1),e.index(o),t,n):T(e.node(0),e.node(o),e.after(o+1),e.index(o)+1,t,n);if(i)return i}return null}},{key:"near",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this.findFrom(e,t)||this.findFrom(e,-t)||new M(e.node(0))}},{key:"atStart",value:function(e){return T(e,e,0,0,1)||new M(e)}},{key:"atEnd",value:function(e){return T(e,e,e.content.size,e.childCount,-1)||new M(e)}},{key:"fromJSON",value:function(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");var n=y[t.type];if(!n)throw new RangeError("No selection type ".concat(t.type," defined"));return n.fromJSON(e,t)}},{key:"jsonID",value:function(e,t){if(e in y)throw new RangeError("Duplicate use of selection JSON ID "+e);return y[e]=t,t.prototype.jsonID=e,t}}]),e}();b.prototype.visible=!0;var w=m((function e(t,n){p(this,e),this.$from=t,this.$to=n})),k=!1;function x(e){k||e.parent.inlineContent||(k=!0,console["warn"]("TextSelection endpoint not pointing into a node with inline content ("+e.parent.type.name+")"))}var S=function(e){s(n,e);var t=l(n);function n(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;return p(this,n),x(e),x(r),t.call(this,e,r)}return m(n,[{key:"$cursor",get:function(){return this.$anchor.pos==this.$head.pos?this.$head:null}},{key:"map",value:function(e,t){var r=e.resolve(t.map(this.head));if(!r.parent.inlineContent)return b.near(r);var o=e.resolve(t.map(this.anchor));return new n(o.parent.inlineContent?o:r,r)}},{key:"replace",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:g.Slice.empty;if(o(h(n.prototype),"replace",this).call(this,e,t),t==g.Slice.empty){var r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}},{key:"eq",value:function(e){return e instanceof n&&e.anchor==this.anchor&&e.head==this.head}},{key:"getBookmark",value:function(){return new C(this.anchor,this.head)}},{key:"toJSON",value:function(){return{type:"text",anchor:this.anchor,head:this.head}}}],[{key:"fromJSON",value:function(e,t){if("number"!=typeof t.anchor||"number"!=typeof t.head)throw new RangeError("Invalid input for TextSelection.fromJSON");return new n(e.resolve(t.anchor),e.resolve(t.head))}},{key:"create",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,r=e.resolve(t);return new this(r,n==t?r:e.resolve(n))}},{key:"between",value:function(e,t,r){var o=e.pos-t.pos;if(r&&!o||(r=o>=0?1:-1),!t.parent.inlineContent){var i=b.findFrom(t,r,!0)||b.findFrom(t,-r,!0);if(!i)return b.near(t,r);t=i.$head}return e.parent.inlineContent||(0==o?e=t:(e=(b.findFrom(e,-r,!0)||b.findFrom(e,r,!0)).$anchor,e.pos<t.pos!=o<0&&(e=t))),new n(e,t)}}]),n}(b);b.jsonID("text",S);var C=function(){function e(t,n){p(this,e),this.anchor=t,this.head=n}return m(e,[{key:"map",value:function(t){return new e(t.map(this.anchor),t.map(this.head))}},{key:"resolve",value:function(e){return S.between(e.resolve(this.anchor),e.resolve(this.head))}}]),e}(),_=function(e){s(n,e);var t=l(n);function n(e){var r;p(this,n);var o=e.nodeAfter,i=e.node(0).resolve(e.pos+o.nodeSize);return r=t.call(this,e,i),r.node=o,r}return m(n,[{key:"map",value:function(e,t){var r=t.mapResult(this.anchor),o=r.deleted,i=r.pos,s=e.resolve(i);return o?b.near(s):new n(s)}},{key:"content",value:function(){return new g.Slice(g.Fragment.from(this.node),0,0)}},{key:"eq",value:function(e){return e instanceof n&&e.anchor==this.anchor}},{key:"toJSON",value:function(){return{type:"node",anchor:this.anchor}}},{key:"getBookmark",value:function(){return new O(this.anchor)}}],[{key:"fromJSON",value:function(e,t){if("number"!=typeof t.anchor)throw new RangeError("Invalid input for NodeSelection.fromJSON");return new n(e.resolve(t.anchor))}},{key:"create",value:function(e,t){return new n(e.resolve(t))}},{key:"isSelectable",value:function(e){return!e.isText&&!1!==e.type.spec.selectable}}]),n}(b);_.prototype.visible=!1,b.jsonID("node",_);var O=function(){function e(t){p(this,e),this.anchor=t}return m(e,[{key:"map",value:function(t){var n=t.mapResult(this.anchor),r=n.deleted,o=n.pos;return r?new C(o,o):new e(o)}},{key:"resolve",value:function(e){var t=e.resolve(this.anchor),n=t.nodeAfter;return n&&_.isSelectable(n)?new _(t):b.near(t)}}]),e}(),M=function(e){s(n,e);var t=l(n);function n(e){return p(this,n),t.call(this,e.resolve(0),e.resolve(e.content.size))}return m(n,[{key:"replace",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:g.Slice.empty;if(t==g.Slice.empty){e["delete"](0,e.doc.content.size);var r=b.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else o(h(n.prototype),"replace",this).call(this,e,t)}},{key:"toJSON",value:function(){return{type:"all"}}},{key:"map",value:function(e){return new n(e)}},{key:"eq",value:function(e){return e instanceof n}},{key:"getBookmark",value:function(){return E}}],[{key:"fromJSON",value:function(e){return new n(e)}}]),n}(b);b.jsonID("all",M);var E={map:function(){return this},resolve:function(e){return new M(e)}};function T(e,t,n,r,o){var i=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(t.inlineContent)return S.create(e,n);for(var s=r-(o>0?0:1);o>0?s<t.childCount:s>=0;s+=o){var a=t.child(s);if(a.isAtom){if(!i&&_.isSelectable(a))return _.create(e,n-(o<0?a.nodeSize:0))}else{var l=T(e,a,n+o,o<0?a.childCount:0,o,i);if(l)return l}n+=a.nodeSize*o}return null}function A(e,t,n){var r=e.steps.length-1;if(!(r<t)){var o=e.steps[r];if(o instanceof v.ReplaceStep||o instanceof v.ReplaceAroundStep){var i,s=e.mapping.maps[r];s.forEach((function(e,t,n,r){null==i&&(i=r)})),e.setSelection(b.near(e.doc.resolve(i),n))}}}var N=1,R=2,D=4,I=function(e){s(n,e);var t=l(n);function n(e){var r;return p(this,n),r=t.call(this,e.doc),r.curSelectionFor=0,r.updated=0,r.meta=Object.create(null),r.time=Date.now(),r.curSelection=e.selection,r.storedMarks=e.storedMarks,r}return m(n,[{key:"selection",get:function(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}},{key:"setSelection",value:function(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|N)&~R,this.storedMarks=null,this}},{key:"selectionSet",get:function(){return(this.updated&N)>0}},{key:"setStoredMarks",value:function(e){return this.storedMarks=e,this.updated|=R,this}},{key:"ensureMarks",value:function(e){return g.Mark.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}},{key:"addStoredMark",value:function(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}},{key:"removeStoredMark",value:function(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}},{key:"storedMarksSet",get:function(){return(this.updated&R)>0}},{key:"addStep",value:function(e,t){o(h(n.prototype),"addStep",this).call(this,e,t),this.updated=this.updated&~R,this.storedMarks=null}},{key:"setTime",value:function(e){return this.time=e,this}},{key:"replaceSelection",value:function(e){return this.selection.replace(this,e),this}},{key:"replaceSelectionWith",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.selection;return t&&(e=e.mark(this.storedMarks||(n.empty?n.$from.marks():n.$from.marksAcross(n.$to)||g.Mark.none))),n.replaceWith(this,e),this}},{key:"deleteSelection",value:function(){return this.selection.replace(this),this}},{key:"insertText",value:function(e,t,n){var r=this.doc.type.schema;if(null==t)return e?this.replaceSelectionWith(r.text(e),!0):this.deleteSelection();if(null==n&&(n=t),n=null==n?t:n,!e)return this.deleteRange(t,n);var o=this.storedMarks;if(!o){var i=this.doc.resolve(t);o=n==t?i.marks():i.marksAcross(this.doc.resolve(n))}return this.replaceRangeWith(t,n,r.text(e,o)),this.selection.empty||this.setSelection(b.near(this.selection.$to)),this}},{key:"setMeta",value:function(e,t){return this.meta["string"==typeof e?e:e.key]=t,this}},{key:"getMeta",value:function(e){return this.meta["string"==typeof e?e:e.key]}},{key:"isGeneric",get:function(){for(var e in this.meta)return!1;return!0}},{key:"scrollIntoView",value:function(){return this.updated|=D,this}},{key:"scrolledIntoView",get:function(){return(this.updated&D)>0}}]),n}(v.Transform);function z(e,t){return t&&e?e.bind(t):e}var P=m((function e(t,n,r){p(this,e),this.name=t,this.init=z(n.init,r),this.apply=z(n.apply,r)})),$=[new P("doc",{init:function(e){return e.doc||e.schema.topNodeType.createAndFill()},apply:function(e){return e.doc}}),new P("selection",{init:function(e,t){return e.selection||b.atStart(t.doc)},apply:function(e){return e.selection}}),new P("storedMarks",{init:function(e){return e.storedMarks||null},apply:function(e,t,n,r){return r.selection.$cursor?e.storedMarks:null}}),new P("scrollToSelection",{init:function(){return 0},apply:function(e,t){return e.scrolledIntoView?t+1:t}})],F=m((function e(t,n){var r=this;p(this,e),this.schema=t,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=$.slice(),n&&n.forEach((function(e){if(r.pluginsByKey[e.key])throw new RangeError("Adding different instances of a keyed plugin ("+e.key+")");r.plugins.push(e),r.pluginsByKey[e.key]=e,e.spec.state&&r.fields.push(new P(e.key,e.spec.state,e))}))})),B=function(){function e(t){p(this,e),this.config=t}return m(e,[{key:"schema",get:function(){return this.config.schema}},{key:"plugins",get:function(){return this.config.plugins}},{key:"apply",value:function(e){return this.applyTransaction(e).state}},{key:"filterTransaction",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=0;n<this.config.plugins.length;n++)if(n!=t){var r=this.config.plugins[n];if(r.spec.filterTransaction&&!r.spec.filterTransaction.call(r,e,this))return!1}return!0}},{key:"applyTransaction",value:function(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};for(var t=[e],n=this.applyInner(e),r=null;;){for(var o=!1,i=0;i<this.config.plugins.length;i++){var s=this.config.plugins[i];if(s.spec.appendTransaction){var a=r?r[i].n:0,l=r?r[i].state:this,c=a<t.length&&s.spec.appendTransaction.call(s,a?t.slice(a):t,l,n);if(c&&n.filterTransaction(c,i)){if(c.setMeta("appendedTransaction",e),!r){r=[];for(var u=0;u<this.config.plugins.length;u++)r.push(u<i?{state:n,n:t.length}:{state:this,n:0})}t.push(c),n=n.applyInner(c),o=!0}r&&(r[i]={state:n,n:t.length})}}if(!o)return{state:n,transactions:t}}}},{key:"applyInner",value:function(t){if(!t.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");for(var n=new e(this.config),r=this.config.fields,o=0;o<r.length;o++){var i=r[o];n[i.name]=i.apply(t,this[i.name],this,n)}return n}},{key:"tr",get:function(){return new I(this)}},{key:"reconfigure",value:function(t){for(var n=new F(this.schema,t.plugins),r=n.fields,o=new e(n),i=0;i<r.length;i++){var s=r[i].name;o[s]=this.hasOwnProperty(s)?this[s]:r[i].init(t,o)}return o}},{key:"toJSON",value:function(e){var t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map((function(e){return e.toJSON()}))),e&&"object"==r(e))for(var n in e){if("doc"==n||"selection"==n)throw new RangeError("The JSON fields `doc` and `selection` are reserved");var o=e[n],i=o.spec.state;i&&i.toJSON&&(t[n]=i.toJSON.call(o,this[o.key]))}return t}}],[{key:"create",value:function(t){for(var n=new F(t.doc?t.doc.type.schema:t.schema,t.plugins),r=new e(n),o=0;o<n.fields.length;o++)r[n.fields[o].name]=n.fields[o].init(t,r);return r}},{key:"fromJSON",value:function(t,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!t.schema)throw new RangeError("Required config field 'schema' missing");var o=new F(t.schema,t.plugins),i=new e(o);return o.fields.forEach((function(e){if("doc"==e.name)i.doc=g.Node.fromJSON(t.schema,n.doc);else if("selection"==e.name)i.selection=b.fromJSON(i.doc,n.selection);else if("storedMarks"==e.name)n.storedMarks&&(i.storedMarks=n.storedMarks.map(t.schema.markFromJSON));else{if(r)for(var o in r){var s=r[o],a=s.spec.state;if(s.key==e.name&&a&&a.fromJSON&&Object.prototype.hasOwnProperty.call(n,o))return void(i[e.name]=a.fromJSON.call(s,t,n[o],i))}i[e.name]=e.init(t,i)}})),i}}]),e}();function j(e,t,n){for(var r in e){var o=e[r];o instanceof Function?o=o.bind(t):"handleDOMEvents"==r&&(o=j(o,t,{})),n[r]=o}return n}var L=function(){function e(t){p(this,e),this.spec=t,this.props={},t.props&&j(t.props,this,this.props),this.key=t.key?t.key.key:q("plugin")}return m(e,[{key:"getState",value:function(e){return e[this.key]}}]),e}(),V=Object.create(null);function q(e){return e in V?e+"$"+ ++V[e]:(V[e]=0,e+"$")}var H=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"key";p(this,e),this.key=q(t)}return m(e,[{key:"get",value:function(e){return e.config.pluginsByKey[this.key]}},{key:"getState",value:function(e){return e[this.key]}}]),e}();t.AllSelection=M,t.EditorState=B,t.NodeSelection=_,t.Plugin=L,t.PluginKey=H,t.Selection=b,t.SelectionRange=w,t.TextSelection=S,t.Transaction=I},1640:function(e,t,n){"use strict";var r=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,a=(e,t)=>{for(var n in t)r(e,n,{get:t[n],enumerable:!0})},l=(e,t,n,a)=>{if(t&&"object"===typeof t||"function"===typeof t)for(let l of i(t))s.call(e,l)||l===n||r(e,l,{get:()=>t[l],enumerable:!(a=o(t,l))||a.enumerable});return e},c=e=>l(r({},"__esModule",{value:!0}),e),u={};a(u,{CellBookmark:()=>q,CellSelection:()=>V,ResizeState:()=>Te,TableMap:()=>v,TableView:()=>_e,__clipCells:()=>ae,__insertCells:()=>de,__pastedCells:()=>oe,addColSpan:()=>j,addColumn:()=>We,addColumnAfter:()=>Ue,addColumnBefore:()=>Je,addRow:()=>Ze,addRowAfter:()=>Qe,addRowBefore:()=>Ye,cellAround:()=>E,colCount:()=>$,columnIsHeader:()=>L,columnResizing:()=>Ee,columnResizingPluginKey:()=>Me,deleteColumn:()=>Ge,deleteRow:()=>tt,deleteTable:()=>gt,findCell:()=>P,fixTables:()=>Z,fixTablesKey:()=>G,goToNextCell:()=>mt,handlePaste:()=>ye,inSameTable:()=>z,isInTable:()=>A,mergeCells:()=>ot,moveCellForward:()=>I,nextCell:()=>F,pointsAtCell:()=>D,removeColSpan:()=>B,removeColumn:()=>Ke,removeRow:()=>et,rowIsHeader:()=>Xe,selectedRect:()=>He,selectionCell:()=>N,setCellAttr:()=>at,splitCell:()=>it,splitCellWithType:()=>st,tableEditing:()=>vt,tableEditingKey:()=>M,tableNodeTypes:()=>O,tableNodes:()=>_,toggleHeader:()=>ut,toggleHeaderCell:()=>pt,toggleHeaderColumn:()=>ht,toggleHeaderRow:()=>dt,updateColumnsOnResize:()=>Oe}),e.exports=c(u);var d,h,p=n(2391),f=n(9443),m=n(2391),g=n(9222);if("undefined"!=typeof WeakMap){let e=new WeakMap;d=t=>e.get(t),h=(t,n)=>(e.set(t,n),n)}else{const e=[],t=10;let n=0;d=t=>{for(let n=0;n<e.length;n+=2)if(e[n]==t)return e[n+1]},h=(r,o)=>(n==t&&(n=0),e[n++]=r,e[n++]=o)}var v=class{constructor(e,t,n,r){this.width=e,this.height=t,this.map=n,this.problems=r}findCell(e){for(let t=0;t<this.map.length;t++){const n=this.map[t];if(n!=e)continue;const r=t%this.width,o=t/this.width|0;let i=r+1,s=o+1;for(let e=1;i<this.width&&this.map[t+e]==n;e++)i++;for(let e=1;s<this.height&&this.map[t+this.width*e]==n;e++)s++;return{left:r,top:o,right:i,bottom:s}}throw new RangeError(`No cell with offset ${e} found`)}colCount(e){for(let t=0;t<this.map.length;t++)if(this.map[t]==e)return t%this.width;throw new RangeError(`No cell with offset ${e} found`)}nextCell(e,t,n){const{left:r,right:o,top:i,bottom:s}=this.findCell(e);return"horiz"==t?(n<0?0==r:o==this.width)?null:this.map[i*this.width+(n<0?r-1:o)]:(n<0?0==i:s==this.height)?null:this.map[r+this.width*(n<0?i-1:s)]}rectBetween(e,t){const{left:n,right:r,top:o,bottom:i}=this.findCell(e),{left:s,right:a,top:l,bottom:c}=this.findCell(t);return{left:Math.min(n,s),top:Math.min(o,l),right:Math.max(r,a),bottom:Math.max(i,c)}}cellsInRect(e){const t=[],n={};for(let r=e.top;r<e.bottom;r++)for(let o=e.left;o<e.right;o++){const i=r*this.width+o,s=this.map[i];n[s]||(n[s]=!0,o==e.left&&o&&this.map[i-1]==s||r==e.top&&r&&this.map[i-this.width]==s||t.push(s))}return t}positionAt(e,t,n){for(let r=0,o=0;;r++){const i=o+n.child(r).nodeSize;if(r==e){let n=t+e*this.width;const r=(e+1)*this.width;while(n<r&&this.map[n]<o)n++;return n==r?i-1:this.map[n]}o=i}}static get(e){return d(e)||h(e,y(e))}};function y(e){if("table"!=e.type.spec.tableRole)throw new RangeError("Not a table node: "+e.type.name);const t=b(e),n=e.childCount,r=[];let o=0,i=null;const s=[];for(let c=0,u=t*n;c<u;c++)r[c]=0;for(let c=0,u=0;c<n;c++){const a=e.child(c);u++;for(let e=0;;e++){while(o<r.length&&0!=r[o])o++;if(e==a.childCount)break;const l=a.child(e),{colspan:d,rowspan:h,colwidth:p}=l.attrs;for(let e=0;e<h;e++){if(e+c>=n){(i||(i=[])).push({type:"overlong_rowspan",pos:u,n:h-e});break}const a=o+e*t;for(let e=0;e<d;e++){0==r[a+e]?r[a+e]=u:(i||(i=[])).push({type:"collision",row:c,pos:u,n:d-e});const n=p&&p[e];if(n){const r=(a+e)%t*2,o=s[r];null==o||o!=n&&1==s[r+1]?(s[r]=n,s[r+1]=1):o==n&&s[r+1]++}}}o+=d,u+=l.nodeSize}const l=(c+1)*t;let d=0;while(o<l)0==r[o++]&&d++;d&&(i||(i=[])).push({type:"missing",row:c,n:d}),u++}const a=new v(t,n,r,i);let l=!1;for(let c=0;!l&&c<s.length;c+=2)null!=s[c]&&s[c+1]<n&&(l=!0);return l&&w(a,s,e),a}function b(e){let t=-1,n=!1;for(let r=0;r<e.childCount;r++){const o=e.child(r);let i=0;if(n)for(let t=0;t<r;t++){const n=e.child(t);for(let e=0;e<n.childCount;e++){const o=n.child(e);t+o.attrs.rowspan>r&&(i+=o.attrs.colspan)}}for(let e=0;e<o.childCount;e++){const t=o.child(e);i+=t.attrs.colspan,t.attrs.rowspan>1&&(n=!0)}-1==t?t=i:t!=i&&(t=Math.max(t,i))}return t}function w(e,t,n){e.problems||(e.problems=[]);const r={};for(let o=0;o<e.map.length;o++){const i=e.map[o];if(r[i])continue;r[i]=!0;const s=n.nodeAt(i);if(!s)throw new RangeError(`No cell with offset ${i} found`);let a=null;const l=s.attrs;for(let n=0;n<l.colspan;n++){const r=(o+n)%e.width,i=t[2*r];null==i||l.colwidth&&l.colwidth[n]==i||((a||(a=k(l)))[n]=i)}a&&e.problems.unshift({type:"colwidth mismatch",pos:i,colwidth:a})}}function k(e){if(e.colwidth)return e.colwidth.slice();const t=[];for(let n=0;n<e.colspan;n++)t.push(0);return t}var x=n(2391);function S(e,t){if("string"===typeof e)return{};const n=e.getAttribute("data-colwidth"),r=n&&/^\d+(,\d+)*$/.test(n)?n.split(",").map((e=>Number(e))):null,o=Number(e.getAttribute("colspan")||1),i={colspan:o,rowspan:Number(e.getAttribute("rowspan")||1),colwidth:r&&r.length==o?r:null};for(const s in t){const n=t[s].getFromDOM,r=n&&n(e);null!=r&&(i[s]=r)}return i}function C(e,t){const n={};1!=e.attrs.colspan&&(n.colspan=e.attrs.colspan),1!=e.attrs.rowspan&&(n.rowspan=e.attrs.rowspan),e.attrs.colwidth&&(n["data-colwidth"]=e.attrs.colwidth.join(","));for(const r in t){const o=t[r].setDOMAttr;o&&o(e.attrs[r],n)}return n}function _(e){const t=e.cellAttributes||{},n={colspan:{default:1},rowspan:{default:1},colwidth:{default:null}};for(const r in t)n[r]={default:t[r].default};return{table:{content:"table_row+",tableRole:"table",isolating:!0,group:e.tableGroup,parseDOM:[{tag:"table"}],toDOM(){return["table",["tbody",0]]}},table_row:{content:"(table_cell | table_header)*",tableRole:"row",parseDOM:[{tag:"tr"}],toDOM(){return["tr",0]}},table_cell:{content:e.cellContent,attrs:n,tableRole:"cell",isolating:!0,parseDOM:[{tag:"td",getAttrs:e=>S(e,t)}],toDOM(e){return["td",C(e,t),0]}},table_header:{content:e.cellContent,attrs:n,tableRole:"header_cell",isolating:!0,parseDOM:[{tag:"th",getAttrs:e=>S(e,t)}],toDOM(e){return["th",C(e,t),0]}}}}function O(e){let t=e.cached.tableNodeTypes;if(!t){t=e.cached.tableNodeTypes={};for(const n in e.nodes){const r=e.nodes[n],o=r.spec.tableRole;o&&(t[o]=r)}}return t}var M=new x.PluginKey("selectingCells");function E(e){for(let t=e.depth-1;t>0;t--)if("row"==e.node(t).type.spec.tableRole)return e.node(0).resolve(e.before(t+1));return null}function T(e){for(let t=e.depth;t>0;t--){const n=e.node(t).type.spec.tableRole;if("cell"===n||"header_cell"===n)return e.node(t)}return null}function A(e){const t=e.selection.$head;for(let n=t.depth;n>0;n--)if("row"==t.node(n).type.spec.tableRole)return!0;return!1}function N(e){const t=e.selection;if("$anchorCell"in t&&t.$anchorCell)return t.$anchorCell.pos>t.$headCell.pos?t.$anchorCell:t.$headCell;if("node"in t&&t.node&&"cell"==t.node.type.spec.tableRole)return t.$anchor;const n=E(t.$head)||R(t.$head);if(n)return n;throw new RangeError(`No cell found around position ${t.head}`)}function R(e){for(let t=e.nodeAfter,n=e.pos;t;t=t.firstChild,n++){const r=t.type.spec.tableRole;if("cell"==r||"header_cell"==r)return e.doc.resolve(n)}for(let t=e.nodeBefore,n=e.pos;t;t=t.lastChild,n--){const r=t.type.spec.tableRole;if("cell"==r||"header_cell"==r)return e.doc.resolve(n-t.nodeSize)}}function D(e){return"row"==e.parent.type.spec.tableRole&&!!e.nodeAfter}function I(e){return e.node(0).resolve(e.pos+e.nodeAfter.nodeSize)}function z(e,t){return e.depth==t.depth&&e.pos>=t.start(-1)&&e.pos<=t.end(-1)}function P(e){return v.get(e.node(-1)).findCell(e.pos-e.start(-1))}function $(e){return v.get(e.node(-1)).colCount(e.pos-e.start(-1))}function F(e,t,n){const r=e.node(-1),o=v.get(r),i=e.start(-1),s=o.nextCell(e.pos-i,t,n);return null==s?null:e.node(0).resolve(i+s)}function B(e,t,n=1){const r={...e,colspan:e.colspan-n};return r.colwidth&&(r.colwidth=r.colwidth.slice(),r.colwidth.splice(t,n),r.colwidth.some((e=>e>0))||(r.colwidth=null)),r}function j(e,t,n=1){const r={...e,colspan:e.colspan+n};if(r.colwidth){r.colwidth=r.colwidth.slice();for(let e=0;e<n;e++)r.colwidth.splice(t,0,0)}return r}function L(e,t,n){const r=O(t.type.schema).header_cell;for(let o=0;o<e.height;o++)if(t.nodeAt(e.map[n+o*e.width]).type!=r)return!1;return!0}var V=class extends m.Selection{constructor(e,t=e){const n=e.node(-1),r=v.get(n),o=e.start(-1),i=r.rectBetween(e.pos-o,t.pos-o),s=e.node(0),a=r.cellsInRect(i).filter((e=>e!=t.pos-o));a.unshift(t.pos-o);const l=a.map((e=>{const t=n.nodeAt(e);if(!t)throw RangeError(`No cell with offset ${e} found`);const r=o+e+1;return new m.SelectionRange(s.resolve(r),s.resolve(r+t.content.size))}));super(l[0].$from,l[0].$to,l),this.$anchorCell=e,this.$headCell=t}map(e,t){const n=e.resolve(t.map(this.$anchorCell.pos)),r=e.resolve(t.map(this.$headCell.pos));if(D(n)&&D(r)&&z(n,r)){const e=this.$anchorCell.node(-1)!=n.node(-1);return e&&this.isRowSelection()?V.rowSelection(n,r):e&&this.isColSelection()?V.colSelection(n,r):new V(n,r)}return m.TextSelection.between(n,r)}content(){const e=this.$anchorCell.node(-1),t=v.get(e),n=this.$anchorCell.start(-1),r=t.rectBetween(this.$anchorCell.pos-n,this.$headCell.pos-n),o={},i=[];for(let a=r.top;a<r.bottom;a++){const n=[];for(let i=a*t.width+r.left,s=r.left;s<r.right;s++,i++){const s=t.map[i];if(o[s])continue;o[s]=!0;const a=t.findCell(s);let l=e.nodeAt(s);if(!l)throw RangeError(`No cell with offset ${s} found`);const c=r.left-a.left,u=a.right-r.right;if(c>0||u>0){let e=l.attrs;if(c>0&&(e=B(e,0,c)),u>0&&(e=B(e,e.colspan-u,u)),a.left<r.left){if(l=l.type.createAndFill(e),!l)throw RangeError(`Could not create cell with attrs ${JSON.stringify(e)}`)}else l=l.type.create(e,l.content)}if(a.top<r.top||a.bottom>r.bottom){const e={...l.attrs,rowspan:Math.min(a.bottom,r.bottom)-Math.max(a.top,r.top)};l=a.top<r.top?l.type.createAndFill(e):l.type.create(e,l.content)}n.push(l)}i.push(e.child(a).copy(f.Fragment.from(n)))}const s=this.isColSelection()&&this.isRowSelection()?e:i;return new f.Slice(f.Fragment.from(s),1,1)}replace(e,t=f.Slice.empty){const n=e.steps.length,r=this.ranges;for(let i=0;i<r.length;i++){const{$from:o,$to:s}=r[i],a=e.mapping.slice(n);e.replace(a.map(o.pos),a.map(s.pos),i?f.Slice.empty:t)}const o=m.Selection.findFrom(e.doc.resolve(e.mapping.slice(n).map(this.to)),-1);o&&e.setSelection(o)}replaceWith(e,t){this.replace(e,new f.Slice(f.Fragment.from(t),0,0))}forEachCell(e){const t=this.$anchorCell.node(-1),n=v.get(t),r=this.$anchorCell.start(-1),o=n.cellsInRect(n.rectBetween(this.$anchorCell.pos-r,this.$headCell.pos-r));for(let i=0;i<o.length;i++)e(t.nodeAt(o[i]),r+o[i])}isColSelection(){const e=this.$anchorCell.index(-1),t=this.$headCell.index(-1);if(Math.min(e,t)>0)return!1;const n=e+this.$anchorCell.nodeAfter.attrs.rowspan,r=t+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(n,r)==this.$headCell.node(-1).childCount}static colSelection(e,t=e){const n=e.node(-1),r=v.get(n),o=e.start(-1),i=r.findCell(e.pos-o),s=r.findCell(t.pos-o),a=e.node(0);return i.top<=s.top?(i.top>0&&(e=a.resolve(o+r.map[i.left])),s.bottom<r.height&&(t=a.resolve(o+r.map[r.width*(r.height-1)+s.right-1]))):(s.top>0&&(t=a.resolve(o+r.map[s.left])),i.bottom<r.height&&(e=a.resolve(o+r.map[r.width*(r.height-1)+i.right-1]))),new V(e,t)}isRowSelection(){const e=this.$anchorCell.node(-1),t=v.get(e),n=this.$anchorCell.start(-1),r=t.colCount(this.$anchorCell.pos-n),o=t.colCount(this.$headCell.pos-n);if(Math.min(r,o)>0)return!1;const i=r+this.$anchorCell.nodeAfter.attrs.colspan,s=o+this.$headCell.nodeAfter.attrs.colspan;return Math.max(i,s)==t.width}eq(e){return e instanceof V&&e.$anchorCell.pos==this.$anchorCell.pos&&e.$headCell.pos==this.$headCell.pos}static rowSelection(e,t=e){const n=e.node(-1),r=v.get(n),o=e.start(-1),i=r.findCell(e.pos-o),s=r.findCell(t.pos-o),a=e.node(0);return i.left<=s.left?(i.left>0&&(e=a.resolve(o+r.map[i.top*r.width])),s.right<r.width&&(t=a.resolve(o+r.map[r.width*(s.top+1)-1]))):(s.left>0&&(t=a.resolve(o+r.map[s.top*r.width])),i.right<r.width&&(e=a.resolve(o+r.map[r.width*(i.top+1)-1]))),new V(e,t)}toJSON(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}}static fromJSON(e,t){return new V(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,n=t){return new V(e.resolve(t),e.resolve(n))}getBookmark(){return new q(this.$anchorCell.pos,this.$headCell.pos)}};V.prototype.visible=!1,m.Selection.jsonID("cell",V);var q=class{constructor(e,t){this.anchor=e,this.head=t}map(e){return new q(e.map(this.anchor),e.map(this.head))}resolve(e){const t=e.resolve(this.anchor),n=e.resolve(this.head);return"row"==t.parent.type.spec.tableRole&&"row"==n.parent.type.spec.tableRole&&t.index()<t.parent.childCount&&n.index()<n.parent.childCount&&z(t,n)?new V(t,n):m.Selection.near(n,1)}};function H(e){if(!(e.selection instanceof V))return null;const t=[];return e.selection.forEachCell(((e,n)=>{t.push(g.Decoration.node(n,n+e.nodeSize,{class:"selectedCell"}))})),g.DecorationSet.create(e.doc,t)}function W({$from:e,$to:t}){if(e.pos==t.pos||e.pos<e.pos-6)return!1;let n=e.pos,r=t.pos,o=e.depth;for(;o>=0;o--,n++)if(e.after(o+1)<e.end(o))break;for(let i=t.depth;i>=0;i--,r--)if(t.before(i+1)>t.start(i))break;return n==r&&/row|table/.test(e.node(o).type.spec.tableRole)}function J({$from:e,$to:t}){let n,r;for(let o=e.depth;o>0;o--){const t=e.node(o);if("cell"===t.type.spec.tableRole||"header_cell"===t.type.spec.tableRole){n=t;break}}for(let o=t.depth;o>0;o--){const e=t.node(o);if("cell"===e.type.spec.tableRole||"header_cell"===e.type.spec.tableRole){r=e;break}}return n!==r&&0===t.parentOffset}function U(e,t,n){const r=(t||e).selection,o=(t||e).doc;let i,s;if(r instanceof m.NodeSelection&&(s=r.node.type.spec.tableRole)){if("cell"==s||"header_cell"==s)i=V.create(o,r.from);else if("row"==s){const e=o.resolve(r.from+1);i=V.rowSelection(e,e)}else if(!n){const e=v.get(r.node),t=r.from+1,n=t+e.map[e.width*e.height-1];i=V.create(o,t+1,n)}}else r instanceof m.TextSelection&&W(r)?i=m.TextSelection.create(o,r.from):r instanceof m.TextSelection&&J(r)&&(i=m.TextSelection.create(o,r.$from.start(),r.$from.end()));return i&&(t||(t=e.tr)).setSelection(i),t}var K=n(2391),G=new K.PluginKey("fix-tables");function X(e,t,n,r){const o=e.childCount,i=t.childCount;e:for(let s=0,a=0;s<i;s++){const i=t.child(s);for(let t=a,r=Math.min(o,s+3);t<r;t++)if(e.child(t)==i){a=t+1,n+=i.nodeSize;continue e}r(i,n),a<o&&e.child(a).sameMarkup(i)?X(e.child(a),i,n+1,r):i.nodesBetween(0,i.content.size,r,n+1),n+=i.nodeSize}}function Z(e,t){let n;const r=(t,r)=>{"table"==t.type.spec.tableRole&&(n=Y(e,t,r,n))};return t?t.doc!=e.doc&&X(t.doc,e.doc,0,r):e.doc.descendants(r),n}function Y(e,t,n,r){const o=v.get(t);if(!o.problems)return r;r||(r=e.tr);const i=[];for(let l=0;l<o.height;l++)i.push(0);for(let l=0;l<o.problems.length;l++){const e=o.problems[l];if("collision"==e.type){const o=t.nodeAt(e.pos);if(!o)continue;const s=o.attrs;for(let t=0;t<s.rowspan;t++)i[e.row+t]+=e.n;r.setNodeMarkup(r.mapping.map(n+1+e.pos),null,B(s,s.colspan-e.n,e.n))}else if("missing"==e.type)i[e.row]+=e.n;else if("overlong_rowspan"==e.type){const o=t.nodeAt(e.pos);if(!o)continue;r.setNodeMarkup(r.mapping.map(n+1+e.pos),null,{...o.attrs,rowspan:o.attrs.rowspan-e.n})}else if("colwidth mismatch"==e.type){const o=t.nodeAt(e.pos);if(!o)continue;r.setNodeMarkup(r.mapping.map(n+1+e.pos),null,{...o.attrs,colwidth:e.colwidth})}}let s,a;for(let l=0;l<i.length;l++)i[l]&&(null==s&&(s=l),a=l);for(let l=0,c=n+1;l<o.height;l++){const n=t.child(l),o=c+n.nodeSize,u=i[l];if(u>0){let t="cell";n.firstChild&&(t=n.firstChild.type.spec.tableRole);const i=[];for(let n=0;n<u;n++){const n=O(e.schema)[t].createAndFill();n&&i.push(n)}const d=0!=l&&s!=l-1||a!=l?o-1:c+1;r.insert(r.mapping.map(d),i)}c=o}return r.setMeta(G,{fixTables:!0})}var Q=n(9443),ee=n(2391),te=n(7354),ne=n(9443),re=n(2843);function oe(e){if(!e.size)return null;let{content:t,openStart:n,openEnd:r}=e;while(1==t.childCount&&(n>0&&r>0||"table"==t.child(0).type.spec.tableRole))n--,r--,t=t.child(0).content;const o=t.child(0),i=o.type.spec.tableRole,s=o.type.schema,a=[];if("row"==i)for(let l=0;l<t.childCount;l++){let e=t.child(l).content;const o=l?0:Math.max(0,n-1),i=l<t.childCount-1?0:Math.max(0,r-1);(o||i)&&(e=se(O(s).row,new ne.Slice(e,o,i)).content),a.push(e)}else{if("cell"!=i&&"header_cell"!=i)return null;a.push(n||r?se(O(s).row,new ne.Slice(t,n,r)).content:t)}return ie(s,a)}function ie(e,t){const n=[];for(let o=0;o<t.length;o++){const e=t[o];for(let t=e.childCount-1;t>=0;t--){const{rowspan:r,colspan:i}=e.child(t).attrs;for(let e=o;e<o+r;e++)n[e]=(n[e]||0)+i}}let r=0;for(let o=0;o<n.length;o++)r=Math.max(r,n[o]);for(let o=0;o<n.length;o++)if(o>=t.length&&t.push(ne.Fragment.empty),n[o]<r){const i=O(e).cell.createAndFill(),s=[];for(let e=n[o];e<r;e++)s.push(i);t[o]=t[o].append(ne.Fragment.from(s))}return{height:t.length,width:r,rows:t}}function se(e,t){const n=e.createAndFill(),r=new re.Transform(n).replace(0,n.content.size,t);return r.doc}function ae({width:e,height:t,rows:n},r,o){if(e!=r){const t=[],o=[];for(let e=0;e<n.length;e++){const i=n[e],s=[];for(let n=t[e]||0,o=0;n<r;o++){let a=i.child(o%i.childCount);n+a.attrs.colspan>r&&(a=a.type.createChecked(B(a.attrs,a.attrs.colspan,n+a.attrs.colspan-r),a.content)),s.push(a),n+=a.attrs.colspan;for(let n=1;n<a.attrs.rowspan;n++)t[e+n]=(t[e+n]||0)+a.attrs.colspan}o.push(ne.Fragment.from(s))}n=o,e=r}if(t!=o){const e=[];for(let r=0,i=0;r<o;r++,i++){const s=[],a=n[i%t];for(let e=0;e<a.childCount;e++){let t=a.child(e);r+t.attrs.rowspan>o&&(t=t.type.create({...t.attrs,rowspan:Math.max(1,o-t.attrs.rowspan)},t.content)),s.push(t)}e.push(ne.Fragment.from(s))}n=e,t=o}return{width:e,height:t,rows:n}}function le(e,t,n,r,o,i,s){const a=e.doc.type.schema,l=O(a);let c,u;if(o>t.width)for(let d=0,h=0;d<t.height;d++){const i=n.child(d);h+=i.nodeSize;const a=[];let p;p=null==i.lastChild||i.lastChild.type==l.cell?c||(c=l.cell.createAndFill()):u||(u=l.header_cell.createAndFill());for(let e=t.width;e<o;e++)a.push(p);e.insert(e.mapping.slice(s).map(h-1+r),a)}if(i>t.height){const a=[];for(let e=0,r=(t.height-1)*t.width;e<Math.max(t.width,o);e++){const o=!(e>=t.width)&&n.nodeAt(t.map[r+e]).type==l.header_cell;a.push(o?u||(u=l.header_cell.createAndFill()):c||(c=l.cell.createAndFill()))}const d=l.row.create(null,ne.Fragment.from(a)),h=[];for(let e=t.height;e<i;e++)h.push(d);e.insert(e.mapping.slice(s).map(r+n.nodeSize-2),h)}return!(!c&&!u)}function ce(e,t,n,r,o,i,s,a){if(0==s||s==t.height)return!1;let l=!1;for(let c=o;c<i;c++){const o=s*t.width+c,i=t.map[o];if(t.map[o-t.width]==i){l=!0;const o=n.nodeAt(i),{top:u,left:d}=t.findCell(i);e.setNodeMarkup(e.mapping.slice(a).map(i+r),null,{...o.attrs,rowspan:s-u}),e.insert(e.mapping.slice(a).map(t.positionAt(s,d,n)),o.type.createAndFill({...o.attrs,rowspan:u+o.attrs.rowspan-s})),c+=o.attrs.colspan-1}}return l}function ue(e,t,n,r,o,i,s,a){if(0==s||s==t.width)return!1;let l=!1;for(let c=o;c<i;c++){const o=c*t.width+s,i=t.map[o];if(t.map[o-1]==i){l=!0;const o=n.nodeAt(i),u=t.colCount(i),d=e.mapping.slice(a).map(i+r);e.setNodeMarkup(d,null,B(o.attrs,s-u,o.attrs.colspan-(s-u))),e.insert(d+o.nodeSize,o.type.createAndFill(B(o.attrs,0,s-u))),c+=o.attrs.rowspan-1}}return l}function de(e,t,n,r,o){let i=n?e.doc.nodeAt(n-1):e.doc;if(!i)throw new Error("No table found");let s=v.get(i);const{top:a,left:l}=r,c=l+o.width,u=a+o.height,d=e.tr;let h=0;function p(){if(i=n?d.doc.nodeAt(n-1):d.doc,!i)throw new Error("No table found");s=v.get(i),h=d.mapping.maps.length}le(d,s,i,n,c,u,h)&&p(),ce(d,s,i,n,l,c,a,h)&&p(),ce(d,s,i,n,l,c,u,h)&&p(),ue(d,s,i,n,a,u,l,h)&&p(),ue(d,s,i,n,a,u,c,h)&&p();for(let f=a;f<u;f++){const e=s.positionAt(f,l,i),t=s.positionAt(f,c,i);d.replace(d.mapping.slice(h).map(e+n),d.mapping.slice(h).map(t+n),new ne.Slice(o.rows[f-a],0,0))}p(),d.setSelection(new V(d.doc.resolve(n+s.positionAt(a,l,i)),d.doc.resolve(n+s.positionAt(u-1,c-1,i)))),t(d)}var he=(0,te.keydownHandler)({ArrowLeft:fe("horiz",-1),ArrowRight:fe("horiz",1),ArrowUp:fe("vert",-1),ArrowDown:fe("vert",1),"Shift-ArrowLeft":me("horiz",-1),"Shift-ArrowRight":me("horiz",1),"Shift-ArrowUp":me("vert",-1),"Shift-ArrowDown":me("vert",1),Backspace:ge,"Mod-Backspace":ge,Delete:ge,"Mod-Delete":ge});function pe(e,t,n){return!n.eq(e.selection)&&(t&&t(e.tr.setSelection(n).scrollIntoView()),!0)}function fe(e,t){return(n,r,o)=>{if(!o)return!1;const i=n.selection;if(i instanceof V)return pe(n,r,ee.Selection.near(i.$headCell,t));if("horiz"!=e&&!i.empty)return!1;const s=we(o,e,t);if(null==s)return!1;if("horiz"==e)return pe(n,r,ee.Selection.near(n.doc.resolve(i.head+t),t));{const o=n.doc.resolve(s),i=F(o,e,t);let a;return a=i?ee.Selection.near(i,1):t<0?ee.Selection.near(n.doc.resolve(o.before(-1)),-1):ee.Selection.near(n.doc.resolve(o.after(-1)),1),pe(n,r,a)}}}function me(e,t){return(n,r,o)=>{if(!o)return!1;const i=n.selection;let s;if(i instanceof V)s=i;else{const r=we(o,e,t);if(null==r)return!1;s=new V(n.doc.resolve(r))}const a=F(s.$headCell,e,t);return!!a&&pe(n,r,new V(s.$anchorCell,a))}}function ge(e,t){const n=e.selection;if(!(n instanceof V))return!1;if(t){const r=e.tr,o=O(e.schema).cell.createAndFill().content;n.forEachCell(((e,t)=>{e.content.eq(o)||r.replace(r.mapping.map(t+1),r.mapping.map(t+e.nodeSize-1),new Q.Slice(o,0,0))})),r.docChanged&&t(r)}return!0}function ve(e,t){const n=e.state.doc,r=E(n.resolve(t));return!!r&&(e.dispatch(e.state.tr.setSelection(new V(r))),!0)}function ye(e,t,n){if(!A(e.state))return!1;let r=oe(n);const o=e.state.selection;if(o instanceof V){r||(r={width:1,height:1,rows:[Q.Fragment.from(se(O(e.state.schema).cell,n))]});const t=o.$anchorCell.node(-1),i=o.$anchorCell.start(-1),s=v.get(t).rectBetween(o.$anchorCell.pos-i,o.$headCell.pos-i);return r=ae(r,s.right-s.left,s.bottom-s.top),de(e.state,e.dispatch,i,s,r),!0}if(r){const t=N(e.state),n=t.start(-1);return de(e.state,e.dispatch,n,v.get(t.node(-1)).findCell(t.pos-n),r),!0}return!1}function be(e,t){var n;if(t.ctrlKey||t.metaKey)return;const r=ke(e,t.target);let o;if(t.shiftKey&&e.state.selection instanceof V)i(e.state.selection.$anchorCell,t),t.preventDefault();else if(t.shiftKey&&r&&null!=(o=E(e.state.selection.$anchor))&&(null==(n=xe(e,t))?void 0:n.pos)!=o.pos)i(o,t),t.preventDefault();else if(!r)return;function i(t,n){let r=xe(e,n);const o=null==M.getState(e.state);if(!r||!z(t,r)){if(!o)return;r=t}const i=new V(t,r);if(o||!e.state.selection.eq(i)){const n=e.state.tr.setSelection(i);o&&n.setMeta(M,t.pos),e.dispatch(n)}}function s(){e.root.removeEventListener("mouseup",s),e.root.removeEventListener("dragstart",s),e.root.removeEventListener("mousemove",a),null!=M.getState(e.state)&&e.dispatch(e.state.tr.setMeta(M,-1))}function a(n){const o=n,a=M.getState(e.state);let l;if(null!=a)l=e.state.doc.resolve(a);else if(ke(e,o.target)!=r&&(l=xe(e,t),!l))return s();l&&i(l,o)}e.root.addEventListener("mouseup",s),e.root.addEventListener("dragstart",s),e.root.addEventListener("mousemove",a)}function we(e,t,n){if(!(e.state.selection instanceof ee.TextSelection))return null;const{$head:r}=e.state.selection;for(let o=r.depth-1;o>=0;o--){const i=r.node(o),s=n<0?r.index(o):r.indexAfter(o);if(s!=(n<0?0:i.childCount))return null;if("cell"==i.type.spec.tableRole||"header_cell"==i.type.spec.tableRole){const i=r.before(o),s="vert"==t?n>0?"down":"up":n>0?"right":"left";return e.endOfTextblock(s)?i:null}}return null}function ke(e,t){for(;t&&t!=e.dom;t=t.parentNode)if("TD"==t.nodeName||"TH"==t.nodeName)return t;return null}function xe(e,t){const n=e.posAtCoords({left:t.clientX,top:t.clientY});return n&&n?E(e.state.doc.resolve(n.pos)):null}var Se=n(2391),Ce=n(9222),_e=class{constructor(e,t){this.node=e,this.cellMinWidth=t,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.colgroup=this.table.appendChild(document.createElement("colgroup")),Oe(e,this.colgroup,this.table,t),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(e){return e.type==this.node.type&&(this.node=e,Oe(e,this.colgroup,this.table,this.cellMinWidth),!0)}ignoreMutation(e){return"attributes"==e.type&&(e.target==this.table||this.colgroup.contains(e.target))}};function Oe(e,t,n,r,o,i){var s;let a=0,l=!0,c=t.firstChild;const u=e.firstChild;if(u){for(let e=0,n=0;e<u.childCount;e++){const{colspan:s,colwidth:d}=u.child(e).attrs;for(let e=0;e<s;e++,n++){const s=o==n?i:d&&d[e],u=s?s+"px":"";a+=s||r,s||(l=!1),c?(c.style.width!=u&&(c.style.width=u),c=c.nextSibling):t.appendChild(document.createElement("col")).style.width=u}}while(c){const e=c.nextSibling;null==(s=c.parentNode)||s.removeChild(c),c=e}l?(n.style.width=a+"px",n.style.minWidth=""):(n.style.width="",n.style.minWidth=a+"px")}}var Me=new Se.PluginKey("tableColumnResizing");function Ee({handleWidth:e=5,cellMinWidth:t=25,View:n=_e,lastColumnResizable:r=!0}={}){const o=new Se.Plugin({key:Me,state:{init(e,r){return o.spec.props.nodeViews[O(r.schema).table.name]=(e,r)=>new n(e,t,r),new Te(-1,!1)},apply(e,t){return t.apply(e)}},props:{attributes:e=>{const t=Me.getState(e);return t&&t.activeHandle>-1?{class:"resize-cursor"}:{}},handleDOMEvents:{mousemove:(n,o)=>{Ae(n,o,e,t,r)},mouseleave:e=>{Ne(e)},mousedown:(e,n)=>{Re(e,n,t)}},decorations:e=>{const t=Me.getState(e);if(t&&t.activeHandle>-1)return Le(e,t.activeHandle)},nodeViews:{}}});return o}var Te=class{constructor(e,t){this.activeHandle=e,this.dragging=t}apply(e){const t=this,n=e.getMeta(Me);if(n&&null!=n.setHandle)return new Te(n.setHandle,!1);if(n&&void 0!==n.setDragging)return new Te(t.activeHandle,n.setDragging);if(t.activeHandle>-1&&e.docChanged){let n=e.mapping.map(t.activeHandle,-1);return D(e.doc.resolve(n))||(n=-1),new Te(n,t.dragging)}return t}};function Ae(e,t,n,r,o){const i=Me.getState(e.state);if(i&&!i.dragging){const r=Ie(t.target);let s=-1;if(r){const{left:o,right:i}=r.getBoundingClientRect();t.clientX-o<=n?s=ze(e,t,"left",n):i-t.clientX<=n&&(s=ze(e,t,"right",n))}if(s!=i.activeHandle){if(!o&&-1!==s){const t=e.state.doc.resolve(s),n=t.node(-1),r=v.get(n),o=t.start(-1),i=r.colCount(t.pos-o)+t.nodeAfter.attrs.colspan-1;if(i==r.width-1)return}$e(e,s)}}}function Ne(e){const t=Me.getState(e.state);t&&t.activeHandle>-1&&!t.dragging&&$e(e,-1)}function Re(e,t,n){const r=Me.getState(e.state);if(!r||-1==r.activeHandle||r.dragging)return!1;const o=e.state.doc.nodeAt(r.activeHandle),i=De(e,r.activeHandle,o.attrs);function s(t){window.removeEventListener("mouseup",s),window.removeEventListener("mousemove",a);const r=Me.getState(e.state);(null==r?void 0:r.dragging)&&(Fe(e,r.activeHandle,Pe(r.dragging,t,n)),e.dispatch(e.state.tr.setMeta(Me,{setDragging:null})))}function a(t){if(!t.which)return s(t);const r=Me.getState(e.state);if(r&&r.dragging){const o=Pe(r.dragging,t,n);Be(e,r.activeHandle,o,n)}}return e.dispatch(e.state.tr.setMeta(Me,{setDragging:{startX:t.clientX,startWidth:i}})),window.addEventListener("mouseup",s),window.addEventListener("mousemove",a),t.preventDefault(),!0}function De(e,t,{colspan:n,colwidth:r}){const o=r&&r[r.length-1];if(o)return o;const i=e.domAtPos(t),s=i.node.childNodes[i.offset];let a=s.offsetWidth,l=n;if(r)for(let c=0;c<n;c++)r[c]&&(a-=r[c],l--);return a/l}function Ie(e){while(e&&"TD"!=e.nodeName&&"TH"!=e.nodeName)e=e.classList&&e.classList.contains("ProseMirror")?null:e.parentNode;return e}function ze(e,t,n,r){const o="right"==n?-r:r,i=e.posAtCoords({left:t.clientX+o,top:t.clientY});if(!i)return-1;const{pos:s}=i,a=E(e.state.doc.resolve(s));if(!a)return-1;if("right"==n)return a.pos;const l=v.get(a.node(-1)),c=a.start(-1),u=l.map.indexOf(a.pos-c);return u%l.width==0?-1:c+l.map[u-1]}function Pe(e,t,n){const r=t.clientX-e.startX;return Math.max(n,e.startWidth+r)}function $e(e,t){e.dispatch(e.state.tr.setMeta(Me,{setHandle:t}))}function Fe(e,t,n){const r=e.state.doc.resolve(t),o=r.node(-1),i=v.get(o),s=r.start(-1),a=i.colCount(r.pos-s)+r.nodeAfter.attrs.colspan-1,l=e.state.tr;for(let c=0;c<i.height;c++){const e=c*i.width+a;if(c&&i.map[e]==i.map[e-i.width])continue;const t=i.map[e],r=o.nodeAt(t).attrs,u=1==r.colspan?0:a-i.colCount(t);if(r.colwidth&&r.colwidth[u]==n)continue;const d=r.colwidth?r.colwidth.slice():je(r.colspan);d[u]=n,l.setNodeMarkup(s+t,null,{...r,colwidth:d})}l.docChanged&&e.dispatch(l)}function Be(e,t,n,r){const o=e.state.doc.resolve(t),i=o.node(-1),s=o.start(-1),a=v.get(i).colCount(o.pos-s)+o.nodeAfter.attrs.colspan-1;let l=e.domAtPos(o.start(-1)).node;while(l&&"TABLE"!=l.nodeName)l=l.parentNode;l&&Oe(i,l.firstChild,l,r,a,n)}function je(e){return Array(e).fill(0)}function Le(e,t){const n=[],r=e.doc.resolve(t),o=r.node(-1);if(!o)return Ce.DecorationSet.empty;const i=v.get(o),s=r.start(-1),a=i.colCount(r.pos-s)+r.nodeAfter.attrs.colspan;for(let l=0;l<i.height;l++){const e=a+l*i.width-1;if((a==i.width||i.map[e]!=i.map[e+1])&&(0==l||i.map[e]!=i.map[e-i.width])){const t=i.map[e],r=s+t+o.nodeAt(t).nodeSize-1,a=document.createElement("div");a.className="column-resize-handle",n.push(Ce.Decoration.widget(r,a))}}return Ce.DecorationSet.create(e.doc,n)}var Ve=n(9443),qe=n(2391);function He(e){const t=e.selection,n=N(e),r=n.node(-1),o=n.start(-1),i=v.get(r),s=t instanceof V?i.rectBetween(t.$anchorCell.pos-o,t.$headCell.pos-o):i.findCell(n.pos-o);return{...s,tableStart:o,map:i,table:r}}function We(e,{map:t,tableStart:n,table:r},o){let i=o>0?-1:0;L(t,r,o+i)&&(i=0==o||o==t.width?null:0);for(let s=0;s<t.height;s++){const a=s*t.width+o;if(o>0&&o<t.width&&t.map[a-1]==t.map[a]){const i=t.map[a],l=r.nodeAt(i);e.setNodeMarkup(e.mapping.map(n+i),null,j(l.attrs,o-t.colCount(i))),s+=l.attrs.rowspan-1}else{const l=null==i?O(r.type.schema).cell:r.nodeAt(t.map[a+i]).type,c=t.positionAt(s,o,r);e.insert(e.mapping.map(n+c),l.createAndFill())}}return e}function Je(e,t){if(!A(e))return!1;if(t){const n=He(e);t(We(e.tr,n,n.left))}return!0}function Ue(e,t){if(!A(e))return!1;if(t){const n=He(e);t(We(e.tr,n,n.right))}return!0}function Ke(e,{map:t,table:n,tableStart:r},o){const i=e.mapping.maps.length;for(let s=0;s<t.height;){const a=s*t.width+o,l=t.map[a],c=n.nodeAt(l),u=c.attrs;if(o>0&&t.map[a-1]==l||o<t.width-1&&t.map[a+1]==l)e.setNodeMarkup(e.mapping.slice(i).map(r+l),null,B(u,o-t.colCount(l)));else{const t=e.mapping.slice(i).map(r+l);e.delete(t,t+c.nodeSize)}s+=u.rowspan}}function Ge(e,t){if(!A(e))return!1;if(t){const n=He(e),r=e.tr;if(0==n.left&&n.right==n.map.width)return!1;for(let e=n.right-1;;e--){if(Ke(r,n,e),e==n.left)break;const t=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc;if(!t)throw RangeError("No table found");n.table=t,n.map=v.get(t)}t(r)}return!0}function Xe(e,t,n){var r;const o=O(t.type.schema).header_cell;for(let i=0;i<e.width;i++)if((null==(r=t.nodeAt(e.map[i+n*e.width]))?void 0:r.type)!=o)return!1;return!0}function Ze(e,{map:t,tableStart:n,table:r},o){var i;let s=n;for(let c=0;c<o;c++)s+=r.child(c).nodeSize;const a=[];let l=o>0?-1:0;Xe(t,r,o+l)&&(l=0==o||o==t.height?null:0);for(let c=0,u=t.width*o;c<t.width;c++,u++)if(o>0&&o<t.height&&t.map[u]==t.map[u-t.width]){const o=t.map[u],i=r.nodeAt(o).attrs;e.setNodeMarkup(n+o,null,{...i,rowspan:i.rowspan+1}),c+=i.colspan-1}else{const e=null==l?O(r.type.schema).cell:null==(i=r.nodeAt(t.map[u+l*t.width]))?void 0:i.type,n=null==e?void 0:e.createAndFill();n&&a.push(n)}return e.insert(s,O(r.type.schema).row.create(null,a)),e}function Ye(e,t){if(!A(e))return!1;if(t){const n=He(e);t(Ze(e.tr,n,n.top))}return!0}function Qe(e,t){if(!A(e))return!1;if(t){const n=He(e);t(Ze(e.tr,n,n.bottom))}return!0}function et(e,{map:t,table:n,tableStart:r},o){let i=0;for(let l=0;l<o;l++)i+=n.child(l).nodeSize;const s=i+n.child(o).nodeSize,a=e.mapping.maps.length;e.delete(i+r,s+r);for(let l=0,c=o*t.width;l<t.width;l++,c++){const i=t.map[c];if(o>0&&i==t.map[c-t.width]){const t=n.nodeAt(i).attrs;e.setNodeMarkup(e.mapping.slice(a).map(i+r),null,{...t,rowspan:t.rowspan-1}),l+=t.colspan-1}else if(o<t.width&&i==t.map[c+t.width]){const s=n.nodeAt(i),c=s.attrs,u=s.type.create({...c,rowspan:s.attrs.rowspan-1},s.content),d=t.positionAt(o+1,l,n);e.insert(e.mapping.slice(a).map(r+d),u),l+=c.colspan-1}}}function tt(e,t){if(!A(e))return!1;if(t){const n=He(e),r=e.tr;if(0==n.top&&n.bottom==n.map.height)return!1;for(let e=n.bottom-1;;e--){if(et(r,n,e),e==n.top)break;const t=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc;if(!t)throw RangeError("No table found");n.table=t,n.map=v.get(n.table)}t(r)}return!0}function nt(e){const t=e.content;return 1==t.childCount&&t.child(0).isTextblock&&0==t.child(0).childCount}function rt({width:e,height:t,map:n},r){let o=r.top*e+r.left,i=o,s=(r.bottom-1)*e+r.left,a=o+(r.right-r.left-1);for(let l=r.top;l<r.bottom;l++){if(r.left>0&&n[i]==n[i-1]||r.right<e&&n[a]==n[a+1])return!0;i+=e,a+=e}for(let l=r.left;l<r.right;l++){if(r.top>0&&n[o]==n[o-e]||r.bottom<t&&n[s]==n[s+e])return!0;o++,s++}return!1}function ot(e,t){const n=e.selection;if(!(n instanceof V)||n.$anchorCell.pos==n.$headCell.pos)return!1;const r=He(e),{map:o}=r;if(rt(o,r))return!1;if(t){const n=e.tr,i={};let s,a,l=Ve.Fragment.empty;for(let e=r.top;e<r.bottom;e++)for(let t=r.left;t<r.right;t++){const c=o.map[e*o.width+t],u=r.table.nodeAt(c);if(!i[c]&&u)if(i[c]=!0,null==s)s=c,a=u;else{nt(u)||(l=l.append(u.content));const e=n.mapping.map(c+r.tableStart);n.delete(e,e+u.nodeSize)}}if(null==s||null==a)return!0;if(n.setNodeMarkup(s+r.tableStart,null,{...j(a.attrs,a.attrs.colspan,r.right-r.left-a.attrs.colspan),rowspan:r.bottom-r.top}),l.size){const e=s+1+a.content.size,t=nt(a)?s+1:e;n.replaceWith(t+r.tableStart,e+r.tableStart,l)}n.setSelection(new V(n.doc.resolve(s+r.tableStart))),t(n)}return!0}function it(e,t){const n=O(e.schema);return st((({node:e})=>n[e.type.spec.tableRole]))(e,t)}function st(e){return(t,n)=>{var r;const o=t.selection;let i,s;if(o instanceof V){if(o.$anchorCell.pos!=o.$headCell.pos)return!1;i=o.$anchorCell.nodeAfter,s=o.$anchorCell.pos}else{if(i=T(o.$from),!i)return!1;s=null==(r=E(o.$from))?void 0:r.pos}if(null==i||null==s)return!1;if(1==i.attrs.colspan&&1==i.attrs.rowspan)return!1;if(n){let r=i.attrs;const a=[],l=r.colwidth;r.rowspan>1&&(r={...r,rowspan:1}),r.colspan>1&&(r={...r,colspan:1});const c=He(t),u=t.tr;for(let e=0;e<c.right-c.left;e++)a.push(l?{...r,colwidth:l&&l[e]?[l[e]]:null}:r);let d;for(let t=c.top;t<c.bottom;t++){let n=c.map.positionAt(t,c.left,c.table);t==c.top&&(n+=i.nodeSize);for(let r=c.left,o=0;r<c.right;r++,o++)r==c.left&&t==c.top||u.insert(d=u.mapping.map(n+c.tableStart,1),e({node:i,row:t,col:r}).createAndFill(a[o]))}u.setNodeMarkup(s,e({node:i,row:c.top,col:c.left}),a[0]),o instanceof V&&u.setSelection(new V(u.doc.resolve(o.$anchorCell.pos),d?u.doc.resolve(d):void 0)),n(u)}return!0}}function at(e,t){return function(n,r){if(!A(n))return!1;const o=N(n);if(o.nodeAfter.attrs[e]===t)return!1;if(r){const i=n.tr;n.selection instanceof V?n.selection.forEachCell(((n,r)=>{n.attrs[e]!==t&&i.setNodeMarkup(r,null,{...n.attrs,[e]:t})})):i.setNodeMarkup(o.pos,null,{...o.nodeAfter.attrs,[e]:t}),r(i)}return!0}}function lt(e){return function(t,n){if(!A(t))return!1;if(n){const r=O(t.schema),o=He(t),i=t.tr,s=o.map.cellsInRect("column"==e?{left:o.left,top:0,right:o.right,bottom:o.map.height}:"row"==e?{left:0,top:o.top,right:o.map.width,bottom:o.bottom}:o),a=s.map((e=>o.table.nodeAt(e)));for(let e=0;e<s.length;e++)a[e].type==r.header_cell&&i.setNodeMarkup(o.tableStart+s[e],r.cell,a[e].attrs);if(0==i.steps.length)for(let e=0;e<s.length;e++)i.setNodeMarkup(o.tableStart+s[e],r.header_cell,a[e].attrs);n(i)}return!0}}function ct(e,t,n){const r=t.map.cellsInRect({left:0,top:0,right:"row"==e?t.map.width:1,bottom:"column"==e?t.map.height:1});for(let o=0;o<r.length;o++){const e=t.table.nodeAt(r[o]);if(e&&e.type!==n.header_cell)return!1}return!0}function ut(e,t){return t=t||{useDeprecatedLogic:!1},t.useDeprecatedLogic?lt(e):function(t,n){if(!A(t))return!1;if(n){const r=O(t.schema),o=He(t),i=t.tr,s=ct("row",o,r),a=ct("column",o,r),l="column"===e?s:"row"===e&&a,c=l?1:0,u="column"==e?{left:0,top:c,right:1,bottom:o.map.height}:"row"==e?{left:c,top:0,right:o.map.width,bottom:1}:o,d="column"==e?a?r.cell:r.header_cell:"row"==e?s?r.cell:r.header_cell:r.cell;o.map.cellsInRect(u).forEach((e=>{const t=e+o.tableStart,n=i.doc.nodeAt(t);n&&i.setNodeMarkup(t,d,n.attrs)})),n(i)}return!0}}var dt=ut("row",{useDeprecatedLogic:!0}),ht=ut("column",{useDeprecatedLogic:!0}),pt=ut("cell",{useDeprecatedLogic:!0});function ft(e,t){if(t<0){const t=e.nodeBefore;if(t)return e.pos-t.nodeSize;for(let n=e.index(-1)-1,r=e.before();n>=0;n--){const t=e.node(-1).child(n),o=t.lastChild;if(o)return r-1-o.nodeSize;r-=t.nodeSize}}else{if(e.index()<e.parent.childCount-1)return e.pos+e.nodeAfter.nodeSize;const t=e.node(-1);for(let n=e.indexAfter(-1),r=e.after();n<t.childCount;n++){const e=t.child(n);if(e.childCount)return r+1;r+=e.nodeSize}}return null}function mt(e){return function(t,n){if(!A(t))return!1;const r=ft(N(t),e);if(null==r)return!1;if(n){const e=t.doc.resolve(r);n(t.tr.setSelection(qe.TextSelection.between(e,I(e))).scrollIntoView())}return!0}}function gt(e,t){const n=e.selection.$anchor;for(let r=n.depth;r>0;r--){const o=n.node(r);if("table"==o.type.spec.tableRole)return t&&t(e.tr.delete(n.before(r),n.after(r)).scrollIntoView()),!0}return!1}function vt({allowTableNodeSelection:e=!1}={}){return new p.Plugin({key:M,state:{init(){return null},apply(e,t){const n=e.getMeta(M);if(null!=n)return-1==n?null:n;if(null==t||!e.docChanged)return t;const{deleted:r,pos:o}=e.mapping.mapResult(t);return r?null:o}},props:{decorations:H,handleDOMEvents:{mousedown:be},createSelectionBetween(e){return null!=M.getState(e.state)?e.state.selection:null},handleTripleClick:ve,handleKeyDown:he,handlePaste:ye},appendTransaction(t,n,r){return U(r,Z(r,n),e)}})}},2843:function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(e){var t="function"===typeof Map?new Map:void 0;return o=function(e){if(null===e||!s(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return i(e,arguments,p(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),l(n,e)},o(e)}function i(e,t,n){return i=h()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=Function.bind.apply(e,r),i=new o;return n&&l(i,n.prototype),i},i.apply(null,arguments)}function s(e){return-1!==Function.toString.call(e).indexOf("[native code]")}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t)}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function c(e){var t=h();return function(){var n,r=p(e);if(t){var o=p(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return u(this,n)}}function u(e,t){if(t&&("object"===r(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return d(e)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t,n){return t&&m(e.prototype,t),n&&m(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var v=n(9443),y=65535,b=Math.pow(2,16);function w(e,t){return e+t*b}function k(e){return e&y}function x(e){return(e-(e&y))/b}var S=1,C=2,_=4,O=8,M=function(){function e(t,n,r){f(this,e),this.pos=t,this.delInfo=n,this.recover=r}return g(e,[{key:"deleted",get:function(){return(this.delInfo&O)>0}},{key:"deletedBefore",get:function(){return(this.delInfo&(S|_))>0}},{key:"deletedAfter",get:function(){return(this.delInfo&(C|_))>0}},{key:"deletedAcross",get:function(){return(this.delInfo&_)>0}}]),e}(),E=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(f(this,e),this.ranges=t,this.inverted=n,!t.length&&e.empty)return e.empty}return g(e,[{key:"recover",value:function(e){var t=0,n=k(e);if(!this.inverted)for(var r=0;r<n;r++)t+=this.ranges[3*r+2]-this.ranges[3*r+1];return this.ranges[3*n]+t+x(e)}},{key:"mapResult",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this._map(e,t,!1)}},{key:"map",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this._map(e,t,!0)}},{key:"_map",value:function(e,t,n){for(var r=0,o=this.inverted?2:1,i=this.inverted?1:2,s=0;s<this.ranges.length;s+=3){var a=this.ranges[s]-(this.inverted?r:0);if(a>e)break;var l=this.ranges[s+o],c=this.ranges[s+i],u=a+l;if(e<=u){var d=l?e==a?-1:e==u?1:t:t,h=a+r+(d<0?0:c);if(n)return h;var p=e==(t<0?a:u)?null:w(s/3,e-a),f=e==a?C:e==u?S:_;return(t<0?e!=a:e!=u)&&(f|=O),new M(h,f,p)}r+=c-l}return n?e+r:new M(e+r,0,null)}},{key:"touches",value:function(e,t){for(var n=0,r=k(t),o=this.inverted?2:1,i=this.inverted?1:2,s=0;s<this.ranges.length;s+=3){var a=this.ranges[s]-(this.inverted?n:0);if(a>e)break;var l=this.ranges[s+o],c=a+l;if(e<=c&&s==3*r)return!0;n+=this.ranges[s+i]-l}return!1}},{key:"forEach",value:function(e){for(var t=this.inverted?2:1,n=this.inverted?1:2,r=0,o=0;r<this.ranges.length;r+=3){var i=this.ranges[r],s=i-(this.inverted?o:0),a=i+(this.inverted?0:o),l=this.ranges[r+t],c=this.ranges[r+n];e(s,s+l,a,a+c),o+=c-l}}},{key:"invert",value:function(){return new e(this.ranges,!this.inverted)}},{key:"toString",value:function(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}}],[{key:"offset",value:function(t){return 0==t?e.empty:new e(t<0?[0,-t,0]:[0,0,t])}}]),e}();E.empty=new E([]);var T=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.length;f(this,e),this.maps=t,this.mirror=n,this.from=r,this.to=o}return g(e,[{key:"slice",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.maps.length;return new e(this.maps,this.mirror,t,n)}},{key:"copy",value:function(){return new e(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}},{key:"appendMap",value:function(e,t){this.to=this.maps.push(e),null!=t&&this.setMirror(this.maps.length-1,t)}},{key:"appendMapping",value:function(e){for(var t=0,n=this.maps.length;t<e.maps.length;t++){var r=e.getMirror(t);this.appendMap(e.maps[t],null!=r&&r<t?n+r:void 0)}}},{key:"getMirror",value:function(e){if(this.mirror)for(var t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}},{key:"setMirror",value:function(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)}},{key:"appendMappingInverted",value:function(e){for(var t=e.maps.length-1,n=this.maps.length+e.maps.length;t>=0;t--){var r=e.getMirror(t);this.appendMap(e.maps[t].invert(),null!=r&&r>t?n-r-1:void 0)}}},{key:"invert",value:function(){var t=new e;return t.appendMappingInverted(this),t}},{key:"map",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(this.mirror)return this._map(e,t,!0);for(var n=this.from;n<this.to;n++)e=this.maps[n].map(e,t);return e}},{key:"mapResult",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this._map(e,t,!1)}},{key:"_map",value:function(e,t,n){for(var r=0,o=this.from;o<this.to;o++){var i=this.maps[o],s=i.mapResult(e,t);if(null!=s.recover){var a=this.getMirror(o);if(null!=a&&a>o&&a<this.to){o=a,e=this.maps[a].recover(s.recover);continue}}r|=s.delInfo,e=s.pos}return n?e:new M(e,r,null)}}]),e}(),A=Object.create(null),N=function(){function e(){f(this,e)}return g(e,[{key:"getMap",value:function(){return E.empty}},{key:"merge",value:function(e){return null}}],[{key:"fromJSON",value:function(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");var n=A[t.stepType];if(!n)throw new RangeError("No step type ".concat(t.stepType," defined"));return n.fromJSON(e,t)}},{key:"jsonID",value:function(e,t){if(e in A)throw new RangeError("Duplicate use of step JSON ID "+e);return A[e]=t,t.prototype.jsonID=e,t}}]),e}(),R=function(){function e(t,n){f(this,e),this.doc=t,this.failed=n}return g(e,null,[{key:"ok",value:function(t){return new e(t,null)}},{key:"fail",value:function(t){return new e(null,t)}},{key:"fromReplace",value:function(t,n,r,o){try{return e.ok(t.replace(n,r,o))}catch(i){if(i instanceof v.ReplaceError)return e.fail(i.message);throw i}}}]),e}();function D(e,t,n){for(var r=[],o=0;o<e.childCount;o++){var i=e.child(o);i.content.size&&(i=i.copy(D(i.content,t,i))),i.isInline&&(i=t(i,n,o)),r.push(i)}return v.Fragment.fromArray(r)}var I=function(e){a(n,e);var t=c(n);function n(e,r,o){var i;return f(this,n),i=t.call(this),i.from=e,i.to=r,i.mark=o,i}return g(n,[{key:"apply",value:function(e){var t=this,n=e.slice(this.from,this.to),r=e.resolve(this.from),o=r.node(r.sharedDepth(this.to)),i=new v.Slice(D(n.content,(function(e,n){return e.isAtom&&n.type.allowsMarkType(t.mark.type)?e.mark(t.mark.addToSet(e.marks)):e}),o),n.openStart,n.openEnd);return R.fromReplace(e,this.from,this.to,i)}},{key:"invert",value:function(){return new z(this.from,this.to,this.mark)}},{key:"map",value:function(e){var t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new n(t.pos,r.pos,this.mark)}},{key:"merge",value:function(e){return e instanceof n&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new n(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}},{key:"toJSON",value:function(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}}],[{key:"fromJSON",value:function(e,t){if("number"!=typeof t.from||"number"!=typeof t.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new n(t.from,t.to,e.markFromJSON(t.mark))}}]),n}(N);N.jsonID("addMark",I);var z=function(e){a(n,e);var t=c(n);function n(e,r,o){var i;return f(this,n),i=t.call(this),i.from=e,i.to=r,i.mark=o,i}return g(n,[{key:"apply",value:function(e){var t=this,n=e.slice(this.from,this.to),r=new v.Slice(D(n.content,(function(e){return e.mark(t.mark.removeFromSet(e.marks))}),e),n.openStart,n.openEnd);return R.fromReplace(e,this.from,this.to,r)}},{key:"invert",value:function(){return new I(this.from,this.to,this.mark)}},{key:"map",value:function(e){var t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new n(t.pos,r.pos,this.mark)}},{key:"merge",value:function(e){return e instanceof n&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new n(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}},{key:"toJSON",value:function(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}}],[{key:"fromJSON",value:function(e,t){if("number"!=typeof t.from||"number"!=typeof t.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new n(t.from,t.to,e.markFromJSON(t.mark))}}]),n}(N);N.jsonID("removeMark",z);var P=function(e){a(n,e);var t=c(n);function n(e,r){var o;return f(this,n),o=t.call(this),o.pos=e,o.mark=r,o}return g(n,[{key:"apply",value:function(e){var t=e.nodeAt(this.pos);if(!t)return R.fail("No node at mark step's position");var n=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return R.fromReplace(e,this.pos,this.pos+1,new v.Slice(v.Fragment.from(n),0,t.isLeaf?0:1))}},{key:"invert",value:function(e){var t=e.nodeAt(this.pos);if(t){var r=this.mark.addToSet(t.marks);if(r.length==t.marks.length){for(var o=0;o<t.marks.length;o++)if(!t.marks[o].isInSet(r))return new n(this.pos,t.marks[o]);return new n(this.pos,this.mark)}}return new $(this.pos,this.mark)}},{key:"map",value:function(e){var t=e.mapResult(this.pos,1);return t.deletedAfter?null:new n(t.pos,this.mark)}},{key:"toJSON",value:function(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}}],[{key:"fromJSON",value:function(e,t){if("number"!=typeof t.pos)throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new n(t.pos,e.markFromJSON(t.mark))}}]),n}(N);N.jsonID("addNodeMark",P);var $=function(e){a(n,e);var t=c(n);function n(e,r){var o;return f(this,n),o=t.call(this),o.pos=e,o.mark=r,o}return g(n,[{key:"apply",value:function(e){var t=e.nodeAt(this.pos);if(!t)return R.fail("No node at mark step's position");var n=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return R.fromReplace(e,this.pos,this.pos+1,new v.Slice(v.Fragment.from(n),0,t.isLeaf?0:1))}},{key:"invert",value:function(e){var t=e.nodeAt(this.pos);return t&&this.mark.isInSet(t.marks)?new P(this.pos,this.mark):this}},{key:"map",value:function(e){var t=e.mapResult(this.pos,1);return t.deletedAfter?null:new n(t.pos,this.mark)}},{key:"toJSON",value:function(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}}],[{key:"fromJSON",value:function(e,t){if("number"!=typeof t.pos)throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new n(t.pos,e.markFromJSON(t.mark))}}]),n}(N);N.jsonID("removeNodeMark",$);var F=function(e){a(n,e);var t=c(n);function n(e,r,o){var i,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return f(this,n),i=t.call(this),i.from=e,i.to=r,i.slice=o,i.structure=s,i}return g(n,[{key:"apply",value:function(e){return this.structure&&j(e,this.from,this.to)?R.fail("Structure replace would overwrite content"):R.fromReplace(e,this.from,this.to,this.slice)}},{key:"getMap",value:function(){return new E([this.from,this.to-this.from,this.slice.size])}},{key:"invert",value:function(e){return new n(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}},{key:"map",value:function(e){var t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deletedAcross&&r.deletedAcross?null:new n(t.pos,Math.max(t.pos,r.pos),this.slice)}},{key:"merge",value:function(e){if(!(e instanceof n)||e.structure||this.structure)return null;if(this.from+this.slice.size!=e.from||this.slice.openEnd||e.slice.openStart){if(e.to!=this.from||this.slice.openStart||e.slice.openEnd)return null;var t=this.slice.size+e.slice.size==0?v.Slice.empty:new v.Slice(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new n(e.from,this.to,t,this.structure)}var r=this.slice.size+e.slice.size==0?v.Slice.empty:new v.Slice(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new n(this.from,this.to+(e.to-e.from),r,this.structure)}},{key:"toJSON",value:function(){var e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}}],[{key:"fromJSON",value:function(e,t){if("number"!=typeof t.from||"number"!=typeof t.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new n(t.from,t.to,v.Slice.fromJSON(e,t.slice),!!t.structure)}}]),n}(N);N.jsonID("replace",F);var B=function(e){a(n,e);var t=c(n);function n(e,r,o,i,s,a){var l,c=arguments.length>6&&void 0!==arguments[6]&&arguments[6];return f(this,n),l=t.call(this),l.from=e,l.to=r,l.gapFrom=o,l.gapTo=i,l.slice=s,l.insert=a,l.structure=c,l}return g(n,[{key:"apply",value:function(e){if(this.structure&&(j(e,this.from,this.gapFrom)||j(e,this.gapTo,this.to)))return R.fail("Structure gap-replace would overwrite content");var t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return R.fail("Gap is not a flat range");var n=this.slice.insertAt(this.insert,t.content);return n?R.fromReplace(e,this.from,this.to,n):R.fail("Content does not fit in gap")}},{key:"getMap",value:function(){return new E([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}},{key:"invert",value:function(e){var t=this.gapTo-this.gapFrom;return new n(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}},{key:"map",value:function(e){var t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),o=e.map(this.gapFrom,-1),i=e.map(this.gapTo,1);return t.deletedAcross&&r.deletedAcross||o<t.pos||i>r.pos?null:new n(t.pos,r.pos,o,i,this.slice,this.insert,this.structure)}},{key:"toJSON",value:function(){var e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}}],[{key:"fromJSON",value:function(e,t){if("number"!=typeof t.from||"number"!=typeof t.to||"number"!=typeof t.gapFrom||"number"!=typeof t.gapTo||"number"!=typeof t.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new n(t.from,t.to,t.gapFrom,t.gapTo,v.Slice.fromJSON(e,t.slice),t.insert,!!t.structure)}}]),n}(N);function j(e,t,n){var r=e.resolve(t),o=n-t,i=r.depth;while(o>0&&i>0&&r.indexAfter(i)==r.node(i).childCount)i--,o--;if(o>0){var s=r.node(i).maybeChild(r.indexAfter(i));while(o>0){if(!s||s.isLeaf)return!0;s=s.firstChild,o--}}return!1}function L(e,t,n,r){var o,i,s=[],a=[];e.doc.nodesBetween(t,n,(function(e,l,c){if(e.isInline){var u=e.marks;if(!r.isInSet(u)&&c.type.allowsMarkType(r.type)){for(var d=Math.max(l,t),h=Math.min(l+e.nodeSize,n),p=r.addToSet(u),f=0;f<u.length;f++)u[f].isInSet(p)||(o&&o.to==d&&o.mark.eq(u[f])?o.to=h:s.push(o=new z(d,h,u[f])));i&&i.to==d?i.to=h:a.push(i=new I(d,h,r))}}})),s.forEach((function(t){return e.step(t)})),a.forEach((function(t){return e.step(t)}))}function V(e,t,n,r){var o=[],i=0;e.doc.nodesBetween(t,n,(function(e,s){if(e.isInline){i++;var a=null;if(r instanceof v.MarkType){var l,c=e.marks;while(l=r.isInSet(c))(a||(a=[])).push(l),c=l.removeFromSet(c)}else r?r.isInSet(e.marks)&&(a=[r]):a=e.marks;if(a&&a.length)for(var u=Math.min(s+e.nodeSize,n),d=0;d<a.length;d++){for(var h=a[d],p=void 0,f=0;f<o.length;f++){var m=o[f];m.step==i-1&&h.eq(o[f].style)&&(p=m)}p?(p.to=u,p.step=i):o.push({style:h,from:Math.max(s,t),to:u,step:i})}}})),o.forEach((function(t){return e.step(new z(t.from,t.to,t.style))}))}function q(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n.contentMatch,o=e.doc.nodeAt(t),i=[],s=t+1,a=0;a<o.childCount;a++){var l=o.child(a),c=s+l.nodeSize,u=r.matchType(l.type);if(u){r=u;for(var d=0;d<l.marks.length;d++)n.allowsMarkType(l.marks[d].type)||e.step(new z(s,c,l.marks[d]));if(l.isText&&!n.spec.code){var h=void 0,p=/\r?\n|\r/g,f=void 0;while(h=p.exec(l.text))f||(f=new v.Slice(v.Fragment.from(n.schema.text(" ",n.allowedMarks(l.marks))),0,0)),i.push(new F(s+h.index,s+h.index+h[0].length,f))}}else i.push(new F(s,c,v.Slice.empty));s=c}if(!r.validEnd){var m=r.fillBefore(v.Fragment.empty,!0);e.replace(s,s,new v.Slice(m,0,0))}for(var g=i.length-1;g>=0;g--)e.step(i[g])}function H(e,t,n){return(0==t||e.canReplace(t,e.childCount))&&(n==e.childCount||e.canReplace(0,n))}function W(e){for(var t=e.parent,n=t.content.cutByIndex(e.startIndex,e.endIndex),r=e.depth;;--r){var o=e.$from.node(r),i=e.$from.index(r),s=e.$to.indexAfter(r);if(r<e.depth&&o.canReplace(i,s,n))return r;if(0==r||o.type.spec.isolating||!H(o,i,s))break}return null}function J(e,t,n){for(var r=t.$from,o=t.$to,i=t.depth,s=r.before(i+1),a=o.after(i+1),l=s,c=a,u=v.Fragment.empty,d=0,h=i,p=!1;h>n;h--)p||r.index(h)>0?(p=!0,u=v.Fragment.from(r.node(h).copy(u)),d++):l--;for(var f=v.Fragment.empty,m=0,g=i,y=!1;g>n;g--)y||o.after(g+1)<o.end(g)?(y=!0,f=v.Fragment.from(o.node(g).copy(f)),m++):c++;e.step(new B(l,c,s,a,new v.Slice(u.append(f),d,m),u.size-d,!0))}function U(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e,o=G(e,t),i=o&&X(r,t);return i?o.map(K).concat({type:t,attrs:n}).concat(i.map(K)):null}function K(e){return{type:e,attrs:null}}function G(e,t){var n=e.parent,r=e.startIndex,o=e.endIndex,i=n.contentMatchAt(r).findWrapping(t);if(!i)return null;var s=i.length?i[0]:t;return n.canReplaceWith(r,o,s)?i:null}function X(e,t){var n=e.parent,r=e.startIndex,o=e.endIndex,i=n.child(r),s=t.contentMatch.findWrapping(i.type);if(!s)return null;for(var a=s.length?s[s.length-1]:t,l=a.contentMatch,c=r;l&&c<o;c++)l=l.matchType(n.child(c).type);return l&&l.validEnd?s:null}function Z(e,t,n){for(var r=v.Fragment.empty,o=n.length-1;o>=0;o--){if(r.size){var i=n[o].type.contentMatch.matchFragment(r);if(!i||!i.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=v.Fragment.from(n[o].type.create(n[o].attrs,r))}var s=t.start,a=t.end;e.step(new B(s,a,s,a,new v.Slice(r,0,0),n.length,!0))}function Y(e,t,n,r,o){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");var i=e.steps.length;e.doc.nodesBetween(t,n,(function(t,n){if(t.isTextblock&&!t.hasMarkup(r,o)&&Q(e.doc,e.mapping.slice(i).map(n),r)){e.clearIncompatible(e.mapping.slice(i).map(n,1),r);var s=e.mapping.slice(i),a=s.map(n,1),l=s.map(n+t.nodeSize,1);return e.step(new B(a,l,a+1,l-1,new v.Slice(v.Fragment.from(r.create(o,null,t.marks)),0,0),1,!0)),!1}}))}function Q(e,t,n){var r=e.resolve(t),o=r.index();return r.parent.canReplaceWith(o,o+1,n)}function ee(e,t,n,r,o){var i=e.doc.nodeAt(t);if(!i)throw new RangeError("No node at given position");n||(n=i.type);var s=n.create(r,null,o||i.marks);if(i.isLeaf)return e.replaceWith(t,t+i.nodeSize,s);if(!n.validContent(i.content))throw new RangeError("Invalid content for node type "+n.name);e.step(new B(t,t+i.nodeSize,t+1,t+i.nodeSize-1,new v.Slice(v.Fragment.from(s),0,0),1,!0))}function te(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,o=e.resolve(t),i=o.depth-n,s=r&&r[r.length-1]||o.parent;if(i<0||o.parent.type.spec.isolating||!o.parent.canReplace(o.index(),o.parent.childCount)||!s.type.validContent(o.parent.content.cutByIndex(o.index(),o.parent.childCount)))return!1;for(var a=o.depth-1,l=n-2;a>i;a--,l--){var c=o.node(a),u=o.index(a);if(c.type.spec.isolating)return!1;var d=c.content.cutByIndex(u,c.childCount),h=r&&r[l+1];h&&(d=d.replaceChild(0,h.type.create(h.attrs)));var p=r&&r[l]||c;if(!c.canReplace(u+1,c.childCount)||!p.type.validContent(d))return!1}var f=o.indexAfter(i),m=r&&r[0];return o.node(i).canReplaceWith(f,f,m?m.type:o.node(i+1).type)}function ne(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,o=e.doc.resolve(t),i=v.Fragment.empty,s=v.Fragment.empty,a=o.depth,l=o.depth-n,c=n-1;a>l;a--,c--){i=v.Fragment.from(o.node(a).copy(i));var u=r&&r[c];s=v.Fragment.from(u?u.type.create(u.attrs,s):o.node(a).copy(s))}e.step(new F(t,t,new v.Slice(i.append(s),n,n),!0))}function re(e,t){var n=e.resolve(t),r=n.index();return oe(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function oe(e,t){return!(!e||!t||e.isLeaf||!e.canAppend(t))}function ie(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,r=e.resolve(t),o=r.depth;;o--){var i=void 0,s=void 0,a=r.index(o);if(o==r.depth?(i=r.nodeBefore,s=r.nodeAfter):n>0?(i=r.node(o+1),a++,s=r.node(o).maybeChild(a)):(i=r.node(o).maybeChild(a-1),s=r.node(o+1)),i&&!i.isTextblock&&oe(i,s)&&r.node(o).canReplace(a,a+1))return t;if(0==o)break;t=n<0?r.before(o):r.after(o)}}function se(e,t,n){var r=new F(t-n,t+n,v.Slice.empty,!0);e.step(r)}function ae(e,t,n){var r=e.resolve(t);if(r.parent.canReplaceWith(r.index(),r.index(),n))return t;if(0==r.parentOffset)for(var o=r.depth-1;o>=0;o--){var i=r.index(o);if(r.node(o).canReplaceWith(i,i,n))return r.before(o+1);if(i>0)return null}if(r.parentOffset==r.parent.content.size)for(var s=r.depth-1;s>=0;s--){var a=r.indexAfter(s);if(r.node(s).canReplaceWith(a,a,n))return r.after(s+1);if(a<r.node(s).childCount)return null}return null}function le(e,t,n){var r=e.resolve(t);if(!n.content.size)return t;for(var o=n.content,i=0;i<n.openStart;i++)o=o.firstChild.content;for(var s=1;s<=(0==n.openStart&&n.size?2:1);s++)for(var a=r.depth;a>=0;a--){var l=a==r.depth?0:r.pos<=(r.start(a+1)+r.end(a+1))/2?-1:1,c=r.index(a)+(l>0?1:0),u=r.node(a),d=!1;if(1==s)d=u.canReplace(c,c,o);else{var h=u.contentMatchAt(c).findWrapping(o.firstChild.type);d=h&&u.canReplaceWith(c,c,h[0])}if(d)return 0==l?r.pos:l<0?r.before(a+1):r.after(a+1)}return null}function ce(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:v.Slice.empty;if(t==n&&!r.size)return null;var o=e.resolve(t),i=e.resolve(n);return ue(o,i,r)?new F(t,n,r):new de(o,i,r).fit()}function ue(e,t,n){return!n.openStart&&!n.openEnd&&e.start()==t.start()&&e.parent.canReplace(e.index(),t.index(),n.content)}N.jsonID("replaceAround",B);var de=function(){function e(t,n,r){f(this,e),this.$from=t,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=v.Fragment.empty;for(var o=0;o<=t.depth;o++){var i=t.node(o);this.frontier.push({type:i.type,match:i.contentMatchAt(t.indexAfter(o))})}for(var s=t.depth;s>0;s--)this.placed=v.Fragment.from(t.node(s).copy(this.placed))}return g(e,[{key:"depth",get:function(){return this.frontier.length-1}},{key:"fit",value:function(){while(this.unplaced.size){var e=this.findFittable();e?this.placeNodes(e):this.openMore()||this.dropNode()}var t=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,o=this.close(t<0?this.$to:r.doc.resolve(t));if(!o)return null;var i=this.placed,s=r.depth,a=o.depth;while(s&&a&&1==i.childCount)i=i.firstChild.content,s--,a--;var l=new v.Slice(i,s,a);return t>-1?new B(r.pos,t,this.$to.pos,this.$to.end(),l,n):l.size||r.pos!=this.$to.pos?new F(r.pos,o.pos,l):null}},{key:"findFittable",value:function(){for(var e=this.unplaced.openStart,t=this.unplaced.content,n=0,r=this.unplaced.openEnd;n<e;n++){var o=t.firstChild;if(t.childCount>1&&(r=0),o.type.spec.isolating&&r<=n){e=n;break}t=o.content}for(var i=1;i<=2;i++)for(var s=1==i?e:this.unplaced.openStart;s>=0;s--){var a=void 0,l=null;s?(l=fe(this.unplaced.content,s-1).firstChild,a=l.content):a=this.unplaced.content;for(var c=a.firstChild,u=this.depth;u>=0;u--){var d=this.frontier[u],h=d.type,p=d.match,f=void 0,m=null;if(1==i&&(c?p.matchType(c.type)||(m=p.fillBefore(v.Fragment.from(c),!1)):l&&h.compatibleContent(l.type)))return{sliceDepth:s,frontierDepth:u,parent:l,inject:m};if(2==i&&c&&(f=p.findWrapping(c.type)))return{sliceDepth:s,frontierDepth:u,parent:l,wrap:f};if(l&&p.matchType(l.type))break}}}},{key:"openMore",value:function(){var e=this.unplaced,t=e.content,n=e.openStart,r=e.openEnd,o=fe(t,n);return!(!o.childCount||o.firstChild.isLeaf)&&(this.unplaced=new v.Slice(t,n+1,Math.max(r,o.size+n>=t.size-r?n+1:0)),!0)}},{key:"dropNode",value:function(){var e=this.unplaced,t=e.content,n=e.openStart,r=e.openEnd,o=fe(t,n);if(o.childCount<=1&&n>0){var i=t.size-n<=n+o.size;this.unplaced=new v.Slice(he(t,n-1,1),n-1,i?n-1:r)}else this.unplaced=new v.Slice(he(t,n,1),n,r)}},{key:"placeNodes",value:function(e){var t=e.sliceDepth,n=e.frontierDepth,r=e.parent,o=e.inject,i=e.wrap;while(this.depth>n)this.closeFrontierNode();if(i)for(var s=0;s<i.length;s++)this.openFrontierNode(i[s]);var a=this.unplaced,l=r?r.content:a.content,c=a.openStart-t,u=0,d=[],h=this.frontier[n],p=h.match,f=h.type;if(o){for(s=0;s<o.childCount;s++)d.push(o.child(s));p=p.matchFragment(o)}var m=l.size+t-(a.content.size-a.openEnd);while(u<l.childCount){var g=l.child(u),y=p.matchType(g.type);if(!y)break;u++,(u>1||0==c||g.content.size)&&(p=y,d.push(me(g.mark(f.allowedMarks(g.marks)),1==u?c:0,u==l.childCount?m:-1)))}var b=u==l.childCount;b||(m=-1),this.placed=pe(this.placed,n,v.Fragment.from(d)),this.frontier[n].match=p,b&&m<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(var w=0,k=l;w<m;w++){var x=k.lastChild;this.frontier.push({type:x.type,match:x.contentMatchAt(x.childCount)}),k=x.content}this.unplaced=b?0==t?v.Slice.empty:new v.Slice(he(a.content,t-1,1),t-1,m<0?a.openEnd:t-1):new v.Slice(he(a.content,t,u),a.openStart,a.openEnd)}},{key:"mustMoveInline",value:function(){if(!this.$to.parent.isTextblock)return-1;var e,t=this.frontier[this.depth];if(!t.type.isTextblock||!ge(this.$to,this.$to.depth,t.type,t.match,!1)||this.$to.depth==this.depth&&(e=this.findCloseLevel(this.$to))&&e.depth==this.depth)return-1;var n=this.$to.depth,r=this.$to.after(n);while(n>1&&r==this.$to.end(--n))++r;return r}},{key:"findCloseLevel",value:function(e){e:for(var t=Math.min(this.depth,e.depth);t>=0;t--){var n=this.frontier[t],r=n.match,o=n.type,i=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),s=ge(e,t,o,r,i);if(s){for(var a=t-1;a>=0;a--){var l=this.frontier[a],c=l.match,u=l.type,d=ge(e,a,u,c,!0);if(!d||d.childCount)continue e}return{depth:t,fit:s,move:i?e.doc.resolve(e.after(t+1)):e}}}}},{key:"close",value:function(e){var t=this.findCloseLevel(e);if(!t)return null;while(this.depth>t.depth)this.closeFrontierNode();t.fit.childCount&&(this.placed=pe(this.placed,t.depth,t.fit)),e=t.move;for(var n=t.depth+1;n<=e.depth;n++){var r=e.node(n),o=r.type.contentMatch.fillBefore(r.content,!0,e.index(n));this.openFrontierNode(r.type,r.attrs,o)}return e}},{key:"openFrontierNode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2?arguments[2]:void 0,r=this.frontier[this.depth];r.match=r.match.matchType(e),this.placed=pe(this.placed,this.depth,v.Fragment.from(e.create(t,n))),this.frontier.push({type:e,match:e.contentMatch})}},{key:"closeFrontierNode",value:function(){var e=this.frontier.pop(),t=e.match.fillBefore(v.Fragment.empty,!0);t.childCount&&(this.placed=pe(this.placed,this.frontier.length,t))}}]),e}();function he(e,t,n){return 0==t?e.cutByIndex(n,e.childCount):e.replaceChild(0,e.firstChild.copy(he(e.firstChild.content,t-1,n)))}function pe(e,t,n){return 0==t?e.append(n):e.replaceChild(e.childCount-1,e.lastChild.copy(pe(e.lastChild.content,t-1,n)))}function fe(e,t){for(var n=0;n<t;n++)e=e.firstChild.content;return e}function me(e,t,n){if(t<=0)return e;var r=e.content;return t>1&&(r=r.replaceChild(0,me(r.firstChild,t-1,1==r.childCount?n-1:0))),t>0&&(r=e.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(e.type.contentMatch.matchFragment(r).fillBefore(v.Fragment.empty,!0)))),e.copy(r)}function ge(e,t,n,r,o){var i=e.node(t),s=o?e.indexAfter(t):e.index(t);if(s==i.childCount&&!n.compatibleContent(i.type))return null;var a=r.fillBefore(i.content,!0,s);return a&&!ve(n,i.content,s)?a:null}function ve(e,t,n){for(var r=n;r<t.childCount;r++)if(!e.allowsMarks(t.child(r).marks))return!0;return!1}function ye(e){return e.spec.defining||e.spec.definingForContent}function be(e,t,n,r){if(!r.size)return e.deleteRange(t,n);var o=e.doc.resolve(t),i=e.doc.resolve(n);if(ue(o,i,r))return e.step(new F(t,n,r));var s=Se(o,e.doc.resolve(n));0==s[s.length-1]&&s.pop();var a=-(o.depth+1);s.unshift(a);for(var l=o.depth,c=o.pos-1;l>0;l--,c--){var u=o.node(l).type.spec;if(u.defining||u.definingAsContext||u.isolating)break;s.indexOf(l)>-1?a=l:o.before(l)==c&&s.splice(1,0,-l)}for(var d=s.indexOf(a),h=[],p=r.openStart,f=r.content,m=0;;m++){var g=f.firstChild;if(h.push(g),m==r.openStart)break;f=g.content}for(var y=p-1;y>=0;y--){var b=h[y],w=ye(b.type);if(w&&!b.sameMarkup(o.node(Math.abs(a)-1)))p=y;else if(w||!b.type.isTextblock)break}for(var k=r.openStart;k>=0;k--){var x=(k+p+1)%(r.openStart+1),S=h[x];if(S)for(var C=0;C<s.length;C++){var _=s[(C+d)%s.length],O=!0;_<0&&(O=!1,_=-_);var M=o.node(_-1),E=o.index(_-1);if(M.canReplaceWith(E,E,S.type,S.marks))return e.replace(o.before(_),O?i.after(_):n,new v.Slice(we(r.content,0,r.openStart,x),x,r.openEnd))}}for(var T=e.steps.length,A=s.length-1;A>=0;A--){if(e.replace(t,n,r),e.steps.length>T)break;var N=s[A];N<0||(t=o.before(N),n=i.after(N))}}function we(e,t,n,r,o){if(t<n){var i=e.firstChild;e=e.replaceChild(0,i.copy(we(i.content,t+1,n,r,i)))}if(t>r){var s=o.contentMatchAt(0),a=s.fillBefore(e).append(e);e=a.append(s.matchFragment(a).fillBefore(v.Fragment.empty,!0))}return e}function ke(e,t,n,r){if(!r.isInline&&t==n&&e.doc.resolve(t).parent.content.size){var o=ae(e.doc,t,r.type);null!=o&&(t=n=o)}e.replaceRange(t,n,new v.Slice(v.Fragment.from(r),0,0))}function xe(e,t,n){for(var r=e.doc.resolve(t),o=e.doc.resolve(n),i=Se(r,o),s=0;s<i.length;s++){var a=i[s],l=s==i.length-1;if(l&&0==a||r.node(a).type.contentMatch.validEnd)return e["delete"](r.start(a),o.end(a));if(a>0&&(l||r.node(a-1).canReplace(r.index(a-1),o.indexAfter(a-1))))return e["delete"](r.before(a),o.after(a))}for(var c=1;c<=r.depth&&c<=o.depth;c++)if(t-r.start(c)==r.depth-c&&n>r.end(c)&&o.end(c)-n!=o.depth-c)return e["delete"](r.before(c),n);e["delete"](t,n)}function Se(e,t){for(var n=[],r=Math.min(e.depth,t.depth),o=r;o>=0;o--){var i=e.start(o);if(i<e.pos-(e.depth-o)||t.end(o)>t.pos+(t.depth-o)||e.node(o).type.spec.isolating||t.node(o).type.spec.isolating)break;(i==t.start(o)||o==e.depth&&o==t.depth&&e.parent.inlineContent&&t.parent.inlineContent&&o&&t.start(o-1)==i-1)&&n.push(o)}return n}var Ce=function(e){a(n,e);var t=c(n);function n(e,r,o){var i;return f(this,n),i=t.call(this),i.pos=e,i.attr=r,i.value=o,i}return g(n,[{key:"apply",value:function(e){var t=e.nodeAt(this.pos);if(!t)return R.fail("No node at attribute step's position");var n=Object.create(null);for(var r in t.attrs)n[r]=t.attrs[r];n[this.attr]=this.value;var o=t.type.create(n,null,t.marks);return R.fromReplace(e,this.pos,this.pos+1,new v.Slice(v.Fragment.from(o),0,t.isLeaf?0:1))}},{key:"getMap",value:function(){return E.empty}},{key:"invert",value:function(e){return new n(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}},{key:"map",value:function(e){var t=e.mapResult(this.pos,1);return t.deletedAfter?null:new n(t.pos,this.attr,this.value)}},{key:"toJSON",value:function(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}}],[{key:"fromJSON",value:function(e,t){if("number"!=typeof t.pos||"string"!=typeof t.attr)throw new RangeError("Invalid input for AttrStep.fromJSON");return new n(t.pos,t.attr,t.value)}}]),n}(N);N.jsonID("attr",Ce);var _e=function(e){a(n,e);var t=c(n);function n(e,r){var o;return f(this,n),o=t.call(this),o.attr=e,o.value=r,o}return g(n,[{key:"apply",value:function(e){var t=Object.create(null);for(var n in e.attrs)t[n]=e.attrs[n];t[this.attr]=this.value;var r=e.type.create(t,e.content,e.marks);return R.ok(r)}},{key:"getMap",value:function(){return E.empty}},{key:"invert",value:function(e){return new n(this.attr,e.attrs[this.attr])}},{key:"map",value:function(e){return this}},{key:"toJSON",value:function(){return{stepType:"docAttr",attr:this.attr,value:this.value}}}],[{key:"fromJSON",value:function(e,t){if("string"!=typeof t.attr)throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new n(t.attr,t.value)}}]),n}(N);N.jsonID("docAttr",_e),t.TransformError=function(e){a(n,e);var t=c(n);function n(){return f(this,n),t.apply(this,arguments)}return g(n)}(o(Error)),t.TransformError=function e(t){var n=Error.call(this,t);return n.__proto__=e.prototype,n},t.TransformError.prototype=Object.create(Error.prototype),t.TransformError.prototype.constructor=t.TransformError,t.TransformError.prototype.name="TransformError";var Oe=function(){function e(t){f(this,e),this.doc=t,this.steps=[],this.docs=[],this.mapping=new T}return g(e,[{key:"before",get:function(){return this.docs.length?this.docs[0]:this.doc}},{key:"step",value:function(e){var n=this.maybeStep(e);if(n.failed)throw new t.TransformError(n.failed);return this}},{key:"maybeStep",value:function(e){var t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t}},{key:"docChanged",get:function(){return this.steps.length>0}},{key:"addStep",value:function(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t}},{key:"replace",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:v.Slice.empty,r=ce(this.doc,e,t,n);return r&&this.step(r),this}},{key:"replaceWith",value:function(e,t,n){return this.replace(e,t,new v.Slice(v.Fragment.from(n),0,0))}},{key:"delete",value:function(e,t){return this.replace(e,t,v.Slice.empty)}},{key:"insert",value:function(e,t){return this.replaceWith(e,e,t)}},{key:"replaceRange",value:function(e,t,n){return be(this,e,t,n),this}},{key:"replaceRangeWith",value:function(e,t,n){return ke(this,e,t,n),this}},{key:"deleteRange",value:function(e,t){return xe(this,e,t),this}},{key:"lift",value:function(e,t){return J(this,e,t),this}},{key:"join",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return se(this,e,t),this}},{key:"wrap",value:function(e,t){return Z(this,e,t),this}},{key:"setBlockType",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return Y(this,e,t,n,r),this}},{key:"setNodeMarkup",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0;return ee(this,e,t,n,r),this}},{key:"setNodeAttribute",value:function(e,t,n){return this.step(new Ce(e,t,n)),this}},{key:"setDocAttribute",value:function(e,t){return this.step(new _e(e,t)),this}},{key:"addNodeMark",value:function(e,t){return this.step(new P(e,t)),this}},{key:"removeNodeMark",value:function(e,t){if(!(t instanceof v.Mark)){var n=this.doc.nodeAt(e);if(!n)throw new RangeError("No node at position "+e);if(t=t.isInSet(n.marks),!t)return this}return this.step(new $(e,t)),this}},{key:"split",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2?arguments[2]:void 0;return ne(this,e,t,n),this}},{key:"addMark",value:function(e,t,n){return L(this,e,t,n),this}},{key:"removeMark",value:function(e,t,n){return V(this,e,t,n),this}},{key:"clearIncompatible",value:function(e,t,n){return q(this,e,t,n),this}}]),e}();t.AddMarkStep=I,t.AddNodeMarkStep=P,t.AttrStep=Ce,t.DocAttrStep=_e,t.MapResult=M,t.Mapping=T,t.RemoveMarkStep=z,t.RemoveNodeMarkStep=$,t.ReplaceAroundStep=B,t.ReplaceStep=F,t.Step=N,t.StepMap=E,t.StepResult=R,t.Transform=Oe,t.canJoin=re,t.canSplit=te,t.dropPoint=le,t.findWrapping=U,t.insertPoint=ae,t.joinPoint=ie,t.liftTarget=W,t.replaceStep=ce},9222:function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=i(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,s=e},f:function(){try{a||null==n["return"]||n["return"]()}finally{if(l)throw s}}}}function i(e,t){if(e){if("string"===typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(){return a="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=l(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},a.apply(this,arguments)}function l(e,t){while(!Object.prototype.hasOwnProperty.call(e,t))if(e=m(e),null===e)break;return e}function c(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}function u(e,t){return u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},u(e,t)}function d(e){var t=f();return function(){var n,r=m(e);if(t){var o=m(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return h(this,n)}}function h(e,t){if(t&&("object"===r(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return p(e)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function m(e){return m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},m(e)}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t,n){return t&&v(e.prototype,t),n&&v(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var b=n(2391),w=n(9443),k=n(2843),x=function(e){for(var t=0;;t++)if(e=e.previousSibling,!e)return t},S=function(e){var t=e.assignedSlot||e.parentNode;return t&&11==t.nodeType?t.host:t},C=null,_=function(e,t,n){var r=C||(C=document.createRange());return r.setEnd(e,null==n?e.nodeValue.length:n),r.setStart(e,t||0),r},O=function(e,t,n,r){return n&&(E(e,t,n,r,-1)||E(e,t,n,r,1))},M=/^(img|br|input|textarea|hr)$/i;function E(e,t,n,r,o){for(;;){if(e==n&&t==r)return!0;if(t==(o<0?0:T(e))){var i=e.parentNode;if(!i||1!=i.nodeType||N(e)||M.test(e.nodeName)||"false"==e.contentEditable)return!1;t=x(e)+(o<0?0:1),e=i}else{if(1!=e.nodeType)return!1;if(e=e.childNodes[t+(o<0?-1:0)],"false"==e.contentEditable)return!1;t=o<0?T(e):0}}}function T(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function A(e,t,n){for(var r=0==t,o=t==T(e);r||o;){if(e==n)return!0;var i=x(e);if(e=e.parentNode,!e)return!1;r=r&&0==i,o=o&&i==T(e)}}function N(e){for(var t,n=e;n;n=n.parentNode)if(t=n.pmViewDesc)break;return t&&t.node&&t.node.isBlock&&(t.dom==e||t.contentDOM==e)}var R=function(e){return e.focusNode&&O(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)};function D(e,t){var n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=e,n.key=n.code=t,n}function I(e){var t=e.activeElement;while(t&&t.shadowRoot)t=t.shadowRoot.activeElement;return t}function z(e,t,n){if(e.caretPositionFromPoint)try{var r=e.caretPositionFromPoint(t,n);if(r)return{node:r.offsetNode,offset:r.offset}}catch(i){}if(e.caretRangeFromPoint){var o=e.caretRangeFromPoint(t,n);if(o)return{node:o.startContainer,offset:o.startOffset}}}var P="undefined"!=typeof navigator?navigator:null,$="undefined"!=typeof document?document:null,F=P&&P.userAgent||"",B=/Edge\/(\d+)/.exec(F),j=/MSIE \d/.exec(F),L=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(F),V=!!(j||L||B),q=j?document.documentMode:L?+L[1]:B?+B[1]:0,H=!V&&/gecko\/(\d+)/i.test(F);H&&(/Firefox\/(\d+)/.exec(F)||[0,0])[1];var W=!V&&/Chrome\/(\d+)/.exec(F),J=!!W,U=W?+W[1]:0,K=!V&&!!P&&/Apple Computer/.test(P.vendor),G=K&&(/Mobile\/\w+/.test(F)||!!P&&P.maxTouchPoints>2),X=G||!!P&&/Mac/.test(P.platform),Z=!!P&&/Win/.test(P.platform),Y=/Android \d/.test(F),Q=!!$&&"webkitFontSmoothing"in $.documentElement.style,ee=Q?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function te(e){return{left:0,right:e.documentElement.clientWidth,top:0,bottom:e.documentElement.clientHeight}}function ne(e,t){return"number"==typeof e?e:e[t]}function re(e){var t=e.getBoundingClientRect(),n=t.width/e.offsetWidth||1,r=t.height/e.offsetHeight||1;return{left:t.left,right:t.left+e.clientWidth*n,top:t.top,bottom:t.top+e.clientHeight*r}}function oe(e,t,n){for(var r=e.someProp("scrollThreshold")||0,o=e.someProp("scrollMargin")||5,i=e.dom.ownerDocument,s=n||e.dom;;s=S(s)){if(!s)break;if(1==s.nodeType){var a=s,l=a==i.body,c=l?te(i):re(a),u=0,d=0;if(t.top<c.top+ne(r,"top")?d=-(c.top-t.top+ne(o,"top")):t.bottom>c.bottom-ne(r,"bottom")&&(d=t.bottom-t.top>c.bottom-c.top?t.top+ne(o,"top")-c.top:t.bottom-c.bottom+ne(o,"bottom")),t.left<c.left+ne(r,"left")?u=-(c.left-t.left+ne(o,"left")):t.right>c.right-ne(r,"right")&&(u=t.right-c.right+ne(o,"right")),u||d)if(l)i.defaultView.scrollBy(u,d);else{var h=a.scrollLeft,p=a.scrollTop;d&&(a.scrollTop+=d),u&&(a.scrollLeft+=u);var f=a.scrollLeft-h,m=a.scrollTop-p;t={left:t.left-f,top:t.top-m,right:t.right-f,bottom:t.bottom-m}}if(l||/^(fixed|sticky)$/.test(getComputedStyle(s).position))break}}}function ie(e){for(var t,n,r=e.dom.getBoundingClientRect(),o=Math.max(0,r.top),i=(r.left+r.right)/2,s=o+1;s<Math.min(innerHeight,r.bottom);s+=5){var a=e.root.elementFromPoint(i,s);if(a&&a!=e.dom&&e.dom.contains(a)){var l=a.getBoundingClientRect();if(l.top>=o-20){t=a,n=l.top;break}}}return{refDOM:t,refTop:n,stack:se(e.dom)}}function se(e){for(var t=[],n=e.ownerDocument,r=e;r;r=S(r))if(t.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),e==n)break;return t}function ae(e){var t=e.refDOM,n=e.refTop,r=e.stack,o=t?t.getBoundingClientRect().top:0;le(r,0==o?0:o-n)}function le(e,t){for(var n=0;n<e.length;n++){var r=e[n],o=r.dom,i=r.top,s=r.left;o.scrollTop!=i+t&&(o.scrollTop=i+t),o.scrollLeft!=s&&(o.scrollLeft=s)}}var ce=null;function ue(e){if(e.setActive)return e.setActive();if(ce)return e.focus(ce);var t=se(e);e.focus(null==ce?{get preventScroll(){return ce={preventScroll:!0},!0}}:void 0),ce||(ce=!1,le(t,0))}function de(e,t){for(var n,r,o,i,s=2e8,a=0,l=t.top,c=t.top,u=e.firstChild,d=0;u;u=u.nextSibling,d++){var h=void 0;if(1==u.nodeType)h=u.getClientRects();else{if(3!=u.nodeType)continue;h=_(u).getClientRects()}for(var p=0;p<h.length;p++){var f=h[p];if(f.top<=l&&f.bottom>=c){l=Math.max(f.bottom,l),c=Math.min(f.top,c);var m=f.left>t.left?f.left-t.left:f.right<t.left?t.left-f.right:0;if(m<s){n=u,s=m,r=m&&3==n.nodeType?{left:f.right<t.left?f.right:f.left,top:t.top}:t,1==u.nodeType&&m&&(a=d+(t.left>=(f.left+f.right)/2?1:0));continue}}else f.top>t.top&&!o&&f.left<=t.left&&f.right>=t.left&&(o=u,i={left:Math.max(f.left,Math.min(f.right,t.left)),top:f.top});!n&&(t.left>=f.right&&t.top>=f.top||t.left>=f.left&&t.top>=f.bottom)&&(a=d+1)}}return!n&&o&&(n=o,r=i,s=0),n&&3==n.nodeType?he(n,r):!n||s&&1==n.nodeType?{node:e,offset:a}:de(n,r)}function he(e,t){for(var n=e.nodeValue.length,r=document.createRange(),o=0;o<n;o++){r.setEnd(e,o+1),r.setStart(e,o);var i=we(r,1);if(i.top!=i.bottom&&pe(t,i))return{node:e,offset:o+(t.left>=(i.left+i.right)/2?1:0)}}return{node:e,offset:0}}function pe(e,t){return e.left>=t.left-1&&e.left<=t.right+1&&e.top>=t.top-1&&e.top<=t.bottom+1}function fe(e,t){var n=e.parentNode;return n&&/^li$/i.test(n.nodeName)&&t.left<e.getBoundingClientRect().left?n:e}function me(e,t,n){var r=de(t,n),o=r.node,i=r.offset,s=-1;if(1==o.nodeType&&!o.firstChild){var a=o.getBoundingClientRect();s=a.left!=a.right&&n.left>(a.left+a.right)/2?1:-1}return e.docView.posFromDOM(o,i,s)}function ge(e,t,n,r){for(var o=-1,i=t,s=!1;;){if(i==e.dom)break;var a=e.docView.nearestDesc(i,!0);if(!a)return null;if(1==a.dom.nodeType&&(a.node.isBlock&&a.parent&&!s||!a.contentDOM)){var l=a.dom.getBoundingClientRect();if(a.node.isBlock&&a.parent&&!s&&(s=!0,l.left>r.left||l.top>r.top?o=a.posBefore:(l.right<r.left||l.bottom<r.top)&&(o=a.posAfter)),!a.contentDOM&&o<0&&!a.node.isText){var c=a.node.isBlock?r.top<(l.top+l.bottom)/2:r.left<(l.left+l.right)/2;return c?a.posBefore:a.posAfter}}i=a.dom.parentNode}return o>-1?o:e.docView.posFromDOM(t,n,-1)}function ve(e,t,n){var r=e.childNodes.length;if(r&&n.top<n.bottom)for(var o=Math.max(0,Math.min(r-1,Math.floor(r*(t.top-n.top)/(n.bottom-n.top))-2)),i=o;;){var s=e.childNodes[i];if(1==s.nodeType)for(var a=s.getClientRects(),l=0;l<a.length;l++){var c=a[l];if(pe(t,c))return ve(s,t,c)}if((i=(i+1)%r)==o)break}return e}function ye(e,t){var n,r=e.dom.ownerDocument,o=0,i=z(r,t.left,t.top);i&&(n=i.node,o=i.offset);var s,a=(e.root.elementFromPoint?e.root:r).elementFromPoint(t.left,t.top);if(!a||!e.dom.contains(1!=a.nodeType?a.parentNode:a)){var l=e.dom.getBoundingClientRect();if(!pe(t,l))return null;if(a=ve(e.dom,t,l),!a)return null}if(K)for(var c=a;n&&c;c=S(c))c.draggable&&(n=void 0);if(a=fe(a,t),n){if(H&&1==n.nodeType&&(o=Math.min(o,n.childNodes.length),o<n.childNodes.length)){var u,d=n.childNodes[o];"IMG"==d.nodeName&&(u=d.getBoundingClientRect()).right<=t.left&&u.bottom>t.top&&o++}var h;Q&&o&&1==n.nodeType&&1==(h=n.childNodes[o-1]).nodeType&&"false"==h.contentEditable&&h.getBoundingClientRect().top>=t.top&&o--,n==e.dom&&o==n.childNodes.length-1&&1==n.lastChild.nodeType&&t.top>n.lastChild.getBoundingClientRect().bottom?s=e.state.doc.content.size:0!=o&&1==n.nodeType&&"BR"==n.childNodes[o-1].nodeName||(s=ge(e,n,o,t))}null==s&&(s=me(e,a,t));var p=e.docView.nearestDesc(a,!0);return{pos:s,inside:p?p.posAtStart-p.border:-1}}function be(e){return e.top<e.bottom||e.left<e.right}function we(e,t){var n=e.getClientRects();if(n.length){var r=n[t<0?0:n.length-1];if(be(r))return r}return Array.prototype.find.call(n,be)||e.getBoundingClientRect()}var ke=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function xe(e,t,n){var r=e.docView.domFromPos(t,n<0?-1:1),o=r.node,i=r.offset,s=r.atom,a=Q||H;if(3==o.nodeType){if(!a||!ke.test(o.nodeValue)&&(n<0?i:i!=o.nodeValue.length)){var l=i,c=i,u=n<0?1:-1;return n<0&&!i?(c++,u=-1):n>=0&&i==o.nodeValue.length?(l--,u=1):n<0?l--:c++,Se(we(_(o,l,c),u),u<0)}var d=we(_(o,i,i),n);if(H&&i&&/\s/.test(o.nodeValue[i-1])&&i<o.nodeValue.length){var h=we(_(o,i-1,i-1),-1);if(h.top==d.top){var p=we(_(o,i,i+1),-1);if(p.top!=d.top)return Se(p,p.left<h.left)}}return d}var f=e.state.doc.resolve(t-(s||0));if(!f.parent.inlineContent){if(null==s&&i&&(n<0||i==T(o))){var m=o.childNodes[i-1];if(1==m.nodeType)return Ce(m.getBoundingClientRect(),!1)}if(null==s&&i<T(o)){var g=o.childNodes[i];if(1==g.nodeType)return Ce(g.getBoundingClientRect(),!0)}return Ce(o.getBoundingClientRect(),n>=0)}if(null==s&&i&&(n<0||i==T(o))){var v=o.childNodes[i-1],y=3==v.nodeType?_(v,T(v)-(a?0:1)):1!=v.nodeType||"BR"==v.nodeName&&v.nextSibling?null:v;if(y)return Se(we(y,1),!1)}if(null==s&&i<T(o)){var b=o.childNodes[i];while(b.pmViewDesc&&b.pmViewDesc.ignoreForCoords)b=b.nextSibling;var w=b?3==b.nodeType?_(b,0,a?0:1):1==b.nodeType?b:null:null;if(w)return Se(we(w,-1),!0)}return Se(we(3==o.nodeType?_(o):o,-n),n>=0)}function Se(e,t){if(0==e.width)return e;var n=t?e.left:e.right;return{top:e.top,bottom:e.bottom,left:n,right:n}}function Ce(e,t){if(0==e.height)return e;var n=t?e.top:e.bottom;return{top:n,bottom:n,left:e.left,right:e.right}}function _e(e,t,n){var r=e.state,o=e.root.activeElement;r!=t&&e.updateState(t),o!=e.dom&&e.focus();try{return n()}finally{r!=t&&e.updateState(r),o!=e.dom&&o&&o.focus()}}function Oe(e,t,n){var r=t.selection,o="up"==n?r.$from:r.$to;return _e(e,t,(function(){for(var t=e.docView.domFromPos(o.pos,"up"==n?-1:1),r=t.node;;){var i=e.docView.nearestDesc(r,!0);if(!i)break;if(i.node.isBlock){r=i.contentDOM||i.dom;break}r=i.dom.parentNode}for(var s=xe(e,o.pos,1),a=r.firstChild;a;a=a.nextSibling){var l=void 0;if(1==a.nodeType)l=a.getClientRects();else{if(3!=a.nodeType)continue;l=_(a,0,a.nodeValue.length).getClientRects()}for(var c=0;c<l.length;c++){var u=l[c];if(u.bottom>u.top+1&&("up"==n?s.top-u.top>2*(u.bottom-s.top):u.bottom-s.bottom>2*(s.bottom-u.top)))return!1}}return!0}))}var Me=/[\u0590-\u08ac]/;function Ee(e,t,n){var r=t.selection.$head;if(!r.parent.isTextblock)return!1;var o=r.parentOffset,i=!o,s=o==r.parent.content.size,a=e.domSelection();return Me.test(r.parent.textContent)&&a.modify?_e(e,t,(function(){var t=e.domSelectionRange(),o=t.focusNode,i=t.focusOffset,s=t.anchorNode,l=t.anchorOffset,c=a.caretBidiLevel;a.modify("move",n,"character");var u=r.depth?e.docView.domAfterPos(r.before()):e.dom,d=e.domSelectionRange(),h=d.focusNode,p=d.focusOffset,f=h&&!u.contains(1==h.nodeType?h:h.parentNode)||o==h&&i==p;try{a.collapse(s,l),o&&(o!=s||i!=l)&&a.extend&&a.extend(o,i)}catch(m){}return null!=c&&(a.caretBidiLevel=c),f})):"left"==n||"backward"==n?i:s}var Te=null,Ae=null,Ne=!1;function Re(e,t,n){return Te==t&&Ae==n?Ne:(Te=t,Ae=n,Ne="up"==n||"down"==n?Oe(e,t,n):Ee(e,t,n))}var De=0,Ie=1,ze=2,Pe=3,$e=function(){function e(t,n,r,o){g(this,e),this.parent=t,this.children=n,this.dom=r,this.contentDOM=o,this.dirty=De,r.pmViewDesc=this}return y(e,[{key:"matchesWidget",value:function(e){return!1}},{key:"matchesMark",value:function(e){return!1}},{key:"matchesNode",value:function(e,t,n){return!1}},{key:"matchesHack",value:function(e){return!1}},{key:"parseRule",value:function(){return null}},{key:"stopEvent",value:function(e){return!1}},{key:"size",get:function(){for(var e=0,t=0;t<this.children.length;t++)e+=this.children[t].size;return e}},{key:"border",get:function(){return 0}},{key:"destroy",value:function(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(var e=0;e<this.children.length;e++)this.children[e].destroy()}},{key:"posBeforeChild",value:function(e){for(var t=0,n=this.posAtStart;;t++){var r=this.children[t];if(r==e)return n;n+=r.size}}},{key:"posBefore",get:function(){return this.parent.posBeforeChild(this)}},{key:"posAtStart",get:function(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}},{key:"posAfter",get:function(){return this.posBefore+this.size}},{key:"posAtEnd",get:function(){return this.posAtStart+this.size-2*this.border}},{key:"localPosFromDOM",value:function(e,t,n){if(this.contentDOM&&this.contentDOM.contains(1==e.nodeType?e:e.parentNode)){if(n<0){var r,o;if(e==this.contentDOM)r=e.childNodes[t-1];else{while(e.parentNode!=this.contentDOM)e=e.parentNode;r=e.previousSibling}while(r&&(!(o=r.pmViewDesc)||o.parent!=this))r=r.previousSibling;return r?this.posBeforeChild(o)+o.size:this.posAtStart}var i,s;if(e==this.contentDOM)i=e.childNodes[t];else{while(e.parentNode!=this.contentDOM)e=e.parentNode;i=e.nextSibling}while(i&&(!(s=i.pmViewDesc)||s.parent!=this))i=i.nextSibling;return i?this.posBeforeChild(s):this.posAtEnd}var a;if(e==this.dom&&this.contentDOM)a=t>x(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))a=2&e.compareDocumentPosition(this.contentDOM);else if(this.dom.firstChild){if(0==t)for(var l=e;;l=l.parentNode){if(l==this.dom){a=!1;break}if(l.previousSibling)break}if(null==a&&t==e.childNodes.length)for(var c=e;;c=c.parentNode){if(c==this.dom){a=!0;break}if(c.nextSibling)break}}return(null==a?n>0:a)?this.posAtEnd:this.posAtStart}},{key:"nearestDesc",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!0,r=e;r;r=r.parentNode){var o=this.getDesc(r),i=void 0;if(o&&(!t||o.node)){if(!n||!(i=o.nodeDOM)||(1==i.nodeType?i.contains(1==e.nodeType?e:e.parentNode):i==e))return o;n=!1}}}},{key:"getDesc",value:function(e){for(var t=e.pmViewDesc,n=t;n;n=n.parent)if(n==this)return t}},{key:"posFromDOM",value:function(e,t,n){for(var r=e;r;r=r.parentNode){var o=this.getDesc(r);if(o)return o.localPosFromDOM(e,t,n)}return-1}},{key:"descAt",value:function(e){for(var t=0,n=0;t<this.children.length;t++){var r=this.children[t],o=n+r.size;if(n==e&&o!=n){while(!r.border&&r.children.length)r=r.children[0];return r}if(e<o)return r.descAt(e-n-r.border);n=o}}},{key:"domFromPos",value:function(e,t){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};for(var n,r=0,o=0,i=0;r<this.children.length;r++){var s=this.children[r],a=i+s.size;if(a>e||s instanceof He){o=e-i;break}i=a}if(o)return this.children[r].domFromPos(o-this.children[r].border,t);for(;r&&!(n=this.children[r-1]).size&&n instanceof Fe&&n.side>=0;r--);if(t<=0){for(var l,c=!0;;r--,c=!1)if(l=r?this.children[r-1]:null,!l||l.dom.parentNode==this.contentDOM)break;return l&&t&&c&&!l.border&&!l.domAtom?l.domFromPos(l.size,t):{node:this.contentDOM,offset:l?x(l.dom)+1:0}}for(var u,d=!0;;r++,d=!1)if(u=r<this.children.length?this.children[r]:null,!u||u.dom.parentNode==this.contentDOM)break;return u&&d&&!u.border&&!u.domAtom?u.domFromPos(0,t):{node:this.contentDOM,offset:u?x(u.dom):this.contentDOM.childNodes.length}}},{key:"parseRange",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(0==this.children.length)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};for(var r=-1,o=-1,i=n,s=0;;s++){var a=this.children[s],l=i+a.size;if(-1==r&&e<=l){var c=i+a.border;if(e>=c&&t<=l-a.border&&a.node&&a.contentDOM&&this.contentDOM.contains(a.contentDOM))return a.parseRange(e,t,c);e=i;for(var u=s;u>0;u--){var d=this.children[u-1];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(1)){r=x(d.dom)+1;break}e-=d.size}-1==r&&(r=0)}if(r>-1&&(l>t||s==this.children.length-1)){t=l;for(var h=s+1;h<this.children.length;h++){var p=this.children[h];if(p.size&&p.dom.parentNode==this.contentDOM&&!p.emptyChildAt(-1)){o=x(p.dom);break}t+=p.size}-1==o&&(o=this.contentDOM.childNodes.length);break}i=l}return{node:this.contentDOM,from:e,to:t,fromOffset:r,toOffset:o}}},{key:"emptyChildAt",value:function(e){if(this.border||!this.contentDOM||!this.children.length)return!1;var t=this.children[e<0?0:this.children.length-1];return 0==t.size||t.emptyChildAt(e)}},{key:"domAfterPos",value:function(e){var t=this.domFromPos(e,0),n=t.node,r=t.offset;if(1!=n.nodeType||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]}},{key:"setSelection",value:function(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=Math.min(e,t),i=Math.max(e,t),s=0,a=0;s<this.children.length;s++){var l=this.children[s],c=a+l.size;if(o>a&&i<c)return l.setSelection(e-a-l.border,t-a-l.border,n,r);a=c}var u=this.domFromPos(e,e?-1:1),d=t==e?u:this.domFromPos(t,t?-1:1),h=n.getSelection(),p=!1;if((H||K)&&e==t){var f=u,m=f.node,g=f.offset;if(3==m.nodeType){if(p=!(!g||"\n"!=m.nodeValue[g-1]),p&&g==m.nodeValue.length)for(var v,y=m;y;y=y.parentNode){if(v=y.nextSibling){"BR"==v.nodeName&&(u=d={node:v.parentNode,offset:x(v)+1});break}var b=y.pmViewDesc;if(b&&b.node&&b.node.isBlock)break}}else{var w=m.childNodes[g-1];p=w&&("BR"==w.nodeName||"false"==w.contentEditable)}}if(H&&h.focusNode&&h.focusNode!=d.node&&1==h.focusNode.nodeType){var k=h.focusNode.childNodes[h.focusOffset];k&&"false"==k.contentEditable&&(r=!0)}if(r||p&&K||!O(u.node,u.offset,h.anchorNode,h.anchorOffset)||!O(d.node,d.offset,h.focusNode,h.focusOffset)){var S=!1;if((h.extend||e==t)&&!p){h.collapse(u.node,u.offset);try{e!=t&&h.extend(d.node,d.offset),S=!0}catch(M){}}if(!S){if(e>t){var C=u;u=d,d=C}var _=document.createRange();_.setEnd(d.node,d.offset),_.setStart(u.node,u.offset),h.removeAllRanges(),h.addRange(_)}}}},{key:"ignoreMutation",value:function(e){return!this.contentDOM&&"selection"!=e.type}},{key:"contentLost",get:function(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}},{key:"markDirty",value:function(e,t){for(var n=0,r=0;r<this.children.length;r++){var o=this.children[r],i=n+o.size;if(n==i?e<=i&&t>=n:e<i&&t>n){var s=n+o.border,a=i-o.border;if(e>=s&&t<=a)return this.dirty=e==n||t==i?ze:Ie,void(e!=s||t!=a||!o.contentLost&&o.dom.parentNode==this.contentDOM?o.markDirty(e-s,t-s):o.dirty=Pe);o.dirty=o.dom!=o.contentDOM||o.dom.parentNode!=this.contentDOM||o.children.length?Pe:ze}n=i}this.dirty=ze}},{key:"markParentsDirty",value:function(){for(var e=1,t=this.parent;t;t=t.parent,e++){var n=1==e?ze:Ie;t.dirty<n&&(t.dirty=n)}}},{key:"domAtom",get:function(){return!1}},{key:"ignoreForCoords",get:function(){return!1}}]),e}(),Fe=function(e){c(n,e);var t=d(n);function n(e,r,o,i){var s;g(this,n);var a,l=r.type.toDOM;if("function"==typeof l&&(l=l(o,(function(){return a?a.parent?a.parent.posBeforeChild(a):void 0:i}))),!r.type.spec.raw){if(1!=l.nodeType){var c=document.createElement("span");c.appendChild(l),l=c}l.contentEditable="false",l.classList.add("ProseMirror-widget")}return s=t.call(this,e,[],l,null),s.widget=r,s.widget=r,a=p(s),s}return y(n,[{key:"matchesWidget",value:function(e){return this.dirty==De&&e.type.eq(this.widget.type)}},{key:"parseRule",value:function(){return{ignore:!0}}},{key:"stopEvent",value:function(e){var t=this.widget.spec.stopEvent;return!!t&&t(e)}},{key:"ignoreMutation",value:function(e){return"selection"!=e.type||this.widget.spec.ignoreSelection}},{key:"destroy",value:function(){this.widget.type.destroy(this.dom),a(m(n.prototype),"destroy",this).call(this)}},{key:"domAtom",get:function(){return!0}},{key:"side",get:function(){return this.widget.type.side}}]),n}($e),Be=function(e){c(n,e);var t=d(n);function n(e,r,o,i){var s;return g(this,n),s=t.call(this,e,[],r,null),s.textDOM=o,s.text=i,s}return y(n,[{key:"size",get:function(){return this.text.length}},{key:"localPosFromDOM",value:function(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t}},{key:"domFromPos",value:function(e){return{node:this.textDOM,offset:e}}},{key:"ignoreMutation",value:function(e){return"characterData"===e.type&&e.target.nodeValue==e.oldValue}}]),n}($e),je=function(e){c(n,e);var t=d(n);function n(e,r,o,i){var s;return g(this,n),s=t.call(this,e,[],o,i),s.mark=r,s}return y(n,[{key:"parseRule",value:function(){return this.dirty&Pe||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}},{key:"matchesMark",value:function(e){return this.dirty!=Pe&&this.mark.eq(e)}},{key:"markDirty",value:function(e,t){if(a(m(n.prototype),"markDirty",this).call(this,e,t),this.dirty!=De){var r=this.parent;while(!r.node)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=De}}},{key:"slice",value:function(e,t,r){var o=n.create(this.parent,this.mark,!0,r),i=this.children,s=this.size;t<s&&(i=lt(i,t,s,r)),e>0&&(i=lt(i,0,e,r));for(var a=0;a<i.length;a++)i[a].parent=o;return o.children=i,o}}],[{key:"create",value:function(e,t,r,o){var i=o.nodeViews[t.type.name],s=i&&i(t,o,r);return s&&s.dom||(s=w.DOMSerializer.renderSpec(document,t.type.spec.toDOM(t,r))),new n(e,t,s.dom,s.contentDOM||s.dom)}}]),n}($e),Le=function(e){c(n,e);var t=d(n);function n(e,r,o,i,s,a,l,c,u){var d;return g(this,n),d=t.call(this,e,[],s,a),d.node=r,d.outerDeco=o,d.innerDeco=i,d.nodeDOM=l,d}return y(n,[{key:"parseRule",value:function(){var e=this;if(this.node.type.spec.reparseInView)return null;var t={node:this.node.type.name,attrs:this.node.attrs};if("pre"==this.node.type.whitespace&&(t.preserveWhitespace="full"),this.contentDOM)if(this.contentLost){for(var n=this.children.length-1;n>=0;n--){var r=this.children[n];if(this.dom.contains(r.dom.parentNode)){t.contentElement=r.dom.parentNode;break}}t.contentElement||(t.getContent=function(){return w.Fragment.empty})}else t.contentElement=this.contentDOM;else t.getContent=function(){return e.node.content};return t}},{key:"matchesNode",value:function(e,t,n){return this.dirty==De&&e.eq(this.node)&&Qe(t,this.outerDeco)&&n.eq(this.innerDeco)}},{key:"size",get:function(){return this.node.nodeSize}},{key:"border",get:function(){return this.node.isLeaf?0:1}},{key:"updateChildren",value:function(e,t){var n=this,r=this.node.inlineContent,o=t,i=e.composing?this.localCompositionInfo(e,t):null,s=i&&i.pos>-1?i:null,a=i&&i.pos<0,l=new tt(this,s&&s.node,e);ot(this.node,this.innerDeco,(function(t,i,s){t.spec.marks?l.syncToMarks(t.spec.marks,r,e):t.type.side>=0&&!s&&l.syncToMarks(i==n.node.childCount?w.Mark.none:n.node.child(i).marks,r,e),l.placeWidget(t,e,o)}),(function(t,n,s,c){var u;l.syncToMarks(t.marks,r,e),l.findNodeMatch(t,n,s,c)||a&&e.state.selection.from>o&&e.state.selection.to<o+t.nodeSize&&(u=l.findIndexWithChild(i.node))>-1&&l.updateNodeAt(t,n,s,u,e)||l.updateNextNode(t,n,s,e,c,o)||l.addNode(t,n,s,e,o),o+=t.nodeSize})),l.syncToMarks([],r,e),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||this.dirty==ze)&&(s&&this.protectLocalComposition(e,s),Je(this.contentDOM,this.children,e),G&&it(this.dom))}},{key:"localCompositionInfo",value:function(e,t){var n=e.state.selection,r=n.from,o=n.to;if(!(e.state.selection instanceof b.TextSelection)||r<t||o>t+this.node.content.size)return null;var i=e.domSelectionRange(),s=st(i.focusNode,i.focusOffset);if(!s||!this.dom.contains(s.parentNode))return null;if(this.node.inlineContent){var a=s.nodeValue,l=at(this.node.content,a,r-t,o-t);return l<0?null:{node:s,pos:l,text:a}}return{node:s,pos:-1,text:""}}},{key:"protectLocalComposition",value:function(e,t){var n=t.node,r=t.pos,o=t.text;if(!this.getDesc(n)){for(var i=n;;i=i.parentNode){if(i.parentNode==this.contentDOM)break;while(i.previousSibling)i.parentNode.removeChild(i.previousSibling);while(i.nextSibling)i.parentNode.removeChild(i.nextSibling);i.pmViewDesc&&(i.pmViewDesc=void 0)}var s=new Be(this,i,n,o);e.input.compositionNodes.push(s),this.children=lt(this.children,r,r+o.length,e,s)}}},{key:"update",value:function(e,t,n,r){return!(this.dirty==Pe||!e.sameMarkup(this.node))&&(this.updateInner(e,t,n,r),!0)}},{key:"updateInner",value:function(e,t,n,r){this.updateOuterDeco(t),this.node=e,this.innerDeco=n,this.contentDOM&&this.updateChildren(r,this.posAtStart),this.dirty=De}},{key:"updateOuterDeco",value:function(e){if(!Qe(e,this.outerDeco)){var t=1!=this.nodeDOM.nodeType,n=this.dom;this.dom=Xe(this.dom,this.nodeDOM,Ge(this.outerDeco,this.node,t),Ge(e,this.node,t)),this.dom!=n&&(n.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}}},{key:"selectNode",value:function(){1==this.nodeDOM.nodeType&&this.nodeDOM.classList.add("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||(this.dom.draggable=!0)}},{key:"deselectNode",value:function(){1==this.nodeDOM.nodeType&&this.nodeDOM.classList.remove("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||this.dom.removeAttribute("draggable")}},{key:"domAtom",get:function(){return this.node.isAtom}}],[{key:"create",value:function(e,t,r,o,i,s){var a,l=i.nodeViews[t.type.name],c=l&&l(t,i,(function(){return a?a.parent?a.parent.posBeforeChild(a):void 0:s}),r,o),u=c&&c.dom,d=c&&c.contentDOM;if(t.isText)if(u){if(3!=u.nodeType)throw new RangeError("Text must be rendered as a DOM text node")}else u=document.createTextNode(t.text);else if(!u){var h=w.DOMSerializer.renderSpec(document,t.type.spec.toDOM(t));u=h.dom,d=h.contentDOM}d||t.isText||"BR"==u.nodeName||(u.hasAttribute("contenteditable")||(u.contentEditable="false"),t.type.spec.draggable&&(u.draggable=!0));var p=u;return u=Ye(u,r,t),c?a=new We(e,t,r,o,u,d||null,p,c,i,s+1):t.isText?new qe(e,t,r,o,u,p,i):new n(e,t,r,o,u,d||null,p,i,s+1)}}]),n}($e);function Ve(e,t,n,r,o){Ye(r,t,e);var i=new Le(void 0,e,t,n,r,r,r,o,0);return i.contentDOM&&i.updateChildren(o,0),i}var qe=function(e){c(n,e);var t=d(n);function n(e,r,o,i,s,a,l){return g(this,n),t.call(this,e,r,o,i,s,null,a,l,0)}return y(n,[{key:"parseRule",value:function(){var e=this.nodeDOM.parentNode;while(e&&e!=this.dom&&!e.pmIsDeco)e=e.parentNode;return{skip:e||!0}}},{key:"update",value:function(e,t,n,r){return!(this.dirty==Pe||this.dirty!=De&&!this.inParent()||!e.sameMarkup(this.node))&&(this.updateOuterDeco(t),this.dirty==De&&e.text==this.node.text||e.text==this.nodeDOM.nodeValue||(this.nodeDOM.nodeValue=e.text,r.trackWrites==this.nodeDOM&&(r.trackWrites=null)),this.node=e,this.dirty=De,!0)}},{key:"inParent",value:function(){for(var e=this.parent.contentDOM,t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1}},{key:"domFromPos",value:function(e){return{node:this.nodeDOM,offset:e}}},{key:"localPosFromDOM",value:function(e,t,r){return e==this.nodeDOM?this.posAtStart+Math.min(t,this.node.text.length):a(m(n.prototype),"localPosFromDOM",this).call(this,e,t,r)}},{key:"ignoreMutation",value:function(e){return"characterData"!=e.type&&"selection"!=e.type}},{key:"slice",value:function(e,t,r){var o=this.node.cut(e,t),i=document.createTextNode(o.text);return new n(this.parent,o,this.outerDeco,this.innerDeco,i,i,r)}},{key:"markDirty",value:function(e,t){a(m(n.prototype),"markDirty",this).call(this,e,t),this.dom==this.nodeDOM||0!=e&&t!=this.nodeDOM.nodeValue.length||(this.dirty=Pe)}},{key:"domAtom",get:function(){return!1}}]),n}(Le),He=function(e){c(n,e);var t=d(n);function n(){return g(this,n),t.apply(this,arguments)}return y(n,[{key:"parseRule",value:function(){return{ignore:!0}}},{key:"matchesHack",value:function(e){return this.dirty==De&&this.dom.nodeName==e}},{key:"domAtom",get:function(){return!0}},{key:"ignoreForCoords",get:function(){return"IMG"==this.dom.nodeName}}]),n}($e),We=function(e){c(n,e);var t=d(n);function n(e,r,o,i,s,a,l,c,u,d){var h;return g(this,n),h=t.call(this,e,r,o,i,s,a,l,u,d),h.spec=c,h}return y(n,[{key:"update",value:function(e,t,r,o){if(this.dirty==Pe)return!1;if(this.spec.update){var i=this.spec.update(e,t,r);return i&&this.updateInner(e,t,r,o),i}return!(!this.contentDOM&&!e.isLeaf)&&a(m(n.prototype),"update",this).call(this,e,t,r,o)}},{key:"selectNode",value:function(){this.spec.selectNode?this.spec.selectNode():a(m(n.prototype),"selectNode",this).call(this)}},{key:"deselectNode",value:function(){this.spec.deselectNode?this.spec.deselectNode():a(m(n.prototype),"deselectNode",this).call(this)}},{key:"setSelection",value:function(e,t,r,o){this.spec.setSelection?this.spec.setSelection(e,t,r):a(m(n.prototype),"setSelection",this).call(this,e,t,r,o)}},{key:"destroy",value:function(){this.spec.destroy&&this.spec.destroy(),a(m(n.prototype),"destroy",this).call(this)}},{key:"stopEvent",value:function(e){return!!this.spec.stopEvent&&this.spec.stopEvent(e)}},{key:"ignoreMutation",value:function(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):a(m(n.prototype),"ignoreMutation",this).call(this,e)}}]),n}(Le);function Je(e,t,n){for(var r=e.firstChild,o=!1,i=0;i<t.length;i++){var s=t[i],a=s.dom;if(a.parentNode==e){while(a!=r)r=et(r),o=!0;r=r.nextSibling}else o=!0,e.insertBefore(a,r);if(s instanceof je){var l=r?r.previousSibling:e.lastChild;Je(s.contentDOM,s.children,n),r=l?l.nextSibling:e.firstChild}}while(r)r=et(r),o=!0;o&&n.trackWrites==e&&(n.trackWrites=null)}var Ue=function(e){e&&(this.nodeName=e)};Ue.prototype=Object.create(null);var Ke=[new Ue];function Ge(e,t,n){if(0==e.length)return Ke;for(var r=n?Ke[0]:new Ue,o=[r],i=0;i<e.length;i++){var s=e[i].type.attrs;if(s)for(var a in s.nodeName&&o.push(r=new Ue(s.nodeName)),s){var l=s[a];null!=l&&(n&&1==o.length&&o.push(r=new Ue(t.isInline?"span":"div")),"class"==a?r["class"]=(r["class"]?r["class"]+" ":"")+l:"style"==a?r.style=(r.style?r.style+";":"")+l:"nodeName"!=a&&(r[a]=l))}}return o}function Xe(e,t,n,r){if(n==Ke&&r==Ke)return t;for(var o=t,i=0;i<r.length;i++){var s=r[i],a=n[i];if(i){var l=void 0;a&&a.nodeName==s.nodeName&&o!=e&&(l=o.parentNode)&&l.nodeName.toLowerCase()==s.nodeName||(l=document.createElement(s.nodeName),l.pmIsDeco=!0,l.appendChild(o),a=Ke[0]),o=l}Ze(o,a||Ke[0],s)}return o}function Ze(e,t,n){for(var r in t)"class"==r||"style"==r||"nodeName"==r||r in n||e.removeAttribute(r);for(var o in n)"class"!=o&&"style"!=o&&"nodeName"!=o&&n[o]!=t[o]&&e.setAttribute(o,n[o]);if(t["class"]!=n["class"]){for(var i=t["class"]?t["class"].split(" ").filter(Boolean):[],s=n["class"]?n["class"].split(" ").filter(Boolean):[],a=0;a<i.length;a++)-1==s.indexOf(i[a])&&e.classList.remove(i[a]);for(var l=0;l<s.length;l++)-1==i.indexOf(s[l])&&e.classList.add(s[l]);0==e.classList.length&&e.removeAttribute("class")}if(t.style!=n.style){if(t.style){var c,u=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g;while(c=u.exec(t.style))e.style.removeProperty(c[1])}n.style&&(e.style.cssText+=n.style)}}function Ye(e,t,n){return Xe(e,e,Ke,Ge(t,n,1!=e.nodeType))}function Qe(e,t){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(!e[n].type.eq(t[n].type))return!1;return!0}function et(e){var t=e.nextSibling;return e.parentNode.removeChild(e),t}var tt=function(){function e(t,n,r){g(this,e),this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=t,this.preMatch=nt(t.node.content,t)}return y(e,[{key:"destroyBetween",value:function(e,t){if(e!=t){for(var n=e;n<t;n++)this.top.children[n].destroy();this.top.children.splice(e,t-e),this.changed=!0}}},{key:"destroyRest",value:function(){this.destroyBetween(this.index,this.top.children.length)}},{key:"syncToMarks",value:function(e,t,n){var r=0,o=this.stack.length>>1,i=Math.min(o,e.length);while(r<i&&(r==o-1?this.top:this.stack[r+1<<1]).matchesMark(e[r])&&!1!==e[r].type.spec.spanning)r++;while(r<o)this.destroyRest(),this.top.dirty=De,this.index=this.stack.pop(),this.top=this.stack.pop(),o--;while(o<e.length){this.stack.push(this.top,this.index+1);for(var s=-1,a=this.index;a<Math.min(this.index+3,this.top.children.length);a++){var l=this.top.children[a];if(l.matchesMark(e[o])&&!this.isLocked(l.dom)){s=a;break}}if(s>-1)s>this.index&&(this.changed=!0,this.destroyBetween(this.index,s)),this.top=this.top.children[this.index];else{var c=je.create(this.top,e[o],t,n);this.top.children.splice(this.index,0,c),this.top=c,this.changed=!0}this.index=0,o++}}},{key:"findNodeMatch",value:function(e,t,n,r){var o,i=-1;if(r>=this.preMatch.index&&(o=this.preMatch.matches[r-this.preMatch.index]).parent==this.top&&o.matchesNode(e,t,n))i=this.top.children.indexOf(o,this.index);else for(var s=this.index,a=Math.min(this.top.children.length,s+5);s<a;s++){var l=this.top.children[s];if(l.matchesNode(e,t,n)&&!this.preMatch.matched.has(l)){i=s;break}}return!(i<0)&&(this.destroyBetween(this.index,i),this.index++,!0)}},{key:"updateNodeAt",value:function(e,t,n,r,o){var i=this.top.children[r];return i.dirty==Pe&&i.dom==i.contentDOM&&(i.dirty=ze),!!i.update(e,t,n,o)&&(this.destroyBetween(this.index,r),this.index++,!0)}},{key:"findIndexWithChild",value:function(e){for(;;){var t=e.parentNode;if(!t)return-1;if(t==this.top.contentDOM){var n=e.pmViewDesc;if(n)for(var r=this.index;r<this.top.children.length;r++)if(this.top.children[r]==n)return r;return-1}e=t}}},{key:"updateNextNode",value:function(e,t,n,r,o,i){for(var s=this.index;s<this.top.children.length;s++){var a=this.top.children[s];if(a instanceof Le){var l=this.preMatch.matched.get(a);if(null!=l&&l!=o)return!1;var c=a.dom,u=void 0,d=this.isLocked(c)&&!(e.isText&&a.node&&a.node.isText&&a.nodeDOM.nodeValue==e.text&&a.dirty!=Pe&&Qe(t,a.outerDeco));if(!d&&a.update(e,t,n,r))return this.destroyBetween(this.index,s),a.dom!=c&&(this.changed=!0),this.index++,!0;if(!d&&(u=this.recreateWrapper(a,e,t,n,r,i)))return this.top.children[this.index]=u,u.contentDOM&&(u.dirty=ze,u.updateChildren(r,i+1),u.dirty=De),this.changed=!0,this.index++,!0;break}}return!1}},{key:"recreateWrapper",value:function(e,t,n,r,i,s){if(e.dirty||t.isAtom||!e.children.length||!e.node.content.eq(t.content))return null;var a=Le.create(this.top,t,n,r,i,s);if(a.contentDOM){a.children=e.children,e.children=[];var l,c=o(a.children);try{for(c.s();!(l=c.n()).done;){var u=l.value;u.parent=a}}catch(d){c.e(d)}finally{c.f()}}return e.destroy(),a}},{key:"addNode",value:function(e,t,n,r,o){var i=Le.create(this.top,e,t,n,r,o);i.contentDOM&&i.updateChildren(r,o+1),this.top.children.splice(this.index++,0,i),this.changed=!0}},{key:"placeWidget",value:function(e,t,n){var r=this.index<this.top.children.length?this.top.children[this.index]:null;if(!r||!r.matchesWidget(e)||e!=r.widget&&r.widget.type.toDOM.parentNode){var o=new Fe(this.top,e,t,n);this.top.children.splice(this.index++,0,o),this.changed=!0}else this.index++}},{key:"addTextblockHacks",value:function(){var e=this.top.children[this.index-1],t=this.top;while(e instanceof je)t=e,e=t.children[t.children.length-1];(!e||!(e instanceof qe)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((K||J)&&e&&"false"==e.dom.contentEditable&&this.addHackNode("IMG",t),this.addHackNode("BR",this.top))}},{key:"addHackNode",value:function(e,t){if(t==this.top&&this.index<t.children.length&&t.children[this.index].matchesHack(e))this.index++;else{var n=document.createElement(e);"IMG"==e&&(n.className="ProseMirror-separator",n.alt=""),"BR"==e&&(n.className="ProseMirror-trailingBreak");var r=new He(this.top,[],n,null);t!=this.top?t.children.push(r):t.children.splice(this.index++,0,r),this.changed=!0}}},{key:"isLocked",value:function(e){return this.lock&&(e==this.lock||1==e.nodeType&&e.contains(this.lock.parentNode))}}]),e}();function nt(e,t){var n=t,r=n.children.length,o=e.childCount,i=new Map,s=[];e:while(o>0){for(var a=void 0;;)if(r){var l=n.children[r-1];if(!(l instanceof je)){a=l,r--;break}n=l,r=l.children.length}else{if(n==t)break e;r=n.parent.children.indexOf(n),n=n.parent}var c=a.node;if(c){if(c!=e.child(o-1))break;--o,i.set(a,o),s.push(a)}}return{index:o,matched:i,matches:s.reverse()}}function rt(e,t){return e.type.side-t.type.side}function ot(e,t,n,r){var o=t.locals(e),i=0;if(0!=o.length)for(var s=0,a=[],l=null,c=0;;){var u=void 0,d=void 0;while(s<o.length&&o[s].to==i){var h=o[s++];h.widget&&(u?(d||(d=[u])).push(h):u=h)}if(u)if(d){d.sort(rt);for(var p=0;p<d.length;p++)n(d[p],c,!!l)}else n(u,c,!!l);var f=void 0,m=void 0;if(l)m=-1,f=l,l=null;else{if(!(c<e.childCount))break;m=c,f=e.child(c++)}for(var g=0;g<a.length;g++)a[g].to<=i&&a.splice(g--,1);while(s<o.length&&o[s].from<=i&&o[s].to>i)a.push(o[s++]);var v=i+f.nodeSize;if(f.isText){var y=v;s<o.length&&o[s].from<y&&(y=o[s].from);for(var b=0;b<a.length;b++)a[b].to<y&&(y=a[b].to);y<v&&(l=f.cut(y-i),f=f.cut(0,y-i),v=y,m=-1)}var w=f.isInline&&!f.isLeaf?a.filter((function(e){return!e.inline})):a.slice();r(f,w,t.forChild(i,f),m),i=v}else for(var k=0;k<e.childCount;k++){var x=e.child(k);r(x,o,t.forChild(i,x),k),i+=x.nodeSize}}function it(e){if("UL"==e.nodeName||"OL"==e.nodeName){var t=e.style.cssText;e.style.cssText=t+"; list-style: square !important",window.getComputedStyle(e).listStyle,e.style.cssText=t}}function st(e,t){for(;;){if(3==e.nodeType)return e;if(1==e.nodeType&&t>0){if(e.childNodes.length>t&&3==e.childNodes[t].nodeType)return e.childNodes[t];e=e.childNodes[t-1],t=T(e)}else{if(!(1==e.nodeType&&t<e.childNodes.length))return null;e=e.childNodes[t],t=0}}}function at(e,t,n,r){for(var o=0,i=0;o<e.childCount&&i<=r;){var s=e.child(o++),a=i;if(i+=s.nodeSize,s.isText){var l=s.text;while(o<e.childCount){var c=e.child(o++);if(i+=c.nodeSize,!c.isText)break;l+=c.text}if(i>=n){if(i>=r&&l.slice(r-t.length-a,r-a)==t)return r-t.length;var u=a<r?l.lastIndexOf(t,r-a-1):-1;if(u>=0&&u+t.length+a>=n)return a+u;if(n==r&&l.length>=r+t.length-a&&l.slice(r-a,r-a+t.length)==t)return r}}}return-1}function lt(e,t,n,r,o){for(var i=[],s=0,a=0;s<e.length;s++){var l=e[s],c=a,u=a+=l.size;c>=n||u<=t?i.push(l):(c<t&&i.push(l.slice(0,t-c,r)),o&&(i.push(o),o=void 0),u>n&&i.push(l.slice(n-c,l.size,r)))}return i}function ct(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=e.domSelectionRange(),r=e.state.doc;if(!n.focusNode)return null;var o=e.docView.nearestDesc(n.focusNode),i=o&&0==o.size,s=e.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(s<0)return null;var a,l,c=r.resolve(s);if(R(n)){a=c;while(o&&!o.node)o=o.parent;var u=o.node;if(o&&u.isAtom&&b.NodeSelection.isSelectable(u)&&o.parent&&(!u.isInline||!A(n.focusNode,n.focusOffset,o.dom))){var d=o.posBefore;l=new b.NodeSelection(s==d?c:r.resolve(d))}}else{var h=e.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(h<0)return null;a=r.resolve(h)}if(!l){var p="pointer"==t||e.state.selection.head<c.pos&&!i?1:-1;l=wt(e,a,c,p)}return l}function ut(e){return e.editable?e.hasFocus():xt(e)&&document.activeElement&&document.activeElement.contains(e.dom)}function dt(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.state.selection;if(yt(e,n),ut(e)){if(!t&&e.input.mouseDown&&e.input.mouseDown.allowDefault&&J){var r=e.domSelectionRange(),o=e.domObserver.currentSelection;if(r.anchorNode&&o.anchorNode&&O(r.anchorNode,r.anchorOffset,o.anchorNode,o.anchorOffset))return e.input.mouseDown.delayedSelectionSync=!0,void e.domObserver.setCurSelection()}if(e.domObserver.disconnectSelection(),e.cursorWrapper)vt(e);else{var i,s,a=n.anchor,l=n.head;!ht||n instanceof b.TextSelection||(n.$from.parent.inlineContent||(i=pt(e,n.from)),n.empty||n.$from.parent.inlineContent||(s=pt(e,n.to))),e.docView.setSelection(a,l,e.root,t),ht&&(i&&mt(i),s&&mt(s)),n.visible?e.dom.classList.remove("ProseMirror-hideselection"):(e.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&gt(e))}e.domObserver.setCurSelection(),e.domObserver.connectSelection()}}var ht=K||J&&U<63;function pt(e,t){var n=e.docView.domFromPos(t,0),r=n.node,o=n.offset,i=o<r.childNodes.length?r.childNodes[o]:null,s=o?r.childNodes[o-1]:null;if(K&&i&&"false"==i.contentEditable)return ft(i);if((!i||"false"==i.contentEditable)&&(!s||"false"==s.contentEditable)){if(i)return ft(i);if(s)return ft(s)}}function ft(e){return e.contentEditable="true",K&&e.draggable&&(e.draggable=!1,e.wasDraggable=!0),e}function mt(e){e.contentEditable="false",e.wasDraggable&&(e.draggable=!0,e.wasDraggable=null)}function gt(e){var t=e.dom.ownerDocument;t.removeEventListener("selectionchange",e.input.hideSelectionGuard);var n=e.domSelectionRange(),r=n.anchorNode,o=n.anchorOffset;t.addEventListener("selectionchange",e.input.hideSelectionGuard=function(){n.anchorNode==r&&n.anchorOffset==o||(t.removeEventListener("selectionchange",e.input.hideSelectionGuard),setTimeout((function(){ut(e)&&!e.state.selection.visible||e.dom.classList.remove("ProseMirror-hideselection")}),20))})}function vt(e){var t=e.domSelection(),n=document.createRange(),r=e.cursorWrapper.dom,o="IMG"==r.nodeName;o?n.setEnd(r.parentNode,x(r)+1):n.setEnd(r,0),n.collapse(!1),t.removeAllRanges(),t.addRange(n),!o&&!e.state.selection.visible&&V&&q<=11&&(r.disabled=!0,r.disabled=!1)}function yt(e,t){if(t instanceof b.NodeSelection){var n=e.docView.descAt(t.from);n!=e.lastSelectedViewDesc&&(bt(e),n&&n.selectNode(),e.lastSelectedViewDesc=n)}else bt(e)}function bt(e){e.lastSelectedViewDesc&&(e.lastSelectedViewDesc.parent&&e.lastSelectedViewDesc.deselectNode(),e.lastSelectedViewDesc=void 0)}function wt(e,t,n,r){return e.someProp("createSelectionBetween",(function(r){return r(e,t,n)}))||b.TextSelection.between(t,n,r)}function kt(e){return!(e.editable&&!e.hasFocus())&&xt(e)}function xt(e){var t=e.domSelectionRange();if(!t.anchorNode)return!1;try{return e.dom.contains(3==t.anchorNode.nodeType?t.anchorNode.parentNode:t.anchorNode)&&(e.editable||e.dom.contains(3==t.focusNode.nodeType?t.focusNode.parentNode:t.focusNode))}catch(n){return!1}}function St(e){var t=e.docView.domFromPos(e.state.selection.anchor,0),n=e.domSelectionRange();return O(t.node,t.offset,n.anchorNode,n.anchorOffset)}function Ct(e,t){var n=e.selection,r=n.$anchor,o=n.$head,i=t>0?r.max(o):r.min(o),s=i.parent.inlineContent?i.depth?e.doc.resolve(t>0?i.after():i.before()):null:i;return s&&b.Selection.findFrom(s,t)}function _t(e,t){return e.dispatch(e.state.tr.setSelection(t).scrollIntoView()),!0}function Ot(e,t,n){var r=e.state.selection;if(!(r instanceof b.TextSelection)){if(r instanceof b.NodeSelection&&r.node.isInline)return _t(e,new b.TextSelection(t>0?r.$to:r.$from));var o=Ct(e.state,t);return!!o&&_t(e,o)}if(!r.empty||n.indexOf("s")>-1)return!1;if(e.endOfTextblock(t>0?"forward":"backward")){var i=Ct(e.state,t);return!!(i&&i instanceof b.NodeSelection)&&_t(e,i)}if(!(X&&n.indexOf("m")>-1)){var s,a=r.$head,l=a.textOffset?null:t<0?a.nodeBefore:a.nodeAfter;if(!l||l.isText)return!1;var c=t<0?a.pos-l.nodeSize:a.pos;return!!(l.isAtom||(s=e.docView.descAt(c))&&!s.contentDOM)&&(b.NodeSelection.isSelectable(l)?_t(e,new b.NodeSelection(t<0?e.state.doc.resolve(a.pos-l.nodeSize):a)):!!Q&&_t(e,new b.TextSelection(e.state.doc.resolve(t<0?c:c+l.nodeSize))))}}function Mt(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function Et(e,t){if("false"==e.contentEditable)return!0;var n=e.pmViewDesc;return n&&0==n.size&&(t<0||e.nextSibling||"BR"!=e.nodeName)}function Tt(e,t){return t<0?At(e):Nt(e)}function At(e){var t=e.domSelectionRange(),n=t.focusNode,r=t.focusOffset;if(n){var o,i,s=!1;for(H&&1==n.nodeType&&r<Mt(n)&&Et(n.childNodes[r],-1)&&(s=!0);;)if(r>0){if(1!=n.nodeType)break;var a=n.childNodes[r-1];if(Et(a,-1))o=n,i=--r;else{if(3!=a.nodeType)break;n=a,r=n.nodeValue.length}}else{if(Rt(n))break;var l=n.previousSibling;while(l&&Et(l,-1))o=n.parentNode,i=x(l),l=l.previousSibling;if(l)n=l,r=Mt(n);else{if(n=n.parentNode,n==e.dom)break;r=0}}s?zt(e,n,r):o&&zt(e,o,i)}}function Nt(e){var t=e.domSelectionRange(),n=t.focusNode,r=t.focusOffset;if(n){for(var o,i,s=Mt(n);;)if(r<s){if(1!=n.nodeType)break;var a=n.childNodes[r];if(!Et(a,1))break;o=n,i=++r}else{if(Rt(n))break;var l=n.nextSibling;while(l&&Et(l,1))o=l.parentNode,i=x(l)+1,l=l.nextSibling;if(l)n=l,r=0,s=Mt(n);else{if(n=n.parentNode,n==e.dom)break;r=s=0}}o&&zt(e,o,i)}}function Rt(e){var t=e.pmViewDesc;return t&&t.node&&t.node.isBlock}function Dt(e,t){while(e&&t==e.childNodes.length&&!N(e))t=x(e)+1,e=e.parentNode;while(e&&t<e.childNodes.length){var n=e.childNodes[t];if(3==n.nodeType)return n;if(1==n.nodeType&&"false"==n.contentEditable)break;e=n,t=0}}function It(e,t){while(e&&!t&&!N(e))t=x(e),e=e.parentNode;while(e&&t){var n=e.childNodes[t-1];if(3==n.nodeType)return n;if(1==n.nodeType&&"false"==n.contentEditable)break;e=n,t=e.childNodes.length}}function zt(e,t,n){var r,o;3!=t.nodeType&&((o=Dt(t,n))?(t=o,n=0):(r=It(t,n))&&(t=r,n=r.nodeValue.length));var i=e.domSelection();if(R(i)){var s=document.createRange();s.setEnd(t,n),s.setStart(t,n),i.removeAllRanges(),i.addRange(s)}else i.extend&&i.extend(t,n);e.domObserver.setCurSelection();var a=e.state;setTimeout((function(){e.state==a&&dt(e)}),50)}function Pt(e,t){var n=e.state.doc.resolve(t);if(!J&&!Z&&n.parent.inlineContent){var r=e.coordsAtPos(t);if(t>n.start()){var o=e.coordsAtPos(t-1),i=(o.top+o.bottom)/2;if(i>r.top&&i<r.bottom&&Math.abs(o.left-r.left)>1)return o.left<r.left?"ltr":"rtl"}if(t<n.end()){var s=e.coordsAtPos(t+1),a=(s.top+s.bottom)/2;if(a>r.top&&a<r.bottom&&Math.abs(s.left-r.left)>1)return s.left>r.left?"ltr":"rtl"}}var l=getComputedStyle(e.dom).direction;return"rtl"==l?"rtl":"ltr"}function $t(e,t,n){var r=e.state.selection;if(r instanceof b.TextSelection&&!r.empty||n.indexOf("s")>-1)return!1;if(X&&n.indexOf("m")>-1)return!1;var o=r.$from,i=r.$to;if(!o.parent.inlineContent||e.endOfTextblock(t<0?"up":"down")){var s=Ct(e.state,t);if(s&&s instanceof b.NodeSelection)return _t(e,s)}if(!o.parent.inlineContent){var a=t<0?o:i,l=r instanceof b.AllSelection?b.Selection.near(a,t):b.Selection.findFrom(a,t);return!!l&&_t(e,l)}return!1}function Ft(e,t){if(!(e.state.selection instanceof b.TextSelection))return!0;var n=e.state.selection,r=n.$head,o=n.$anchor,i=n.empty;if(!r.sameParent(o))return!0;if(!i)return!1;if(e.endOfTextblock(t>0?"forward":"backward"))return!0;var s=!r.textOffset&&(t<0?r.nodeBefore:r.nodeAfter);if(s&&!s.isText){var a=e.state.tr;return t<0?a["delete"](r.pos-s.nodeSize,r.pos):a["delete"](r.pos,r.pos+s.nodeSize),e.dispatch(a),!0}return!1}function Bt(e,t,n){e.domObserver.stop(),t.contentEditable=n,e.domObserver.start()}function jt(e){if(!K||e.state.selection.$head.parentOffset>0)return!1;var t=e.domSelectionRange(),n=t.focusNode,r=t.focusOffset;if(n&&1==n.nodeType&&0==r&&n.firstChild&&"false"==n.firstChild.contentEditable){var o=n.firstChild;Bt(e,o,"true"),setTimeout((function(){return Bt(e,o,"false")}),20)}return!1}function Lt(e){var t="";return e.ctrlKey&&(t+="c"),e.metaKey&&(t+="m"),e.altKey&&(t+="a"),e.shiftKey&&(t+="s"),t}function Vt(e,t){var n=t.keyCode,r=Lt(t);if(8==n||X&&72==n&&"c"==r)return Ft(e,-1)||Tt(e,-1);if(46==n&&!t.shiftKey||X&&68==n&&"c"==r)return Ft(e,1)||Tt(e,1);if(13==n||27==n)return!0;if(37==n||X&&66==n&&"c"==r){var o=37==n?"ltr"==Pt(e,e.state.selection.from)?-1:1:-1;return Ot(e,o,r)||Tt(e,o)}if(39==n||X&&70==n&&"c"==r){var i=39==n?"ltr"==Pt(e,e.state.selection.from)?1:-1:1;return Ot(e,i,r)||Tt(e,i)}return 38==n||X&&80==n&&"c"==r?$t(e,-1,r)||Tt(e,-1):40==n||X&&78==n&&"c"==r?jt(e)||$t(e,1,r)||Tt(e,1):r==(X?"m":"c")&&(66==n||73==n||89==n||90==n)}function qt(e,t){e.someProp("transformCopied",(function(n){t=n(t,e)}));var n=[],r=t,o=r.content,i=r.openStart,s=r.openEnd;while(i>1&&s>1&&1==o.childCount&&1==o.firstChild.childCount){i--,s--;var a=o.firstChild;n.push(a.type.name,a.attrs!=a.type.defaultAttrs?a.attrs:null),o=a.content}var l=e.someProp("clipboardSerializer")||w.DOMSerializer.fromSchema(e.state.schema),c=en(),u=c.createElement("div");u.appendChild(l.serializeFragment(o,{document:c}));var d,h=u.firstChild,p=0;while(h&&1==h.nodeType&&(d=Yt[h.nodeName.toLowerCase()])){for(var f=d.length-1;f>=0;f--){var m=c.createElement(d[f]);while(u.firstChild)m.appendChild(u.firstChild);u.appendChild(m),p++}h=u.firstChild}h&&1==h.nodeType&&h.setAttribute("data-pm-slice","".concat(i," ").concat(s).concat(p?" -".concat(p):""," ").concat(JSON.stringify(n)));var g=e.someProp("clipboardTextSerializer",(function(n){return n(t,e)}))||t.content.textBetween(0,t.content.size,"\n\n");return{dom:u,text:g}}function Ht(e,t,n,r,o){var i,s,a=o.parent.type.spec.code;if(!n&&!t)return null;var l=t&&(r||a||!n);if(l){if(e.someProp("transformPastedText",(function(n){t=n(t,a||r,e)})),a)return t?new w.Slice(w.Fragment.from(e.state.schema.text(t.replace(/\r\n?/g,"\n"))),0,0):w.Slice.empty;var c=e.someProp("clipboardTextParser",(function(n){return n(t,o,r,e)}));if(c)s=c;else{var u=o.marks(),d=e.state.schema,h=w.DOMSerializer.fromSchema(d);i=document.createElement("div"),t.split(/(?:\r\n?|\n)+/).forEach((function(e){var t=i.appendChild(document.createElement("p"));e&&t.appendChild(h.serializeNode(d.text(e,u)))}))}}else e.someProp("transformPastedHTML",(function(t){n=t(n,e)})),i=tn(n),Q&&nn(i);var p=i&&i.querySelector("[data-pm-slice]"),f=p&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(p.getAttribute("data-pm-slice")||"");if(f&&f[3])for(var m=+f[3];m>0;m--){var g=i.firstChild;while(g&&1!=g.nodeType)g=g.nextSibling;if(!g)break;i=g}if(!s){var v=e.someProp("clipboardParser")||e.someProp("domParser")||w.DOMParser.fromSchema(e.state.schema);s=v.parseSlice(i,{preserveWhitespace:!(!l&&!f),context:o,ruleFromNode:function(e){return"BR"!=e.nodeName||e.nextSibling||!e.parentNode||Wt.test(e.parentNode.nodeName)?null:{ignore:!0}}})}if(f)s=rn(Zt(s,+f[1],+f[2]),f[4]);else if(s=w.Slice.maxOpen(Jt(s.content,o),!0),s.openStart||s.openEnd){for(var y=0,b=0,k=s.content.firstChild;y<s.openStart&&!k.type.spec.isolating;y++,k=k.firstChild);for(var x=s.content.lastChild;b<s.openEnd&&!x.type.spec.isolating;b++,x=x.lastChild);s=Zt(s,y,b)}return e.someProp("transformPasted",(function(t){s=t(s,e)})),s}var Wt=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function Jt(e,t){if(e.childCount<2)return e;for(var n=function(n){var r=t.node(n),o=r.contentMatchAt(t.index(n)),i=void 0,s=[];if(e.forEach((function(e){if(s){var t,n=o.findWrapping(e.type);if(!n)return s=null;if(t=s.length&&i.length&&Kt(n,i,e,s[s.length-1],0))s[s.length-1]=t;else{s.length&&(s[s.length-1]=Gt(s[s.length-1],i.length));var r=Ut(e,n);s.push(r),o=o.matchType(r.type),i=n}}})),s)return{v:w.Fragment.from(s)}},o=t.depth;o>=0;o--){var i=n(o);if("object"===r(i))return i.v}return e}function Ut(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=t.length-1;r>=n;r--)e=t[r].create(null,w.Fragment.from(e));return e}function Kt(e,t,n,r,o){if(o<e.length&&o<t.length&&e[o]==t[o]){var i=Kt(e,t,n,r.lastChild,o+1);if(i)return r.copy(r.content.replaceChild(r.childCount-1,i));var s=r.contentMatchAt(r.childCount);if(s.matchType(o==e.length-1?n.type:e[o+1]))return r.copy(r.content.append(w.Fragment.from(Ut(n,e,o+1))))}}function Gt(e,t){if(0==t)return e;var n=e.content.replaceChild(e.childCount-1,Gt(e.lastChild,t-1)),r=e.contentMatchAt(e.childCount).fillBefore(w.Fragment.empty,!0);return e.copy(n.append(r))}function Xt(e,t,n,r,o,i){var s=t<0?e.firstChild:e.lastChild,a=s.content;return e.childCount>1&&(i=0),o<r-1&&(a=Xt(a,t,n,r,o+1,i)),o>=n&&(a=t<0?s.contentMatchAt(0).fillBefore(a,i<=o).append(a):a.append(s.contentMatchAt(s.childCount).fillBefore(w.Fragment.empty,!0))),e.replaceChild(t<0?0:e.childCount-1,s.copy(a))}function Zt(e,t,n){return t<e.openStart&&(e=new w.Slice(Xt(e.content,-1,t,e.openStart,0,e.openEnd),t,e.openEnd)),n<e.openEnd&&(e=new w.Slice(Xt(e.content,1,n,e.openEnd,0,0),e.openStart,n)),e}var Yt={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]},Qt=null;function en(){return Qt||(Qt=document.implementation.createHTMLDocument("title"))}function tn(e){var t=/^(\s*<meta [^>]*>)*/.exec(e);t&&(e=e.slice(t[0].length));var n,r=en().createElement("div"),o=/<([a-z][^>\s]+)/i.exec(e);if((n=o&&Yt[o[1].toLowerCase()])&&(e=n.map((function(e){return"<"+e+">"})).join("")+e+n.map((function(e){return"</"+e+">"})).reverse().join("")),r.innerHTML=e,n)for(var i=0;i<n.length;i++)r=r.querySelector(n[i])||r;return r}function nn(e){for(var t=e.querySelectorAll(J?"span:not([class]):not([style])":"span.Apple-converted-space"),n=0;n<t.length;n++){var r=t[n];1==r.childNodes.length&&""==r.textContent&&r.parentNode&&r.parentNode.replaceChild(e.ownerDocument.createTextNode(" "),r)}}function rn(e,t){if(!e.size)return e;var n,r=e.content.firstChild.type.schema;try{n=JSON.parse(t)}catch(c){return e}for(var o=e.content,i=e.openStart,s=e.openEnd,a=n.length-2;a>=0;a-=2){var l=r.nodes[n[a]];if(!l||l.hasRequiredAttrs())break;o=w.Fragment.from(l.create(n[a+1],o)),i++,s++}return new w.Slice(o,i,s)}var on={},sn={},an={touchstart:!0,touchmove:!0},ln=y((function e(){g(this,e),this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastAndroidDelete=0,this.composing=!1,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}));function cn(e){var t=function(t){var n=on[t];e.dom.addEventListener(t,e.input.eventHandlers[t]=function(t){!fn(e,t)||pn(e,t)||!e.editable&&t.type in sn||n(e,t)},an[t]?{passive:!0}:void 0)};for(var n in on)t(n);K&&e.dom.addEventListener("input",(function(){return null})),hn(e)}function un(e,t){e.input.lastSelectionOrigin=t,e.input.lastSelectionTime=Date.now()}function dn(e){for(var t in e.domObserver.stop(),e.input.eventHandlers)e.dom.removeEventListener(t,e.input.eventHandlers[t]);clearTimeout(e.input.composingTimeout),clearTimeout(e.input.lastIOSEnterFallbackTimeout)}function hn(e){e.someProp("handleDOMEvents",(function(t){for(var n in t)e.input.eventHandlers[n]||e.dom.addEventListener(n,e.input.eventHandlers[n]=function(t){return pn(e,t)})}))}function pn(e,t){return e.someProp("handleDOMEvents",(function(n){var r=n[t.type];return!!r&&(r(e,t)||t.defaultPrevented)}))}function fn(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(var n=t.target;n!=e.dom;n=n.parentNode)if(!n||11==n.nodeType||n.pmViewDesc&&n.pmViewDesc.stopEvent(t))return!1;return!0}function mn(e,t){pn(e,t)||!on[t.type]||!e.editable&&t.type in sn||on[t.type](e,t)}function gn(e){return{left:e.clientX,top:e.clientY}}function vn(e,t){var n=t.x-e.clientX,r=t.y-e.clientY;return n*n+r*r<100}function yn(e,t,n,o,i){if(-1==o)return!1;for(var s=e.state.doc.resolve(o),a=function(r){if(e.someProp(t,(function(t){return r>s.depth?t(e,n,s.nodeAfter,s.before(r),i,!0):t(e,n,s.node(r),s.before(r),i,!1)})))return{v:!0}},l=s.depth+1;l>0;l--){var c=a(l);if("object"===r(c))return c.v}return!1}function bn(e,t,n){e.focused||e.focus();var r=e.state.tr.setSelection(t);"pointer"==n&&r.setMeta("pointer",!0),e.dispatch(r)}function wn(e,t){if(-1==t)return!1;var n=e.state.doc.resolve(t),r=n.nodeAfter;return!!(r&&r.isAtom&&b.NodeSelection.isSelectable(r))&&(bn(e,new b.NodeSelection(n),"pointer"),!0)}function kn(e,t){if(-1==t)return!1;var n,r,o=e.state.selection;o instanceof b.NodeSelection&&(n=o.node);for(var i=e.state.doc.resolve(t),s=i.depth+1;s>0;s--){var a=s>i.depth?i.nodeAfter:i.node(s);if(b.NodeSelection.isSelectable(a)){r=n&&o.$from.depth>0&&s>=o.$from.depth&&i.before(o.$from.depth+1)==o.$from.pos?i.before(o.$from.depth):i.before(s);break}}return null!=r&&(bn(e,b.NodeSelection.create(e.state.doc,r),"pointer"),!0)}function xn(e,t,n,r,o){return yn(e,"handleClickOn",t,n,r)||e.someProp("handleClick",(function(n){return n(e,t,r)}))||(o?kn(e,n):wn(e,n))}function Sn(e,t,n,r){return yn(e,"handleDoubleClickOn",t,n,r)||e.someProp("handleDoubleClick",(function(n){return n(e,t,r)}))}function Cn(e,t,n,r){return yn(e,"handleTripleClickOn",t,n,r)||e.someProp("handleTripleClick",(function(n){return n(e,t,r)}))||_n(e,n,r)}function _n(e,t,n){if(0!=n.button)return!1;var r=e.state.doc;if(-1==t)return!!r.inlineContent&&(bn(e,b.TextSelection.create(r,0,r.content.size),"pointer"),!0);for(var o=r.resolve(t),i=o.depth+1;i>0;i--){var s=i>o.depth?o.nodeAfter:o.node(i),a=o.before(i);if(s.inlineContent)bn(e,b.TextSelection.create(r,a+1,a+1+s.content.size),"pointer");else{if(!b.NodeSelection.isSelectable(s))continue;bn(e,b.NodeSelection.create(r,a),"pointer")}return!0}}function On(e){return In(e)}sn.keydown=function(e,t){var n=t;if(e.input.shiftKey=16==n.keyCode||n.shiftKey,!Tn(e,n)&&(e.input.lastKeyCode=n.keyCode,e.input.lastKeyCodeTime=Date.now(),!Y||!J||13!=n.keyCode))if(229!=n.keyCode&&e.domObserver.forceFlush(),!G||13!=n.keyCode||n.ctrlKey||n.altKey||n.metaKey)e.someProp("handleKeyDown",(function(t){return t(e,n)}))||Vt(e,n)?n.preventDefault():un(e,"key");else{var r=Date.now();e.input.lastIOSEnter=r,e.input.lastIOSEnterFallbackTimeout=setTimeout((function(){e.input.lastIOSEnter==r&&(e.someProp("handleKeyDown",(function(t){return t(e,D(13,"Enter"))})),e.input.lastIOSEnter=0)}),200)}},sn.keyup=function(e,t){16==t.keyCode&&(e.input.shiftKey=!1)},sn.keypress=function(e,t){var n=t;if(!(Tn(e,n)||!n.charCode||n.ctrlKey&&!n.altKey||X&&n.metaKey))if(e.someProp("handleKeyPress",(function(t){return t(e,n)})))n.preventDefault();else{var r=e.state.selection;if(!(r instanceof b.TextSelection)||!r.$from.sameParent(r.$to)){var o=String.fromCharCode(n.charCode);/[\r\n]/.test(o)||e.someProp("handleTextInput",(function(t){return t(e,r.$from.pos,r.$to.pos,o)}))||e.dispatch(e.state.tr.insertText(o).scrollIntoView()),n.preventDefault()}}};var Mn=X?"metaKey":"ctrlKey";on.mousedown=function(e,t){var n=t;e.input.shiftKey=n.shiftKey;var r=On(e),o=Date.now(),i="singleClick";o-e.input.lastClick.time<500&&vn(n,e.input.lastClick)&&!n[Mn]&&("singleClick"==e.input.lastClick.type?i="doubleClick":"doubleClick"==e.input.lastClick.type&&(i="tripleClick")),e.input.lastClick={time:o,x:n.clientX,y:n.clientY,type:i};var s=e.posAtCoords(gn(n));s&&("singleClick"==i?(e.input.mouseDown&&e.input.mouseDown.done(),e.input.mouseDown=new En(e,s,n,!!r)):("doubleClick"==i?Sn:Cn)(e,s.pos,s.inside,n)?n.preventDefault():un(e,"pointer"))};var En=function(){function e(t,n,r,o){var i,s,a=this;if(g(this,e),this.view=t,this.pos=n,this.event=r,this.flushed=o,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=t.state.doc,this.selectNode=!!r[Mn],this.allowDefault=r.shiftKey,n.inside>-1)i=t.state.doc.nodeAt(n.inside),s=n.inside;else{var l=t.state.doc.resolve(n.pos);i=l.parent,s=l.depth?l.before():0}var c=o?null:r.target,u=c?t.docView.nearestDesc(c,!0):null;this.target=u?u.dom:null;var d=t.state.selection;(0==r.button&&i.type.spec.draggable&&!1!==i.type.spec.selectable||d instanceof b.NodeSelection&&d.from<=s&&d.to>s)&&(this.mightDrag={node:i,pos:s,addAttr:!(!this.target||this.target.draggable),setUneditable:!(!this.target||!H||this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout((function(){a.view.input.mouseDown==a&&a.target.setAttribute("contentEditable","false")}),20),this.view.domObserver.start()),t.root.addEventListener("mouseup",this.up=this.up.bind(this)),t.root.addEventListener("mousemove",this.move=this.move.bind(this)),un(t,"pointer")}return y(e,[{key:"done",value:function(){var e=this;this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout((function(){return dt(e.view)})),this.view.input.mouseDown=null}},{key:"up",value:function(e){if(this.done(),this.view.dom.contains(e.target)){var t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(gn(e))),this.updateAllowDefault(e),this.allowDefault||!t?un(this.view,"pointer"):xn(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():0==e.button&&(this.flushed||K&&this.mightDrag&&!this.mightDrag.node.isAtom||J&&!this.view.state.selection.visible&&Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to))<=2)?(bn(this.view,b.Selection.near(this.view.state.doc.resolve(t.pos)),"pointer"),e.preventDefault()):un(this.view,"pointer")}}},{key:"move",value:function(e){this.updateAllowDefault(e),un(this.view,"pointer"),0==e.buttons&&this.done()}},{key:"updateAllowDefault",value:function(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}]),e}();function Tn(e,t){return!!e.composing||!!(K&&Math.abs(t.timeStamp-e.input.compositionEndedAt)<500)&&(e.input.compositionEndedAt=-2e8,!0)}on.touchstart=function(e){e.input.lastTouch=Date.now(),On(e),un(e,"pointer")},on.touchmove=function(e){e.input.lastTouch=Date.now(),un(e,"pointer")},on.contextmenu=function(e){return On(e)};var An=Y?5e3:-1;function Nn(e,t){clearTimeout(e.input.composingTimeout),t>-1&&(e.input.composingTimeout=setTimeout((function(){return In(e)}),t))}function Rn(e){e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=Dn());while(e.input.compositionNodes.length>0)e.input.compositionNodes.pop().markParentsDirty()}function Dn(){var e=document.createEvent("Event");return e.initEvent("event",!0,!0),e.timeStamp}function In(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!(Y&&e.domObserver.flushingSoon>=0)){if(e.domObserver.forceFlush(),Rn(e),t||e.docView&&e.docView.dirty){var n=ct(e);return n&&!n.eq(e.state.selection)?e.dispatch(e.state.tr.setSelection(n)):e.updateState(e.state),!0}return!1}}function zn(e,t){if(e.dom.parentNode){var n=e.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(t),n.style.cssText="position: fixed; left: -10000px; top: 10px";var r=getSelection(),o=document.createRange();o.selectNodeContents(t),e.dom.blur(),r.removeAllRanges(),r.addRange(o),setTimeout((function(){n.parentNode&&n.parentNode.removeChild(n),e.focus()}),50)}}sn.compositionstart=sn.compositionupdate=function(e){if(!e.composing){e.domObserver.flush();var t=e.state,n=t.selection.$from;if(t.selection.empty&&(t.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some((function(e){return!1===e.type.spec.inclusive}))))e.markCursor=e.state.storedMarks||n.marks(),In(e,!0),e.markCursor=null;else if(In(e),H&&t.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length)for(var r=e.domSelectionRange(),o=r.focusNode,i=r.focusOffset;o&&1==o.nodeType&&0!=i;){var s=i<0?o.lastChild:o.childNodes[i-1];if(!s)break;if(3==s.nodeType){e.domSelection().collapse(s,s.nodeValue.length);break}o=s,i=-1}e.input.composing=!0}Nn(e,An)},sn.compositionend=function(e,t){e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=t.timeStamp,e.input.compositionPendingChanges=e.domObserver.pendingRecords().length?e.input.compositionID:0,e.input.compositionPendingChanges&&Promise.resolve().then((function(){return e.domObserver.flush()})),e.input.compositionID++,Nn(e,20))};var Pn=V&&q<15||G&&ee<604;function $n(e){return 0==e.openStart&&0==e.openEnd&&1==e.content.childCount?e.content.firstChild:null}function Fn(e,t){if(e.dom.parentNode){var n=e.input.shiftKey||e.state.selection.$from.parent.type.spec.code,r=e.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();var o=e.input.shiftKey&&45!=e.input.lastKeyCode;setTimeout((function(){e.focus(),r.parentNode&&r.parentNode.removeChild(r),n?Bn(e,r.value,null,o,t):Bn(e,r.textContent,r.innerHTML,o,t)}),50)}}function Bn(e,t,n,r,o){var i=Ht(e,t,n,r,e.state.selection.$from);if(e.someProp("handlePaste",(function(t){return t(e,o,i||w.Slice.empty)})))return!0;if(!i)return!1;var s=$n(i),a=s?e.state.tr.replaceSelectionWith(s,r):e.state.tr.replaceSelection(i);return e.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}on.copy=sn.cut=function(e,t){var n=t,r=e.state.selection,o="cut"==n.type;if(!r.empty){var i=Pn?null:n.clipboardData,s=r.content(),a=qt(e,s),l=a.dom,c=a.text;i?(n.preventDefault(),i.clearData(),i.setData("text/html",l.innerHTML),i.setData("text/plain",c)):zn(e,l),o&&e.dispatch(e.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))}},sn.paste=function(e,t){var n=t;if(!e.composing||Y){var r=Pn?null:n.clipboardData,o=e.input.shiftKey&&45!=e.input.lastKeyCode;r&&Bn(e,r.getData("text/plain"),r.getData("text/html"),o,n)?n.preventDefault():Fn(e,n)}};var jn=y((function e(t,n){g(this,e),this.slice=t,this.move=n})),Ln=X?"altKey":"ctrlKey";for(var Vn in on.dragstart=function(e,t){var n=t,r=e.input.mouseDown;if(r&&r.done(),n.dataTransfer){var o=e.state.selection,i=o.empty?null:e.posAtCoords(gn(n));if(i&&i.pos>=o.from&&i.pos<=(o instanceof b.NodeSelection?o.to-1:o.to));else if(r&&r.mightDrag)e.dispatch(e.state.tr.setSelection(b.NodeSelection.create(e.state.doc,r.mightDrag.pos)));else if(n.target&&1==n.target.nodeType){var s=e.docView.nearestDesc(n.target,!0);s&&s.node.type.spec.draggable&&s!=e.docView&&e.dispatch(e.state.tr.setSelection(b.NodeSelection.create(e.state.doc,s.posBefore)))}var a=e.state.selection.content(),l=qt(e,a),c=l.dom,u=l.text;n.dataTransfer.clearData(),n.dataTransfer.setData(Pn?"Text":"text/html",c.innerHTML),n.dataTransfer.effectAllowed="copyMove",Pn||n.dataTransfer.setData("text/plain",u),e.dragging=new jn(a,!n[Ln])}},on.dragend=function(e){var t=e.dragging;window.setTimeout((function(){e.dragging==t&&(e.dragging=null)}),50)},sn.dragover=sn.dragenter=function(e,t){return t.preventDefault()},sn.drop=function(e,t){var n=t,r=e.dragging;if(e.dragging=null,n.dataTransfer){var o=e.posAtCoords(gn(n));if(o){var i=e.state.doc.resolve(o.pos),s=r&&r.slice;s?e.someProp("transformPasted",(function(t){s=t(s,e)})):s=Ht(e,n.dataTransfer.getData(Pn?"Text":"text/plain"),Pn?null:n.dataTransfer.getData("text/html"),!1,i);var a=!(!r||n[Ln]);if(e.someProp("handleDrop",(function(t){return t(e,n,s||w.Slice.empty,a)})))n.preventDefault();else if(s){n.preventDefault();var l=s?k.dropPoint(e.state.doc,i.pos,s):i.pos;null==l&&(l=i.pos);var c=e.state.tr;a&&c.deleteSelection();var u=c.mapping.map(l),d=0==s.openStart&&0==s.openEnd&&1==s.content.childCount,h=c.doc;if(d?c.replaceRangeWith(u,u,s.content.firstChild):c.replaceRange(u,u,s),!c.doc.eq(h)){var p=c.doc.resolve(u);if(d&&b.NodeSelection.isSelectable(s.content.firstChild)&&p.nodeAfter&&p.nodeAfter.sameMarkup(s.content.firstChild))c.setSelection(new b.NodeSelection(p));else{var f=c.mapping.map(l);c.mapping.maps[c.mapping.maps.length-1].forEach((function(e,t,n,r){return f=r})),c.setSelection(wt(e,p,c.doc.resolve(f)))}e.focus(),e.dispatch(c.setMeta("uiEvent","drop"))}}}}},on.focus=function(e){e.input.lastFocus=Date.now(),e.focused||(e.domObserver.stop(),e.dom.classList.add("ProseMirror-focused"),e.domObserver.start(),e.focused=!0,setTimeout((function(){e.docView&&e.hasFocus()&&!e.domObserver.currentSelection.eq(e.domSelectionRange())&&dt(e)}),20))},on.blur=function(e,t){var n=t;e.focused&&(e.domObserver.stop(),e.dom.classList.remove("ProseMirror-focused"),e.domObserver.start(),n.relatedTarget&&e.dom.contains(n.relatedTarget)&&e.domObserver.currentSelection.clear(),e.focused=!1)},on.beforeinput=function(e,t){var n=t;if(J&&Y&&"deleteContentBackward"==n.inputType){e.domObserver.flushSoon();var r=e.input.domChangeCount;setTimeout((function(){if(e.input.domChangeCount==r&&(e.dom.blur(),e.focus(),!e.someProp("handleKeyDown",(function(t){return t(e,D(8,"Backspace"))})))){var t=e.state.selection.$cursor;t&&t.pos>0&&e.dispatch(e.state.tr["delete"](t.pos-1,t.pos).scrollIntoView())}}),50)}},sn)on[Vn]=sn[Vn];function qn(e,t){if(e==t)return!0;for(var n in e)if(e[n]!==t[n])return!1;for(var r in t)if(!(r in e))return!1;return!0}var Hn=function(){function e(t,n){g(this,e),this.toDOM=t,this.spec=n||Gn,this.side=this.spec.side||0}return y(e,[{key:"map",value:function(e,t,n,r){var o=e.mapResult(t.from+r,this.side<0?-1:1),i=o.pos,s=o.deleted;return s?null:new Un(i-n,i-n,this)}},{key:"valid",value:function(){return!0}},{key:"eq",value:function(t){return this==t||t instanceof e&&(this.spec.key&&this.spec.key==t.spec.key||this.toDOM==t.toDOM&&qn(this.spec,t.spec))}},{key:"destroy",value:function(e){this.spec.destroy&&this.spec.destroy(e)}}]),e}(),Wn=function(){function e(t,n){g(this,e),this.attrs=t,this.spec=n||Gn}return y(e,[{key:"map",value:function(e,t,n,r){var o=e.map(t.from+r,this.spec.inclusiveStart?-1:1)-n,i=e.map(t.to+r,this.spec.inclusiveEnd?1:-1)-n;return o>=i?null:new Un(o,i,this)}},{key:"valid",value:function(e,t){return t.from<t.to}},{key:"eq",value:function(t){return this==t||t instanceof e&&qn(this.attrs,t.attrs)&&qn(this.spec,t.spec)}},{key:"destroy",value:function(){}}],[{key:"is",value:function(t){return t.type instanceof e}}]),e}(),Jn=function(){function e(t,n){g(this,e),this.attrs=t,this.spec=n||Gn}return y(e,[{key:"map",value:function(e,t,n,r){var o=e.mapResult(t.from+r,1);if(o.deleted)return null;var i=e.mapResult(t.to+r,-1);return i.deleted||i.pos<=o.pos?null:new Un(o.pos-n,i.pos-n,this)}},{key:"valid",value:function(e,t){var n,r=e.content.findIndex(t.from),o=r.index,i=r.offset;return i==t.from&&!(n=e.child(o)).isText&&i+n.nodeSize==t.to}},{key:"eq",value:function(t){return this==t||t instanceof e&&qn(this.attrs,t.attrs)&&qn(this.spec,t.spec)}},{key:"destroy",value:function(){}}]),e}(),Un=function(){function e(t,n,r){g(this,e),this.from=t,this.to=n,this.type=r}return y(e,[{key:"copy",value:function(t,n){return new e(t,n,this.type)}},{key:"eq",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to}},{key:"map",value:function(e,t,n){return this.type.map(e,this,t,n)}},{key:"spec",get:function(){return this.type.spec}},{key:"inline",get:function(){return this.type instanceof Wn}},{key:"widget",get:function(){return this.type instanceof Hn}}],[{key:"widget",value:function(t,n,r){return new e(t,t,new Hn(n,r))}},{key:"inline",value:function(t,n,r,o){return new e(t,n,new Wn(r,o))}},{key:"node",value:function(t,n,r,o){return new e(t,n,new Jn(r,o))}}]),e}(),Kn=[],Gn={},Xn=function(){function e(t,n){g(this,e),this.local=t.length?t:Kn,this.children=n.length?n:Kn}return y(e,[{key:"find",value:function(e,t,n){var r=[];return this.findInner(null==e?0:e,null==t?1e9:t,r,0,n),r}},{key:"findInner",value:function(e,t,n,r,o){for(var i=0;i<this.local.length;i++){var s=this.local[i];s.from<=t&&s.to>=e&&(!o||o(s.spec))&&n.push(s.copy(s.from+r,s.to+r))}for(var a=0;a<this.children.length;a+=3)if(this.children[a]<t&&this.children[a+1]>e){var l=this.children[a]+1;this.children[a+2].findInner(e-l,t-l,n,r+l,o)}}},{key:"map",value:function(e,t,n){return this==Zn||0==e.maps.length?this:this.mapInner(e,t,0,0,n||Gn)}},{key:"mapInner",value:function(t,n,r,o,i){for(var s,a=0;a<this.local.length;a++){var l=this.local[a].map(t,r,o);l&&l.type.valid(n,l)?(s||(s=[])).push(l):i.onRemove&&i.onRemove(this.local[a].spec)}return this.children.length?Qn(this.children,s||[],t,n,r,o,i):s?new e(s.sort(ir),Kn):Zn}},{key:"add",value:function(t,n){return n.length?this==Zn?e.create(t,n):this.addInner(t,n,0):this}},{key:"addInner",value:function(t,n,r){var o,i=this,s=0;t.forEach((function(e,t){var a,l=t+r;if(a=nr(n,e,l)){o||(o=i.children.slice());while(s<o.length&&o[s]<t)s+=3;o[s]==t?o[s+2]=o[s+2].addInner(e,a,l+1):o.splice(s,0,t,t+e.nodeSize,or(a,e,l+1,Gn)),s+=3}}));for(var a=er(s?rr(n):n,-r),l=0;l<a.length;l++)a[l].type.valid(t,a[l])||a.splice(l--,1);return new e(a.length?this.local.concat(a).sort(ir):this.local,o||this.children)}},{key:"remove",value:function(e){return 0==e.length||this==Zn?this:this.removeInner(e,0)}},{key:"removeInner",value:function(t,n){for(var r=this.children,o=this.local,i=0;i<r.length;i+=3){for(var s,a=void 0,l=r[i]+n,c=r[i+1]+n,u=0;u<t.length;u++)(s=t[u])&&s.from>l&&s.to<c&&(t[u]=null,(a||(a=[])).push(s));if(a){r==this.children&&(r=this.children.slice());var d=r[i+2].removeInner(a,l+1);d!=Zn?r[i+2]=d:(r.splice(i,3),i-=3)}}if(o.length)for(var h,p=0;p<t.length;p++)if(h=t[p])for(var f=0;f<o.length;f++)o[f].eq(h,n)&&(o==this.local&&(o=this.local.slice()),o.splice(f--,1));return r==this.children&&o==this.local?this:o.length||r.length?new e(o,r):Zn}},{key:"forChild",value:function(t,n){if(this==Zn)return this;if(n.isLeaf)return e.empty;for(var r,o,i=0;i<this.children.length;i+=3)if(this.children[i]>=t){this.children[i]==t&&(r=this.children[i+2]);break}for(var s=t+1,a=s+n.content.size,l=0;l<this.local.length;l++){var c=this.local[l];if(c.from<a&&c.to>s&&c.type instanceof Wn){var u=Math.max(s,c.from)-s,d=Math.min(a,c.to)-s;u<d&&(o||(o=[])).push(c.copy(u,d))}}if(o){var h=new e(o.sort(ir),Kn);return r?new Yn([h,r]):h}return r||Zn}},{key:"eq",value:function(t){if(this==t)return!0;if(!(t instanceof e)||this.local.length!=t.local.length||this.children.length!=t.children.length)return!1;for(var n=0;n<this.local.length;n++)if(!this.local[n].eq(t.local[n]))return!1;for(var r=0;r<this.children.length;r+=3)if(this.children[r]!=t.children[r]||this.children[r+1]!=t.children[r+1]||!this.children[r+2].eq(t.children[r+2]))return!1;return!0}},{key:"locals",value:function(e){return sr(this.localsInner(e))}},{key:"localsInner",value:function(e){if(this==Zn)return Kn;if(e.inlineContent||!this.local.some(Wn.is))return this.local;for(var t=[],n=0;n<this.local.length;n++)this.local[n].type instanceof Wn||t.push(this.local[n]);return t}}],[{key:"create",value:function(e,t){return t.length?or(t,e,0,Gn):Zn}}]),e}();Xn.empty=new Xn([],[]),Xn.removeOverlap=sr;var Zn=Xn.empty,Yn=function(){function e(t){g(this,e),this.members=t}return y(e,[{key:"map",value:function(t,n){var r=this.members.map((function(e){return e.map(t,n,Gn)}));return e.from(r)}},{key:"forChild",value:function(t,n){if(n.isLeaf)return Xn.empty;for(var r=[],o=0;o<this.members.length;o++){var i=this.members[o].forChild(t,n);i!=Zn&&(i instanceof e?r=r.concat(i.members):r.push(i))}return e.from(r)}},{key:"eq",value:function(t){if(!(t instanceof e)||t.members.length!=this.members.length)return!1;for(var n=0;n<this.members.length;n++)if(!this.members[n].eq(t.members[n]))return!1;return!0}},{key:"locals",value:function(e){for(var t,n=!0,r=0;r<this.members.length;r++){var o=this.members[r].localsInner(e);if(o.length)if(t){n&&(t=t.slice(),n=!1);for(var i=0;i<o.length;i++)t.push(o[i])}else t=o}return t?sr(n?t:t.sort(ir)):Kn}}],[{key:"from",value:function(t){switch(t.length){case 0:return Zn;case 1:return t[0];default:return new e(t.every((function(e){return e instanceof Xn}))?t:t.reduce((function(e,t){return e.concat(t instanceof Xn?t:t.members)}),[]))}}}]),e}();function Qn(e,t,n,r,o,i,s){for(var a=e.slice(),l=function(e,t){var r=0;n.maps[e].forEach((function(e,n,i,s){for(var l=s-i-(n-e),c=0;c<a.length;c+=3){var u=a[c+1];if(!(u<0||e>u+t-r)){var d=a[c]+t-r;n>=d?a[c+1]=e<=d?-2:-1:i>=o&&l&&(a[c]+=l,a[c+1]+=l)}}r+=l})),t=n.maps[e].map(t,-1),u=t},c=0,u=i;c<n.maps.length;c++)l(c,u);for(var d=!1,h=0;h<a.length;h+=3)if(a[h+1]<0){if(-2==a[h+1]){d=!0,a[h+1]=-1;continue}var p=n.map(e[h]+i),f=p-o;if(f<0||f>=r.content.size){d=!0;continue}var m=n.map(e[h+1]+i,-1),g=m-o,v=r.content.findIndex(f),y=v.index,b=v.offset,w=r.maybeChild(y);if(w&&b==f&&b+w.nodeSize==g){var k=a[h+2].mapInner(n,w,p+1,e[h]+i+1,s);k!=Zn?(a[h]=f,a[h+1]=g,a[h+2]=k):(a[h+1]=-2,d=!0)}else d=!0}if(d){var x=tr(a,e,t,n,o,i,s),S=or(x,r,0,s);t=S.local;for(var C=0;C<a.length;C+=3)a[C+1]<0&&(a.splice(C,3),C-=3);for(var _=0,O=0;_<S.children.length;_+=3){var M=S.children[_];while(O<a.length&&a[O]<M)O+=3;a.splice(O,0,S.children[_],S.children[_+1],S.children[_+2])}}return new Xn(t.sort(ir),a)}function er(e,t){if(!t||!e.length)return e;for(var n=[],r=0;r<e.length;r++){var o=e[r];n.push(new Un(o.from+t,o.to+t,o.type))}return n}function tr(e,t,n,r,o,i,s){function a(e,t){for(var i=0;i<e.local.length;i++){var l=e.local[i].map(r,o,t);l?n.push(l):s.onRemove&&s.onRemove(e.local[i].spec)}for(var c=0;c<e.children.length;c+=3)a(e.children[c+2],e.children[c]+t+1)}for(var l=0;l<e.length;l+=3)-1==e[l+1]&&a(e[l+2],t[l]+i+1);return n}function nr(e,t,n){if(t.isLeaf)return null;for(var r,o=n+t.nodeSize,i=null,s=0;s<e.length;s++)(r=e[s])&&r.from>n&&r.to<o&&((i||(i=[])).push(r),e[s]=null);return i}function rr(e){for(var t=[],n=0;n<e.length;n++)null!=e[n]&&t.push(e[n]);return t}function or(e,t,n,r){var o=[],i=!1;t.forEach((function(t,s){var a=nr(e,t,s+n);if(a){i=!0;var l=or(a,t,n+s+1,r);l!=Zn&&o.push(s,s+t.nodeSize,l)}}));for(var s=er(i?rr(e):e,-n).sort(ir),a=0;a<s.length;a++)s[a].type.valid(t,s[a])||(r.onRemove&&r.onRemove(s[a].spec),s.splice(a--,1));return s.length||o.length?new Xn(s,o):Zn}function ir(e,t){return e.from-t.from||e.to-t.to}function sr(e){for(var t=e,n=0;n<t.length-1;n++){var r=t[n];if(r.from!=r.to)for(var o=n+1;o<t.length;o++){var i=t[o];if(i.from!=r.from){i.from<r.to&&(t==e&&(t=e.slice()),t[n]=r.copy(r.from,i.from),ar(t,o,r.copy(i.from,r.to)));break}i.to!=r.to&&(t==e&&(t=e.slice()),t[o]=i.copy(i.from,r.to),ar(t,o+1,i.copy(r.to,i.to)))}}return t}function ar(e,t,n){while(t<e.length&&ir(n,e[t])>0)t++;e.splice(t,0,n)}function lr(e){var t=[];return e.someProp("decorations",(function(n){var r=n(e.state);r&&r!=Zn&&t.push(r)})),e.cursorWrapper&&t.push(Xn.create(e.state.doc,[e.cursorWrapper.deco])),Yn.from(t)}var cr={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},ur=V&&q<=11,dr=function(){function e(){g(this,e),this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}return y(e,[{key:"set",value:function(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}},{key:"clear",value:function(){this.anchorNode=this.focusNode=null}},{key:"eq",value:function(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}]),e}(),hr=function(){function e(t,n){var r=this;g(this,e),this.view=t,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new dr,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.observer=window.MutationObserver&&new window.MutationObserver((function(e){for(var t=0;t<e.length;t++)r.queue.push(e[t]);V&&q<=11&&e.some((function(e){return"childList"==e.type&&e.removedNodes.length||"characterData"==e.type&&e.oldValue.length>e.target.nodeValue.length}))?r.flushSoon():r.flush()})),ur&&(this.onCharData=function(e){r.queue.push({target:e.target,type:"characterData",oldValue:e.prevValue}),r.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}return y(e,[{key:"flushSoon",value:function(){var e=this;this.flushingSoon<0&&(this.flushingSoon=window.setTimeout((function(){e.flushingSoon=-1,e.flush()}),20))}},{key:"forceFlush",value:function(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}},{key:"start",value:function(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,cr)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}},{key:"stop",value:function(){var e=this;if(this.observer){var t=this.observer.takeRecords();if(t.length){for(var n=0;n<t.length;n++)this.queue.push(t[n]);window.setTimeout((function(){return e.flush()}),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}},{key:"connectSelection",value:function(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}},{key:"disconnectSelection",value:function(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}},{key:"suppressSelectionUpdates",value:function(){var e=this;this.suppressingSelectionUpdates=!0,setTimeout((function(){return e.suppressingSelectionUpdates=!1}),50)}},{key:"onSelectionChange",value:function(){if(kt(this.view)){if(this.suppressingSelectionUpdates)return dt(this.view);if(V&&q<=11&&!this.view.state.selection.empty){var e=this.view.domSelectionRange();if(e.focusNode&&O(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}},{key:"setCurSelection",value:function(){this.currentSelection.set(this.view.domSelectionRange())}},{key:"ignoreSelectionChange",value:function(e){if(!e.focusNode)return!0;for(var t,n=new Set,r=e.focusNode;r;r=S(r))n.add(r);for(var o=e.anchorNode;o;o=S(o))if(n.has(o)){t=o;break}var i=t&&this.view.docView.nearestDesc(t);return i&&i.ignoreMutation({type:"selection",target:3==t.nodeType?t.parentNode:t})?(this.setCurSelection(),!0):void 0}},{key:"pendingRecords",value:function(){if(this.observer){var e,t=o(this.observer.takeRecords());try{for(t.s();!(e=t.n()).done;){var n=e.value;this.queue.push(n)}}catch(r){t.e(r)}finally{t.f()}}return this.queue}},{key:"flush",value:function(){var e=this.view;if(e.docView&&!(this.flushingSoon>-1)){var t=this.pendingRecords();t.length&&(this.queue=[]);var n=e.domSelectionRange(),r=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(n)&&kt(e)&&!this.ignoreSelectionChange(n),o=-1,i=-1,s=!1,a=[];if(e.editable)for(var l=0;l<t.length;l++){var c=this.registerMutation(t[l],a);c&&(o=o<0?c.from:Math.min(c.from,o),i=i<0?c.to:Math.max(c.to,i),c.typeOver&&(s=!0))}if(H&&a.length>1){var u=a.filter((function(e){return"BR"==e.nodeName}));if(2==u.length){var d=u[0],h=u[1];d.parentNode&&d.parentNode.parentNode==h.parentNode?h.remove():d.remove()}}var p=null;o<0&&r&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&R(n)&&(p=ct(e))&&p.eq(b.Selection.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,dt(e),this.currentSelection.set(n),e.scrollToSelection()):(o>-1||r)&&(o>-1&&(e.docView.markDirty(o,i),mr(e)),this.handleDOMChange(o,i,s,a),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(n)||dt(e),this.currentSelection.set(n))}}},{key:"registerMutation",value:function(e,t){if(t.indexOf(e.target)>-1)return null;var n=this.view.docView.nearestDesc(e.target);if("attributes"==e.type&&(n==this.view.docView||"contenteditable"==e.attributeName||"style"==e.attributeName&&!e.oldValue&&!e.target.getAttribute("style")))return null;if(!n||n.ignoreMutation(e))return null;if("childList"==e.type){for(var r=0;r<e.addedNodes.length;r++)t.push(e.addedNodes[r]);if(n.contentDOM&&n.contentDOM!=n.dom&&!n.contentDOM.contains(e.target))return{from:n.posBefore,to:n.posAfter};var o=e.previousSibling,i=e.nextSibling;if(V&&q<=11&&e.addedNodes.length)for(var s=0;s<e.addedNodes.length;s++){var a=e.addedNodes[s],l=a.previousSibling,c=a.nextSibling;(!l||Array.prototype.indexOf.call(e.addedNodes,l)<0)&&(o=l),(!c||Array.prototype.indexOf.call(e.addedNodes,c)<0)&&(i=c)}var u=o&&o.parentNode==e.target?x(o)+1:0,d=n.localPosFromDOM(e.target,u,-1),h=i&&i.parentNode==e.target?x(i):e.target.childNodes.length,p=n.localPosFromDOM(e.target,h,1);return{from:d,to:p}}return"attributes"==e.type?{from:n.posAtStart-n.border,to:n.posAtEnd+n.border}:{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}}}]),e}(),pr=new WeakMap,fr=!1;function mr(e){if(!pr.has(e)&&(pr.set(e,null),-1!==["normal","nowrap","pre-line"].indexOf(getComputedStyle(e.dom).whiteSpace))){if(e.requiresGeckoHackNode=H,fr)return;console["warn"]("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),fr=!0}}function gr(e){var t;function n(e){e.preventDefault(),e.stopImmediatePropagation(),t=e.getTargetRanges()[0]}e.dom.addEventListener("beforeinput",n,!0),document.execCommand("indent"),e.dom.removeEventListener("beforeinput",n,!0);var r=t.startContainer,o=t.startOffset,i=t.endContainer,s=t.endOffset,a=e.domAtPos(e.state.selection.anchor);if(O(a.node,a.offset,i,s)){var l=[i,s,r,o];r=l[0],o=l[1],i=l[2],s=l[3]}return{anchorNode:r,anchorOffset:o,focusNode:i,focusOffset:s}}function vr(e,t,n){var r,o=e.docView.parseRange(t,n),i=o.node,s=o.fromOffset,a=o.toOffset,l=o.from,c=o.to,u=e.domSelectionRange(),d=u.anchorNode;if(d&&e.dom.contains(1==d.nodeType?d:d.parentNode)&&(r=[{node:d,offset:u.anchorOffset}],R(u)||r.push({node:u.focusNode,offset:u.focusOffset})),J&&8===e.input.lastKeyCode)for(var h=a;h>s;h--){var p=i.childNodes[h-1],f=p.pmViewDesc;if("BR"==p.nodeName&&!f){a=h;break}if(!f||f.size)break}var m=e.state.doc,g=e.someProp("domParser")||w.DOMParser.fromSchema(e.state.schema),v=m.resolve(l),y=null,b=g.parse(i,{topNode:v.parent,topMatch:v.parent.contentMatchAt(v.index()),topOpen:!0,from:s,to:a,preserveWhitespace:"pre"!=v.parent.type.whitespace||"full",findPositions:r,ruleFromNode:yr,context:v});if(r&&null!=r[0].pos){var k=r[0].pos,x=r[1]&&r[1].pos;null==x&&(x=k),y={anchor:k+l,head:x+l}}return{doc:b,sel:y,from:l,to:c}}function yr(e){var t=e.pmViewDesc;if(t)return t.parseRule();if("BR"==e.nodeName&&e.parentNode){if(K&&/^(ul|ol)$/i.test(e.parentNode.nodeName)){var n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}if(e.parentNode.lastChild==e||K&&/^(tr|table)$/i.test(e.parentNode.nodeName))return{ignore:!0}}else if("IMG"==e.nodeName&&e.getAttribute("mark-placeholder"))return{ignore:!0};return null}var br=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function wr(e,t,n,r,o){var i=e.input.compositionPendingChanges||(e.composing?e.input.compositionID:0);if(e.input.compositionPendingChanges=0,t<0){var s=e.input.lastSelectionTime>Date.now()-50?e.input.lastSelectionOrigin:null,a=ct(e,s);if(a&&!e.state.selection.eq(a)){if(J&&Y&&13===e.input.lastKeyCode&&Date.now()-100<e.input.lastKeyCodeTime&&e.someProp("handleKeyDown",(function(t){return t(e,D(13,"Enter"))})))return;var l=e.state.tr.setSelection(a);"pointer"==s?l.setMeta("pointer",!0):"key"==s&&l.scrollIntoView(),i&&l.setMeta("composition",i),e.dispatch(l)}}else{var c=e.state.doc.resolve(t),u=c.sharedDepth(n);t=c.before(u+1),n=e.state.doc.resolve(n).after(u+1);var d,h,p=e.state.selection,f=vr(e,t,n),m=e.state.doc,g=m.slice(f.from,f.to);8===e.input.lastKeyCode&&Date.now()-100<e.input.lastKeyCodeTime?(d=e.state.selection.to,h="end"):(d=e.state.selection.from,h="start"),e.input.lastKeyCode=null;var v=_r(g.content,f.doc.content,f.from,d,h);if((G&&e.input.lastIOSEnter>Date.now()-225||Y)&&o.some((function(e){return 1==e.nodeType&&!br.test(e.nodeName)}))&&(!v||v.endA>=v.endB)&&e.someProp("handleKeyDown",(function(t){return t(e,D(13,"Enter"))})))e.input.lastIOSEnter=0;else{if(!v){if(!(r&&p instanceof b.TextSelection&&!p.empty&&p.$head.sameParent(p.$anchor))||e.composing||f.sel&&f.sel.anchor!=f.sel.head){if(f.sel){var y=kr(e,e.state.doc,f.sel);if(y&&!y.eq(e.state.selection)){var w=e.state.tr.setSelection(y);i&&w.setMeta("composition",i),e.dispatch(w)}}return}v={start:p.from,endA:p.to,endB:p.to}}if(J&&e.cursorWrapper&&f.sel&&f.sel.anchor==e.cursorWrapper.deco.from&&f.sel.head==f.sel.anchor){var k=v.endB-v.start;f.sel={anchor:f.sel.anchor+k,head:f.sel.anchor+k}}e.input.domChangeCount++,e.state.selection.from<e.state.selection.to&&v.start==v.endB&&e.state.selection instanceof b.TextSelection&&(v.start>e.state.selection.from&&v.start<=e.state.selection.from+2&&e.state.selection.from>=f.from?v.start=e.state.selection.from:v.endA<e.state.selection.to&&v.endA>=e.state.selection.to-2&&e.state.selection.to<=f.to&&(v.endB+=e.state.selection.to-v.endA,v.endA=e.state.selection.to)),V&&q<=11&&v.endB==v.start+1&&v.endA==v.start&&v.start>f.from&&" "==f.doc.textBetween(v.start-f.from-1,v.start-f.from+1)&&(v.start--,v.endA--,v.endB--);var x,S=f.doc.resolveNoCache(v.start-f.from),C=f.doc.resolveNoCache(v.endB-f.from),_=m.resolve(v.start),O=S.sameParent(C)&&S.parent.inlineContent&&_.end()>=v.endA;if((G&&e.input.lastIOSEnter>Date.now()-225&&(!O||o.some((function(e){return"DIV"==e.nodeName||"P"==e.nodeName})))||!O&&S.pos<f.doc.content.size&&!S.sameParent(C)&&(x=b.Selection.findFrom(f.doc.resolve(S.pos+1),1,!0))&&x.head==C.pos)&&e.someProp("handleKeyDown",(function(t){return t(e,D(13,"Enter"))})))e.input.lastIOSEnter=0;else if(e.state.selection.anchor>v.start&&Sr(m,v.start,v.endA,S,C)&&e.someProp("handleKeyDown",(function(t){return t(e,D(8,"Backspace"))})))Y&&J&&e.domObserver.suppressSelectionUpdates();else{J&&Y&&v.endB==v.start&&(e.input.lastAndroidDelete=Date.now()),Y&&!O&&S.start()!=C.start()&&0==C.parentOffset&&S.depth==C.depth&&f.sel&&f.sel.anchor==f.sel.head&&f.sel.head==v.endA&&(v.endB-=2,C=f.doc.resolveNoCache(v.endB-f.from),setTimeout((function(){e.someProp("handleKeyDown",(function(t){return t(e,D(13,"Enter"))}))}),20));var M,E,T,A=v.start,N=v.endA;if(O)if(S.pos==C.pos)V&&q<=11&&0==S.parentOffset&&(e.domObserver.suppressSelectionUpdates(),setTimeout((function(){return dt(e)}),20)),M=e.state.tr["delete"](A,N),E=m.resolve(v.start).marksAcross(m.resolve(v.endA));else if(v.endA==v.endB&&(T=xr(S.parent.content.cut(S.parentOffset,C.parentOffset),_.parent.content.cut(_.parentOffset,v.endA-_.start()))))M=e.state.tr,"add"==T.type?M.addMark(A,N,T.mark):M.removeMark(A,N,T.mark);else if(S.parent.child(S.index()).isText&&S.index()==C.index()-(C.textOffset?0:1)){var R=S.parent.textBetween(S.parentOffset,C.parentOffset);if(e.someProp("handleTextInput",(function(t){return t(e,A,N,R)})))return;M=e.state.tr.insertText(R,A,N)}if(M||(M=e.state.tr.replace(A,N,f.doc.slice(v.start-f.from,v.endB-f.from))),f.sel){var I=kr(e,M.doc,f.sel);I&&!(J&&Y&&e.composing&&I.empty&&(v.start!=v.endB||e.input.lastAndroidDelete<Date.now()-100)&&(I.head==A||I.head==M.mapping.map(N)-1)||V&&I.empty&&I.head==A)&&M.setSelection(I)}E&&M.ensureMarks(E),i&&M.setMeta("composition",i),e.dispatch(M.scrollIntoView())}}}}function kr(e,t,n){return Math.max(n.anchor,n.head)>t.content.size?null:wt(e,t.resolve(n.anchor),t.resolve(n.head))}function xr(e,t){for(var n,r,o,i=e.firstChild.marks,s=t.firstChild.marks,a=i,l=s,c=0;c<s.length;c++)a=s[c].removeFromSet(a);for(var u=0;u<i.length;u++)l=i[u].removeFromSet(l);if(1==a.length&&0==l.length)r=a[0],n="add",o=function(e){return e.mark(r.addToSet(e.marks))};else{if(0!=a.length||1!=l.length)return null;r=l[0],n="remove",o=function(e){return e.mark(r.removeFromSet(e.marks))}}for(var d=[],h=0;h<t.childCount;h++)d.push(o(t.child(h)));if(w.Fragment.from(d).eq(e))return{mark:r,type:n}}function Sr(e,t,n,r,o){if(!r.parent.isTextblock||n-t<=o.pos-r.pos||Cr(r,!0,!1)<o.pos)return!1;var i=e.resolve(t);if(i.parentOffset<i.parent.content.size||!i.parent.isTextblock)return!1;var s=e.resolve(Cr(i,!0,!0));return!(!s.parent.isTextblock||s.pos>n||Cr(s,!0,!1)<n)&&r.parent.content.cut(r.parentOffset).eq(s.parent.content)}function Cr(e,t,n){var r=e.depth,o=t?e.end():e.pos;while(r>0&&(t||e.indexAfter(r)==e.node(r).childCount))r--,o++,t=!1;if(n){var i=e.node(r).maybeChild(e.indexAfter(r));while(i&&!i.isLeaf)i=i.firstChild,o++}return o}function _r(e,t,n,r,o){var i=e.findDiffStart(t,n);if(null==i)return null;var s=e.findDiffEnd(t,n+e.size,n+t.size),a=s.a,l=s.b;if("end"==o){var c=Math.max(0,i-Math.min(a,l));r-=a+c-i}if(a<i&&e.size<t.size){var u=r<=i&&r>=a?i-r:0;i-=u,l=i+(l-a),a=i}else if(l<i){var d=r<=i&&r>=l?i-r:0;i-=d,a=i+(a-l),l=i}return{start:i,endA:a,endB:l}}var Or=qt,Mr=Ht,Er=In,Tr=function(){function e(t,n){var r=this;g(this,e),this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new ln,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(Pr),this.dispatch=this.dispatch.bind(this),this.dom=t&&t.mount||document.createElement("div"),t&&(t.appendChild?t.appendChild(this.dom):"function"==typeof t?t(this.dom):t.mount&&(this.mounted=!0)),this.editable=Rr(this),Nr(this),this.nodeViews=Ir(this),this.docView=Ve(this.state.doc,Ar(this),lr(this),this.dom,this),this.domObserver=new hr(this,(function(e,t,n,o){return wr(r,e,t,n,o)})),this.domObserver.start(),cn(this),this.updatePluginViews()}return y(e,[{key:"composing",get:function(){return this.input.composing}},{key:"props",get:function(){if(this._props.state!=this.state){var e=this._props;for(var t in this._props={},e)this._props[t]=e[t];this._props.state=this.state}return this._props}},{key:"update",value:function(e){e.handleDOMEvents!=this._props.handleDOMEvents&&hn(this);var t=this._props;this._props=e,e.plugins&&(e.plugins.forEach(Pr),this.directPlugins=e.plugins),this.updateStateInner(e.state,t)}},{key:"setProps",value:function(e){var t={};for(var n in this._props)t[n]=this._props[n];for(var r in t.state=this.state,e)t[r]=e[r];this.update(t)}},{key:"updateState",value:function(e){this.updateStateInner(e,this._props)}},{key:"updateStateInner",value:function(e,t){var n=this.state,r=!1,o=!1;e.storedMarks&&this.composing&&(Rn(this),o=!0),this.state=e;var i=n.plugins!=e.plugins||this._props.plugins!=t.plugins;if(i||this._props.plugins!=t.plugins||this._props.nodeViews!=t.nodeViews){var s=Ir(this);zr(s,this.nodeViews)&&(this.nodeViews=s,r=!0)}(i||t.handleDOMEvents!=this._props.handleDOMEvents)&&hn(this),this.editable=Rr(this),Nr(this);var a=lr(this),l=Ar(this),c=n.plugins==e.plugins||n.doc.eq(e.doc)?e.scrollToSelection>n.scrollToSelection?"to selection":"preserve":"reset",u=r||!this.docView.matchesNode(e.doc,l,a);!u&&e.selection.eq(n.selection)||(o=!0);var d="preserve"==c&&o&&null==this.dom.style.overflowAnchor&&ie(this);if(o){this.domObserver.stop();var h=u&&(V||J)&&!this.composing&&!n.selection.empty&&!e.selection.empty&&Dr(n.selection,e.selection);if(u){var p=J?this.trackWrites=this.domSelectionRange().focusNode:null;!r&&this.docView.update(e.doc,l,a,this)||(this.docView.updateOuterDeco([]),this.docView.destroy(),this.docView=Ve(e.doc,l,a,this.dom,this)),p&&!this.trackWrites&&(h=!0)}h||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&St(this))?dt(this,h):(yt(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(n),"reset"==c?this.dom.scrollTop=0:"to selection"==c?this.scrollToSelection():d&&ae(d)}},{key:"scrollToSelection",value:function(){var e=this,t=this.domSelectionRange().focusNode;if(this.someProp("handleScrollToSelection",(function(t){return t(e)})));else if(this.state.selection instanceof b.NodeSelection){var n=this.docView.domAfterPos(this.state.selection.from);1==n.nodeType&&oe(this,n.getBoundingClientRect(),t)}else oe(this,this.coordsAtPos(this.state.selection.head,1),t)}},{key:"destroyPluginViews",value:function(){var e;while(e=this.pluginViews.pop())e.destroy&&e.destroy()}},{key:"updatePluginViews",value:function(e){if(e&&e.plugins==this.state.plugins&&this.directPlugins==this.prevDirectPlugins)for(var t=0;t<this.pluginViews.length;t++){var n=this.pluginViews[t];n.update&&n.update(this,e)}else{this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(var r=0;r<this.directPlugins.length;r++){var o=this.directPlugins[r];o.spec.view&&this.pluginViews.push(o.spec.view(this))}for(var i=0;i<this.state.plugins.length;i++){var s=this.state.plugins[i];s.spec.view&&this.pluginViews.push(s.spec.view(this))}}}},{key:"someProp",value:function(e,t){var n,r=this._props&&this._props[e];if(null!=r&&(n=t?t(r):r))return n;for(var o=0;o<this.directPlugins.length;o++){var i=this.directPlugins[o].props[e];if(null!=i&&(n=t?t(i):i))return n}var s=this.state.plugins;if(s)for(var a=0;a<s.length;a++){var l=s[a].props[e];if(null!=l&&(n=t?t(l):l))return n}}},{key:"hasFocus",value:function(){if(V){var e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;while(e&&this.dom!=e&&this.dom.contains(e)){if("false"==e.contentEditable)return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}},{key:"focus",value:function(){this.domObserver.stop(),this.editable&&ue(this.dom),dt(this),this.domObserver.start()}},{key:"root",get:function(){var e=this,t=this._root;if(null==t)for(var n=function(t){if(9==t.nodeType||11==t.nodeType&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=function(){return t.ownerDocument.getSelection()}),{v:e._root=t}},o=this.dom.parentNode;o;o=o.parentNode){var i=n(o);if("object"===r(i))return i.v}return t||document}},{key:"updateRoot",value:function(){this._root=null}},{key:"posAtCoords",value:function(e){return ye(this,e)}},{key:"coordsAtPos",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return xe(this,e,t)}},{key:"domAtPos",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.docView.domFromPos(e,t)}},{key:"nodeDOM",value:function(e){var t=this.docView.descAt(e);return t?t.nodeDOM:null}},{key:"posAtDOM",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,r=this.docView.posFromDOM(e,t,n);if(null==r)throw new RangeError("DOM position not inside the editor");return r}},{key:"endOfTextblock",value:function(e,t){return Re(this,t||this.state,e)}},{key:"pasteHTML",value:function(e,t){return Bn(this,"",e,!1,t||new ClipboardEvent("paste"))}},{key:"pasteText",value:function(e,t){return Bn(this,e,null,!0,t||new ClipboardEvent("paste"))}},{key:"destroy",value:function(){this.docView&&(dn(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],lr(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null)}},{key:"isDestroyed",get:function(){return null==this.docView}},{key:"dispatchEvent",value:function(e){return mn(this,e)}},{key:"dispatch",value:function(e){var t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))}},{key:"domSelectionRange",value:function(){return K&&11===this.root.nodeType&&I(this.dom.ownerDocument)==this.dom?gr(this):this.domSelection()}},{key:"domSelection",value:function(){return this.root.getSelection()}}]),e}();function Ar(e){var t=Object.create(null);return t["class"]="ProseMirror",t.contenteditable=String(e.editable),e.someProp("attributes",(function(n){if("function"==typeof n&&(n=n(e.state)),n)for(var r in n)"class"==r?t["class"]+=" "+n[r]:"style"==r?t.style=(t.style?t.style+";":"")+n[r]:t[r]||"contenteditable"==r||"nodeName"==r||(t[r]=String(n[r]))})),t.translate||(t.translate="no"),[Un.node(0,e.state.doc.content.size,t)]}function Nr(e){if(e.markCursor){var t=document.createElement("img");t.className="ProseMirror-separator",t.setAttribute("mark-placeholder","true"),t.setAttribute("alt",""),e.cursorWrapper={dom:t,deco:Un.widget(e.state.selection.head,t,{raw:!0,marks:e.markCursor})}}else e.cursorWrapper=null}function Rr(e){return!e.someProp("editable",(function(t){return!1===t(e.state)}))}function Dr(e,t){var n=Math.min(e.$anchor.sharedDepth(e.head),t.$anchor.sharedDepth(t.head));return e.$anchor.start(n)!=t.$anchor.start(n)}function Ir(e){var t=Object.create(null);function n(e){for(var n in e)Object.prototype.hasOwnProperty.call(t,n)||(t[n]=e[n])}return e.someProp("nodeViews",n),e.someProp("markViews",n),t}function zr(e,t){var n=0,r=0;for(var o in e){if(e[o]!=t[o])return!0;n++}for(var i in t)r++;return n!=r}function Pr(e){if(e.spec.state||e.spec.filterTransaction||e.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}t.Decoration=Un,t.DecorationSet=Xn,t.EditorView=Tr,t.__endComposition=Er,t.__parseFromClipboard=Mr,t.__serializeForClipboard=Or},6691:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});for(var n={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},r={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},o="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),i="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),s=0;s<10;s++)n[48+s]=n[96+s]=String(s);for(s=1;s<=24;s++)n[s+111]="F"+s;for(s=65;s<=90;s++)n[s]=String.fromCharCode(s+32),r[s]=String.fromCharCode(s);for(var a in n)r.hasOwnProperty(a)||(r[a]=n[a]);function l(e){var t=o&&e.metaKey&&e.shiftKey&&!e.ctrlKey&&!e.altKey||i&&e.shiftKey&&e.key&&1==e.key.length||"Unidentified"==e.key,s=!t&&e.key||(e.shiftKey?r:n)[e.keyCode]||e.key||"Unidentified";return"Esc"==s&&(s="Escape"),"Del"==s&&(s="Delete"),"Left"==s&&(s="ArrowLeft"),"Up"==s&&(s="ArrowUp"),"Right"==s&&(s="ArrowRight"),"Down"==s&&(s="ArrowDown"),s}t.base=n,t.keyName=l,t.shift=r}}]);
//# sourceMappingURL=133.c7033752.js.map